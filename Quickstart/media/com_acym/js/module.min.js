/**
 * @package    AcyMailing for Joomla
 * @version    6.1.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

var task,formName;function submitAcymForm(e,a){task=e,formName=a;var t="acym-captcha";a&&(t=a+"-captcha");var r=document.querySelector("#"+t+'[class="g-recaptcha"][data-size="invisible"]');if(r&&"object"==typeof grecaptcha){var s=r.getAttribute("grcID");return s||(s=grecaptcha.render(t,{sitekey:r.getAttribute("data-sitekey"),callback:"acySubmitSubForm",size:"invisible","expired-callback":"resetRecaptcha"}),r.setAttribute("grcID",s)),grecaptcha.getResponse(s)?acySubmitSubForm():(grecaptcha.execute(s),!1)}return acySubmitSubForm()}function resetRecaptcha(){var e="acym-captcha";formName&&(e=formName+"-captcha");var a=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(a){var t=a.getAttribute("grcID");grecaptcha.reset(t)}}function acySubmitSubForm(){var e=document[formName],a=acymModule.emailRegex;e.elements||(e=e[0].elements["user[email]"]&&e[0].elements["user[email]"].value&&a.test(e[0].elements["user[email]"].value)?e[0]:e[e.length-1]);var t,r,s,n,l,u=e.elements["user[email]"];if(u.value!=acymModule.EMAILCAPTION&&(u.value=u.value.replace(/ /g,"")),!u||u.value==acymModule.EMAILCAPTION||!a.test(u.value))return alert(acymModule.VALID_EMAIL),u.className=u.className+" invalid",!1;var i=document.querySelectorAll("#"+formName+' [type="radio"][data-required]');if(i.length>0){for(t="",r=0,s=0;s<i.length;s++){if(n=JSON.parse(i[s].getAttribute("data-required")),""!==t&&t!=i[s].getAttribute("name")&&0===r)return n=JSON.parse(i[s-1].getAttribute("data-required")),alert(n.message),!1;""!==t&&t!=i[s].getAttribute("name")&&r>0&&(r=0),i[s].checked&&r++,t=i[s].getAttribute("name")}if(0===r)return alert(n.message),!1}var c=document.querySelectorAll("#"+formName+' [type="checkbox"][data-required]');if(c.length>0){for(t="",r=0,s=0;s<c.length;s++){if(n=JSON.parse(c[s].getAttribute("data-required")),""!==t&&t!=c[s].getAttribute("name")&&0===r)return n=JSON.parse(c[s-1].getAttribute("data-required")),alert(n.message),!1;""!==t&&t!=c[s].getAttribute("name")&&r>0&&(r=0),c[s].checked&&r++,t=c[s].getAttribute("name")}if(0===r)return alert(n.message),!1}var m=document.querySelectorAll("#"+formName+" [data-required]");if(m.length>0)for(s=0;s<m.length;s++){if(n=JSON.parse(m[s].getAttribute("data-required")),-1!==["text","textarea","single_dropdown","multiple_dropdown","phone","file"].indexOf(n.type)&&(""===m[s].value||"0"==m[s].value))return alert(n.message),!1;if("file"===n.type&&0===m[s].files.length)return alert(n.message),!1}var o=document.querySelectorAll("#"+formName+" [data-authorized-content]");if(o.length>0)for(s=0;s<o.length;s++){var d=JSON.parse(o[s].getAttribute("data-authorized-content"));if(l="","number"===d[0]?l=/^[0-9]+$/:"letters"===d[0]?l=/^[a-zA-Z]+$/:"numbers_letters"===d[0]?l=/^[a-zA-Z0-9]+$/:"regex"===d[0]&&(l=new RegExp(d.regex)),""!==l&&!l.test(o[s].value))return alert(d.message),!1}if(e.elements.hiddenlists.value.length<1){var p=!1,g=e.elements["subscription[]"];if(g&&(void 0===g.value||0===g.value.length)){for(b=0;b<g.length;b++)g[b].checked&&(p=!0);if(!p)return alert(acymModule.NO_LIST_SELECTED),!1}}if("unsubscribe"!==task){var f=e.elements.terms;if(f&&!f.checked)return"undefined"!=typeof acymModule&&alert(acymModule.ACCEPT_TERMS),!1;if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+formName])for(var y in acymModule["excludeValues"+formName])acymModule["excludeValues"+formName].hasOwnProperty(y)&&e.elements["user["+y+"]"]&&e.elements["user["+y+"]"].value==acymModule["excludeValues"+formName][y]&&(e.elements["user["+y+"]"].value="")}if("undefined"!=typeof ga&&"unsubscribe"!==task?ga("send","pageview","subscribe"):"undefined"!=typeof ga&&ga("send","pageview","unsubscribe"),taskField=e.task,taskField.value=task,!e.elements.ajax||!e.elements.ajax.value||"0"==e.elements.ajax.value)return e.submit(),!1;var v=document.getElementById(formName),h=new FormData(v);v.className+=" acym_module_loading",v.style.filter="alpha(opacity=50)",v.style.opacity="0.5";var N=new XMLHttpRequest;return N.open("POST",v.action),N.onload=function(){var e="Ajax Request Failure",a="error";if(200===N.status){var t=JSON.parse(N.responseText);e=t.message,a=t.type}acymDisplayAjaxResponse(decodeURIComponent(e),a,formName,!0)},N.send(h),!1}function acymDisplayAjaxResponse(e,a,t,r){responseContainer=document.createElement("div");var s=document.getElementById("acym_fulldiv_"+t);s.firstChild?s.insertBefore(responseContainer,s.firstChild):s.appendChild(responseContainer),oldContainerHeight="0px",responseContainer.className="responseContainer";var n=document.getElementById(t),l=n.className,u="acym_module_loading",i=l.replace(" "+u,"",l);i==l&&(i=l.replace(u+" ","",l)),i==l&&(i=l.replace(u,"",l)),n.className=i,responseContainer.innerHTML=e,"success"==a?responseContainer.className+=" acym_module_success":(responseContainer.className+=" acym_module_error",n.style.opacity="1"),newContainerHeight=responseContainer.style.height,(r||"success"==a)&&(n.style.display="none"),responseContainer.className+=" message_"+t,responseContainer.className+=" slide_open"}