/**
 * @package    AcyMailing for Joomla
 * @version    6.1.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(_){function e(e){var t=e.closest(".reveal"),i=parseInt(t.find(".relativenumber").val())*parseInt(t.find(".relativetype").val());_('[data-rs="'+t.attr("id")+'"]').val("{time}"+(i>0?t.find(".relativewhen").val()+i:"")),_('[data-open="'+t.attr("id")+'"]').val("{time}"+(i>0?t.find(".relativewhen").val()+i:""))}function t(e){var t=e.closest(".reveal"),i=t.find('[name^="specific_acym_action"]');_('[data-rs="'+t.attr("id")+'"]').val(moment(i.val(),"DD MMM YYYY HH:mm").unix()),_('[data-open="'+t.attr("id")+'"]').val(i.val())}var i,a,o,n,s,c,l,r,d;function m(){var e=_("#acym__joomla__left-menu");e&&(_("#acym_content, .acym_no_foundation").css({width:"calc(100% - "+e.width()+"px)","margin-left":e.width()+"px"}),_("#system-message-container").css({"margin-left":e.width()+15+"px"}))}function y(_,e,t){var i=new Date;i.setDate(i.getDate()+t),document.cookie=_+"="+escape(e)+(null==t?"":";expires="+i.toGMTString())}function h(e){_(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})}function u(){_("#acym_pagination").val(1),_("#acym_form").submit()}function f(e,t,i){i=null!=i;var a,o=!0,n=_("#acym__wysid__email__preview"),s="acym__wysid__preview__iframe__"+e;_("#"+e).html('<div class="cell auto"></div><iframe id="'+s+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"/><div class="cell auto"></div><div class="acym__fadeout"></div><i class="material-icons acym__preview__extend acym__preview__toggle acym__preview-toggle">keyboard_arrow_down</i><i class="fa fa-unsorted acym__preview-toggle acym__preview__toggle__top"></i>');var c=_("#"+s);"smartphone"==t?c.css("maxWidth","425px"):c.css("maxWidth","inherit"),a=c.css("height");_("#acym__campaign__summary").length?(c.css({height:"200px"}),n.css("padding-bottom","200px"),c.contents().find("body").css("overflow","hidden"),_(".acym__preview-toggle").off("click").on("click",function(){_(".acym__fadeout").toggle(),o?(_(".acym__preview__toggle").html("keyboard_arrow_up").removeClass("acym__preview__extend").addClass("acym__preview__collapse"),c.css({height:a}).contents().find("body").css("overflow","auto"),n.css("padding-bottom",a),o=!o):(_(".acym__preview__toggle").html("keyboard_arrow_down").removeClass("acym__preview__collapse").addClass("acym__preview__extend"),c.css({height:"200px"}).contents().find("body").css("overflow","hidden"),n.css("padding-bottom","200px"),o=!o)})):(_(".acym__fadeout").hide(),_(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())?p(s,i):c.on("load",function(){p(s,i)})}function p(e,t){var i='<div id="acym__wysid__template" class="cell acym__foundation__for__email"> <table class="body"> <tbody> <tr> <td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(120, 120, 120);"><center><table align="center"><tbody><tr><td class="acym__wysid__row ui-droppable ui-sortable"><table class="row acym__wysid__row__element"><tbody style="background-color: rgb(255, 255, 255);"><tr><th class="small-12 medium-12 large-12 columns"><table class="acym__wysid__column" style="min-height: 75px; display: block;"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table></th></tr></tbody></table></td></tr></tbody></table></center></td></tr></tbody></table></div>';_("#"+e).contents().find("body").css("margin","0").append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),_("#"+e).contents().find("body").css("margin","0").append('<link rel="stylesheet" href="'+ACYM_FIXES_FOR_EMAIL+'">'),null!=_(".acym__wysid__hidden__save__stylesheet").attr("value")&&""!=_(".acym__wysid__hidden__save__stylesheet").attr("value")&&($userStylesheet=_(".acym__wysid__hidden__save__stylesheet").attr("value"),setTimeout(function(){_("#"+e).contents().find("body").append("<style>"+$userStylesheet+"</style>")},100)),t?_(".acym__wysid__hidden__save__content").attr("value",'<div id="acym__wysid__template" class="cell">'+_("#acym__wysid__template").html()+"</div>"):""==_(".acym__wysid__hidden__save__content").attr("value")&&(""==_("#acym__wysid__template").html()?_(".acym__wysid__hidden__save__content").attr("value",i):_(".acym__wysid__hidden__save__content").attr("value",'<div id="acym__wysid__template" class="cell">'+_("#acym__wysid__template").html()+"</div>")),"empty"==_(".acym__wysid__hidden__save__content").attr("value")&&_(".acym__wysid__hidden__save__content").attr("value",i),""!=_(".acym__hidden__mail__content").html()&&(null!=_(".acym__hidden__mail__stylesheet").html()&&""!=_(".acym__hidden__mail__stylesheet").html()&&_("#"+e).contents().find("body").append("<style>"+_(".acym__hidden__mail__stylesheet").html()+"</style>"),_("#"+e).contents().find("body").append(_(".acym__hidden__mail__content").html())),_("#"+e).contents().find("body").append(_(".acym__wysid__hidden__save__content").attr("value")),_("#"+e).contents().find("a").attr("target","_blank")}function g(){_(".callout").appendTo("#acym__callout__container").css("display","flex"),_(".callout","#acym__callout__container").each(function(e){var t=_(".callout").eq(e);t.find(".fa-close").off("click").on("click",function(){w(t)}),setTimeout(function(){t.find(".progress-meter").css("transitionDuration",parseInt(t.attr("callout-timer"))+"ms"),t.find(".progress-meter").css("width",t.css("width")),t.attr("callout-timer")>0&&setTimeout(function(){w(t)},t.attr("callout-timer")),t.css({"margin-left":"0","margin-right":"0"})},500*e)})}function w(_){_.css({"margin-left":"640px","margin-right":"-640px"}),setTimeout(function(){_.remove()},1e3)}_.introContent=[],_.setDatePickerGlobal=function(){_(".acy_date_picker").off("click").on("click",function(){var e=_(this),t=e.val()?moment(e.val(),"DD MMM YYYY HH:mm"):moment();new MaterialDatetimePicker({default:t}).on("submit",function(_){e.val(moment(_,"MM-DD-YYYY").format("DD MMM YYYY HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},_.setRSDateChoice=function(){_(".acym__button__set__time").on("click",function(){"relative"===_(this).closest(".reveal").find(".date_rs_selection.is-active").attr("type")?e(_(this)):t(_(this))}),_(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var t=_(this).closest(".date_rs_selection_popup");t.find(".date_rs_selection").removeClass("is-active"),_(this).addClass("is-active"),t.find(".date_rs_selection_choice").hide(),t.find(".date_rs_selection_"+_(this).attr("type")).show()}),_(".relativetype, .relativenumber, .relativewhen").on("change",function(){e(_(this))}),_(".date_rs_selection_popup").find(".acy_date_picker").on("acy_change",function(){t(_(this))})},_.setSubmitButtonGlobal=function(){_(".acy_button_submit").off("click").on("click",function(e){if(_(this).hasClass("disabled-button"))return!1;e.preventDefault();var t=_("#acym_form"),i=_(this).attr("data-task");_('input[name="task"]').val(i);var a=_(this).attr("data-step");null!=a&&t.find('[name="nextstep"]').val(a);var o=_(this).attr("data-and");null!=o&&t.append('<input type="hidden" value="'+o+'" name="and_action">');var n=t.find("#formSubmit");if(null==n[0]){var s=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(s)}else n.click()})},_(document).foundation(),_(".acym__format__view").off("click").on("click",function(){_(".acym__format__view--current").removeClass("acym__format__view--current"),_(this).addClass("acym__format__view--current");var e=_(this).attr("format");_("#acym_listingformat").val(e),_(".acym__listing").addClass("acym__listing--hidden"),_(".acym__listing__view__"+e).removeClass("acym__listing--hidden")}),_.setSubmitButtonGlobal(),_(".acym__pagination__page").off("click").on("click",function(){_("#acym_pagination").val(_(this).attr("page")),_("#acym_form").submit()}),_(".acym__lists__filter__tags").off("change").on("change",function(){u()}),_(".acym__templates__filter__tags").off("change").on("change",function(){u()}),_(".acym__campaigns__filter__tags").off("change").on("change",function(){u()}),_(".acym__queue__filter__tags").off("change").on("change",function(){u()}),_(".acym__search__button").off("click").on("click",function(){u()}),_(".acym__type__choosen").off("click").on("click",function(){_("#acym__type-template").val(_(this).attr("type")),_(".acym_ordering_option").removeClass("is-active"),_(this).addClass("is-active"),u()}),_(".acym__filter__status").off("click").on("click",function(){_("#acym_filter_status").val(_(this).attr("status")),u()}),_(".acym_toggleable").off("click").on("click",function(){var e=_(this);e.attr("class","fa fa-circle-o-notch fa-spin");var t=e.attr("table"),i=e.attr("field"),a=e.attr("elementid"),o=e.attr("newvalue"),n=TOGGLE_URL_ACYM+"&table="+t+"&field="+i+"&id="+a+"&value="+o;_.ajax({url:n,type:"GET"}).done(function(e){var o=_.parseJSON(e);_("[table="+t+"][field="+i+"][elementid="+a+"]").attr("newvalue",o.value).attr("class",o.classes)})}),_(".acym_toggle_delete").off("click").on("click",function(){var e=_(this),t=e.attr("confirmation");if(!t||_.acym_confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var i=e.attr("table"),a=e.attr("elementid"),o=TOGGLE_URL_ACYM+"&task=delete&table="+i+"&id="+a,n=e.attr("method");null!=n&&(o+="&method="+n),_.ajax({url:o,type:"GET"}).done(function(e){_(".grid-x[elementid="+a+"]").remove()})}}),_(".switch-label").off("click").on("click",function(){var e=_(this).attr("for");_('[data-switch="'+e+'"]').trigger("change")}),_(".acym_toggle_switch").off("change").on("change",function(){var e=_(this),t=e.attr("table"),i=e.attr("field"),a=e.attr("elementid"),o=e.attr("newvalue"),n=TOGGLE_URL_ACYM+"&table="+t+"&field="+i+"&id="+a+"&value="+o;_.ajax({url:n,type:"GET"}).done(function(t){var i=_.parseJSON(t);e.attr("newvalue",i.value)})}),_(".acym__listing__block__delete__trash").off("click").on("click",function(){var e=_(this).closest(" .acym__listing__block__delete");e.css("width","auto"),e.find("i").css("width","0"),e.animate({maxWidth:e.parent().innerWidth()},"fast",function(){_(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){h(_(this).closest(".acym__listing__block__delete"))})}),_(".acym__listing__block").off("mouseleave").on("mouseleave",function(){h(_(this).find(".acym__listing__block__delete"))})}),(i=_('input.acym_toggle[type="checkbox"]')).off("change").on("change",function(){var e=_("."+_(this).attr("data-toggle")),t=_(this).is(":checked"),i=_("#"+_(this).attr("data-value"));e.each(function(){var e=_(this);t?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),i&&i.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),i&&i.val(0))})}),i.trigger("change"),_(".switch-label").on("click",function(){var e=_('input[data-switch="'+_(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}),_(".acym_template_option").off("click").on("click",function(){_(".acym_template_option").addClass("acym_template_option--clean"),_(".acym_template_option").prev().removeClass("selected_template").addClass("not_selected_template"),_(this).attr("template")==_("#acym_template").val()?(_("#acym_template").val(0),_(".acym_template_option").removeClass("acym_template_option--selected")):(_("#acym_template").val(_(this).attr("template")),_(".acym_template_option").removeClass("acym_template_option--selected"),_(this).prev().addClass("selected_template").removeClass("not_selected_template"),_(this).removeClass("acym_template_option--clean").addClass("acym_template_option--selected"))}),a=_("#acym__tags__field"),o=a.attr("placeholder"),a.select2({width:"100%",placeholder:o,tags:!0,tokenSeparators:[" "],createTag:function(e){var t=_.trim(e.term);return""===t?null:{id:"acy_new_tag_"+t,text:t,newTag:!0}}}),_.setDatePickerGlobal(),_(".acym__search-clear").off("click").on("click",function(){_(".acym__search-field").attr("value",""),u()}),function e(){_(".acym__wysid__hidden__save__content").off("change").on("change",function(){e(),_.setThumbnail()}),f("acym__wysid__email__preview","desktop"),_("#acym__wysid__view__desktop").off("click").on("click",function(){f("acym__wysid__fullscreen__modal__content","desktop",!0),_("#acym__wysid__fullscreen__modal").css({display:"inherit"}).find("iframe").contents().find('table[align="center"]').css({"margin-top":"30px","margin-bottom":"30px"})}),_("#acym__wysid__view__smartphone").off("click").on("click",function(){f("acym__wysid__fullscreen__modal__content","smartphone",!0),_("#acym__wysid__fullscreen__modal").css("display","inherit").find("iframe").css({"margin-top":"30px","margin-bottom":"30px"})})}(),_("#acym__listing__ordering").select2({theme:"sortBy",minimumResultsForSearch:1/0}),n={},_(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){return null==n.id?(n.id=_(this).attr("id"),void(n.style=_(this).attr("style"))):n.id!=_(this).attr("id")?(n.id=_(this).attr("id"),void(n.style=_(this).attr("style"))):void _(this).attr("style",n.style)}),_(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){var t=_(this).position();_(this).css("margin-top",""),t.top+_(this).outerHeight()+100>_(window).height()?(_(this).css({"margin-top":"-80px"}),_(this).removeClass("dropdown-bottom dropdown-top"),_(this).addClass("dropdown-top")):(_(this).attr("data-position","bottom"),_(this).removeClass("dropdown-bottom dropdown-top"),_(this).addClass("dropdown-bottom"))}),_(".dropdown-pane").off("hide.zf.dropdown").on("hide.zf.dropdown",function(e){_(this).css("margin-top","")}),_("i.acym_radio_unchecked").on("click",function(){var e=_("#"+_(this).attr("data-radio"));e.click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),_(".acym_message i.fa-close").off("click").on("click",function(){_(this).parent().remove()}),(s=_('[data-toggle-switch]:not([data-toggle-switch=""])')).off("change").on("change",function(){var e=_(this).attr("data-toggle-switch-open");1!=_(this).val()&&"show"==e||1==_(this).val()&&"hide"==e?_("#"+_(this).attr("data-toggle-switch")).show():_("#"+_(this).attr("data-toggle-switch")).hide()}),s.each(function(e){var t=_(this).attr("data-toggle-switch-open");1==_(this).val()&&"show"==t||1!=_(this).val()&&"hide"==t?_("#"+_(this).attr("data-toggle-switch")).show():_("#"+_(this).attr("data-toggle-switch")).hide()}),_(".acym__button__file").off("click").on("click",function(){var e=_(this),t=e.prev();t.click(),t.off("change").on("change",function(){e.next().html(_(this).val().split("\\").pop())})}),_(".acym__tooltip").each(function(){_(this).on("mouseenter",function(){var e=_(this).find(".acym__tooltip__text"),t=_(this).offset(),i=_(window).scrollTop(),a=t.top-i,o=a-e.height()-15<0?0:a-e.height()-15,n=t.left-e.height()/2<0?0:t.left-e.height()/2;e.css("top",o+"px"),e.css("left",n+"px")})}),_(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,t){var i=_(".acym__sortable__listing .acym__listing__row"),a=_(".acym__sortable__listing").attr("data-sort-ctrl"),o=[];i.each(function(e){o.push(_(this).attr("data-id-element"))}),o=JSON.stringify(o);var n=AJAX_URL_ACYM+"&ctrl="+a+"&task=setOrdering&order="+o;_.post(n,function(_){"error"==_&&console.log("Error can't order these elements")})}}),"WordPress"==CMS_ACYM||(c=_("#acym__joomla__left-menu"),l=_("#acym__joomla__left-menu--toggle"),r=_("#acym__joomla__left-menu a span"),d=_("#acym__joomla__left-menu--toggle i"),c.css("top",_(".navbar").height()),_(".btn-subhead").hide(),"none"!=l.css("display")&&(c.hasClass("collapsed")?r.hide()&&c.css({width:"55px"})&&d.html("keyboard_arrow_right"):r.show()&&c.css({width:"200px"})&&d.html("keyboard_arrow_left"),m(),l.off("click").on("click",function(){c.hasClass("collapsed")?c.css({width:"200px"})&&r.show()&&c.removeClass("collapsed")&&d.html("keyboard_arrow_left")&&y("menuJoomla","",365):c.css({width:"55px"})&&r.hide()&&c.addClass("collapsed")&&d.html("keyboard_arrow_right")&&y("menuJoomla","collapsed",365),m()})),_(".btn-navbar").off("click").on("click",function(){c.hide()}),_("#acym__joomla__left-menu--show").off("click").on("click",function(){_(".btn-navbar").hasClass("collapsed")||(".nav-collapse".css("height","0px").removeClass("in"),_(".btn-navbar").removeClass("collapsed")),c.toggle()})),_(".acym_select_foundation").select2({theme:"foundation",width:"100%"}),_("#acym_form").length&&!_("#acym__editor__content").length?_(".reveal-overlay").appendTo("#acym_form"):_(".reveal-overlay").appendTo("#acym_wrapper"),_("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(_){if(13==_.keyCode)return _.preventDefault(),!1}),_.setIntrojs=function(e,t){t=void 0!==t&&t;var i=TOGGLE_URL_ACYM+"&task=getIntroJSConfig";_.post(i,function(i){if((void 0===(i=JSON.parse(i))[e]||0==i[e]||t)&&!_(".introjs-tooltip").is(":visible")){for(var a=_.introContent,o=[],n=0;n<a.length;n++)_(""+a[n].element).attr("data-intro",a.text),o.push({element:document.querySelector(""+a[n].element),intro:a[n].text,position:void 0===a[n].position?"bottom":a[n].position});var s=introJs();s.setOptions({steps:o}),s.start(),_(".introjs-nextbutton").html(ACYM_JS_TXT.ACYM_NEXT),_(".introjs-prevbutton").html(ACYM_JS_TXT.ACYM_BACK),_(".introjs-skipbutton").html(ACYM_JS_TXT.ACYM_SKIP);var c=TOGGLE_URL_ACYM+"&task=toggleIntroJS&where="+e;_.post(c,function(_){})}})},_.acym_confirm=function(_){return confirm(_)},_.setThumbnail=function(){_("#acym_wrapper").after('<div id="testcontent"></div>'),_("#testcontent").html(_("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find("body").clone()),_("#testcontent").find("#acym__wysid__template").append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),nlwidth=650,_("#testcontent center").css("width",nlwidth+"px");var e="thead, tbody, tfoot{background-color:inherit; border: inherit;} ";if(null!=_(".acym__wysid__hidden__save__settings").attr("value")&&""!=_(".acym__wysid__hidden__save__settings").attr("value")){var t=JSON.parse(_(".acym__wysid__hidden__save__settings").attr("value"));_.each(t,function(t,i){e+=t+"{",_.each(i,function(_,t){e+=_+":"+t+"; "}),e+="} "})}_("#testcontent *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&_(this).remove()}),_("#testcontent").find("#acym__wysid__template").append("<style>"+e+"</style>"),domtoimage.toPng(document.getElementById("testcontent"),{width:nlwidth}).then(function(e){_("#editor_thumbnail").attr("value",e),_("#testcontent").remove()},function(e){console.error("Error generating template thumbnail: "+e),_("#testcontent").remove()})},g(),_.acym_add_notification=function(e,t,i){var a="",o="fa-bell";"success"==t?(a+='<div class="callout acym__callout__confirm"',o="fa-check-circle"):"warning"==t?(a+='<div class="callout acym__callout__warning"',o="fa-exclamation-triangle"):"error"==t?(a+='<div class="callout acym__callout__error"',o="fa-exclamation-circle"):a+='<div class="callout acym__callout__information"',a+=i>0?' callout-timer="'+i+'" style="display: none"><div class="progress" role="progressbar"><div class="progress-meter" style="width: 0"></div></div>':' style="display: none">',a+='<i class="fa '+o+'"></i><p>'+e+'</p><i class="fa fa-close"></i></div>',_("body").append(a),g()},setTimeout(function(){_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body").css("padding",0).css("margin",0).css("height","100%"),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body #acym_wrapper").css("min-height","100%")},1e3)}),jQuery(document).ready(function(_){_(".acym__wysid__modal__dynamic-text--close").off("click").on("click",function(){_("#acym__wysid__modal__dynamic-text").hide()}),_("#dtext_subject_button").off("click").on("click",function(e){e.preventDefault(),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),_("#acym__wysid__modal__dynamic-text").show()})}),jQuery(document).ready(function(_){_("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}),jQuery(document).ready(function(_){var e,t,i="",a=_(".acym__wysid__hidden__save__settings").val(),o={},n=!0,s="",c=_(".acym__wysid__hidden__save__stylesheet").val(),l=!1,r="",d={"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"16px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"}},m={facebook:{src:MEDIA_URL_ACYM+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:MEDIA_URL_ACYM+"/images/logo/twitter.png",link:"#",text:"Tweet"},googleplus:{src:MEDIA_URL_ACYM+"/images/logo/google-plus.png",link:"#",text:"+1"},pinterest:{src:MEDIA_URL_ACYM+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:MEDIA_URL_ACYM+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:MEDIA_URL_ACYM+"/images/logo/instagram.png"},vimeo:{src:MEDIA_URL_ACYM+"/images/logo/vimeo.png"},wordpress:{src:MEDIA_URL_ACYM+"/images/logo/wordpress.png"},youtube:{src:MEDIA_URL_ACYM+"/images/logo/youtube.png"}};function y(){_("#acym__wysid__right__toolbar__settings__tab").off("click").on("click",function(){h(_("#acym__wysid__right__toolbar__design"),_("#acym__wysid__right__toolbar__settings"),"left","right",_(this))}),_("#acym__wysid__right__toolbar__design__tab").off("click").on("click",function(){h(_("#acym__wysid__right__toolbar__settings"),_("#acym__wysid__right__toolbar__design"),"right","left",_(this))}),_("#acym__wysid__right__toolbar__design > p").off("click").on("click",function(){_(this).next().slideToggle(200),_(this).hasClass("acym__wysid__right__toolbar__p__open")?_(this).removeClass("acym__wysid__right__toolbar__p__open"):_(this).addClass("acym__wysid__right__toolbar__p__open"),"Setting"==_(this).html()&&_(this).toggleClass("acym__wysid__right__toolbar__last--text")}),_("#acym__wysid__right__toolbar__settings > p").off("click").on("click",function(){_(this).next().slideToggle(200),_(this).hasClass("acym__wysid__right__toolbar__p__open")?_(this).removeClass("acym__wysid__right__toolbar__p__open"):_(this).addClass("acym__wysid__right__toolbar__p__open"),"Contents"==_(this).html()&&_(this).toggleClass("acym__wysid__right__toolbar__last--text")})}function h(e,t,i,a,o){_("#acym__wysid__right__toolbar__settings__tab").off("click"),_("#acym__wysid__right__toolbar__design__tab").off("click"),e.hide("slide",{direction:i},200,function(){t.show("slide",{direction:a},200,function(){y()})}),_(".acym__wysid__right__toolbar__selected").removeClass("acym__wysid__right__toolbar__selected"),o.addClass("acym__wysid__right__toolbar__selected")}function u(){_(".acym__wysid__row__element").off("mouseenter mouseleave").hover(function(){var e=_(this),t="none"!==e.find("tbody:first").find("th:first").css("background-image")?'<i class="material-icons acym__wysid__set__background-image__rows">image</i><div class="acym__wysid__delete__background-image__rows"><i class="material-icons">image</i><i class="material-icons acym__color__red acym__wysid__delete__background-image__rows__close">close</i></div>':"<input class='acym__wysid__row__element__toolbox__colorpicker'/><i class='material-icons acym__wysid__set__background-image__rows'>image</i>";0!=_(".acym__wysid__row__element__toolbox__group").eq(0).length||l||(_(this).prepend("<div class='acym__wysid__row__element__toolbox__group'><div class='acym__wysid__row__element__toolbox acym__wysid__row__element__toolbox__option'><i title='Duplicate' class='material-icons acym__wysid__row__element__toolbox__copy'>content_copy</i>"+t+"</div><div class='acym__wysid__row__element__toolbox acym__wysid__row__element__toolbox__move grid-x text-center'><i title='drag to sort' class='fa fa-ellipsis-h cell'></i><i title='drag to sort' class='fa fa-ellipsis-h cell'></i></div><div class='acym__wysid__row__element__toolbox acym__wysid__row__element__toolbox__delete'><i title='Delete' class='material-icons'>delete</i></div></div><div class=\"acym__wysid__row__element__toolbox__height\"></div>"),function(e){var t=_(".acym__wysid__row__element__toolbox__colorpicker"),i=e.children("tbody");t.spectrum({color:i.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){i.css("background-color",_.toHexString()).parent().attr("bgcolor",_.toHexString())},change:function(_){i.css("background-color",_.toHexString()).parent().attr("bgcolor",_.toHexString())}})}(e),C(),_(".acym__wysid__row__element__toolbox__height").off("mousedown").on("mousedown",function(){l=!0,r=_(this).parent().css({"border-collapse":"initial","border-spacing":""}),_(document).on("mousemove",function(_){if(l){var e=r.offset().top,t=_.pageY-(e-10);r.find("th:first").height(t).attr("height",t)}}),_(document).off("mouseup").on("mouseup",function(){l=!1})}),_(".acym__wysid__row__element__toolbox__delete").unbind("click").click(function(){var t=_(this),i=t.find("i"),a=_(".acym__wysid__row__element__toolbox__delete--confirm");0==a.length?(t.addClass("acym__wysid__row__element__toolbox__delete__open").prepend('<i class="material-icons acym__wysid__row__element__toolbox__delete--confirm">check</i>'),i.html("close"),(a=_(".acym__wysid__row__element__toolbox__delete--confirm")).unbind("click").click(function(){e.remove(),b()})):(i.html("delete"),_(".acym__wysid__row__element__toolbox__delete__open").removeClass("acym__wysid__row__element__toolbox__delete__open"),a.remove()),t.off("mouseleave").on("mouseleave",function(){i.html("delete"),_(".acym__wysid__row__element__toolbox__delete__open").removeClass("acym__wysid__row__element__toolbox__delete__open"),a.remove()})}),_(".acym__wysid__row__element__toolbox__copy").unbind("click").click(function(){_(this).parent().parent().parent().clone().insertAfter(_(this).parent().parent().parent()),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),_(".acym__wysid__column__element__toolbox_group").remove(),b()}))}).on("mouseleave",function(){_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove()})}function f(){_(".acym__wysid__row").sortable({axis:"y",cursorAt:{top:20},scroll:!1,placeholder:"acym__wysid__row__element--placeholder",handle:".acym__wysid__row__element__toolbox__move",forcePlaceholderSize:!0,tolerance:"intersect",start:function(e,t){t.helper.first().addClass("acym__wysid__row__element--sortable"),_(t.placeholder).css("height","75px"),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")},stop:function(e,t){_(".acym__wysid__row__element--sortable").removeClass("acym__wysid__row__element--sortable");var i=t.item;i.hasClass("acym__wysid__row__element--new--1")?p(i):i.hasClass("acym__wysid__row__element--new--2")?function(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}(i):i.hasClass("acym__wysid__row__element--new--3")?function(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}(i):i.hasClass("acym__wysid__row__element--new--4")?function(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}(i):i.hasClass("acym__wysid__row__element--new--5")?function(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}(i):!i.hasClass("acym__wysid__row__element--new--6")||function(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}(i),u(),w(),g(),L()}})}function p(e){_(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff"><tbody style="background-color: rgb(255, 255, 255);" bgcolor="#ffffff"><tr><th class="small-12 medium-12 large-12 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>')}function g(){_(".acym__wysid__column__element").off("mouseleave mouseenter").on("mouseenter",function(){var e=_(this);if(0==_(".acym__wysid__column__element__toolbox_group").eq(0).length){_(this).find(".acym__wysid__column__element__td").prepend("<div class='acym__wysid__column__element__toolbox__group' style='width:"+_(this).css("width")+"; position: absolute;'><div class='acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__option'><i title='Duplicate' class='material-icons acym__wysid__column__element__toolbox__copy'>content_copy</i></div><div class='acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__extend'><i title='Extend' class='material-icons acym__wysid__column__element__toolbox__extend__in'>fullscreen</i></div><div class='acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__move grid-x text-center'><i title='drag to sort' class='fa fa-ellipsis-h cell'></i><i title='drag to sort' class='fa fa-ellipsis-h cell'></i></div><div class='acym__wysid__column__element__toolbox acym__wysid__column__element__toolbox__delete'><i title='Delete' class='material-icons'>delete</i></div></div>"),_(this).find(".acym__wysid__column__element__td").css({"outline-width":"2px","outline-color":"#00a3fe","outline-style":"dashed","outline-offset":"-1px"}),_(".acym__wysid__column__element__toolbox__delete").unbind("click").click(function(){var t=_(this),i=t.find("i"),a=_(".acym__wysid__column__element__toolbox__delete--confirm");0==a.length?(_(".acym__wysid__column__element__toolbox__delete").addClass("acym__wysid__column__element__toolbox__delete__open").prepend('<i class="material-icons acym__wysid__column__element__toolbox__delete--confirm">check</i>'),i.html("close"),(a=_(".acym__wysid__column__element__toolbox__delete--confirm")).off("click").on("click",function(){e.parent().parent().parent().removeClass("margin_padding_none").find("margin_padding_none").removeClass("margin_padding_none"),e.remove(),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),L()})):(i.html("delete"),_(".acym__wysid__column__element__toolbox__delete__open").removeClass("acym__wysid__column__element__toolbox__delete__open"),a.remove()),t.off("mouseleave").on("mouseleave",function(){i.html("delete"),_(".acym__wysid__column__element__toolbox__delete__open").removeClass("acym__wysid__column__element__toolbox__delete__open"),a.remove()})}),_(".acym__wysid__column__element__toolbox__copy").unbind("click").click(function(){_(".acym__wysid__column__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),e.clone().insertAfter(e),_(".acym__wysid__column__element .acym__wysid__column__element__td").css("outline-width","0"),b()}),_(".acym__wysid__column__element__toolbox__extend").off("click").on("click",function(){var e=_(this).parent(),t=e.parent().find("img");t.length>0?t.hasClass("margin_padding_none")?(t.removeClass("margin_padding_none"),t.parent().removeClass("margin_padding_none"),t.parent().parent().parent().removeClass("margin_padding_none"),t.parent().parent().parent().parent().parent().parent().parent().removeClass("margin_padding_none")):(t.addClass("margin_padding_none"),t.parent().addClass("margin_padding_none"),t.parent().parent().parent().addClass("margin_padding_none"),t.parent().parent().parent().parent().parent().parent().parent().addClass("margin_padding_none")):e.parent().hasClass("margin_padding_none")?(e.parent().removeClass("margin_padding_none"),e.parent().parent().removeClass("margin_padding_none"),e.parent().parent().parent().parent().parent().removeClass("margin_padding_none")):(e.parent().addClass("margin_padding_none"),e.parent().parent().addClass("margin_padding_none"),e.parent().parent().parent().parent().parent().addClass("margin_padding_none"))})}}).on("mouseleave",function(){_(".acym__wysid__column__element__toolbox__group").remove(),_(this).find(".acym__wysid__column__element__td").css("outline-width","0px")})}function w(){_("#insertDContent").off("click").on("click",function(e){e.preventDefault();var t=_("#dcontentcode").val();if(t){var a='<tr class="acym__wysid__column__element ui-draggable" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td">';i.replaceWith(a+t.split("~").join("</td></tr>"+a)+"</td></tr>")}else i.replaceWith("");_("#acym__wysid__modal_plugins").css("display","none"),_("#dcontentcode").val(""),b()}),_("#dcontentcode").off("click").on("click",function(){this.select()}),_(".acym__wysid__column tbody").sortable({scroll:!1,handle:".acym__wysid__column__element__toolbox__move",placeholder:"acym__wysid__column__element--placeholder",forcePlaceholderSize:!0,cursorAt:{top:20,left:50},stop:function(e,a){var o=a.item,n=o.attr("data-plugin");if(n){i=_(o),_("#acym__plugins__modal__options").html('<i class="fa fa-gear fa-spin centered_spinner"/>'),_("#acym__wysid__modal_plugins").css("display","inherit");var s=AJAX_URL_ACYM+"&page=acymailing_lists&action=acymailing_router&noheader=1&ctrl=dynamics&task=trigger&trigger=contentPopup&plugin="+n;_.ajax({url:s,success:function(e){_("#acym__plugins__modal__options").html(e),_("i.acym_radio_unchecked").on("click",function(){_('label[for="'+_(this).attr("data-radio")+'"]').click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),_("#plugin_listing_filters select").off("change").on("change",function(){J()}),_('#plugin_listing_filters input[type="text"]').off("keyup").on("keyup",function(){var e=_(this).val();clearTimeout(t),e.length>=2?t=setTimeout(function(){J()},1e3):""==e&&J()}),_("#acym__plugins__modal__options select").select2({theme:"foundation"}),W(),_(document).foundation(),_(".tabs").each(function(){var e=_(this).attr("id"),t=localStorage.getItem("acy"+e),i=_("#"+e+" #"+t);i.length?i.click():_("#"+e+" .acym_tab:first").click()}),_(".acy_date_picker").off("click").on("click",function(){var e=_(this),t=e.val()?moment(e.val(),"YYYY-MM-DD"):moment();new MaterialDatetimePicker({default:t}).on("submit",function(_){e.val(moment(_,"MM-DD-YYYY").format("YYYY-MM-DD")),e.trigger("change")}).open()})}})}else o.hasClass("acym__wysid__column__element--new--title")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><h1>Title</h1></div></td></tr>'),b()}(o):o.hasClass("acym__wysid__column__element--new--text")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p></div></td></tr>'),b()}(o):o.hasClass("acym__wysid__column__element--new--picture")?"WordPress"==CMS_ACYM?k(o):x(o):o.hasClass("acym__wysid__column__element--new--button")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;"><a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 0; border-radius: 0" href="#">Button</a></div></td></tr>'),b()}(o):o.hasClass("acym__wysid__column__element--new--follow")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;"><p class="acym__wysid__column__element__follow" style="text-align: center; cursor: pointer; padding: 0;margin: 0;"><a class="acym__wysid__column__element__follow__facebook" href=""><img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.facebook.src+'" width="40"></a><a class="acym__wysid__column__element__follow__twitter" href=""><img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.twitter.src+'"  width="40"></a><a class="acym__wysid__column__element__follow__googleplus" href=""><img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.googleplus.src+'"  width="40"></a></p></div></td></tr>'),b()}(o):o.hasClass("acym__wysid__column__element--new--share")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__column__element__share acym__wysid__column__element__share--add acy" style="text-align: center; margin-top: 10px; margin-bottom: 10px;"><a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__facebook" href="'+m.facebook.link+'"><img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.facebook.src+'" alt="'+m.facebook.src+'"><span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.facebook.text+'</span></a><a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__twitter" href="'+m.twitter.link+'"><img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.twitter.src+'" alt="'+m.twitter.src+'"><span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.twitter.text+'</span></a><a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__googleplus" href="'+m.googleplus.link+'"><img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.googleplus.src+'" alt="'+m.googleplus.src+'"><span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.googleplus.text+"</span></a></div></td></tr>"),b()}(o):o.hasClass("acym__wysid__column__element--new--space")?function(e){_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span></td></tr>'),b()}(o):o.hasClass("acym__wysid__column__element--new--cms")?function(e){i=_(e),function(){_("#acym__wysid__modal__ui__fields").html("<div class='grid-container'><div class='grid-x grid-margin-x'><div class='medium-6 cell'><label>Search<input id='acym__wysid__modal__cms__search' type='text' placeholder='My post'></label></div><div class='small-8 medium-4 cell'><label>Category<select id='acym__wysid__modal__cms__category'><option disabled>Loading</option></select></label></div><button type='button' id='acym__wysid__modal__cms__load' class='small-4 medium-2 cell button primary smaller-button' href='#'>Load</button></div>"),_("#acym__wysid__modal__ui__display").html("<div class='grid-container'><div class='grid-x grid-margin-x'><div id='acym__wysid__modal__cms__result' class='cell grid-y'></div></div></div>"),_("#acym__wysid__modal__ui__search").html("<div class='grid-container'><div class='grid-x grid-margin-x'><div class='small-4 medium-2 cell'></div><div class='small-4 medium-8 cell'><div id='acym__wysid__modal__ui__load-more' style='visibility: hidden'><i class='fa fa-cog fa-spin'></i></div></div><button type='button' id='acym__wysid__modal__cms__insert' class='small-4 medium-2 cell button primary disabled' href='#'>Insert</button></div>");var e=_("#acym__wysid__modal__cms__load"),t=_("#acym__wysid__modal__cms__search");e.off("click").on("click",function(){S(_("#acym__wysid__modal__cms__category option:selected").val(),t.val(),0)}),t.keydown(function(_){var t=_.which;13==t&&_.preventDefault(),13!=t&&188!=t&&186!=t||e.click()}),_("#acym__wysid__modal__cms__category").select2({theme:"foundation",width:"100%"}),_("#acym__wysid__modal__cms__category").off("change").on("change",function(){e.click()}),jQuery.post(AJAX_URL_ACYM+"&ctrl=wysid&task=getCategories",function(e){_("#acym__wysid__modal__cms__category").html(e)}),S()}(),_("#acym__wysid__modal").css("display","inherit")}(o):o.hasClass("acym__wysid__column__element--new--video")?function(e){i=_(e),function(){_("#acym__wysid__modal__ui__fields").html("<div class='grid-container'><div class='grid-x grid-padding-x grid-padding-y'><div class='auto cell'></div><div class='small-3 medium-3 cell' style='display: inline-flex'><img style='display: block; margin: auto; max-height: 50px' src='"+MEDIA_URL_ACYM+"/images/vimeo.png'></div><div class='small-3 medium-3 cell' style='display: inline-flex'><img style='display: block; margin: auto; max-height: 50px' src='"+MEDIA_URL_ACYM+"/images/youtube.png'></div><div class='small-4 medium-3 cell' style='display: inline-flex; padding: 15px 0 0 30px;'><img style='display: block; margin: auto; max-height: 50px' src='"+MEDIA_URL_ACYM+"/images/dailymotion.png'></div><div class='auto cell'></div><div class='small-8 medium-10 cell'><input id='acym__wysid__modal__video__search' type='text' placeholder='Url'></div><div class='small-4 medium-2 cell'><button type='button' id='acym__wysid__modal__video__load' class='button primary expanded smaller-button' href='#'>Load</button></div></div>"),_("#acym__wysid__modal__ui__display").html("<div class='grid-container'><div class='grid-x grid-padding-x'><div id='acym__wysid__modal__video__result' class='medium-12 cell'></div></div>"),_("#acym__wysid__modal__ui__search").html("<div class='grid-container'><div class='grid-x grid-padding-x'><div class='small-8 medium-10 cell'></div><div class='small-4 medium-2 cell'><button type='button' id='acym__wysid__modal__video__insert' class='button primary expanded disabled' href='#'>Insert</button></div></div>");var e=_("#acym__wysid__modal__video__load"),t=_("#acym__wysid__modal__video__insert"),a=_("#acym__wysid__modal__video__search"),o=_("#acym__wysid__modal__video__result");e.off("click").on("click",function(){var e=a.val();t.unbind("click").click(function(){i.replaceWith('<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><p>'+o.html()+"</p></div></td></tr>"),I(),g(),v(),_("#acym__wysid__modal").css("display","none")});var n=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),s=e.match(/^(?:(?:http|https):\/\/)?(?:www.)?(dailymotion\.com|dai\.ly)\/((video\/([^_]+))|(hub\/([^_]+)|([^\/_]+)))$/),c=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);null!=n?(o.html("<a href='https://www.youtube.com/watch?v="+n[1]+"'><img src='https://img.youtube.com/vi/"+n[1]+"/0.jpg' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block;margin-left: auto; margin-right: auto;'/></a>"),t.removeClass("disabled")):null!=s?(null!==s&&(void 0!==s[4]&&o.html("<a href='http://www.dailymotion.com/video/"+s[4]+"'><img src='https://www.dailymotion.com/thumbnail/video/"+s[4]+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>"),o.html("<a href='http://www.dailymotion.com/video/"+s[2]+"'><img src='https://www.dailymotion.com/thumbnail/video/"+s[2]+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>")),t.removeClass("disabled")):null!=c?_.ajax({url:"https://www.vimeo.com/api/v2/video/"+c[5]+".json",dataType:"jsonp",success:function(_){o.html("<a href='https://vimeo.com/"+c[5]+"'><img src='"+_[0].thumbnail_large+"' style='max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;'/></a>"),t.removeClass("disabled")}}):(o.html("<div class='acym__wysid__error_msg' style='text-align: center; margin-top: 100px;'>"+ACYM_JS_TXT.ACYM_NON_VALID_URL+"</div>"),t.addClass("disabled").off("click")),o.unbind("click").click(function(_){_.preventDefault()})}),a.keyup(function(_){var t=_.which;13==t&&_.preventDefault(),13!=t&&188!=t&&186!=t||e.click()})}(),_("#acym__wysid__modal").css("display","inherit")}(o):!o.hasClass("acym__wysid__column__element--new--separator")||function(e){_(e).replaceWith('<tr class="acym__wysid__column__element acym__wysid__column__element__separator cursor-pointer" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><hr style="border-bottom: 3px solid black; margin-left: 5%; width: 90%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator"></td></tr>'),b()}(o)},change:function(){L()},out:function(){setTimeout(function(){L()},1)},receive:function(_,e){e.item.hasClass("acym__wysid__column__element--new")||(e.item.remove(),b())}})}function v(){_(".acym__wysid__column__element").draggable({cursor:"move",helper:"clone",revert:"invalid",handle:".acym__wysid__column__element__toolbox__move",cursorAt:{top:20,left:50},connectToSortable:".acym__wysid__column tbody",revertDuration:300,start:function(e,t){t.helper.first().addClass("acym__wysid__column__element--helper"),_(this).addClass("acym__wysid__column__element__original--helper"),_(".acym__wysid__column").addClass("acym__wysid__column--drag-start")},stop:function(){_(".acym__wysid__column__element--helper").removeClass("acym__wysid__column__element--helper"),_(".acym__wysid__column__element__original--helper").removeClass("acym__wysid__column__element__original--helper"),_(".acym__wysid__column").removeClass("acym__wysid__column--drag-start"),_(".acym__wysid__column__element").css({position:"relative",top:"inherit",left:"inherit",right:"inherit",bottom:"inherit",height:"auto"}),u()}})}function b(){var e,t,i,a,o,n,s;_(".acym__wysid__media__inserted").length>0&&setTimeout(function(){var e=_(".acym__wysid__media__inserted");e.attr("height",e.height()).attr("width",e.width()),e.removeClass("acym__wysid__media__inserted")},200),C(),_(".sp-container").remove(),u(),f(),I(),g(),v(),w(),e=_(".acym__wysid__template__content"),t=_("#acym__wysid__background-colorpicker"),i=_(".acym__wysid__row__element__toolbox__colorpicker"),a=i.parent().parent().children("tbody"),t.spectrum({color:e.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){O("#acym__wysid__background-colorpicker","background-color",_.toHexString())},change:function(_){O("#acym__wysid__background-colorpicker","background-color",_.toHexString())}}),i.spectrum({color:a.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,move:function(_){a.css("background-color",_.toHexString())},change:function(_){a.css("background-color",_.toHexString())}}),_(".acym__wysid__column__element__button").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),_(".acym__wysid__column__element__button--focus").removeClass("acym__wysid__column__element__button--focus"),_(this).addClass("acym__wysid__column__element__button--focus"),_("#acym__wysid__context__button__background-color").spectrum({color:_(".acym__wysid__column__element__button--focus").css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("background-color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("background-color",e.toHexString())}}),_("#acym__wysid__context__button__border-color").spectrum({color:_(".acym__wysid__column__element__button--focus").css("border-left-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("border-color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("border-color",e.toHexString())}}),_("#acym__wysid__context__button__color").spectrum({color:_(".acym__wysid__column__element__button--focus").css("color"),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(e){_(".acym__wysid__column__element__button--focus").css("color",e.toHexString())},change:function(e){_(".acym__wysid__column__element__button--focus").css("color",e.toHexString())}});var t=_(this),i=t.offset(),a=t.innerHeight(),o=t.innerWidth(),n=_("#acym__wysid__context__button"),s=n.innerHeight(),c=_("#wpadminbar").innerHeight()+5,l=_("nav.navbar").innerHeight()+5,r=_(window).width(),d=i.top-s<c+l?i.top+a-c+5:i.top-c-s-5;_("#acym__wysid__context__button__border-radius").val(t.css("border-radius").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){t.css("border-radius",_(this).val()+"px")}),_("#acym__wysid__context__button__border-width").val(t.css("border-left-width").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){t.css("border-width",_(this).val()+"px")}),_("#acym__wysid__context__button__font-family").val(t.css("font-family").replace(/['"]/g,"")).off("change").on("change",function(){t.css("font-family",_(this).val())}),_("#acym__wysid__context__button__font-size").val(t.css("font-size").replace(/[^-\d\.]/g,"")).off("change").on("change",function(){t.css("font-size",_(this).val()+"px")}),_("#acym__wysid__context__button__text").val(t.text()).off("change paste keyup").on("change paste keyup",function(){t.text(_(this).val())}),_("#acym__wysid__context__button__link").val(t.attr("href")).off("change paste keyup").on("change paste keyup",function(){t.attr("href",_(this).val())}),_("#acym__wysid__context__button__bold").css("background-color",700==t.css("font-weight")?"":"inherit").off("click").on("click",function(){700==t.css("font-weight")?_("#acym__wysid__context__button__bold").css("background-color","inherit")&&t.css("font-weight","inherit"):_("#acym__wysid__context__button__bold").css("background-color","")&&t.css("font-weight",700)}),_("#acym__wysid__context__button__italic").css("background-color","italic"==t.css("font-style")?"":"inherit").off("click").on("click",function(){"italic"==t.css("font-style")?_("#acym__wysid__context__button__italic").css("background-color","inherit")&&t.css("font-style","inherit"):_("#acym__wysid__context__button__italic").css("background-color","")&&t.css("font-style","italic")}),_("#acym__wysid__context__button__font-family").select2({theme:"foundation",width:"40%"}),_("#acym__wysid__context__button__font-size").select2({theme:"foundation",width:"25%",minimumResultsForSearch:1/0}),_("#acym__wysid__context__button__border-width").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),_("#acym__wysid__context__button__border-radius").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),n.css({display:"inherit",top:d,left:r>800?i.left-_("#adminmenuback").innerWidth()+o/2-n.innerWidth()/2:i.left+o/2-n.innerWidth()/2}),n.unbind("click").click(function(e){_(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),_(window).click(function(){n.css({display:"none"}),_(window).unbind("click")})}),_("#acym__wysid__context__space__slider").on("moved.zf.slider",function(){"none"!=_("#acym__wysid__context__space").css("display")&&_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px")}),_(".acy-editor__space").unbind("click").click(function(e){e.stopPropagation();var t=_(this),i=t.offset(),a=t.innerHeight(),o=t.innerWidth(),n=_("#acym__wysid__context__space"),s=n.innerHeight(),c=_("#wpadminbar").innerHeight()+5,l=_("nav.navbar").innerHeight()+5,r=_(window).width(),d=i.top-s<c+l?i.top+a-c+5:i.top-c-s-5;n.css({display:"inherit",top:d,left:r>800?i.left-_("#adminmenuback").innerWidth()+o/2-n.innerWidth()/2:i.left+o/2-n.innerWidth()/2});var m=t.css("height").replace(/[^-\d\.]/g,""),y=_(".slider-handle").css("left").replace(/[^-\d\.]/g,""),h=_("#sliderOutput1").val();_(".slider-handle").css("left",m*y/h),_(".slider-fill").css("width",m+"%"),_("#sliderOutput1").val(t.css("height").replace(/[^-\d\.]/g,"")),_(".acy-editor__space--focus").removeClass("acy-editor__space--focus"),t.addClass("acy-editor__space--focus"),n.unbind("click").click(function(e){_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px"),e.stopPropagation()}),_(window).click(function(){_(".acy-editor__space--focus").css("height",_("#sliderOutput1").val()+"px"),n.css("display","none"),_(window).unbind("click")})}),function e(){_(".acym__wysid__column__element__follow").off("click").on("click",function(t){t.stopPropagation(),_(".acym__wysid__column__element__follow--focus").removeClass("acym__wysid__column__element__follow--focus"),_(this).addClass("acym__wysid__column__element__follow--focus"),_("#acym__wysid__context__follow__list").empty(),_("#acym__wysid__context__follow__select").html("<option></option>");var i=_(".acym__wysid__column__element__follow--focus img").eq(0);d=i.length?i.css("width").replace(/[^-\d\.]/g,"")<=80?i.css("width").replace(/[^-\d\.]/g,"")>=30?i.eq(0).css("width").replace(/[^-\d\.]/g,""):30:80:40,_("#acym__wysid__context__social__width").val(d);for(var a=["facebook","twitter","instagram","linkedin","pinterest","vimeo","wordpress","googleplus","youtube"],o=0,n=a.length;o<n;o++){var s=0;_(".acym__wysid__column__element__follow--focus a").each(function(){if(-1!=_(this).attr("class").indexOf(a[o])){var t=a[o];s=1,_("#acym__wysid__context__follow__list").append('<div id="acym__wysid__context__follow__list__item" class="grid-x small-12 cell"><div class="small-2 cell"><img style="height: auto;  box-sizing: border-box; width: 42px; padding: 5px; margin-left: 5px" src="'+m[t].src+'"></div><div class="small-8 cell"><div class="input-group small-12 cell"><span class="input-group-label"><img draggable="false" class="emoji" alt=""  src="'+MEDIA_URL_ACYM+'/images/link.svg"></span><input id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+t+'" type="text" placeholder="http://" value="'+_(this).attr("href")+'"></div></div><div class="auto cell"><p class="acym__wysid__context__follow__list__remove acym__wysid__context__follow__list__remove--'+t+'" aria-hidden="true"></p></div></div>'),_(".acym__wysid__context__follow__list__remove--"+t).off("click").on("click",function(){_(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+t).remove(),_(this).parent().parent().remove(),e(),_(".acym__wysid__column__element__follow--focus").click()}),_(".acym__wysid__context__button__link--"+t).off("change paste keyup").on("change paste keyupe",function(){_(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+t).attr("href",_(this).val())})}}),0==s&&_("#acym__wysid__context__follow__select").append(new Option("",a[o],!1,!1)).trigger("change")}var c=_(this),l=c.offset(),r=c.innerHeight(),d=c.innerWidth(),y=_("#acym__wysid__context__follow"),h=y.innerHeight(),u=_("#wpadminbar").innerHeight()+5,f=_("nav.navbar").innerHeight()+5,p=_(window).width(),g=l.top-h<u+f?l.top+r-u+5:l.top-u-h;y.css({display:"inherit",top:g,left:p>800?l.left-_("#adminmenuback").innerWidth()+d/2-y.innerWidth()/2:l.left+d/2-y.innerWidth()/2}),_("#acym__wysid__context__follow__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:A,templateSelection:A}),y.unbind("click").click(function(_){_.stopPropagation()}),_(window).click(function(){y.css({display:"none"}),_(window).unbind("click")}),_("#acym__wysid__context__follow__select").off("select2:select").on("select2:select",function(t){var i=t.params.data.id;d=_("#acym__wysid__context__social__width").val()<=80?_("#acym__wysid__context__social__width").val()>=30?_("#acym__wysid__context__social__width").val():30:80,_(".acym__wysid__column__element__follow--focus").append('<a class="acym__wysid__column__element__follow__'+i+'" href=""><img style="display: inline-block; max-width: 100%; height: auto; box-sizing: border-box; width: '+d+'px; padding: 3px;" src="'+m[i].src+'" width="'+d+'"></a>'),e(),_(".acym__wysid__column__element__follow--focus").click()}),_("#acym__wysid__context__social__width").off("change").on("change",function(){d=_("#acym__wysid__context__social__width").val()<=80?_("#acym__wysid__context__social__width").val()>=30?_("#acym__wysid__context__social__width").val():30:80,_(".acym__wysid__column__element__follow--focus img").css("width",d).attr("width",d)})});_(".acym__wysid__column__element__follow a").unbind("click").click(function(_){_.preventDefault()})}(),function e(){_(".acym__wysid__column__element__share").off("click").on("click",function(t){t.stopPropagation(),_(".acym__wysid__column__element__share--focus").removeClass("acym__wysid__column__element__share--focus"),_(this).addClass("acym__wysid__column__element__share--focus"),_("#acym__wysid__context__share__list").empty(),_("#acym__wysid__context__share__select").html("<option></option>");var i=_(".acym__wysid__column__element__share--focus span").eq(0),a=_("#acym__wysid__context__social__share__width");a.attr("value",i.length?i.css("font-size").replace(/[^-\d\.]/g,"")<=40?i.css("font-size").replace(/[^-\d\.]/g,"")>=15?i.eq(0).css("font-size").replace(/[^-\d\.]/g,""):15:40:20),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",a.attr("value")+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(a.attr("value"))+15+"px");for(var o=["facebook","twitter","linkedin","pinterest","googleplus"],n=[],s=0,c=o.length;s<c;s++){var l=0;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social").each(function(t){if(-1!=_(this).attr("class").indexOf(o[s])){var i=o[s];l=1,_("#acym__wysid__context__share__list").append('<div id="acym__wysid__context__share__list__item" class="grid-x small-12 cell"><div class="small-2 cell acym__wysid__context__share__list__item__'+i+'"><img style="width: 35px;display: inline; margin-left: 10px;" src="'+m[i].src+'" alt="'+m[i].src+'"/></div><div class="small-8 cell"><div class="input-group small-12 cell"><input maxlength="15" id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+i+'" type="text" value="'+_(this).children("span").html()+'"></div></div><div class="auto cell"><p class="acym__wysid__context__share__list__remove acym__wysid__context__share__list__remove--'+i+'" aria-hidden="true"></p></div></div>'),_(".acym__wysid__context__share__list__remove--"+i).off("click").on("click",function(){var t=i;_(".acym__wysid__column__element__share--focus").find(".acym__wysid__column__element__share__"+t).remove(),e(),_(".acym__wysid__column__element__share--focus").click()}),_(".acym__wysid__context__button__link--"+i).off("change paste keyup").on("change paste keyup",function(){var e=i;_(this).val().length>15?_(this).val(_(this).val().substr(0,15)):_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__"+e+" span").html(_(this).val())})}}),0==l&&_("#acym__wysid__context__share__select").append(new Option("",o[s],!1,!1)).trigger("change")}_(".acym__wysid__column__element__share__social").off("click").on("click",function(_){_.preventDefault()});var r=_(this).parent(),d=r.offset(),y=r.innerHeight(),h=r.innerWidth(),u=_("#acym__wysid__context__share"),f=u.innerHeight(),p=_("#wpadminbar").innerHeight()+5,g=_("nav.navbar").innerHeight()+5,w=_(window).width(),v=d.top-f<p+g?d.top+y-p+5:d.top-p-f;u.css({display:"inherit",top:v,left:w>800?d.left-_("#adminmenuback").innerWidth()+h/2-u.innerWidth()/2:d.left+h/2-u.innerWidth()/2}),_("#acym__wysid__context__share__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:M,templateSelection:M}),u.unbind("click").click(function(_){_.stopPropagation()}),_(window).click(function(){u.css({display:"none"}),_(window).unbind("click")}),_("#acym__wysid__context__share__select").off("select2:select").on("select2:select",function(t){var i=t.params.data.id;n.push(i),_(".acym__wysid__column__element__share--focus").append('<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__'+i+'" href="'+m[i].link+'"><img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m[i].src+'" alt="'+m[i].src+'"><span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m[i].text+"</span></a>");var o=a.val()<=40?a.val()>=15?a.val():15:40;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",o+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(o)+15+"px"),e(),_(".acym__wysid__column__element__share--focus").click()}),a.off("change").on("change",function(){var e=a.val()<=40?a.val()>=15?a.val():15:40;_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",e+"px"),_(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(e)+15+"px")})});_(".acym__wysid__column__element__share__social").off("click").on("click",function(_){_.preventDefault()})}(),H(Y(_("#acym__wysid__right__toolbar__settings__font--select").val(),"color")),E(),o=_("#acym__wysid__right__toolbar__settings__bold"),n=_("#acym__wysid__right__toolbar__settings__italic"),_("#acym__wysid__right__toolbar__settings__font--select").on("change",function(){E()}),_("#acym__wysid__right__toolbar__settings__font-family").on("change",function(){O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-family",_(this).val())}),_("#acym__wysid__right__toolbar__settings__font-size").on("change",function(){O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-size",_(this).val())}),o.off("click").on("click",function(){o.hasClass("acym__wysid__right__toolbar__settings__bold--selected")?o.removeClass("acym__wysid__right__toolbar__settings__bold--selected")&&O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-weight","normal"):o.addClass("acym__wysid__right__toolbar__settings__bold--selected")&&O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-weight","bold")}),n.off("click").on("click",function(){n.hasClass("acym__wysid__right__toolbar__settings__italic--selected")?n.removeClass("acym__wysid__right__toolbar__settings__italic--selected")&&O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-style","normal"):n.addClass("acym__wysid__right__toolbar__settings__italic--selected")&&O(_("#acym__wysid__right__toolbar__settings__font--select").val(),"font-style","italic")}),R(),L(),function e(){_(window).off("resize").on("resize",function(){e()});var t=0;t="WordPress"==CMS_ACYM?_("#wpadminbar").innerHeight():_("nav.navbar").innerHeight()+_("#status").innerHeight();var i=_(window).width()>639?56:0;var a=_("#acym__wysid__top-toolbar").innerHeight();_("#acym__wysid").css("min-height",_(window).height()-(i+t));_("#acym__wysid__template").css({"max-height":_(window).height()-(i+t+a+64),"min-height":_(window).height()-(i+t+a+64)});_(".acym__wysid__right-toolbar__content").css("max-height",_(window).height()-(i+t+48))}(),z(),_(".acym_dynamic").off("click").on("click",function(){var e=window.getSelection(),t=document.createRange();t.selectNode(this),e.removeAllRanges(),e.addRange(t),_("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),_("#acym__wysid__modal__dynamic-text").show()}),_(".acym_remove_dynamic").off("click").on("click",function(){_(this).parent().remove(),b()}),_("#acym__wysid__template").find("p").css("word-break","break-word"),(s=navigator.userAgent).toLowerCase().indexOf("chrome")>-1||s.toLowerCase().indexOf("firefox")>-1?(_("p").find("code").css("white-space","pre-wrap"),_("pre").css("white-space","pre-wrap"),_("code").css("white-space","pre-wrap")):s.indexOf("MSIE ")>-1||s.indexOf("Trident/")>-1?(_("pre").css("word-wrap","break-word"),_("code").css("word-wrap","break-word")):s.indexOf.toLowerCase()("opera")>-1&&(_("pre").css("white-space","-o-pre-wrap"),_("code").css("white-space","-o-pre-wrap")),_(".acym__wysid__tinymce--text").on("click",function(){setTimeout(function(){_.introContent=[{element:".mce-widget .mce-i-codesample",text:ACYM_JS_TXT.ACYM_INTRO_ADD_DTEXT,position:"right"}],_.setIntrojs("mail_editor_dtext")},200)}),_(".acym__wysid__column__element__separator").off("click").on("click",function(e){e.stopPropagation();var t=_(this).find("hr:first");_("#sliderOutput2").val(t.css("border-bottom-width").replace(/[^-\d\.]/g,"")),_("#acym__wysid__context__separator__color").spectrum({color:t.css("border-bottom-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,move:function(_){t.css("border-bottom-color",_.toHexString())},change:function(_){t.css("border-bottom-color",_.toHexString())}});var i=_(".acym__wysid__context__separator__kind");i.removeClass("separator-selected"),i.each(function(){_(this).find("hr").attr("data-kind")==t.css("border-bottom-style")&&_(this).addClass("separator-selected")}),i.off("click").on("click",function(){i.removeClass("separator-selected"),_(this).addClass("separator-selected"),t.css("border-bottom-style",_(this).find("hr").attr("data-kind"))});var a=_("#acym__wysid__context__separator__slide");a.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==a.css("display")&&t.css("border-bottom-width",_("#sliderOutput2").val()+"px")});var o=_("#acym__wysid__context__separator"),n=_(this),s=n.offset(),c=n.innerHeight(),l=n.innerWidth(),r=o.innerHeight(),d=_("#wpadminbar").innerHeight()+5,m=_("nav.navbar").innerHeight()+5,y=_(window).width(),h=s.top-r<d+m?s.top+c-d+5:s.top-d-r;o.css({display:"inherit",top:h,left:y>800?s.left-_("#adminmenuback").innerWidth()+l/2-o.innerWidth()/2:s.left+l/2-o.innerWidth()/2}),o.unbind("click").click(function(_){_.stopPropagation()}),_(window).off("click").on("click",function(){o.css({display:"none"}),_(window).unbind("click")})})}function k(e,t){var i;t=void 0!==t&&t,(i=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var a=i.state().get("selection").first().toJSON(),o=!0;a.url.indexOf("..")>=0&&(o=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),o?t?(_(e).attr("style",'background-image: url("'+a.url+'"); background-size: cover; background-repeat: no-repeat').attr("width",_(e).width()),_.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)):(_(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+a.url+'" alt="'+a.title+'"/></div></td></tr>'),b()):t||(_(e).replaceWith(""),b())}),i.on("escape",function(){t||(_(e).replaceWith(""),b())}),i.open()}function x(e,t){t=void 0!==t&&t,i=_(e);var a=_("#acym__wysid__modal__joomla-image__ui__iframe");a.css("height","100%").css("width","100%"),a.contents().find(".chzn-container-single").attr("style","").css("width","150px"),T(a,t),a.on("load",function(){T(a,t)}),_("#acym__wysid__modal__joomla-image").css("display","inherit")}function C(){_(".acym__wysid__set__background-image__rows").off("click").on("click",function(){var e=_(this).parent().parent().parent().find("tbody:first").find("th:first");"WordPress"===CMS_ACYM?k(e,!0):x(e,!0)}),_(".acym__wysid__delete__background-image__rows").off("click").on("click",function(){_(this).parent().parent().parent().find("tbody:first").find("th:first").css({background:"none"}),_(this).remove()})}function A(e){return e.id?_('<span><img src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function M(e){return e.id?_('<span><img style="margin-left: 5px" src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function S(e,t,a){jQuery.post(AJAX_URL_ACYM+"&ctrl=wysid&task=getPosts",{category:e,keyword:t,offset:a},function(e){0==a?_("#acym__wysid__modal__cms__result").html(e):_("#acym__wysid__modal__cms__result").append(e),_("#acym__wysid__modal__ui__load-more").css("visibility","hidden"),_(".acym__wysid__cms__post").off("click").on("click",function(){var e=_("#acym__wysid__modal__cms__insert");_(this).hasClass("acym__wysid__cms__post--selected")?_(this).removeClass("acym__wysid__cms__post--selected"):_(this).addClass("acym__wysid__cms__post--selected"),_(".acym__wysid__cms__post--selected").length>0?e.removeClass("disabled").off("click").on("click",function(){var e="";_(".acym__wysid__cms__post--selected").each(function(){e+='<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text">',e+=_(this).find(".acym__wysid__cms__post__title").html(),e+="</div></th></tr>",e+='<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text">',e+=_(this).find(".acym__wysid__cms__post__content").html(),e+="</div></th></tr>"}),i.replaceWith(e),b(),_("#acym__wysid__modal").css("display","none")}):e.addClass("disabled").off("click")}),_("#acym__wysid__modal__cms__result").off("scroll").on("scroll",function(){_(this).scrollTop()+_(this).innerHeight()>=_(this)[0].scrollHeight&&(_("#acym__wysid__modal__ui__load-more").css("visibility","visible"),S(_("#acym__wysid__modal__cms__category option:selected").val(),_("#acym__wysid__modal__cms__search").val(),_(".acym__wysid__cms__post").length),_("#acym__wysid__modal__cms__result").off("scroll"))})})}function T(e,t){e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){_("#acym__wysid__modal__joomla-image").hide(),t||(i.length&&i.replaceWith(""),L())}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var a=e.contents().find("#f_url").val(),o=e.contents().find("#imageframe").contents().find(".img-preview"),n=!1,s=!0;if(o.each(function(){_(this).hasClass("selected")&&(_(this).find(".imgThumbInside img").attr("src").indexOf("..")>=0&&(s=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),s&&(t?(i.attr("style",'background-image: url("'+_(this).find(".imgThumbInside img").attr("src")+'"); background-size: cover; background-repeat: no-repeat').attr("width",i.width()),_.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)):i.replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+_(this).find(".imgThumbInside img").attr("src")+'" alt="'+_(this).attr("title")+'"/></div></td></tr>'),_("#acym__wysid__modal__joomla-image").css("display","none"),b(),n=!0))}),!n&&""!==a)return a=a.match("^images/")?ACYM_JOOMLA_MEDIA_IMAGE+a:a,i.replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+a+'" alt="'+_(this).attr("title")+'"/></div></td></tr>'),_("#acym__wysid__modal__joomla-image").css("display","none"),b(),void(n=!0);0!=n||1!=s||alert("Please select a picture"),n=!1})}function Y(_,e){return void 0!==o[_]&&o[_][e]&&void 0!==o[_][e]?o[_][e]:d[_][e]}function O(_,e,t){null!=o[_]||(o[_]={}),o[_][e]=t,R()}function D(e){_.each(d[e],function(t){_(".acym__wysid__column__element "+e).css(t,Y(e,t))})}function R(){D("p"),D("h1"),D("h2"),D("h3"),D("h4"),D("h5"),D("h6"),_(".acym__wysid__template__content").css("background-color",Y("#acym__wysid__background-colorpicker","background-color"))}function E(){var e=_("#acym__wysid__right__toolbar__settings__bold"),t=_("#acym__wysid__right__toolbar__settings__italic"),i=_("#acym__wysid__right__toolbar__settings__font--select").val();_("#acym__wysid__right__toolbar__settings__font-family").val(Y(i,"font-family")),_("#acym__wysid__right__toolbar__settings__font-size").val(Y(i,"font-size")),e.val("bold"==Y(i,"font-weight")?e.addClass("acym__wysid__right__toolbar__settings__bold--selected"):e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")),t.val("italic"==Y(i,"font-style")?t.addClass("acym__wysid__right__toolbar__settings__italic--selected"):t.removeClass("acym__wysid__right__toolbar__settings__italic--selected")),H(Y(i,"color")),D(i)}function j(e){var t="";return _.parsecss(e,function(e){_("#acym__wysid__custom__style").remove();var i=e;for(var a in i){var o=i[a];for(var n in t+="#acym__wysid__template .body "+a+"{",o)t+=n+":"+o[n]+";";t+="} "}}),t}function H(e){var t=_("#acym__wysid__right__toolbar__settings__color"),i=_("#acym__wysid__right__toolbar__settings__font--select").val();t.spectrum({color:""!=e?e:"black",preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(_){O(i,"color",_.toHexString())},change:function(_){O(i,"color",_.toHexString())}})}function I(){tinymce.remove("div"),tinymce.init({selector:".acym__wysid__tinymce--text",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code acydtext noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px 12px 14px 18px 20px 24px 28px 30px 34px 36px",toolbar:["undo redo formatselect fontsizeselect | code acydtext","alignleft aligncenter alignright | bold italic | forecolor backcolor | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(_){_.off("change").on("change",function(_){R()})}}),tinyMCE.execCommand("mceAddEditor",!0,""),tinymce.init({selector:".acym__wysid__tinymce--image",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px 12px 14px 18px 20px 24px 28px 30px 34px 36px",toolbar:["alignleft aligncenter alignright | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(_){_.on("Change",function(){R()})}}),tinyMCE.execCommand("mceAddEditor",!0,"")}function L(){_(".acym__wysid__row").each(function(){0==_(this).children().length?(_(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),p(_("#acym__wysid__row__temp_div")),u(),w(),g(),L()):_(this).css({"min-height":"0",display:"table-cell"})}),_(".acym__wysid__column tbody").each(function(){0==_(this).children().length?_(this).css({"min-height":"75px",display:"block"}).parent().css("min-height","75px").css("display","block"):_(this).css({"min-height":"0px",display:"table-row-group"}).parent().css("min-height","0").css("display","table")})}function z(){_(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){_(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var t=_(this).find("a").attr("href"),i=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getMailContent";i+="&from="+_(this).attr("id"),_.post(i,function(e){return"no_new_editor"==e?(!confirm("If you click on OK all your template information will be erase. Are you sur ?")||(window.location.href=t),!1):(_("#acym__wysid__custom__style").remove(),"error"==e?(alert("There is an error this template can't be add"),!1):(e=JSON.parse(e),_(".acym__wysid__hidden__save__settings").val(null==e.mailSettings||'""'==e.mailSettings?"":JSON.parse(JSON.stringify(e.mailSettings))),_(".acym__wysid__hidden__save__stylesheet").val(null==e.stylesheet||""==e.stylesheet?"":JSON.parse(JSON.stringify(e.stylesheet))),_("#acym__wysid__edit").append(null==e.stylesheet||""==e.stylesheet?"":'<style id="acym__wysid__custom__style">'+j(e.stylesheet)+"</style>"),_(".acym__wysid__hidden__save__content").attr("value",""!=e.content?e.content:"empty").trigger("change"),b(),void _("#acym__template__choose__modal").foundation("close")))})})})}function J(){var e=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=trigger&trigger=displayListing";if(_("#plugin_listing_filters input, #plugin_listing_filters select").each(function(){e+="&"+_(this).attr("name")+"="+_(this).val()}),e+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),e+="&plugin="+_('input[name="plugin"]').val(),void 0!==_selectedRows){var t=[];for(var i in _selectedRows)_selectedRows.hasOwnProperty(i)&&t.push(i);e+="&selected="+t.join(",")}_.post(e,function(e){_("#plugin_listing").html(e),W()})}function W(){_(".acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),_("#acym_pagination__ajax").attr("value",_(this).attr("page")),J()})}!(_("#acym__wysid").length>0)||(_("#acym__wysid__right__toolbar__settings__font-family").select2({theme:"foundation",width:"100%"}),_("#acym__wysid__right__toolbar__settings__font-size").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),_("#acym__wysid__right__toolbar__settings__font--select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),o=""==a?{}:JSON.parse(a),_(".acym__wysid__hidden__save__content").val("<div id='acym__wysid__template' class='cell'>"+_("#acym__wysid__template").html()+"</div>"),_("#editor_thumbnail").val(""),_("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+j(c)+"</style>"),_.ui.plugin.add("draggable","connectToSortable104",{start:function(e,t,i){var a=_(this).data("ui-draggable"),o=(a.options,_.extend({},t,{item:a.element}));a.sortables=[],_(i.options.connectToSortable104).each(function(){var t=_(this).sortable("instance");t&&!t.options.disabled&&(a.sortables.push({instance:t,shouldRevert:t.options.revert}),t.refreshPositions(),t._trigger("activate",e,o))})},stop:function(e,t,i){var a=_(this).data("ui-draggable"),o=_.extend({},t,{item:a.element});_.each(a.sortables,function(){this.instance.isOver?(this.instance.isOver=0,a.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===a.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,t,i){var a=_(this).data("ui-draggable"),o=this;_.each(a.sortables,function(){var i=!1,n=this;this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(i=!0,_.each(a.sortables,function(){return this.instance.positionAbs=a.positionAbs,this.instance.helperProportions=a.helperProportions,this.instance.offset.click=a.offset.click,this!==n&&this.instance._intersectsWith(this.instance.containerCache)&&_.contains(n.instance.element[0],this.instance.element[0])&&(i=!1),i})),i?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=_(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return t.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=a.offset.click.top,this.instance.offset.click.left=a.offset.click.left,this.instance.offset.parent.left-=a.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=a.offset.parent.top-this.instance.offset.parent.top,a._trigger("toSortable",e),a.dropped=this.instance.element,a.currentItem=a.element,this.instance.fromOutside=a),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),a._trigger("fromSortable",e),a.dropped=!1)})}}),_(".acym__wysid__column__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__column tbody",revert:function(_){if(!_)return u(),g(),!0},revertDuration:300,start:function(e,t){_(t.helper).css({width:_(this).width()+"px",opacity:1}),_(".acym__wysid__column").addClass("acym__wysid__column--drag-start"),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")},stop:function(){_(".acym__wysid__column").removeClass("acym__wysid__column--drag-start")}}),w(),_(".acym__wysid__row__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__row",revert:function(_){if(!_)return u(),g(),!0},revertDuration:300,start:function(e,t){_(t.helper).css({width:_(this).width()+"px",opacity:1}),_(".acym__wysid__column__element").unbind("hover"),_(".acym__wysid__row__element").unbind("hover")}}),u(),f(),_("#acym__wysid__edit__button").off("click").on("click",function(){n=!1,_(".acym__wysid__row__element__toolbox__colorpicker").spectrum("destroy"),_(".sp-container").remove(),_("#acym_header").css("display","none"),_(".acym__content").css("display","none"),_("#acym__wysid").css("display","inherit"),_("#acym__wysid__edit").css("display","none"),_("#acym__wysid__template").replaceWith(_(".acym__wysid__hidden__save__content").val()),a=""!=_(".acym__wysid__hidden__save__settings").val()?_(".acym__wysid__hidden__save__settings").val():"",o=""==a?{}:JSON.parse(a),""!=_(".acym__wysid__hidden__save__stylesheet").val()&&(c=_(".acym__wysid__hidden__save__stylesheet").val(),_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(c)),b()}),_("#acym__wysid__cancel__button").off("click").on("click",function(){n=!0,_("#acym_header").css("display",""),_(".acym__content").css("display",""),_("#acym__wysid").css("display","none"),_("#acym__wysid__edit").css("display",""),_(".acym__wysid__hidden__save__stylesheet").val(c)}),_("#acym__wysid__save__button").off("click").on("click",function(){_("img").each(function(){_(this).attr("width",_(this).width()).attr("height",_(this).height())}),_("#acym__wysid__template *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&_(this).remove()}),_("#acym__wysid__template").find(".acym__wysid__column__element__td").css("outline-width","0px"),_("#acym__wysid__template").find("[contenteditable]").attr("contenteditable","false"),_("#acym__wysid__template a.acym__wysid__column__element__button").each(function(){var e,t,i,a,o,n,s,c,l=(e=_(this),t=parseInt(e.css("border-radius")),i=e.css("border-color"),a=e.css("background-color"),o=e.attr("href"),n='style = "width: '+e.outerWidth()+"; height:"+e.css("height").replace(/[^-\d\.]/g,"")+'"',s="color :"+e.css("color")+"; word-break:"+e.css("word-break")+"; font-family:"+e.css("font-family")+"; font-size:"+e.css("font-size")+";",c=e.html(),"\x3c!--[if mso]><v:roundrect "+n+' xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="'+o+'" style="v-text-anchor:middle;" arcsize="'+t+'%" strokecolor="'+i+'" fillcolor="'+a+'"><w:anchorlock/><center style="'+s+'">'+c+"</center></v:roundrect><![endif]--\x3e\x3c!--[if !mso]> --\x3e");_(this).before(l),_(this).after("\x3c!-- <![endif]--\x3e")}),_(".acym__wysid__hidden__save__stylesheet").val(_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()),n=!0,_.acym_add_notification(ACYM_JS_TXT.ACYM_TEMPLATE_CHANGED_CLICK_ON_SAVE,"succes",1e4),_("#acym_header").css("display",""),_(".acym__content").css("display",""),_("#acym__wysid").css("display","none"),_("#acym__wysid__edit").css("display",""),_(".mce-edit-focus").removeClass("mce-edit-focus"),_(".acym__wysid__row__element__toolbox__group").remove(),_(".acym__wysid__row__element__toolbox__height").remove(),_(".acym__wysid__column__element__toolbox__group").remove(),_("#acym__wysid__template").find('[name^="mce_"]').remove(),_(".acym__wysid__hidden__save__content").val("<div id='acym__wysid__template' class='cell'>"+_("#acym__wysid__template").html()+"</div>").trigger("change"),_(".acym__wysid__hidden__save__settings").val(JSON.stringify(o))}),_(".acym__wysid__modal--close").click(function(){_(".acym__wysid__modal").hide(),i.length&&i.replaceWith(""),L(),_("#dcontentcode").val("")}),_("#acym__wysid__fullscreen__modal__close").off("click").on("click",function(){_("#acym__wysid__fullscreen__modal").css("display","none")}),"WordPress"!=CMS_ACYM&&_(".acym__wysid__modal__joomla-image--close").click(function(){_("#acym__wysid__modal__joomla-image").hide(),i.length&&i.replaceWith(""),L()}),y(),b(),z(),(e=_("#acym__wysid__modal__dynamic-text__ui__iframe")).on("load",function(){_(this).contents().find("#wpadminbar").remove(),e.contents().find("#insertButton").off("click").on("click",function(){var t=e.contents().find("#dtextcode").val();if(t){if(n){var i=_("#acym_subject_field");i.val(i.val()+t)}else{var a=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=replaceDummy&code="+encodeURIComponent(t);_.post(a,function(_){_&&0!=_.indexOf("<style")||(_=t),t='<span class="acym_dynamic mceNonEditable" data-dynamic="'+t+'">'+_+'<i class="acym_remove_dynamic material-icons">close</i></span> ',window.getSelection().getRangeAt(0).extractContents(),tinymce.activeEditor.execCommand("mceInsertContent",!1,t),b()})}_("#acym__wysid__modal__dynamic-text").hide()}})}),_("#acym__wysid__right__toolbar__settings__stylesheet__apply").off("click").on("click",function(){var e=_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val();_(".acym__wysid__hidden__save__stylesheet").val(e),_("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+j(e)+"</style>"),_("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),_("#acym__wysid__right__toolbar__settings__stylesheet__open").on("click",function(){s=_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()}),_("#acym__wysid__right__toolbar__settings__stylesheet__cancel").on("click",function(){_("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(s),_("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),_("#acym_wrapper").keydown(function(_){if(13==_.keyCode&&"TEXTAREA"!=_.target.nodeName)return _.preventDefault(),!1}))});var _selectedRows=[];function setDContent(_){jQuery("#dcontentcode").val(_)}jQuery(document).ready(function(_){var e,t;e=[],t=!1,_(document).on("invalid.zf.abide",function(t,i){_("#formSubmit")[0].disabled=!1;var a=function(_){var e=_.attr("type"),t=_.attr("pattern"),i=_.attr("required"),a=new Array;return null!=i&&a.push(ACYM_JS_TXT.requiredMsg+"."),"email"==e?a.push(ACYM_JS_TXT.email):"text"==e&&(null!=t&&null!=ACYM_JS_TXT[t]?a.push(ACYM_JS_TXT[t]):a.push(ACYM_JS_TXT.defaultMsg)),a.join(" ")}(i);i.after('<div class="acym__input-error"><i class="fa fa-exclamation-circle"></i>'+a+"</div>");var o=_(".acym__input-error");setTimeout(function(){o.remove()},5e3),e=[]}).on("valid.zf.abide",function(t,i){if("email"==i.attr("type")&&""!=i.val())e[0]=null==e[0]?0:e[0],e[0]=null===i.val().match(ACYM_REGEX_EMAIL)||""==i.val()?e[0]+1:0;else if("acym__campaign__sendsettings__send-type-scheduled__date"==i.attr("id")){var a=moment(i.prop("value"),"DD MMM YYYY HH:mm");e[1]=null==e[1]?0:e[1],e[1]=a<moment()?e[1]+1:0,!(a<moment())||_.acym_add_notification("You can't set a sending date in the past","error","5000")}}).on("submit",function(i){e[3]=null==e[3]?0:e[3],_("#acym__users__export").length>0&&"list"===_('input[name="export_users-to-export"]:checked').val()&&"[]"===_("#acym__users__export #acym__modal__lists-selected").val()?(e[3],_.acym_add_notification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error",5e3)):_("#acym__users__export").length>0&&"list"===_('input[name="export_users-to-export"]:checked').val()&&"[]"!==_("#acym__users__export #acym__modal__lists-selected").val()&&(e[3]=0),e.length>0&&_.each(e,function(_,e){e>0&&(t=!0)}),t?(_("#formSubmit")[0].disabled=!1,i.preventDefault(),t=!1):(_("#formSubmit")[0].disabled=!0,t=!1)})}),jQuery(document).ready(function(_){function e(){_("#checkVersionButton").on("click",function(){_("#checkVersionArea").html('<i class="fa fa-circle-o-notch fa-spin"></i>');var e=new XMLHttpRequest;e.open("POST",AJAX_URL_ACYM+"&ctrl=update&tmpl=component&task=checkForNewVersion"),e.onload=function(){response=JSON.parse(e.responseText),_("#checkVersionArea").html(response.content),_("#acym__check__version__last__check").html(response.lastcheck)},e.send()})}_(document).on("click",function(e){var t=_("#acym_global_search");"none"!==t.css("display")&&"acym_global_search"!=_(e.target).get(0).id&&t.toggle("slide",{direction:"right"})}),_("#acym_global_search_button").off("click").on("click",function(e){e.stopPropagation();var t=_("#acym_global_search");t.value||t.toggle("slide",{direction:"right"})}),e(),_("#checkVersionButton").data("checking")&&window.addEventListener("load",function(){e()})}),jQuery(document).ready(function(_){var e;function t(_){0==_.val()?_.addClass("fieldAssignmentError"):_.removeClass("fieldAssignmentError")}(e=_("#acym__users__import__from_file__import__input")).val(null),e.off("change").on("change",function(){var t=_("#acym_form");this.files.length>0&&("text/csv"===this.files[0].type||"application/vnd.ms-excel"===this.files[0].type)&&"csv"===this.files[0].name.substr(this.files[0].name.length-3)&&(_(".acym__users__import__from_file__file-name").html(this.files[0].name),_(".acym__users__import__from_file__file").show(),_(".acym__users__import__from_file__choose").hide(),_(".acym__users__import__from_file__button-valid").removeAttr("disabled"),_(".acym__users__import__from_file__file__close").off("click").on("click",function(){_(".acym__users__import__from_file__file-name").html(""),_(".acym__users__import__from_file__button-valid").prop("disabled",!0),_(".acym__users__import__from_file__file").hide(),_(".acym__users__import__from_file__choose").show(),e.val(null)}),_(".acym__users__import__from_file__button-valid").off("click").on("click",function(){t.find('[name="import_from"]').val("file"),t.submit()}))}),_(".acym__users__import__generic__import__button").off("click").on("click",function(){var e=_("#modal__pagination__create__list").val();""==e||_("#acym__import__new-list").attr("value",e),"no-list"!=_(this).attr("id")||_("#acym__modal__lists-selected").attr("value","")&&_("#acym__import__new-list").attr("value","");var i=!0,a="",o="",n=!1,s="",c=[],l=_("#formSubmit"),r=_("#acym__users__import__from_file__ignore__checkbox").is(":checked"),d=_(".fieldAssignment").length;isNaN(d)&&(d=1);for(var m=0;m<d;m++){var y=_("#fieldAssignment"+m);0==(o=y.val())&&(r?(y.val(1),o=1):(t(y),i=!1,a+="\nAssign the column "+(m+1)+" to a field")),"email"==o&&(n=!0),1!=o&&-1!=c.indexOf(o)?(i=!1,a+='\nDuplicate field "'+o+'" for the column '+(m+1)):c.push(o),s+=","+o}if(n||(i=!1,a+="\nPlease assign a column for the e-mail field"),0==i)return alert("Please fill all information\n"+a),!1;","==s.substr(0,1)&&(s=s.substring(1)),_("#import_columns").val(s),l.click()}),_(".acym__users__import__button").off("click").on("click",function(){_("#acym__import__new-list").attr("value",_("#modal__pagination__create__list").val());var e=_("#acym__users__import__from_database").is(":visible")?_("#submit_import_database"):_("#submit_import_cms");e.click()}),_(".acym__import__submit").on("click",function(){var e=_(this).attr("data-from"),t=_("#acym_form");t.find('[name="import_from"]').val(e),t.find("#formSubmit").click()}),_("#acyencoding").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=ajaxEncoding&encoding="+_(this).val()+"&filename="+_(this).attr("data-filename"),t="",i=_(".fieldAssignment").length;isNaN(i)&&(i=1);for(var a=0;a<i;a++)t+="&fieldAssignment"+a+"="+_("#fieldAssignment"+a).val();e+=t,jQuery.post(e,function(e){_("#acym__users__import__generic__matchdata").html(e)})}),_("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=getColumnsFromTable&tablename="+_(this).val();jQuery.post(e,function(e){_(".acym__users__import__from_database__fields").html(e)})}),_("#acym__users__import__from_database__field--tablename").select2({theme:"foundation",width:"100%"}),_("#acym__users__import__from_database").keydown(function(_){if(13==_.keyCode)return _.preventDefault(),!1})}),jQuery(document).ready(function(_){var e;_("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),(e=_('[name="elements_checked[]"]')).off("change").on("change",function(){var e=_('[name="elements_checked[]"]:checked').length;if(1===e?_(".acym__campaign__duplicate").show():_(".acym__campaign__duplicate").hide(),e>0?_("#select2-listing_actions-container").parent().parent().parent().show():_("#select2-listing_actions-container").parent().parent().parent().hide(),_('[name="elements_checked[]"]:not(:checked)').length>0?_("#checkbox_all").prop("checked",!1):_("#checkbox_all").prop("checked",!0),_("#acym__users").length){var t=_("#acym__users__listing__number_to_export"),i=_("#acym__users__listing__number_to_add_to_list"),a=_("#acym__users__listing__button--add-to-list");0==e?(t.html(t.attr("data-default")),a.addClass("disabled"),i.html(e)):(t.html(e),a.removeClass("disabled"),i.html(e))}}),e.trigger("change"),_("#listing_actions").off("change").on("change",function(){var e=this.value;switch(e){case"delete":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE;break;case"setActive":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:var t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if(_.acym_confirm(t)){var i=_(this).closest("#acym_form");i.find('[name="task"]').val(_(this).val()),i.submit()}else _(this).val("0")}),_("#checkbox_all").off("change").on("change",function(){var e=_('[name="elements_checked[]"]');_(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")}),_("#acym__listing__ordering").off("change").on("change",function(){var e=_(this).closest("#acym_form");e.find('[name="task"]').val("listing"),e.submit()}),_(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=_("#acym__listing__ordering__sort-order--input"),t=_(this).closest("#acym_form");"asc"==e.val()?e.val("desc"):e.val("asc"),t.find('[name="task"]').val("listing"),t.submit()})}),jQuery(document).ready(function(_){function e(){_(".acym__pagination__page__ajax").off("click").on("click",function(){_("#acym_pagination__ajax").val(_(this).attr("page")),i(),s()})}function t(){var e=_(".modal__pagination__show-selected"),t=_(".modal__pagination__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),_(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),_("#modal__pagination__show-information").attr("value","true"),_("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),_("#modal__pagination__show-information").attr("value","false"),_("#acym_pagination__ajax").attr("value",1)),i()})}function i(){var i=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";i+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),i+="&selectedLists="+_("#acym__modal__lists-selected").val(),i+="&alreadyLists="+_("#acym__user__lists_already_add").val(),i+="&show_selected="+_("#modal__pagination__show-information").val(),i+="&search_lists="+_("#modal__pagination__search__lists").val(),i+=_("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0";var o=_(".modal__pagination__listing__lists__in-form");o.length&&jQuery.post(i,function(i){_("#modal__pagination__search__spinner").hide(),o.html(i),e(),_(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=_(this).next().children("label .modal__pagination__listing__lists__list-name "),t=_("#acym__modal__lists-selected"),i=t.val(),a=[];i=""==i?[]:JSON.parse(i),_(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),i.splice(i.indexOf(_(this).val()),1)),_(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){a.push(_(this).val())}),_.each(a,function(e){-1!=_.inArray(a[e],i)||i.push(a[e])}),t.val(JSON.stringify(i)),_("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),_("#acym__popup__subscription__change").trigger("change")}),t(),a()})}function a(){var e=null,t=_('input[name="modal_search_lists"]'),a=_(".modal__pagination__show"),n=_("#modal__pagination__search__lists");t.off("keydown").on("keydown",function(_){13==_.which&&(_.preventDefault(),o(e))}),t.off("keyup").on("keyup",function(t){var o=_(this),s=o.val();(s||8==t.which)&&""!=s&&s.length>=2?(_("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){n.attr("value",s),_("#acym_pagination__ajax").attr("value",1),i()},1e3)):clearTimeout(e),""==o.val()&&(clearTimeout(e),a.show(),n.attr("value",""),_("#acym_pagination__ajax").attr("value",1),i())}),_(".modal__pagination__search .acym__search__button").off("click").on("click",function(_){_.preventDefault(),o(e)}),_(".modal__pagination__search .acym__search-clear").off("click").on("click",function(_){_.preventDefault(),clearTimeout(e),n.attr("value",""),t.attr("value",""),a.show(),i()})}function o(e){clearTimeout(e),_(".modal__pagination__show").hide(),_("#acym_pagination__ajax").attr("value",1),_("#modal__pagination__search__lists").attr("value",_('input[name="modal_search_lists"]').attr("value")),i()}function n(){var e=_(".acym__listing__subscribe-to").children(".acym__listing__row");e=e.length;var t=_("#acym__user__edit #tab0-label"),i=_("#acym__user__edit #tab1-label"),a=_("#acym__listing__subscribe-to__count");setTimeout(function(){e<=0?""!=_('input[name="id"]').val()?t.hide()&&a.html("0")&&i.click():t.show()&&i.hide()&&a.html(""+e)&&t.click():t.show()&&a.html(""+e)&&t.click()},5)}function s(){var t=AJAX_URL_ACYM+"&page=acymailing_users&ctrl=users&action=acymailing_router&noheader=1&task=setAjaxListing&usersPerPage=10";t+="&pagination_page_ajax="+_("#acym_pagination__ajax").val(),t+="&selectedUsers="+_("#acym__modal__users-selected").val(),t+="&hiddenUsers="+_("#acym__modal__users-hidden").val(),t+="&showSelected="+_("#modal__pagination__users__show-information").val(),t+="&searchUsers="+_("#modal__pagination__users__search__input").val();var i=_(".modal__pagination__users__listing__in-form");i.length&&jQuery.post(t,function(t){_("#modal__pagination__users__search__spinner").hide(),i.html(t),e(),_(".modal__pagination__users__listing__user--checkbox").off("change").on("change",function(){var e=_(this).next().children("label .modal__pagination__users__listing__user-name "),t=_("#acym__modal__users-selected"),i=t.val(),a=[];i=""==i?[]:JSON.parse(i),_(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),i.splice(i.indexOf(_(this).val()),1)),_(".modal__pagination__users__listing__user--checkbox:checked").each(function(){a.push(_(this).val())}),_.each(a,function(e){-1!=_.inArray(a[e],i)||i.push(a[e])}),t.val(JSON.stringify(i))}),c(),l()})}function c(){var e=_(".modal__pagination__users__show-selected"),t=_(".modal__pagination__users__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),_(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),_("#modal__pagination__users__show-information").attr("value","true"),_("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),_("#modal__pagination__users__show-information").attr("value","false"),_("#acym_pagination__ajax").attr("value",1)),s()})}function l(){var e=null,t=_('input[name="modal_search_users"]'),i=_(".modal__pagination__show"),a=_("#modal__pagination__users__search__input");t.off("keydown").on("keydown",function(_){13==_.which&&(_.preventDefault(),r(e))}),t.off("keyup").on("keyup",function(t){var o=_(this).val();(o||8==t.which)&&""!=o&&o.length>=2?(_("#modal__pagination__users__search__spinner").show(),i.hide(),clearTimeout(e),e=setTimeout(function(){a.attr("value",o),_("#acym_pagination__ajax").attr("value",1),s()},1e3)):clearTimeout(e),""==o&&(clearTimeout(e),i.show(),a.attr("value",""),_("#acym_pagination__ajax").attr("value",1),s())}),_(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(_){_.preventDefault(),r(e)}),_(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(_){_.preventDefault(),clearTimeout(e),a.attr("value",""),t.attr("value",""),i.show(),s()})}function r(e){clearTimeout(e),_(".modal__pagination__show").hide(),_("#acym_pagination__ajax").attr("value",1),_("#modal__pagination__users__search__input").attr("value",_('input[name="modal_search_users"]').attr("value")),s()}_.Modal=function(){_("[data-iframe]").on("click",function(){var e=_("#"+_(this).attr("data-open")),t=_(this).attr("data-reload"),i=_(this).attr("data-ajax"),a=_(this).attr("data-iframe-class"),o="true"==i?AJAX_URL_ACYM+_(this).attr("data-iframe"):_(this).attr("data-iframe");e.prepend('<iframe src="'+o+'"></iframe>'),void 0!==a&&e.find("iframe").addClass(a),e.find("iframe").on("load",function(){_(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){_(this).siblings("iframe").remove(),t&&location.reload()}),_(".reveal-overlay").on("click",function(){e.find("iframe").remove(),t&&location.reload()})}),t(),_(".modal__pagination__button-open").off("click").on("click",function(){i()}),a(),_("#modal__pagination__confirm").off("click").on("click",function(e){var t=""!=_("#acym__user__lists_already_add").val()?JSON.parse(_("#acym__user__lists_already_add").val()):{},i=""!=_("#acym__modal__lists-selected").val()?JSON.parse(_("#acym__modal__lists-selected").val()):{};if(_.isEmptyObject(i))return alert(_(this).attr("text-empty")),!1;t=t.concat(i),_("#acym__user__lists_already_add").attr("value",JSON.stringify(t));var a=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&task=ajaxGetLists&ids="+i.join(",");jQuery.post(a,function(e){e=JSON.parse(e),_(".acym__users__display__subscriptions--list .acym__listing__subscribe-to").html(e.html),_("#acym__user__edit__add-subscription__modal").foundation("close"),_(".acym__user__action--remove").off("click").on("click",function(){var e=_("#acym__modal__lists-selected"),t=JSON.parse(e.val());t.splice(t.indexOf(_(this).attr("id")),1),e.attr("value",JSON.stringify(t)),_("#acym__user__lists_already_add").val(JSON.stringify(t)),_(this).parent().remove(),n()}),n(),_.acym_add_notification(e.notif,"success",1e4)})}),n(),i(),_(".modal__pagination__users__button-open").off("click").on("click",function(){_("#acym__modal__users-selected").val(""),s()}),s(),c(),l(),_("#modal__pagination__users__confirm").off("click").on("click",function(){$task=_("#acym__modal__users__form-task").val(),_('input[name="task"]').val($task),_("#acym_form").submit()}),_("#acym__modal__lists_import__clear").off("click").on("click",function(){_("#modal__pagination__create__list").val("")})},_.Modal()}),jQuery(document).ready(function(_){!function(){_(".acym_tab").off("click").on("click",function(e){if("true"==_(this).attr("data-empty"))return!1;if(_(this).attr("data-dynamics")){var t=AJAX_URL_ACYM+"&ctrl=dynamics&task=trigger&trigger=textPopup&plugin="+_(this).attr("data-dynamics");_.post(t,function(e){_(".tabs-panel.is-active").html(e),_("i.acym_radio_unchecked").on("click",function(){var e=_("#"+_(this).attr("data-radio"));e.click()}),_('input[type="radio"]').on("change",function(){var e=_('input[name="'+_(this).attr("name")+'"]:checked').val();_('input[name="'+_(this).attr("name")+'"]').each(function(){_(this).val()==e?(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').hide(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').show()):(_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_unchecked').show(),_('i[data-radio="'+_(this).attr("id")+'"].acym_radio_checked').hide())})}).change()})}var i=_(this).closest(".tabs").attr("id");localStorage.setItem("acy"+i,_(this).attr("id"))});var e=_(".tabs").attr("id"),t=localStorage.getItem("acy"+e),i=_("#"+e+" #"+t);i.length?i.click():_("#"+e+" .acym_tab:first").click()}()});