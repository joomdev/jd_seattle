/**
 * @package    AcyMailing for Joomla
 * @version    6.1.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(t){function _(){var _=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getTemplateAjax";_+="&search="+t("#acym_search_template_choose__ajax").val(),_+="&tag="+t("#acym_tag_template_choose__ajax").val(),_+="&type="+t("#acym__type-template").val(),_+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),_+="&editor="+t("#acym__mail__edit__editor").val(),t.post(_,function(_){var i;t(".acym__template__choose__ajax").html(_),i=null,t('input[name="mailchoose_search__ajax"]').off("keyup").on("keyup",function(_){var e=t(this),c=e.val();(c||8==_.which)&&""!=c&&c.length>=2&&(clearTimeout(i),i=setTimeout(function(){t("#acym_search_template_choose__ajax").attr("value",c),a()},1500)),13==_.which&&(clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",c),a()),8==_.which&&""==e.val()&&(clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",""),a())}),t("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(_){_.preventDefault(),clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",t('input[name="mailchoose_search__ajax"]').attr("value")),a()}),t("#mailchoose_tag__ajax").on("change",function(_){t("#acym_tag_template_choose__ajax").attr("value",t(this).attr("value")),a()}),t("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(_){_.preventDefault(),t("#acym__type-template").val(t(this).attr("type")),t(".acym__type__choosen").removeClass("is-active"),t(this).addClass("is-active").blur(),a()}),e()})}function a(){t("#acym_pagination__ajax").attr("value",1),_()}function e(){t(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(a){a.preventDefault(),t("#acym_pagination__ajax").attr("value",t(this).attr("page")),_()})}t(".acym__templates__filter__tags__ajax").select2({theme:"foundation",width:"100%"}),t(".acym__templates__filter__tags").select2({theme:"foundation",width:"100%"}),t("#acym__template__type").select2({theme:"foundation",width:"100%"}),t(".acym__templates__choose__type-templates .button").click(function(){t(this).siblings().removeClass("is-active"),t(this).addClass("is-active")}),a(),e(),function(){if(t("#acym__wysid__edit__button").length>0){var _=!1;t(".acym__template__prevent__unload").on("click",function(a){_=!0,function(_){var a=t("#editor_thumbnail"),e=t('[name="thumbnail"]'),i=AJAX_URL_ACYM+"&ctrl=mails&task=setNewThumbnail";if(""===a.val()&&""!==e.val())return a.val(e.val()),void _.click();""!==a.val()&&void 0!==a.val()||t.setThumbnail(),""===e.val()&&""===a.val()?(a.val(""),_.click()):t.ajax({type:"POST",url:i,data:{content:a.val(),thumbnail:e.val()},success:function(t){a.val(t),_.click()}})}(t("#data_"+t(this).attr("id")))}),t(window).on("beforeunload",function(){if(!_)return""})}}(),t('input[name="mailchoose_search__ajax"]').next().off("click").on("click",function(){t('input[name="mailchoose_search__ajax"]').val(""),t("#acym_search_template_choose__ajax").val(""),a()}),t("#acym__template__type").on("change",function(){"standard"!=t(this).val()?t('input[name="mail[subject]"]').attr("required","required"):t('input[name="mail[subject]"]').removeAttr("required")}),t(".acym__create__template").off("click").on("click",function(){t("#acym_create_template_type_editor").val(t(this).attr("data-editor")),t('input[name="task"]').val(t(this).attr("data-task")),t("#formSubmit").click()}),t(".mails_listing").length>0?(t.introContent=[{element:'[data-editor="acyEditor"]',text:ACYM_JS_TXT.ACYM_INTRO_CREATE_DD},{element:'[data-editor="html"]',text:ACYM_JS_TXT.ACYM_INTRO_CREATE_HTML}],t.setIntrojs("mail_listing")):t(".mails_edit").length>0&&(t("#acym__wysid__edit__button").on("click",function(){t.introContent=[{element:"table.body",text:ACYM_JS_TXT.ACYM_INTRO_TEMPLATE},{element:".acym__wysid__right__toolbar__blocks",text:ACYM_JS_TXT.ACYM_INTRO_DRAG_BLOCKS},{element:".acym__wysid__right__toolbar__contents",text:ACYM_JS_TXT.ACYM_INTRO_DRAG_CONTENT},{element:"#acym__wysid__right__toolbar__settings__tab",text:ACYM_JS_TXT.ACYM_INTRO_SETTINGS}],t.setIntrojs("mail_editor_content")}),t("#acym__wysid__right__toolbar__settings__tab").on("click",function(){setTimeout(function(){t.introContent=[{element:".acym__wysid__right__toolbar__design",text:ACYM_JS_TXT.ACYM_INTRO_CUSTOMIZE_FONT},{element:"#acym__wysid__right__toolbar__settings__stylesheet__open",text:ACYM_JS_TXT.ACYM_INTRO_IMPORT_CSS}],t.setIntrojs("mail_editor_settings")},500)})),t("#acym__wysid__edit__button").length<1&&t("#acym__mail__edit__html__stylesheet__container").show(),t("#acym__mail__edit__html__stylesheet__button").off("click").on("click",function(){var _=t("#acym__mail__edit__html__stylesheet");_.is(":visible")?(_.hide(),t(this).find("i").html("keyboard_arrow_down")):(_.show(),t(this).find("i").html("keyboard_arrow_up"))})});