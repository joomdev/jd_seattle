N2D("SmartSliderWidgetThumbnailDefault",function(t,i){"use strict";function s(i,s){this.slider=i,this.slider.started(t.proxy(this.start,this,s))}var e=!1,r={videoDark:'<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#000" opacity=".6"/><path fill="#FFF" d="M19.8 32c-.124 0-.247-.028-.36-.08-.264-.116-.436-.375-.44-.664V16.744c.005-.29.176-.55.44-.666.273-.126.592-.1.84.07l10.4 7.257c.2.132.32.355.32.595s-.12.463-.32.595l-10.4 7.256c-.14.1-.31.15-.48.15z"/></svg>'};s.prototype.start=function(i){if(this.slider.sliderElement.data("thumbnail"))return!1;this.slider.sliderElement.data("thumbnail",this),this.parameters=t.extend({captionSize:0,minimumThumbnailCount:1.5,invertGroupDirection:0},i),this.ratio=1,this.hidden=!1,this.forceHidden=!1,this.forceHiddenCB=null,this.itemPerPane=1,this.currentI=0,this.offset=0,this.horizontal={prop:"width",Prop:"Width",sideProp:n2const.rtl.left,invProp:"height",axis:"x",outerProp:"outerWidth"},this.vertical={prop:"height",Prop:"Height",sideProp:"top",invProp:"width",axis:"y",outerProp:"outerHeight"},this.group=parseInt(i.group),this.orientation=i.orientation,"vertical"===this.orientation&&(this.goToDot=this._goToDot),this.outerBar=this.slider.sliderElement.find(".nextend-thumbnail-default"),this.bar=this.outerBar.find(".nextend-thumbnail-inner"),this.scroller=this.bar.find(".nextend-thumbnail-scroller"),this.$groups=t();for(var s=0;s<this.group;s++)this.$groups=this.$groups.add(t('<div class="nextend-thumbnail-scroller-group"></div>').appendTo(this.scroller));var e="universalclick";if("mouseenter"===i.action?e="mouseenter":this.slider.hasTouch()&&(e="n2click"),this.renderThumbnails(),this.dots=this.scroller.find(".nextend-thumbnail-scroller-group > div").on(e,t.proxy(this.onDotClick,this)),this.images=this.dots.find(".n2-ss-thumb-image"),n2const.rtl.isRtl?(this.previous=this.outerBar.find(".nextend-thumbnail-next").on("click",t.proxy(this.previousPane,this)),this.next=this.outerBar.find(".nextend-thumbnail-previous").on("click",t.proxy(this.nextPane,this))):(this.previous=this.outerBar.find(".nextend-thumbnail-previous").on("click",t.proxy(this.previousPane,this)),this.next=this.outerBar.find(".nextend-thumbnail-next").on("click",t.proxy(this.nextPane,this))),this.slider.hasTouch()&&(N2Classes.EventBurrito(this.outerBar.get(0),{mouse:this.slider.parameters.controls.drag,axis:"vertical"===this.orientation?"y":"x",start:t.proxy(function(){this._touch={start:parseInt(this.scroller.css(this[this.orientation].sideProp)),max:this.bar[this[this.orientation].prop]()-this.scroller[this[this.orientation].outerProp](!0)},this._touch.current=this._touch.start},this),move:t.proxy(function(t,i,s,e,r){return this._touch.current=Math.max(this._touch.max,Math.min(0,this._touch.start+s[this[this.orientation].axis])),this.scroller.css(this[this.orientation].sideProp,this._touch.current),Math.abs(s[this[this.orientation].axis])>5},this),end:t.proxy(function(t,i,s,e,r){40>Math.abs(this._touch.start-this._touch.current)?this.resetPane():this._touch.current>this._touch.start?this.previousPane():this.nextPane(),10>Math.abs(s.x)&&10>Math.abs(s.y)?this.onTap(t):nextend.preventClick(),delete this._touch},this)}),this.slider.parameters.controls.drag||this.outerBar.on("click",t.proxy(this.onTap,this))),this.thumbnailDimension={widthLocal:this.dots.width(),width:this.dots.outerWidth(!0),height:this.dots.outerHeight(!0),widthBorder:parseInt(this.dots.css("borderLeftWidth"))+parseInt(this.dots.css("borderRightWidth")),heightBorder:parseInt(this.dots.css("borderTopWidth"))+parseInt(this.dots.css("borderBottomWidth"))},this.thumbnailDimension.widthMargin=this.thumbnailDimension.width-this.dots.outerWidth(),this.thumbnailDimension.heightMargin=this.thumbnailDimension.height-this.dots.outerHeight(),this.imageDimension={width:this.images.outerWidth(!0),height:this.images.outerHeight(!0)},this.sideDimension=.25*this.thumbnailDimension[this[this.orientation].prop],"horizontal"===this.orientation?(this.scroller.height(this.thumbnailDimension.height*this.group),this.bar.height(this.scroller.outerHeight(!0))):(this.scroller.width(this.thumbnailDimension.width*this.group),this.bar.width(this.scroller.outerWidth(!0))),this.slider.sliderElement.on({BeforeVisible:t.proxy(this.onReady,this),sliderSwitchTo:t.proxy(this.onSlideSwitch,this)}),this.slider.firstSlideReady.done(t.proxy(this.onFirstSlideSet,this)),0==i.overlay){var r=!1;switch(i.area){case 1:r="Top";break;case 12:r="Bottom";break;case 5:r="Left";break;case 8:r="Right"}r&&(this.offset=parseFloat(this.outerBar.data("offset")),this.slider.responsive.addStaticMargin(r,this))}},s.prototype.renderThumbnails=function(){var s;this.parameters.invertGroupDirection&&(s=Math.ceil(this.slider.realSlides.length/this.group));for(var e=0;e<this.slider.realSlides.length;e++){var o=this.slider.realSlides[e],h=t('<div class="'+this.parameters.slideStyle+' n2-ow" style="'+this.parameters.containerStyle+'"></div>');if(this.parameters.invertGroupDirection?h.appendTo(this.$groups.eq(Math.floor(e/s))):h.appendTo(this.$groups.eq(e%this.group)),h.data("slide",o),o.$thumbnail=h,this.parameters.thumbnail!==i){var n=o.getThumbnailType(),a=r[n]!==i?r[n]:"";t('<div class="n2-ss-thumb-image n2-ow" style="width:'+this.parameters.thumbnail.width+"px; height:"+this.parameters.thumbnail.height+"px;"+this.parameters.thumbnail.code+'">'+a+"</div>").css("background-image","url('"+o.getThumbnail()+"')").appendTo(h)}if(this.parameters.caption!==i){var l=t('<div class="'+this.parameters.caption.styleClass+"n2-ss-caption n2-ow n2-caption-"+this.parameters.caption.placement+'" style="'+this.parameters.caption.style+'"></div>');switch(this.parameters.caption.placement){case"before":l.prependTo(h);break;default:l.appendTo(h)}if(this.parameters.title!==i&&l.append('<div class="n2-ow '+this.parameters.title.font+'">'+o.getTitle()+"</div>"),this.parameters.description!==i){var d=o.getDescription();d&&l.append('<div class="n2-ow '+this.parameters.description.font+'">'+d+"</div>")}}}},s.prototype.onTap=function(i){e||(t(i.target).trigger("n2click"),e=!0,setTimeout(function(){e=!1},500))},s.prototype.onFirstSlideSet=function(t){this.activateDots(t.index),this.goToDot(t.index)},s.prototype.onReady=function(){this.slider.sliderElement.on("SliderResize",t.proxy(this.onSliderResize,this)),this.onSliderResize()},s.prototype.onSliderResize=function(){null!==this.forceHiddenCB&&this.forceHiddenCB.call(this),this.adjustScrollerSize();var t=this.slider.currentSlide.index;this.activateDots(t),this.goToDot(t)},s.prototype.adjustScrollerSize=function(){var t=this[this.orientation].prop,i=Math.ceil(this.dots.length/this.group)*this.thumbnailDimension[t]*this.ratio,s=this.scroller["outer"+this[this.orientation].Prop]()-this.scroller[t](),e=this.slider.dimensions["thumbnail"+t];e>=i+s?this.scroller[t](e-s):this.scroller[t](i),"horizontal"===this.orientation?this.scroller.height(this.dots.outerHeight(!0)*this.group):this.scroller.width(this.dots.outerWidth(!0)*this.group)};var o=!1;return s.prototype.onDotClick=function(i){o||(this.slider.directionalChangeToReal(t(i.currentTarget).data("slide").index),o=!0),setTimeout(t.proxy(function(){o=!1},this),400)},s.prototype.onSlideSwitch=function(t,i,s){this.activateDots(i),this.goToDot(s)},s.prototype.activateDots=function(t){this.dots.removeClass("n2-active");for(var i=this.slider.slides[t].slides,s=0;i.length>s;s++)i[s].$thumbnail.addClass("n2-active")},s.prototype.resetPane=function(){this.goToDot(this.currentI)},s.prototype.previousPane=function(){this.goToDot(this.currentI-this.itemPerPane*this.group)},s.prototype.nextPane=function(){this.goToDot(this.currentI+this.itemPerPane*this.group)},s.prototype.goToDot=function(t){this.tween&&this.tween.progress()<1&&this.tween.pause();var i=this[this.orientation],s=1,e=this.slider.dimensions["thumbnail"+i.prop],r=this.sideDimension,o=e-2*r,h=o/this.thumbnailDimension[i.prop];if(this.parameters.minimumThumbnailCount>=h&&(r=.1*e,o=e-2*r,s=o/(this.parameters.minimumThumbnailCount*this.thumbnailDimension[i.prop]),h=o/(this.thumbnailDimension[i.prop]*s)),this.ratio!==s){var n={};n[i.prop]=parseInt(this.thumbnailDimension[i.prop]*s-this.thumbnailDimension[i.prop+"Margin"]-this.thumbnailDimension[i.prop+"Border"]),n[i.invProp]=parseInt((this.thumbnailDimension[i.invProp]-this.parameters.captionSize)*s-this.thumbnailDimension[i.prop+"Margin"]+this.parameters.captionSize-this.thumbnailDimension[i.invProp+"Border"]),this.dots.css(n);var a=this.dots.width()/this.thumbnailDimension.widthLocal;n={},n[i.prop]=Math.ceil(this.imageDimension[i.prop]*a),n[i.invProp]=Math.ceil(this.imageDimension[i.invProp]*a),this.images.css(n),this.bar.css(i.invProp,"auto"),this.ratio=s,this.slider.responsive.doNormalizedResize(),this.adjustScrollerSize()}h=Math.floor(h),t=Math.max(0,Math.min(this.dots.length-1,t));var l,d={};l=this.parameters.invertGroupDirection?Math.floor(t%Math.ceil(this.dots.length/this.group)/h):Math.floor(t/this.group/h);var p=-(this.scroller["outer"+i.Prop]()-e);l===Math.floor((this.dots.length-1)/this.group/h)?(d[i.sideProp]=-(l*h*this.thumbnailDimension[i.prop]*s),0===l?this.previous.removeClass("n2-active"):this.previous.addClass("n2-active"),this.next.removeClass("n2-active")):l>0?(d[i.sideProp]=-(l*h*this.thumbnailDimension[i.prop]*s-r),this.previous.addClass("n2-active"),this.next.addClass("n2-active")):(d[i.sideProp]=0,this.previous.removeClass("n2-active"),this.next.addClass("n2-active")),p>=d[i.sideProp]&&(d[i.sideProp]=p,this.next.removeClass("n2-active")),this.tween=NextendTween.to(this.scroller,.5,d),this.currentI=t,this.itemPerPane=h},s.prototype._goToDot=function(i){if(!this.forceHidden){this.tween&&this.tween.progress()<1&&this.tween.pause();var s=this[this.orientation],e=this.slider.dimensions["thumbnail"+s.prop],r=(e-2*this.sideDimension)/this.thumbnailDimension[s.prop];if(0===e||0!==e&&this.parameters.minimumThumbnailCount-.5>r?this.hidden||("horizontal"===this.orientation?this.outerBar.css("height",0):this.outerBar.css("width",0),this.hidden=!0,this.forceHidden=!0,setTimeout(t.proxy(function(){this.forceHiddenCB=function(){this.forceHiddenCB=null,this.forceHidden=!1}},this),300),this.slider.responsive.doNormalizedResize()):this.hidden&&r>=this.parameters.minimumThumbnailCount+.5&&(this.hidden=!1,"horizontal"===this.orientation?this.outerBar.css("height",""):this.outerBar.css("width",""),this.slider.responsive.doNormalizedResize()),!this.hidden){r=Math.floor(r),i=Math.max(0,Math.min(this.dots.length-1,i));var o,h={};o=this.parameters.invertGroupDirection?Math.floor(i%Math.ceil(this.dots.length/this.group)/r):Math.floor(i/this.group/r);var n=-(this.scroller["outer"+s.Prop]()-e);o===Math.floor((this.dots.length-1)/this.group/r)?(h[s.sideProp]=-(o*r*this.thumbnailDimension[s.prop]),0===o?this.previous.removeClass("n2-active"):this.previous.addClass("n2-active"),this.next.removeClass("n2-active")):o>0?(h[s.sideProp]=-(o*r*this.thumbnailDimension[s.prop]-this.sideDimension),this.previous.addClass("n2-active"),this.next.addClass("n2-active")):(h[s.sideProp]=0,this.previous.removeClass("n2-active"),this.next.addClass("n2-active")),n>=h[s.sideProp]&&(h[s.sideProp]=n,this.next.removeClass("n2-active")),this.tween=NextendTween.to(this.scroller,.5,h)}this.currentI=i,this.itemPerPane=r}},s.prototype.isVisible=function(){return this.outerBar.is(":visible")},s.prototype.getSize=function(){return"horizontal"===this.orientation?this.outerBar.height()+this.offset:this.outerBar.width()+this.offset},s});