N2D("SmartSliderWidgetAutoplayImage",function(t,e){"use strict";function i(e,i,s,a){this.slider=e,this.slider.started(t.proxy(this.start,this,i,s,a))}return i.prototype.start=function(e,i,s){if(this.slider.sliderElement.data("autoplay"))return!1;if(this.slider.sliderElement.data("autoplay",this),this.paused=!1,this.button=this.slider.sliderElement.find(".nextend-autoplay"),this.slider.controls.autoplay.hasButton=!!this.button.length,this.slider.controls.autoplay._disabled)this.destroy();else{this.slider.controls.autoplay.parameters.start||(this.paused=!0,this.setPaused()),this.deferred=t.Deferred(),this.slider.sliderElement.on({"SliderDevice.n2-widget-autoplay":t.proxy(this.onDevice,this),"autoplayStarted.n2-widget-autoplay":t.proxy(this.setPlaying,this),"autoplayPaused.n2-widget-autoplay":t.proxy(this.setPaused,this),"autoplayDisabled.n2-widget-autoplay":t.proxy(this.destroy,this)}).trigger("addWidget",this.deferred);var a=NextendDeBounce(t.proxy(this.switchState,this),300,!0);this.button.on({n2Activate:a,universalclick:a}),this.desktopRatio=e,this.tabletRatio=i,this.mobileRatio=s,this.button.n2imagesLoaded().always(t.proxy(this.loaded,this))}},i.prototype.loaded=function(){this.button.css("display","inline-block"),this.width=this.button.width(),this.height=this.button.height(),this.button.css("display",""),this.onDevice(null,{device:this.slider.responsive.getDeviceMode()}),this.deferred.resolve()},i.prototype.onDevice=function(t,e){var i=1;switch(e.device){case"tablet":i=this.tabletRatio;break;case"mobile":i=this.mobileRatio;break;default:i=this.desktopRatio}this.button.width(this.width*i),this.button.height(this.height*i)},i.prototype.switchState=function(t){this.slider.controls.autoplay.preventClickHandle(),this.paused?(this.setPlaying(),this.slider.sliderElement.triggerHandler("autoplayExtraContinue","autoplayButton"),this.slider.next()):(this.setPaused(),this.slider.sliderElement.triggerHandler("autoplayExtraWait","autoplayButton"))},i.prototype.setPaused=function(){this.paused=!0,this.button.addClass("n2-autoplay-paused")},i.prototype.setPlaying=function(){this.paused=!1,this.button.removeClass("n2-autoplay-paused")},i.prototype.destroy=function(){this.slider.sliderElement.off(".n2-widget-autoplay"),this.button.remove()},i});