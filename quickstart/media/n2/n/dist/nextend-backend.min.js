(function(){var t=this;t.N2_=t.N2_||{r:[],d:[]},t.N2R=t.N2R||function(){t.N2_.r.push(arguments)},t.N2D=t.N2D||function(){t.N2_.d.push(arguments)}}).call(window),N2R("$",function(t){t.extend(window.nextend,{fontManager:null,styleManager:null,animationManager:null,browse:null,askToSave:!0,cancel:function(t){return nextend.askToSave=!1,window.location.href=t,!1}}),window.n2_=function(t){return"undefined"!=typeof nextend.localization[t]?nextend.localization[t]:t},window.n2_printf=function(t){var e=arguments,i=1;return t.replace(/%s/g,function(){return e[i++]})},window.nextendtime=t.now(),window.nextend.roundTo=5,window.nextend.roundHelper=function(t){return window.nextend.roundTo<=1?t:Math.round(t/window.nextend.roundTo)*window.nextend.roundTo},t.fn.n2opener=function(){return this.each(function(){var e=t(this).on("click",function(t){e.toggleClass("n2-active")});e.siblings("span").on("click",function(t){e.toggleClass("n2-active")}),e.parent().on("mouseleave",function(){e.removeClass("n2-active")}),e.find(".n2-button-menu").on("click",function(t){t.stopPropagation(),e.removeClass("n2-active")})})},"undefined"!=typeof jQuery&&jQuery(document).on("wp-collapse-menu",function(){t(window).trigger("resize")}),nextend.deepDiff=function(){return{map:function(e,i){if(this.isValue(e))return"undefined"!=typeof e&&e!=i?e:void 0;for(var n in i)this.isFunction(i[n])||(e[n]=this.map(e[n],i[n]),(void 0===e[n]||t.isPlainObject(e[n])&&t.isEmptyObject(e[n])||this.isArray(e[n])&&0==e[n].length)&&delete e[n]);return e},isFunction:function(t){return"[object Function]"==={}.toString.apply(t)},isArray:function(t){return"[object Array]"==={}.toString.apply(t)},isObject:function(t){return"[object Object]"==={}.toString.apply(t)},isValue:function(t){return!this.isObject(t)&&!this.isArray(t)}}}(),nextend.UnicodeToHTMLEntity=function(t){function e(t,e){return((1023&t)<<10)+(1023&e)+65536}function i(t){for(var i,n=[],s=0;s<t.length;)i=t.charCodeAt(s),55296==(63488&i)?n.push(e(i,t.charCodeAt(++s))):n.push(i),++s;return"&#"+n+";"}try{for(var n,s=/(?:[\uD800-\uDBFF][\uDC00-\uDFFF])/g;n=s.exec(t);)t=t.substr(0,n.index)+i(t.substr(n.index,s.lastIndex-n.index))+t.substr(s.lastIndex)}catch(o){return console.error(o),t}return t}}),N2D("NextendHeadingPane",function(t,e){function i(e,i,n,s){this.$node=e.data("pane",this),this.headings=i,this.contents=n,this.tabNames=[],this.headings.each(t.proxy(function(e,i){this.tabNames.push(t(i).data("tab"))},this)),this.identifier=s,this._active=i.index(i.filter(".n2-active"));for(var o=0;o<i.length;o++)i.eq(o).on("click",t.proxy(this.switchToPane,this,o));if(s){var r=t.jStorage.get(this.identifier+"-pane",-1);if(-1!=r)return void this.switchToPane(r)}this.hideAndShow()}return i.prototype.switchToPane=function(t,e){e&&e.preventDefault(),this.headings.eq(this._active).removeClass("n2-active"),this.headings.eq(t).addClass("n2-active"),this._active=t,this.hideAndShow(),this.store(this._active),this.$node.triggerHandler("changetab")},i.prototype.hideAndShow=function(){t(this.contents[this._active]).css("display","block").trigger("activate");for(var e=0;e<this.contents.length;e++)e!=this._active&&t(this.contents[e]).css("display","none")},i.prototype.store=function(e){this.identifier&&t.jStorage.set(this.identifier+"-pane",e)},i.prototype.showTabs=function(e){for(var i=!1,n=0;n<this.tabNames.length;n++)"-1"!=t.inArray(this.tabNames[n],e)?(this.headings.eq(n).css("display",""),t(this.contents[n]).css("display",""),n==this._active?i=n:i===!1&&(i=n)):(this.headings.eq(n).css("display","none"),t(this.contents[n]).css("display","none"));this.switchToPane(i)},i}),N2D("NextendHeadingScrollToPane",function(t,e){function i(e,i,n){this.headings=e,this.contents=i,this.identifier=n;for(var s=0;s<e.length;s++)e.eq(s).on("click",t.proxy(this.scrollToPane,this,s))}return i.prototype.scrollToPane=function(e,i){i&&i.preventDefault(),t("html, body").animate({scrollTop:this.contents[e].offset().top-t(".n2-main-top-bar").height()-t("#wpadminbar, .navbar-fixed-top").height()-10},1e3)},i}),N2D("WindowManager",function(t,e){function i(){this.window=["main"],this.mouseDownArea=!1,this.timeout=null,this.isPreventDblClick=!1,this.dblClickTimeout=null}i.prototype.addWindow=function(t){this.window.push(t)},i.prototype.removeWindow=function(){this.window.pop()},i.prototype.getCurrentWindow=function(){return this.window[this.window.length-1]},i.prototype.setMouseDownArea=function(e,i){this.mouseDownArea=e,this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(t.proxy(function(){this.timeout=null,this.mouseDownArea=!1},this),50)},i.prototype.preventDblClick=function(){this.isPreventDblClick=!0,this.dblClickTimeout&&clearTimeout(this.dblClickTimeout),this.dblClickTimeout=setTimeout(t.proxy(function(){this.dblClickTimeout=null,this.isPreventDblClick=!1},this),200)};var n=new i;return i.get=function(){return n},i.setMouseDownArea=function(){n.setMouseDownArea.apply(n,arguments)},i}),N2D("AjaxHelper",function(t,e){function i(){}var n=null;return i.query={},i.addAjaxLoader=function(){n=t('<div class="n2-loader-overlay"><div class="n2-loader"></div></div>').appendTo("body")},i.addAjaxArray=function(t){for(var e in t)i.query[e]=t[e]},i.makeAjaxQuery=function(t,e){e&&(t.mode="ajax",t.nextendajax="1");for(var n in i.query)t[n]=i.query[n];return N2Classes.N2QueryString.stringify(t)},i.makeAjaxUrl=function(t,e){var n=t.split("?");n.length<2&&(n[1]="");var s=N2Classes.N2QueryString.parse(n[1]);if("undefined"!=typeof e)for(var o in e)s[o]=e[o];return n[0]+"?"+i.makeAjaxQuery(s,!0)},i.makeFallbackUrl=function(t,e){var n=t.split("?");n.length<2&&(n[1]="");var s=N2Classes.N2QueryString.parse(n[1]);if("undefined"!=typeof e)for(var o in e)s[o]=e[o];return n[0]+"?"+i.makeAjaxQuery(s,!1)},i.ajax=function(n){return i.startLoading(),t.ajax(n).always(function(t,n){i.stopLoading();try{if("success"!=n?t=JSON.parse(t.responseText):"string"==typeof t&&(t=JSON.parse(t)),t.redirect!==e)return i.startLoading(),void(window.location.href=t.redirect);i.notification(t)}catch(s){var o=/<body[^>]*>((.|[\n\r])*)<\/body>/im,r=o.exec(t.responseText);r.length?N2Classes.NextendModal.SafeHTML(t.status,r[1]):console.error(t.responseText,t)}})},i.notification=function(t){if("undefined"!=typeof t.notification&&t.notification)for(var e in t.notification)for(var i=0;i<t.notification[e].length;i++)N2Classes.Notification[e](t.notification[e][i][0],t.notification[e][i][1])},i.getJSON=function(e){return i.startLoading(),t.getJSON(e).always(function(){i.stopLoading()})},i.startLoading=function(){n.addClass("n2-active")},i.stopLoading=function(){n.removeClass("n2-active")},N2R("documentReady",function(){i.addAjaxLoader()}),i}),N2D("Esc",function(t,e){function i(){this.FiLo=[],this.doc=t(document),this.isListening=!1}return i.prototype.add=function(e){this.FiLo.push(e),this.isListening||(this.doc.on("keydown.n2-esc",t.proxy(function(e){if(27==e.keyCode||8==e.keyCode)if(t(e.target).is("input, textarea"))27==e.keyCode&&(e.preventDefault(),t(e.target).blur());else{e.preventDefault();var i=this.FiLo[this.FiLo.length-1]();i&&this.pop()}},this)),this.isListening=!0)},i.prototype.pop=function(){this.FiLo.pop(),0===this.FiLo.length&&(this.doc.off("keydown.n2-esc"),this.isListening=!1)},new i}),N2D("tooltip",function(t,e){function i(){this.$element=t('<div class="n2 n2-tooltip n2-radius-m"></div>'),this.timeout=null,this.$tipFor=null,t(window).ready(t.proxy(this.ready,this))}function n(){this.isVisible=!1,this.$body=t("body"),this.$element=t('<div class="n2 n2-tooltip n2-radius-m"></div>').appendTo(this.$body)}return i.prototype.ready=function(){this.$element.appendTo("body"),this.add(t("body"))},i.prototype.add=function(e){e.find("[data-n2tip]").off(".n2hastip").on({"mouseenter.n2hastip":t.proxy(this.onEnter,this)})},i.prototype.addElement=function(e,i,n,s){e.data({n2tip:i,n2tipv:s,n2tiph:n}).off(".n2hastip").on({"mouseenter.n2hastip":t.proxy(this.onEnter,this)})},i.prototype.onEnter=function(e){this.timeout&&clearTimeout(this.timeout),this.$tipFor=t(e.currentTarget).on({"mousemove.n2tip":t.proxy(this.onMove,this),"mouseleave.n2tip":t.proxy(this.onLeave,this)}),this.onMove(e),this.timeout=setTimeout(t.proxy(function(){var t=this.$tipFor.data("n2tipv"),e=this.$tipFor.data("n2tiph");"undefined"==typeof t&&(t=10),"undefined"==typeof e&&(e=10),this.$element.css({margin:t+"px "+e+"px"}).html(this.$tipFor.data("n2tip")).addClass("n2-active")},this),500)},i.prototype.onMove=function(t){this.$element.css({left:t.pageX,top:t.pageY})},i.prototype.onLeave=function(t){this.timeout&&clearTimeout(this.timeout),this.$tipFor&&(this.$tipFor.off(".n2tip"),this.$tipFor=null,this.$element.removeClass("n2-active").css("margin",""))},n.prototype.show=function(e,i){this.isVisible?this.$element.html(e):(this.isVisible=!0,this.$body.on("mousemove.tooltipMouse",t.proxy(this.mouseMove,this)),this.mouseMove(i),this.$element.html(e).addClass("n2-active"))},n.prototype.mouseMove=function(t){this.$element.css({left:t.pageX+10,top:t.pageY+10})},n.prototype.hide=function(){this.$body.off("mousemove.tooltipMouse"),this.$element.removeClass("n2-active").html(""),this.isVisible=!1},nextend.tooltip=new i,t(window).ready(function(){nextend.tooltipMouse=new n}),nextend.tooltip}),window.N2Color={hex2rgba:function(t){var e=parseInt(t,16);return[e>>24&255,e>>16&255,e>>8&255,(255&e)/255]},hex2rgbaCSS:function(t){return"RGBA("+N2Color.hex2rgba(t).join(",")+")"},hexdec:function(t){return t=(t+"").replace(/[^a-f0-9]/gi,""),parseInt(t,16)},hex2alpha:function(t){var e=parseInt(t,16);return((255&e)/255).toFixed(3)},colorizeSVG:function(t,e){var i=t.split("base64,");return 1==i.length?t:(i[1]=N2Classes.Base64.encode(N2Classes.Base64.decode(i[1]).replace('fill="#FFF"','fill="#'+e.substr(0,6)+'"').replace('opacity="1"','opacity="'+N2Color.hex2alpha(e)+'"')),i.join("base64,"))},colorToSVG:function(t){var e=parseInt(t,16);return[t.substr(0,6),(255&e)/255]}},N2D("N2QueryString",function(t,e){"use strict";var i={parse:function(t){return"string"!=typeof t?{}:(t=t.trim().replace(/^(\?|#)/,""),t?t.trim().split("&").reduce(function(t,i){var n=i.replace(/\+/g," ").split("="),s=n[0],o=n[1];return s=decodeURIComponent(s),o=o===e?null:decodeURIComponent(o),t.hasOwnProperty(s)?Array.isArray(t[s])?t[s].push(o):t[s]=[t[s],o]:t[s]=o,t},{}):{})},stringify:function(t){return t?Object.keys(t).map(function(e){var i=t[e];return Array.isArray(i)?i.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):encodeURIComponent(e)+"="+encodeURIComponent(i)}).join("&"):""}};return i}),!function(t){function e(t){for(var e=enc="",i=end=0,n=0,s=t.length;s>n;n++){var o=t.charCodeAt(n);128>o?end++:(o>127&&2048>o?enc=String.fromCharCode(o>>6|192,63&o|128):enc=String.fromCharCode(o>>12|224,o>>6&63|128,63&o|128),end>i&&(e+=t.slice(i,end)),e+=enc,i=end=n+1)}return end>i&&(e+=t.slice(i,s)),e}function i(t){var e,i;if(t+="",g=!1,v=y=t.length,y>63){for(n(t.substring(0,64)),r(c),g=!0,e=128;y>=e;e+=64)n(t.substring(e-64,e)),a(c);t=t.substring(e-64),y=t.length}for(p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0,p[5]=0,p[6]=0,p[7]=0,p[8]=0,p[9]=0,p[10]=0,p[11]=0,p[12]=0,p[13]=0,p[14]=0,p[15]=0,e=0;y>e;e++)i=e%4,0===i?p[e>>2]=t.charCodeAt(e):p[e>>2]|=t.charCodeAt(e)<<f[i];return p[e>>2]|=u[e%4],e>55?(g?a(p):(r(p),g=!0),a([0,0,0,0,0,0,0,0,0,0,0,0,0,0,v<<3,0])):(p[14]=v<<3,void(g?a(p):r(p)))}function n(t){for(var e=16;e--;){var i=e<<2;c[e]=t.charCodeAt(i)+(t.charCodeAt(i+1)<<8)+(t.charCodeAt(i+2)<<16)+(t.charCodeAt(i+3)<<24)}}function s(t,n,s){i(n?t:e(t));var o=m[0];return h[1]=d[15&o],h[0]=d[15&(o>>=4)],h[3]=d[15&(o>>=4)],h[2]=d[15&(o>>=4)],h[5]=d[15&(o>>=4)],h[4]=d[15&(o>>=4)],h[7]=d[15&(o>>=4)],h[6]=d[15&(o>>=4)],o=m[1],h[9]=d[15&o],h[8]=d[15&(o>>=4)],h[11]=d[15&(o>>=4)],h[10]=d[15&(o>>=4)],h[13]=d[15&(o>>=4)],h[12]=d[15&(o>>=4)],h[15]=d[15&(o>>=4)],h[14]=d[15&(o>>=4)],o=m[2],h[17]=d[15&o],h[16]=d[15&(o>>=4)],h[19]=d[15&(o>>=4)],h[18]=d[15&(o>>=4)],h[21]=d[15&(o>>=4)],h[20]=d[15&(o>>=4)],h[23]=d[15&(o>>=4)],h[22]=d[15&(o>>=4)],o=m[3],h[25]=d[15&o],h[24]=d[15&(o>>=4)],h[27]=d[15&(o>>=4)],h[26]=d[15&(o>>=4)],h[29]=d[15&(o>>=4)],h[28]=d[15&(o>>=4)],h[31]=d[15&(o>>=4)],h[30]=d[15&(o>>=4)],s?h:h.join("")}function o(t,e,i,n,s,o,r){return e+=t+n+r,(e<<s|e>>>o)+i<<0}function r(t){l(0,0,0,0,t),m[0]=b[0]+1732584193<<0,m[1]=b[1]-271733879<<0,m[2]=b[2]-1732584194<<0,m[3]=b[3]+271733878<<0}function a(t){l(m[0],m[1],m[2],m[3],t),m[0]=b[0]+m[0]<<0,m[1]=b[1]+m[1]<<0,m[2]=b[2]+m[2]<<0,m[3]=b[3]+m[3]<<0}function l(t,e,i,n,s){var r,a;g?(t=o((i^n)&e^n,t,e,s[0],7,25,-680876936),n=o((e^i)&t^i,n,t,s[1],12,20,-389564586),i=o((t^e)&n^e,i,n,s[2],17,15,606105819),e=o((n^t)&i^t,e,i,s[3],22,10,-1044525330)):(t=s[0]-680876937,t=(t<<7|t>>>25)-271733879<<0,n=s[1]-117830708+(2004318071&t^-1732584194),n=(n<<12|n>>>20)+t<<0,i=s[2]-1126478375+((-271733879^t)&n^-271733879),i=(i<<17|i>>>15)+n<<0,e=s[3]-1316259209+((n^t)&i^t),e=(e<<22|e>>>10)+i<<0),t=o((i^n)&e^n,t,e,s[4],7,25,-176418897),n=o((e^i)&t^i,n,t,s[5],12,20,1200080426),i=o((t^e)&n^e,i,n,s[6],17,15,-1473231341),e=o((n^t)&i^t,e,i,s[7],22,10,-45705983),t=o((i^n)&e^n,t,e,s[8],7,25,1770035416),n=o((e^i)&t^i,n,t,s[9],12,20,-1958414417),i=o((t^e)&n^e,i,n,s[10],17,15,-42063),e=o((n^t)&i^t,e,i,s[11],22,10,-1990404162),t=o((i^n)&e^n,t,e,s[12],7,25,1804603682),n=o((e^i)&t^i,n,t,s[13],12,20,-40341101),i=o((t^e)&n^e,i,n,s[14],17,15,-1502002290),e=o((n^t)&i^t,e,i,s[15],22,10,1236535329),t=o((e^i)&n^i,t,e,s[1],5,27,-165796510),n=o((t^e)&i^e,n,t,s[6],9,23,-1069501632),i=o((n^t)&e^t,i,n,s[11],14,18,643717713),e=o((i^n)&t^n,e,i,s[0],20,12,-373897302),t=o((e^i)&n^i,t,e,s[5],5,27,-701558691),n=o((t^e)&i^e,n,t,s[10],9,23,38016083),i=o((n^t)&e^t,i,n,s[15],14,18,-660478335),e=o((i^n)&t^n,e,i,s[4],20,12,-405537848),t=o((e^i)&n^i,t,e,s[9],5,27,568446438),n=o((t^e)&i^e,n,t,s[14],9,23,-1019803690),i=o((n^t)&e^t,i,n,s[3],14,18,-187363961),e=o((i^n)&t^n,e,i,s[8],20,12,1163531501),t=o((e^i)&n^i,t,e,s[13],5,27,-1444681467),n=o((t^e)&i^e,n,t,s[2],9,23,-51403784),i=o((n^t)&e^t,i,n,s[7],14,18,1735328473),e=o((i^n)&t^n,e,i,s[12],20,12,-1926607734),r=e^i,t=o(r^n,t,e,s[5],4,28,-378558),n=o(r^t,n,t,s[8],11,21,-2022574463),a=n^t,i=o(a^e,i,n,s[11],16,16,1839030562),e=o(a^i,e,i,s[14],23,9,-35309556),r=e^i,t=o(r^n,t,e,s[1],4,28,-1530992060),n=o(r^t,n,t,s[4],11,21,1272893353),a=n^t,i=o(a^e,i,n,s[7],16,16,-155497632),e=o(a^i,e,i,s[10],23,9,-1094730640),r=e^i,t=o(r^n,t,e,s[13],4,28,681279174),n=o(r^t,n,t,s[0],11,21,-358537222),a=n^t,i=o(a^e,i,n,s[3],16,16,-722521979),e=o(a^i,e,i,s[6],23,9,76029189),r=e^i,t=o(r^n,t,e,s[9],4,28,-640364487),n=o(r^t,n,t,s[12],11,21,-421815835),a=n^t,i=o(a^e,i,n,s[15],16,16,530742520),e=o(a^i,e,i,s[2],23,9,-995338651),t=o(i^(e|~n),t,e,s[0],6,26,-198630844),n=o(e^(t|~i),n,t,s[7],10,22,1126891415),i=o(t^(n|~e),i,n,s[14],15,17,-1416354905),e=o(n^(i|~t),e,i,s[5],21,11,-57434055),t=o(i^(e|~n),t,e,s[12],6,26,1700485571),n=o(e^(t|~i),n,t,s[3],10,22,-1894986606),i=o(t^(n|~e),i,n,s[10],15,17,-1051523),e=o(n^(i|~t),e,i,s[1],21,11,-2054922799),t=o(i^(e|~n),t,e,s[8],6,26,1873313359),n=o(e^(t|~i),n,t,s[15],10,22,-30611744),i=o(t^(n|~e),i,n,s[6],15,17,-1560198380),e=o(n^(i|~t),e,i,s[13],21,11,1309151649),t=o(i^(e|~n),t,e,s[4],6,26,-145523070),n=o(e^(t|~i),n,t,s[11],10,22,-1120210379),i=o(t^(n|~e),i,n,s[2],15,17,718787259),e=o(n^(i|~t),e,i,s[9],21,11,-343485551),b[0]=t,b[1]=e,b[2]=i,b[3]=n}var h=[],p=[],c=[],u=[],d="0123456789abcdef".split(""),f=[],m=[],g=!1,v=0,y=0,b=[];if(t.Int32Array)p=new Int32Array(16),c=new Int32Array(16),u=new Int32Array(4),f=new Int32Array(4),m=new Int32Array(4),b=new Int32Array(4);else{var x;for(x=0;16>x;x++)p[x]=c[x]=0;for(x=0;4>x;x++)u[x]=f[x]=m[x]=b[x]=0}u[0]=128,u[1]=32768,u[2]=8388608,u[3]=-2147483648,f[0]=0,f[1]=8,f[2]=16,f[3]=24,t.md5=t.md5||s}(window),N2D("NextendCSS",function(t,e){function i(){this.style=""}return i.prototype.add=function(t){var e=document.body||document.getElementsByTagName("body")[0],i=document.createElement("style");e.appendChild(i),i.type="text/css",i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))},i.prototype.deleteRule=function(t){for(var e=t.toLowerCase(),i=e.replace(".","\\."),n=document.styleSheets.length-1;n>=0;n--)for(var s=this._getRulesArray(n),o=0;s&&o<s.length;o++)if(s[o].selectorText){var r=s[o].selectorText.toLowerCase();r!=e&&r!=i||(document.styleSheets[n].cssRules?document.styleSheets[n].deleteRule(o):document.styleSheets[n].removeRule(o))}return null},i.prototype._getRulesArray=function(t){var e=null;try{document.styleSheets[t].cssRules?e=document.styleSheets[t].cssRules:document.styleSheets[t].rules&&(e=document.styleSheets[t].rules)}catch(i){}return e},window.nextend.css=new i,window.nextend.css}),N2D("ImageHelper",function(t,e){function i(e,n,s,o){i.prototype.openLightbox=n,i.prototype.openMultipleLightbox=s,i.prototype.openFoldersLightbox=o,nextend.imageHelper=this,this.parameters=t.extend({siteKeywords:[],imageUrls:[],wordpressUrl:"",placeholderImage:"",placeholderRepeatedImage:"",protocolRelative:1},e)}return i.prototype.protocolRelative=function(t){return this.parameters.protocolRelative?t.replace(/^http(s)?:\/\//,"//"):t},i.prototype.make=function(t){return this.dynamic(t)},i.prototype.dynamic=function(t){for(var e=this.parameters.imageUrls,i=this.parameters.siteKeywords,n=this.protocolRelative(t),s=0;s<i.length;s++)if(0===n.indexOf(e[s])){t=i[s]+n.slice(e[s].length);break}return t},i.prototype.fixed=function(t){for(var e=this.parameters.imageUrls,i=this.parameters.siteKeywords,n=0;n<i.length;n++)if(0===t.indexOf(i[n])){t=e[n]+t.slice(i[n].length);break}return t},i.prototype.openLightbox=function(t){},i.prototype.openMultipleLightbox=function(t){},i.prototype.openFoldersLightbox=function(t){},i.prototype.getPlaceholder=function(){return this.fixed(this.parameters.placeholderImage)},i.prototype.getRepeatedPlaceholder=function(){return this.fixed(this.parameters.placeholderRepeatedImage)},i}),N2D("NextendModal",function(t,e){function i(e,i,s){this.inited=!1,this.currentPane=null,this.customClass="",this.$=t(this),this.counter=n++,this.panes=e,i&&this.show(null,s)}var n=0;return i.prototype.setCustomClass=function(t){this.customClass=t},i.prototype.lateInit=function(){if(!this.inited){for(var e in this.panes)this.panes[e]=t.extend({customClass:"",fit:!1,fitX:!0,overflow:"hidden",size:!1,back:!1,close:!0,controlsClass:"",controls:[],fn:{}},this.panes[e]);var i=!1;this.modal=t('<div class="n2-modal '+this.customClass+'"/>').css("opacity",0).on("click",t.proxy(function(e){0==i&&(this.close.hasClass("n2-hidden")||0!=t(e.target).closest(".n2-notification-center-modal").length||this.hide(e)),i=!1},this)),this.window=t('<div class="n2-modal-window n2-border-radius"/>').on("click",function(t){i=!0}).appendTo(this.modal),this.notificationStack=new N2Classes.NotificationStackModal(this.modal);var n=t('<div class="n2-modal-title n2-content-box-title-bg"/>').appendTo(this.window);this.title=t('<div class="n2-h2 n2-ucf"/>').appendTo(n),this.back=t('<i class="n2-i n2-i-a-back"/>').on("click",t.proxy(this.goBackButton,this)).appendTo(n),this.close=t('<i class="n2-i n2-i-a-deletes"/>').on("click",t.proxy(this.hide,this)).appendTo(n),this.content=t('<div class="n2-modal-content"/>').appendTo(this.window),this.controls=t('<div class="n2-table n2-table-fixed n2-table-auto"/>'),t('<div class="n2-modal-controls"/>').append(this.controls).appendTo(this.window),this.inited=!0}},i.prototype.show=function(e,i){this.lateInit(),this.notificationStack.enableStack(),"undefined"!=typeof e&&e||(e="zero"),N2Classes.WindowManager.get().addWindow("modal"),N2Classes.Esc.add(t.proxy(function(){return this.close.hasClass("n2-hidden")?!1:(this.hide("esc"),!0)},this)),this.loadPane(e,!1,!0,i),NextendTween.fromTo(this.modal,.3,{opacity:0},{opacity:1,ease:"easeOutCubic"})},i.prototype.hide=function(e){t(window).off(".n2-modal-"+this.counter),this.notificationStack.popStack(),N2Classes.WindowManager.get().removeWindow(),arguments.length>0&&"esc"!=e&&N2Classes.Esc.pop(),this.apply("hide"),this.apply("destroy"),this.currentPane=null,this.modal.detach(),t(document).off("keyup.n2-esc-modal")},i.prototype.destroy=function(){this.modal.remove()},i.prototype.loadPane=function(e,i,n,s){var o=t.proxy(function(){var o=this.panes[e];this.currentPane=o,o.title!==!1&&this.title.html(o.title),o.back===!1?this.back.addClass("n2-hidden"):this.back.removeClass("n2-hidden"),o.close===!1?this.close.addClass("n2-hidden"):this.close.removeClass("n2-hidden"),this.content.find("> *").detach(),this.content.append(o.content);for(var r=!1,a=t('<div class="n2-tr" />'),l=0;l<o.controls.length;l++)t('<div class="n2-td"/>').addClass("n2-modal-controls-"+l).html(o.controls[l]).appendTo(a),r=!0;if(a.addClass("n2-modal-controls-"+l),this.controls.html(a),this.controls.attr("class","n2-table n2-table-fixed n2-table-auto "+o.controlsClass),"undefined"!=typeof n&&n||NextendTween.fromTo(this.window,.3,{x:i?-2e3:2e3},{x:0,ease:"easeOutCubic"}),this.modal.appendTo("#n2-admin"),o.fit){var h=t(window),p=40,c=t.proxy(function(){var t=h.width()-2*p,e=h.height()-2*p;o.fitX||(t=o.size[0]),this.window.css({width:t,height:e,marginLeft:t/-2,marginTop:e/-2}),this.content.css({height:e-60-(r?this.controls.parent().outerHeight(!0):0),overflow:o.overflow})},this);c(),h.on("resize.n2-modal-"+this.counter,c)}else o.size!==!1&&(this.window.css({width:o.size[0],height:o.size[1],marginLeft:o.size[0]/-2,marginTop:o.size[1]/-2}),this.content.css({height:o.size[1]-60-(r?this.controls.parent().outerHeight(!0):0),overflow:o.overflow}));this.apply("show",s)},this);null!==this.currentPane?(this.apply("destroy"),NextendTween.to(this.window,.3,{x:i?2e3:-2e3,onComplete:o,ease:"easeOutCubic"})):o()},i.prototype.trigger=function(t,e){this.$.trigger(t,e)},i.prototype.on=function(t,e){this.$.on(t,e)},i.prototype.one=function(t,e){this.$.one(t,e)},i.prototype.off=function(t,e){this.$.off(t,e)},i.prototype.goBackButton=function(){var t=null;null!==typeof this.goBackArgs&&(t=this.goBackArgs,this.goBackArgs=null),this.goBack(t)},i.prototype.goBack=function(t){this.apply("goBack",t)&&this.loadPane(this.currentPane.back,!0,!1,t)},i.prototype.apply=function(t,e){return"undefined"!=typeof this.currentPane.fn[t]?this.currentPane.fn[t].apply(this,e):!0},i.prototype.createInput=function(e,i){var n="";return 3==arguments.length&&(n=arguments[2]),t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" value="" class="n2-h5" autocomplete="off" style="'+n+'"></div></div></div></div>')},i.prototype.createInputUnit=function(e,i,n){var s="";return 4==arguments.length&&(s=arguments[3]),t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" value="" class="n2-h5" autocomplete="off" style="'+s+'"><div class="n2-text-unit n2-h5 n2-uc">'+n+"</div></div></div></div></div>")},i.prototype.createInputSub=function(e,i,n){var s="";return 4==arguments.length&&(s=arguments[3]),t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n+'</div><input type="text" id="'+i+'" value="" class="n2-h5" autocomplete="off" style="'+s+'"></div></div></div></div>')},i.prototype.createTextarea=function(e,i){var n="";return 3==arguments.length&&(n=arguments[2]),t('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-textarea n2-border-radius"><textarea id="'+i+'" class="n2-h5" autocomplete="off" style="resize:none;'+n+'"></textarea></div></div></div></div>')},i.prototype.createSelect=function(e,i,n){var s="";4==arguments.length&&(s=arguments[3]),$group=t('<div class="n2-form-element-mixed"><div class="n2-mixed-group "><div class="n2-mixed-label"><label for="'+i+'">'+e+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list" style=""><select id="'+i+'" autocomplete="off" style="'+s+'"></select></div></div></div></div>'),$select=$group.find("select");for(var o in n)t('<option value="'+o+'"></option>').text(n[o]).appendTo($select);return $select.prop("selectedIndex",0),$group},i.prototype.createHeading=function(e){return t('<h3 class="n2-h3">'+e+"</h3>")},i.prototype.createSubHeading=function(e){return t('<h3 class="n2-h4">'+e+"</h3>")},i.prototype.createCenteredHeading=function(e){return t('<h3 class="n2-h3 n2-center">'+e+"</h3>")},i.prototype.createCenteredSubHeading=function(e){return t('<h3 class="n2-h4 n2-center">'+e+"</h3>")},i.prototype.createResult=function(){return t('<div class="n2-result"></div>')},i.prototype.createTable=function(e,i){for(var n=t('<table class="n2-table-fancy"/>'),s=0;s<e.length;s++)for(var o=t("<tr />").appendTo(n),r=0;r<e[s].length;r++)o.append(t('<td style="'+i[r]+'"/>').append(e[s][r]));return n},i.prototype.createTableWrap=function(){return t('<div class="n2-table-fancy-wrap" style="overflow:auto;height:196px;" />')},i.prototype.createImageRadio=function(e){for(var i=t('<div class="n2-modal-radio" />'),n=t('<input type="hidden" value="'+e[0].key+'"/>').appendTo(i),s=0;s<e.length;s++){var o="'"+nextend.imageHelper.fixed(e[s].image)+"'";i.append('<div class="n2-modal-radio-option" data-key="'+e[s].key+'" style="background-image: url('+o+')"><div class="n2-h4">'+e[s].name+"</div></div>")}var e=i.find(".n2-modal-radio-option");return e.eq(0).addClass("n2-active"),e.on("click",function(i){e.removeClass("n2-active");var s=t(i.currentTarget);s.addClass("n2-active"),n.val(s.data("key"))}),i},i.settings=function(t,e){new N2Classes.NextendModal({zero:{size:[1300,700],title:t,content:'<iframe src="'+e+'" width="1300" height="640" frameborder="0" style="margin:0 -20px -20px -20px;"></iframe>'}},!0)},i.documentation=function(t,e){new N2Classes.NextendModal({zero:{size:[760,700],title:t,content:'<iframe src="'+e+'" width="760" height="640" frameborder="0" style="margin:0 -20px -20px -20px;"></iframe>'}},!0)},i.newFullWindow=function(t,e){var i=["height="+screen.height,"width="+screen.width,"fullscreen=yes"].join(","),n=window.open(t,e,i);return n.moveTo(0,0),n},i.deleteModal=function(e,i,n){return t.jStorage.get("n2-delete-"+e,!1)?(n(),!0):(new N2Classes.NextendModal({zero:{size:[500,190],title:n2_("Delete"),back:!1,close:!0,content:"",controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-grey n2-uc n2-h4">'+n2_("Cancel")+"</a>",'<div class="n2-button n2-button-with-actions n2-button-l n2-radius-s n2-button-red"><a href="#" class="n2-button-inner n2-uc n2-h4">'+n2_("Delete")+'</a><div class="n2-button-menu-open"><i class="n2-i n2-i-buttonarrow"></i><div class="n2-button-menu"><div class="n2-button-menu-inner n2-border-radius"><a href="#" class="n2-h4">'+n2_("Delete and never ask for confirmation again")+"</a></div></div></div></div>"],fn:{show:function(){this.createCenteredSubHeading(n2_("Are you sure you want to delete?")).appendTo(this.content),this.controls.find(".n2-button-grey").on("click",t.proxy(function(t){t.preventDefault(),this.hide(t)},this)),this.controls.find(".n2-button-red a").on("click",t.proxy(function(t){t.preventDefault(),n(),this.hide(t)},this)),this.controls.find(".n2-button-red .n2-button-menu-inner a").on("click",t.proxy(function(i){i.preventDefault(),t.jStorage.set("n2-delete-"+e,!0)},this)),this.controls.find(".n2-button-menu-open").n2opener()},destroy:function(){this.destroy()}}}},!0),!1)},i.deleteModalLink=function(e,i,n){return N2Classes.NextendModal.deleteModal(i,n,function(){window.location.href=t(e).attr("href")}),!1},i.SafeHTML=function(e,i){var n=new N2Classes.NextendModal({zero:{fit:!0,size:[1300,700],title:e,content:""}},!0);n.content.removeClass("n2-modal-content").css("padding","0 20px 20px");var s,o=t(i.replace(/document\.write/g,"n2Write"));window.n2Write=t.proxy(function(e){t("<span />").html(e).appendTo(n.content)},this),o.each(t.proxy(function(e,i){s=t(i),s.appendTo(n.content)},this)),delete window.n2Write},i}),N2D("NextendSimpleModal",function(t,e){function i(e,i){this.$=t(this),this.options=t.extend({"class":""},i),this.modal=t('<div class="n2-modal n2-modal-simple"/>').addClass(this.options["class"]).css({display:"none"}).appendTo("#n2-admin"),t('<i class="n2-i n2-i-a-deletes"/>').on("click",t.proxy(this.hide,this)).appendTo(this.modal),this.window=t('<div class="n2-modal-window"/>').on("click",function(t){t.stopPropagation()}).appendTo(this.modal),this.notificationStack=new N2Classes.NotificationStackModal(this.modal),this.content=t(e).appendTo(this.window)}return i.prototype.resize=function(){this.window.width(this.modal.width()),this.window.height(this.modal.height())},i.prototype.show=function(){t("body").addClass("n2-modal-active"),this.modal.css("display","block"),this.resize(),t(window).on("resize.n2-simple-modal",t.proxy(this.resize,this)),this.notificationStack.enableStack(),N2Classes.Esc.add(t.proxy(function(){return this.hide("esc"),!0},this))},i.prototype.hide=function(e){this.notificationStack.popStack(),arguments.length>0&&"esc"!=e&&N2Classes.Esc.pop(),this.modal.css("display","none"),t("body").removeClass("n2-modal-active"),t(document).off("keyup.n2-esc-modal"),t(window).off(".n2-simple-modal"),this.modal.trigger("ModalHide")},i}),N2D("Spectrum",function(t,e){function i(t,e,i){for(var n=[],s=0;s<t.length;s++){var o=u(t[s]),r=o.toHsl().l<.5?"n2-sp-thumb-el n2-sp-thumb-dark":"n2-sp-thumb-el n2-sp-thumb-light";r+=u.equals(e,t[s])?" n2-sp-thumb-active":"";var a="background-color:"+o.toRgbString();n.push('<span title="'+o.toRgbString()+'" data-color="'+o.toRgbString()+'" class="'+r+'"><span class="n2-sp-thumb-inner" style="'+a+';" /></span>')}return"<div class='n2-sp-cf "+i+"'>"+n.join("")+"</div>"}function n(){for(var t=0;t<f.length;t++)f[t]&&f[t].hide()}function s(e,i){var n=t.extend({},d,e);return n.callbacks={move:h(n.move,i),change:h(n.change,i),show:h(n.show,i),hide:h(n.hide,i),beforeShow:h(n.beforeShow,i)},n}function o(o,a){function h(t){gt.toggleClass("n2-sp-flat",B),gt.toggleClass("n2-sp-input-disabled",!W.showInput),gt.toggleClass("n2-sp-alpha-enabled",W.showAlpha),gt.toggleClass("n2-sp-buttons-disabled",!W.showButtons||B),gt.toggleClass("n2-sp-palette-disabled",!W.showPalette),gt.toggleClass("n2-sp-palette-only",W.showPaletteOnly),gt.toggleClass("n2-sp-initial-disabled",!W.showInitial),gt.addClass(W.className),"undefined"==typeof t&&j()}function d(){function e(e){return e.data&&e.data.ignore?(F(t(this).data("color")),P()):(F(t(this).data("color")),z(!0),P(),N()),!1}m&&gt.find("*:not(input)").attr("unselectable","on");var i=ft.parent().find(".n2-sp-replacer");if(i.length?Ot=i:(Ot=Ft?t(v).addClass(Y):t([]),Ft&&ft.parent().after(Ot)),It=Ft?Ot:ft,Pt=Ot.find(".n2-sp-preview-inner"),h(!0),B?ft.parent().after(gt).hide():t(dt).append(gt.hide()),V&&window.localStorage)try{pt=window.localStorage[V].split(";")}catch(n){}It.bind("click.spectrum touchstart.spectrum",function(e){mt||T(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(ft.is(":disabled")||W.disabled===!0)&&R(),gt.click(l),Ct.change(D),Ct.bind("paste",function(){setTimeout(D,1)}),Ct.keydown(function(t){13==t.keyCode&&D()}),kt.text(W.cancelText),kt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),N("cancel")}),Nt.text(W.chooseText),Nt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),I()&&(z(!0),N())}),p(_t,function(t,e,i){at=t/et,i.shiftKey&&(at=Math.round(10*at)/10),P()}),p(bt,function(t,e){st=parseFloat(e/Q),P()},S,C),p(vt,function(t,e){ot=parseFloat(t/K),rt=parseFloat((G-e)/G),P()},S,C),Et?(F(Et),E(),jt=zt||u(Et).format,b(Et)):E(),B&&k();var s=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";
Dt.delegate(".n2-sp-thumb-el",s,e),Tt.delegate(".n2-sp-thumb-el:nth-child(1)",s,{ignore:!0},e)}function b(e){if(L){var i=u(e).toRgbString();if(-1===t.inArray(i,pt)&&pt.push(i),V&&window.localStorage)try{window.localStorage[V]=pt.join(";")}catch(n){}}}function x(){var t,e=[],i=pt,n={};if(W.showPalette){for(var s=0;s<ht.length;s++)for(var o=0;o<ht[s].length;o++)t=u(ht[s][o]).toRgbString(),n[t]=!0;for(s=0;s<i.length;s++)t=u(i[s]).toRgbString(),n.hasOwnProperty(t)||(e.push(i[s]),n[t]=!0)}return e.reverse().slice(0,W.maxSelectionSize)}function w(){var e=O(),n=t.map(ht,function(t,n){return i(t,e,"n2-sp-palette-row n2-sp-palette-row-"+n)});pt&&n.push(i(x(),e,"n2-sp-palette-row n2-sp-palette-row-selection")),Dt.html(n.join(""))}function _(){if(W.showInitial){var t=At,e=O();Tt.html(i([t,e],e,"n2-sp-palette-row-initial"))}}function S(){0!==G&&0!==K&&0!==Q||j(),gt.addClass(ct)}function C(){gt.removeClass(ct)}function D(){var t=u(Ct.val());t.ok?F(t):Ct.addClass("n2-sp-validation-error")}function T(){q?N():k()}function k(){return q?void j():void(X.beforeShow(O())!==!1&&(n(),q=!0,t(ut).bind("click.spectrum",N),t(window).bind("resize.spectrum",J),Ot.addClass("n2-sp-active"),gt.show(),W.showPalette&&w(),j(),E(),At=O(),_(),X.show(At)))}function N(e){if((!e||"click"!=e.type||2!=e.button)&&q&&!B){q=!1,t(ut).unbind("click.spectrum",N),t(window).unbind("resize.spectrum",J),Ot.removeClass("n2-sp-active"),gt.hide();var i=!u.equals(O(),At);i&&(Ht&&"cancel"!==e?z(!0):M()),X.hide(O())}}function M(){F(At,!0)}function F(t,e){if(!u.equals(t,O())){var i=u(t),n=i.toHsv();st=n.h,ot=n.s,rt=n.v,at=n.a,E(),e||(jt=zt||i.format)}}function O(){return u.fromRatio({h:st,s:ot,v:rt,a:Math.round(100*at)/100})}function I(){return!Ct.hasClass("n2-sp-validation-error")}function P(){E(),X.move(O())}function E(){Ct.removeClass("n2-sp-validation-error"),A();var t=u({h:st,s:"1.0",v:"1.0"});vt.css("background-color","#"+t.toHexString());var e=jt;1>at&&("hex"!==e&&"name"!==e||(e="rgb"));var i=O(),n=i.toHexString(),s=i.toRgbString();if(g||1===i.alpha?Pt.css("background-color",s):(Pt.css("background-color","transparent"),Pt.css("filter",i.toFilter())),W.showAlpha){var o=i.toRgb();o.a=0;var r=u(o).toRgbString(),a="linear-gradient(to right, "+r+", "+n+")";wt.css("background",a)}W.showInput&&(1>at&&("hex"!==e&&"name"!==e||(e="rgb")),Ct.val(i.toString(e))),W.showPalette&&w(),_()}function A(){var t=ot,e=rt,i=t*K,n=G-e*G;i=Math.max(-Z,Math.min(K-Z,i-Z)),n=Math.max(-Z,Math.min(G-Z,n-Z)),yt.css({top:n,left:i});var s=at*et;St.css({left:s-it/2});var o=st*Q;xt.css({top:o-nt})}function z(t){var e=O();Mt&&ft.val(e.toString(jt)).change();var i=1;At=e,b(e),t&&i&&X.change(e)}function j(){K=vt.width(),G=vt.height(),Z=yt.height(),tt=bt.width(),Q=bt.height(),nt=xt.height(),et=_t.width(),it=St.width(),B||gt.offset(r(gt,It.parent())),A()}function H(){ft.show(),It.unbind("click.spectrum touchstart.spectrum"),gt.remove(),Ot.remove(),f[$t.id]=null}function $(i,n){return i===e?t.extend({},W):n===e?W[i]:(W[i]=n,void h())}function U(){mt=!1,ft.attr("disabled",!1),It.removeClass("n2-sp-disabled")}function R(){N(),mt=!0,ft.attr("disabled",!0),It.addClass("n2-sp-disabled")}var W=s(a,o),B=W.flat,L=W.showSelectionPalette,V=W.localStorageKey,Y=W.theme,X=W.callbacks,J=c(j,10),q=!1,K=0,G=0,Z=0,Q=0,tt=0,et=0,it=0,nt=0,st=0,ot=0,rt=0,at=1,lt=W.palette.slice(0),ht=t.isArray(lt[0])?lt:[lt],pt=W.selectionPalette.slice(0),ct="n2-sp-dragging",ut=o.ownerDocument,dt=ut.body,ft=t(o),mt=!1,gt=t(y,ut).addClass(Y),vt=gt.find(".n2-sp-color"),yt=gt.find(".n2-sp-dragger"),bt=gt.find(".n2-sp-hue"),xt=gt.find(".n2-sp-slider"),wt=gt.find(".n2-sp-alpha-inner"),_t=gt.find(".n2-sp-alpha"),St=gt.find(".n2-sp-alpha-handle"),Ct=gt.find(".n2-sp-input"),Dt=gt.find(".n2-sp-palette"),Tt=gt.find(".n2-sp-initial"),kt=gt.find(".n2-sp-cancel"),Nt=gt.find(".n2-sp-choose"),Mt=ft.is("input"),Ft=Mt&&!B,Ot=null,It=null,Pt=null,Et=W.color||Mt&&ft.val(),At=!1,zt=W.preferredFormat,jt=zt,Ht=!W.showButtons||W.clickoutFiresChange;gt.on("mousedown",function(t){N2Classes.WindowManager.get().setMouseDownArea("colorpicker",t)}),d();var $t={show:k,hide:N,toggle:T,reflow:j,option:$,enable:U,disable:R,set:function(t){F(t),z()},get:O,destroy:H,container:gt};return $t.id=f.push($t)-1,$t}function r(e,i){var n=0,s=e.outerWidth(),o=e.outerHeight(),r=i.outerHeight(),a=e[0].ownerDocument,l=a.documentElement,h=l.clientWidth+t(a).scrollLeft(),p=l.clientHeight+t(a).scrollTop(),c=i.offset();return c.top+=r+3,c.left-=Math.min(c.left,c.left+s>h&&h>s?Math.abs(c.left+s-h):0),c.top-=Math.min(c.top,c.top+o>p&&p>o?Math.abs(o+r+6-n):n),c}function a(){}function l(t){t.stopPropagation()}function h(t,e){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return t.apply(e,n.concat(i.call(arguments)))}}function p(e,i,n,s){function o(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function r(t){if(p){if(m&&document.documentMode<9&&!t.button)return l();var n=t.originalEvent.touches,s=n?n[0].pageX:t.pageX,r=n?n[0].pageY:t.pageY,a=Math.max(0,Math.min(s-c.left,d)),h=Math.max(0,Math.min(r-c.top,u));f&&o(t),i.apply(e,[a,h,t])}}function a(i){var s=i.which?3==i.which:2==i.button;i.originalEvent.touches;s||p||n.apply(e,arguments)!==!1&&(p=!0,u=t(e).height(),d=t(e).width(),c=t(e).offset(),t(h).bind(g),t(h.body).addClass("n2-sp-dragging"),f||r(i),o(i))}function l(){p&&(t(h).unbind(g),t(h.body).removeClass("n2-sp-dragging"),s.apply(e,arguments)),p=!1}i=i||function(){},n=n||function(){},s=s||function(){};var h=e.ownerDocument||document,p=!1,c={},u=0,d=0,f=!1,g={};g.selectstart=o,g.dragstart=o,g[f?"touchmove":"mousemove"]=r,g[f?"touchend":"mouseup"]=l,t(e).bind(f?"touchstart":"mousedown",a)}function c(t,e,i){var n;return function(){var s=this,o=arguments,r=function(){n=null,t.apply(s,o)};i&&clearTimeout(n),!i&&n||(n=setTimeout(r,e))}}var u=null,d={beforeShow:a,move:a,change:a,show:a,hide:a,color:!1,flat:!1,showInput:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",preferredFormat:!1,className:"",showAlpha:!1,theme:"n2-sp-light",palette:["fff","000"],selectionPalette:[],disabled:!1},f=[],m=!!/msie/i.exec(window.navigator.userAgent),g=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),i=e.style;return i.cssText="background-color:rgba(0,0,0,.5)",t(i.backgroundColor,"rgba")||t(i.backgroundColor,"hsla")}(),v=["<div class='n2-sp-replacer'>","<div class='n2-sp-preview'><div class='n2-sp-preview-inner'></div></div>","<div class='n2-sp-dd'>&#9650;</div>","</div>"].join(""),y=function(){var t="";if(m)for(var e=1;6>=e;e++)t+="<div class='n2-sp-"+e+"'></div>";return["<div class='n2-sp-container'>","<div class='n2-sp-palette-container'>","<div class='n2-sp-palette n2-sp-thumb n2-sp-cf'></div>","</div>","<div class='n2-sp-picker-container'>","<div class='n2-sp-top n2-sp-cf'>","<div class='n2-sp-fill'></div>","<div class='n2-sp-top-inner'>","<div class='n2-sp-color'>","<div class='n2-sp-sat'>","<div class='n2-sp-val'>","<div class='n2-sp-dragger'></div>","</div>","</div>","</div>","<div class='n2-sp-hue'>","<div class='n2-sp-slider'></div>",t,"</div>","</div>","<div class='n2-sp-alpha'><div class='n2-sp-alpha-inner'><div class='n2-sp-alpha-handle'></div></div></div>","</div>","<div class='n2-sp-input-container n2-sp-cf'>","<input class='n2-sp-input' type='text' spellcheck='false'  />","</div>","<div class='n2-sp-initial n2-sp-thumb n2-sp-cf'></div>","<div class='n2-sp-button-container n2-sp-cf'>","<a class='n2-sp-cancel' href='#'></a>","<button class='n2-sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";return t.fn.n2spectrum=function(e,i){if("string"==typeof e){var n=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=f[t(this).data(b)];if(i){var o=i[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?n=i.get():"container"==e?n=i.container:"option"==e?n=i.option.apply(i,s):"destroy"==e?(i.destroy(),t(this).removeData(b)):o.apply(i,s)}}),n}return this.n2spectrum("destroy").each(function(){var i=o(this,e);t(this).data(b,i.id)})},t.fn.n2spectrum.load=!0,t.fn.n2spectrum.loadOpts={},t.fn.n2spectrum.draggable=p,t.fn.n2spectrum.defaults=d,t.n2spectrum={},t.n2spectrum.localization={},t.n2spectrum.palettes={},function(){function t(t){var i={r:0,g:0,b:0},s=1,r=!1,a=!1;return"string"==typeof t&&(t=m(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(i=e(t.r,t.g,t.b),r=!0,a="rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(i=o(t.h,t.s,t.v),r=!0,a="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(i=n(t.h,t.s,t.l),r=!0,a="hsl"),t.hasOwnProperty("a")&&(s=t.a)),i.r=w(255,_(i.r,0)),i.g=w(255,_(i.g,0)),i.b=w(255,_(i.b,0)),i.r<1&&(i.r=x(i.r)),i.g<1&&(i.g=x(i.g)),i.b<1&&(i.b=x(i.b)),{ok:r,format:t&&t.format||a,r:i.r,g:i.g,b:i.b,a:s}}function e(t,e,i){return{r:255*l(t,255),g:255*l(e,255),b:255*l(i,255)}}function i(t,e,i){t=l(t,255),e=l(e,255),i=l(i,255);var n,s,o=_(t,e,i),r=w(t,e,i),a=(o+r)/2;if(o==r)n=s=0;else{var h=o-r;switch(s=a>.5?h/(2-o-r):h/(o+r),o){case t:n=(e-i)/h+(i>e?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:s,l:a}}function n(t,e,i){function n(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t}var s,o,r;if(t=l(t,360),e=l(e,100),i=l(i,100),0===e)s=o=r=i;else{var a=.5>i?i*(1+e):i+e-i*e,h=2*i-a;s=n(h,a,t+1/3),o=n(h,a,t),r=n(h,a,t-1/3)}return{r:255*s,g:255*o,b:255*r}}function s(t,e,i){t=l(t,255),e=l(e,255),i=l(i,255);var n,s,o=_(t,e,i),r=w(t,e,i),a=o,h=o-r;if(s=0===o?0:h/o,o==r)n=0;else{switch(o){case t:n=(e-i)/h+(i>e?6:0);break;case e:n=(i-t)/h+2;break;case i:n=(t-e)/h+4}n/=6}return{h:n,s:s,v:a}}function o(t,e,i){t=6*l(t,360),e=l(e,100),i=l(i,100);var n=b.floor(t),s=t-n,o=i*(1-e),r=i*(1-s*e),a=i*(1-(1-s)*e),h=n%6,p=[i,r,o,o,a,i][h],c=[a,i,i,r,o,o][h],u=[o,o,a,i,i,r][h];return{r:255*p,g:255*c,b:255*u}}function r(t,e,i,n){var s=[f(x(t).toString(16)),f(x(e).toString(16)),f(x(i).toString(16))];return n||s[0].charAt(0)!=s[0].charAt(1)||s[1].charAt(0)!=s[1].charAt(1)||s[2].charAt(0)!=s[2].charAt(1)?s.join(""):s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)}function a(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function l(t,e){c(t)&&(t="100%");var i=d(t);return t=w(e,_(0,parseFloat(t))),i&&(t*=e/100),b.abs(t-e)<1e-6?1:t>=1?t%e/parseFloat(e):t}function h(t){return w(1,_(0,t))}function p(t){return parseInt(t,16)}function c(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function d(t){return"string"==typeof t&&-1!=t.indexOf("%")}function f(t){return 1==t.length?"0"+t:""+t}function m(t){t=t.replace(g,"").replace(v,"").toLowerCase();var e=!1;if(C[t])t=C[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0};var i;return(i=T.rgb.exec(t))?{r:i[1],g:i[2],b:i[3]}:(i=T.rgba.exec(t))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=T.hsl.exec(t))?{h:i[1],s:i[2],l:i[3]}:(i=T.hsla.exec(t))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=T.hsv.exec(t))?{h:i[1],s:i[2],v:i[3]}:(i=T.hex6.exec(t))?{r:p(i[1]),g:p(i[2]),b:p(i[3]),format:e?"name":"hex"}:(i=T.hex8.exec(t))?{r:p(i[1]),g:p(i[2]),b:p(i[3]),a:p(i[4])/255,format:e?"name":"hex"}:(i=T.hex3.exec(t))?{r:p(i[1]+""+i[1]),g:p(i[2]+""+i[2]),b:p(i[3]+""+i[3]),format:e?"name":"hex"}:!1}var g=/^[\s,#]+/,v=/\s+$/,y=0,b=Math,x=b.round,w=b.min,_=b.max,S=b.random;u=function(e,n){if("object"==typeof e&&e.hasOwnProperty("_tc_id"))return e;var o=t(e),a=o.r,l=o.g,h=o.b,p=parseFloat(o.a),c=o.format;return{ok:o.ok,format:c,_tc_id:y++,alpha:p,toHsv:function(){var t=s(a,l,h);return{h:t.h,s:t.s,v:t.v,a:p}},toHsvString:function(){var t=s(a,l,h),e=x(360*t.h),i=x(100*t.s),n=x(100*t.v);return 1==p?"hsv("+e+", "+i+"%, "+n+"%)":"hsva("+e+", "+i+"%, "+n+"%, "+p+")"},toHsl:function(){var t=i(a,l,h);return{h:t.h,s:t.s,l:t.l,a:p}},toHslString:function(){var t=i(a,l,h),e=x(360*t.h),n=x(100*t.s),s=x(100*t.l);return 1==p?"hsl("+e+", "+n+"%, "+s+"%)":"hsla("+e+", "+n+"%, "+s+"%, "+p+")"},toHex:function(){return r(a,l,h)},toHexString:function(t){return r(a,l,h,t)},toHexString8:function(){return r(a,l,h,!0)+f(x(255*p).toString(16))},toRgb:function(){return{r:x(a),g:x(l),b:x(h),a:p}},toRgbString:function(){return 1==p?"rgb("+x(a)+", "+x(l)+", "+x(h)+")":"rgba("+x(a)+", "+x(l)+", "+x(h)+", "+p+")"},toName:function(){return D[r(a,l,h)]||!1},toFilter:function(t,e){var i=r(a,l,h,!0),n=i,s=Math.round(255*parseFloat(p)).toString(16),o=s,c=t&&t.gradientType?"GradientType = 1, ":"";if(e){var d=u(e);n=d.toHex(),o=Math.round(255*parseFloat(d.alpha)).toString(16)}return"progid:DXImageTransform.Microsoft.gradient("+c+"startColorstr=#"+f(s)+i+",endColorstr=#"+f(o)+n+")"},toString:function(t){t=t||this.format;var e=!1;return"rgb"===t&&(e=this.toRgbString()),"hex"===t&&(e=this.toHexString()),"hex6"===t&&(e=this.toHexString(!0)),"hex8"===t&&(e=this.toHexString8()),"name"===t&&(e=this.toName()),"hsl"===t&&(e=this.toHslString()),"hsv"===t&&(e=this.toHsvString()),e||this.toHexString(!0)}}},u.fromRatio=function(t){if("object"==typeof t)for(var e in t)1===t[e]&&(t[e]="1.0");return u(t)},u.equals=function(t,e){return t&&e?u(t).toRgbString()==u(e).toRgbString():!1},u.random=function(){return u.fromRatio({r:S(),g:S(),b:S()})},u.desaturate=function(t,e){var i=u(t).toHsl();return i.s-=(e||10)/100,i.s=h(i.s),u(i)},u.saturate=function(t,e){var i=u(t).toHsl();return i.s+=(e||10)/100,i.s=h(i.s),u(i)},u.greyscale=function(t){return u.desaturate(t,100)},u.lighten=function(t,e){var i=u(t).toHsl();return i.l+=(e||10)/100,i.l=h(i.l),u(i)},u.darken=function(t,e){var i=u(t).toHsl();return i.l-=(e||10)/100,i.l=h(i.l),u(i)},u.complement=function(t){var e=u(t).toHsl();return e.h=(e.h+.5)%1,u(e)},u.triad=function(t){var e=u(t).toHsl(),i=360*e.h;return[u(t),u({h:(i+120)%360,s:e.s,l:e.l}),u({h:(i+240)%360,s:e.s,l:e.l})]},u.tetrad=function(t){var e=u(t).toHsl(),i=360*e.h;return[u(t),u({h:(i+90)%360,s:e.s,l:e.l}),u({h:(i+180)%360,s:e.s,l:e.l}),u({h:(i+270)%360,s:e.s,l:e.l})]},u.splitcomplement=function(t){var e=u(t).toHsl(),i=360*e.h;return[u(t),u({h:(i+72)%360,s:e.s,l:e.l}),u({h:(i+216)%360,s:e.s,l:e.l})]},u.analogous=function(t,e,i){e=e||6,i=i||30;var n=u(t).toHsl(),s=360/i,o=[u(t)];for(n.h*=360,n.h=(n.h-(s*e>>1)+720)%360;--e;)n.h=(n.h+s)%360,o.push(u(n));return o},u.monochromatic=function(t,e){e=e||6;for(var i=u(t).toHsv(),n=i.h,s=i.s,o=i.v,r=[],a=1/e;e--;)r.push(u({h:n,s:s,v:o})),o=(o+a)%1;return r},u.readable=function(t,e){var i=u(t).toRgb(),n=u(e).toRgb();return(n.r-i.r)*(n.r-i.r)+(n.g-i.g)*(n.g-i.g)+(n.b-i.b)*(n.b-i.b)>10404};var C=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=u.hexNames=a(C),T=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",i="(?:"+e+")|(?:"+t+")",n="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?",s="[\\s|\\(]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")[,|\\s]+("+i+")\\s*\\)?";return{rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}()}(),t.fn.n2spectrum}),N2D("ExpertMode",function(t,e){function i(e){this.app="system",this.key="IsExpert",this.isExpert=0,this.style=t('<div style="display: none;"></div>').appendTo("body"),e?(this.switches=t(".n2-expert-switch").on({mousedown:t.proxy(N2Classes.WindowManager.setMouseDownArea,null,"expertClicked"),click:t.proxy(this.switchExpert,this,!0)}),this.load(),this.isExpert||this.disable(!1),t.jStorage.listenKeyChange(this.app+this.key,t.proxy(this.load,this))):(this.switches=t(),this.disable(!1))}return i.prototype.load=function(){var e=parseInt(t.jStorage.get(this.app+this.key,0));e!=this.isExpert&&this.switchExpert(!1,!1)},i.prototype.set=function(e,i){this.isExpert=e,i&&t.jStorage.set(this.app+this.key,e)},i.prototype.switchExpert=function(t,e){e&&e.preventDefault(),this.isExpert?this.disable(t):this.enable(t)},i.prototype.measureElement=function(){var e=null,i=t(window).scrollTop(),n=i+62,s=i+t(window).height()-100;t(".n2-content-area > .n2-heading-bar,.n2-content-area > .n2-form-tab ,#n2-admin .n2-content-area form > .n2-form > .n2-form-tab").each(function(){var i=t(this);return i.offset().top>n?(i.hasClass("n2-heading-bar")||(e=i),!1):i.offset().top+i.height()>s?(i.hasClass("n2-heading-bar")||(e=i),!1):void 0}),this.measuredElement=e},i.prototype.scrollToMeasured=function(){if(null!==this.measuredElement){for(;this.measuredElement.length&&!this.measuredElement.is(":VISIBLE");)this.measuredElement=this.measuredElement.prev();0!=this.measuredElement.length&&t("html,body").scrollTop(this.measuredElement.offset().top-102)}},i.prototype.enable=function(e){this.measureElement(),this.changeStyle(""),this.set(1,e),this.switches.addClass("n2-active"),t("html").addClass("n2-in-expert"),e&&this.scrollToMeasured()},i.prototype.disable=function(e){this.measureElement(),this.changeStyle(".n2-expert{display: none !important;}"),this.set(0,e),this.switches.removeClass("n2-active"),t("html").removeClass("n2-in-expert"),e&&this.scrollToMeasured()},i.prototype.changeStyle=function(t){this.style.html('<style type="text/css">'+t+"</style>")},function(t,e){return new i(t,e)}}),N2D("Form",function(t,e){function i(e,i,n){this.form=t("#"+e).on("saved",t.proxy(this.updateSerializedData,this)).data("form",this),this.updateSerializedData(),this.url=i,this.values=n,"undefined"!=typeof document.formvalidator&&(document.formvalidator.isValid=function(){return!0}),t(window).on("n2-before-unload",t.proxy(this.onBeforeUnload,this)),this.registerBeforeUnload(),t("input, textarea").on("keyup",function(t){27===t.which&&(t.target.blur(),t.stopPropagation())})}t(window).ready(function(){t("input[data-disabled]").on("focus",function(){this.blur()})});var n=!1;return i.prototype.registerBeforeUnload=function(){n||(t(window).on("beforeunload",function(e){if(nextend.askToSave&&n+18e4<t.now()){var i={changed:!1};if(t(window).triggerHandler("n2-before-unload",i),i.changed){var s=n2_("The changes you made will be lost if you navigate away from this page.");return(e||window.event).returnValue=s,s}}}),n=t.now())},i.prototype.onBeforeUnload=function(t,e){!e.changed&&this.isChanged()&&(e.changed=!0)},i.prototype.isChanged=function(){return this.form.triggerHandler("checkChanged"),this.serialized!=this.form.serialize()},i.prototype.updateSerializedData=function(){this.serialized=this.form.serialize()},i.submit=function(e){return nextend.askToSave=!1,setTimeout(function(){t(e).submit()},300),!1},i}),N2D("FormElement",function(t,e){function i(){this.connectedField=null,this.element.data("field",this)}return i.prototype.triggerOutsideChange=function(){this.element.triggerHandler("outsideChange",this),this.element.triggerHandler("nextendChange",this)},i.prototype.triggerInsideChange=function(){this.element.triggerHandler("insideChange",this),this.element.triggerHandler("nextendChange",this)},i.prototype.focus=function(t){this.connectedField&&this.connectedField.focus(t)},i}),N2D("FormElementText",["FormElement"],function(t,e){function i(e){this.element=t("#"+e).on({focus:t.proxy(this._focus,this),blur:t.proxy(this._blur,this),change:t.proxy(this.change,this)}),this.tagName=this.element.prop("tagName"),this.parent=this.element.parent(),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype._focus=function(){this.parent.addClass("focus"),"TEXTAREA"!=this.tagName&&this.element.on("keypress.n2-text",t.proxy(function(t){13==t.which&&(this.element.off("keypress.n2-text"),this.element.trigger("blur"))},this))},i.prototype._blur=function(){this.parent.removeClass("focus")},i.prototype.change=function(){this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.triggerInsideChange()},i.prototype.focus=function(t){this.connectedField?this.connectedField.focus(t):t&&this.element.focus().select()},i}),N2D("Notification",function(t,e){function i(){this.stack=[],this.tween=null,N2R("documentReady",t.proxy(function(t){var e=t("#n2-admin").find(".n2-main-top-bar");if(e.length>0){var i=new N2Classes.NotificationStack(t("#n2-admin").find(".n2-main-top-bar"));i.enableStack()}else{var i=new N2Classes.NotificationStackModal(t("#n2-admin"));i.enableStack()}},this))}return i.prototype.add=function(t){this.stack.push(t)},i.prototype.popStack=function(){this.stack.pop()},i.prototype.getCurrentStack=function(){return this.stack[this.stack.length-1]},i.prototype.success=function(t,e){this.getCurrentStack().success(t,e)},i.prototype.error=function(t,e){this.getCurrentStack().error(t,e)},i.prototype.notice=function(t,e){this.getCurrentStack().notice(t,e)},new i}),N2D("NotificationStack",function(t,e){function i(e){this.messages=[],this.isShow=!1,this.importantOnly=0,this.importantOnlyNode=t('<div class="n2-notification-important n2-h5 '+(this.importantOnly?"n2-active":"")+'"><span>'+n2_("Show only errors")+'</span><div class="n2-checkbox n2-light"><i class="n2-i n2-i-tick"></i></div></div>').on("click",t.proxy(this.changeImportant,this)),t.jStorage.listenKeyChange("ss-important-only",t.proxy(this.importantOnlyChanged,this)),this.importantOnlyChanged(),this._init(e),this.emptyMessage=t('<div class="n2-notification-empty n2-h4">'+n2_("There are no messages to display.")+"</div>")}return i.prototype._init=function(e){this.showButton=e.find(".n2-notification-button").on("click",t.proxy(this.hideOrShow,this));var i=t('<div class="n2-notification-settings"></div>').append(t('<div class="n2-button n2-button-normal n2-button-s n2-button-blue n2-radius-s n2-h5 n2-uc n2-notification-clear">'+n2_("Got it!")+"</div>").on("click",t.proxy(this.clear,this))).append(this.importantOnlyNode);this.container=this.messageContainer=t('<div class="n2-notification-center n2-border-radius-br n2-border-radius-bl"></div>').append(i).appendTo(e)},i.prototype.enableStack=function(){N2Classes.Notification.add(this)},i.prototype.popStack=function(){N2Classes.Notification.popStack()},i.prototype.hideOrShow=function(t){t.preventDefault(),this.isShow?this.hide():this.show()},i.prototype.show=function(){this.isShow||(this.isShow=!0,0==this.messages.length&&this.showEmptyMessage(),this.showButton&&this.showButton.addClass("n2-active"),this.container.addClass("n2-active"),this.container.css("display","block"),this._animateShow())},i.prototype.hide=function(){this.isShow&&(this.showButton&&this.showButton.removeClass("n2-active"),this.container.removeClass("n2-active"),this._animateHide(),this.container.css("display","none"),this.isShow=!1)},i.prototype._animateShow=function(){this.tween&&this.tween.pause(),this.tween=NextendTween.fromTo(this.container,.4,{opacity:0},{opacity:1})},i.prototype._animateHide=function(){this.tween&&this.tween.pause()},i.prototype.success=function(t,e){this._message("success",n2_("success"),t,e)},i.prototype.error=function(t,e){this._message("error",n2_("error"),t,e)},i.prototype.notice=function(t,e){this._message("notice",n2_("notice"),t,e)},i.prototype._message=function(e,i,n,s){this.hideEmptyMessage(),s=t.extend({timeout:!1,remove:!1},s);var o=t("<div></div>");return s.timeout&&setTimeout(t.proxy(function(){this.hideMessage(o,s.remove)},this),1e3*s.timeout),o.addClass("n2-table n2-table-fixed n2-h3 n2-border-radius n2-notification-message n2-notification-message-"+e).append(t('<div class="n2-tr"></div>').append('<div class="n2-td n2-first"><i class="n2-i n2-i-n-'+e+'"/></div>').append('<div class="n2-td n2-message"><h4 class="n2-h4 n2-uc">'+i+'</h4><p class="n2-h4">'+n+"</p></div>")).prependTo(this.messageContainer),this.messages.push(o),this.messages.length>3&&this.messages.shift().remove(),this.importantOnly&&"error"!=e&&"notice"!=e||this.show(),o},i.prototype.hideMessage=function(t,e){e?this.deleteMessage(t):this.hide()},i.prototype.deleteMessage=function(e){var i=t.inArray(e,this.messages);i>-1&&(this.messages.splice(i,1),e.remove()),0==this.messages.length&&this.hide()},i.prototype.clear=function(){for(var t=this.messages.length-1;t>=0;t--)this.messages.pop().remove();this.showEmptyMessage(),this.hide()},i.prototype.changeImportant=function(){this.importantOnly?t.jStorage.set("ss-important-only",0):t.jStorage.set("ss-important-only",1)},i.prototype.importantOnlyChanged=function(){this.importantOnly=parseInt(t.jStorage.get("ss-important-only",0)),this.importantOnly?this.importantOnlyNode.addClass("n2-active"):this.importantOnlyNode.removeClass("n2-active")},i.prototype.showEmptyMessage=function(){this.emptyMessage.prependTo(this.container)},i.prototype.hideEmptyMessage=function(){this.emptyMessage.detach()},i}),N2D("NotificationStackModal",["NotificationStack"],function(t,e){function i(){N2Classes.NotificationStack.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.NotificationStack.prototype),i.prototype.constructor=i,i.prototype._init=function(e){var i=t('<div class="n2-notification-settings"></div>').append(t('<div class="n2-button n2-button-normal n2-button-s n2-button-blue n2-radius-s n2-h5 n2-uc n2-notification-clear">'+n2_("Got it!")+"</div>").on("click",t.proxy(this.clear,this))).append(this.importantOnlyNode);this.messageContainer=t('<div class="n2-notification-center n2-border-radius"></div>').append(i),this.container=t('<div class="n2-notification-center-modal"></div>').append(this.messageContainer).appendTo(e)},i.prototype.show=function(){document.activeElement&&document.activeElement.blur(),N2Classes.Esc.add(t.proxy(function(){return this.clear(),!1},this)),N2Classes.NotificationStack.prototype.show.apply(this,arguments)},i.prototype.hide=function(){N2Classes.Esc.pop(),N2Classes.NotificationStack.prototype.hide.apply(this,arguments)},i.prototype._animateShow=function(){},i.prototype._animateHide=function(){},i}),N2D("FormElementAutocompleteSimple",function(t,e){function i(e,i){this.element=t("#"+e).data("autocomplete",this),this.element.nUIAutocomplete({positionTo:".n2-form-element-autocomplete",y:-2,appendTo:t.proxy(function(){return this.element.closest(".n2-scrollable, body")},this),source:function(){return i},select:function(e,i){t(this).val(i.value).trigger("change")}})}return i}),N2D("FormElementAutocomplete",function(t,e){function i(e,i){this.tags=i,this.element=t("#"+e).data("autocomplete",this),this.element.nUIAutocomplete({positionTo:".n2-form-element-autocomplete",y:-2,appendTo:t.proxy(function(){return this.element.closest(".n2-scrollable, body")},this),source:t.proxy(function(){return this.tags},this),select:function(e,i){var n=this.value.split(/,/);n.pop(),n.push(i.value),n.push(""),this.value=n.join(","),t(this).trigger("change")}}),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this))}return i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.element.val("").trigger("change")},i.prototype.setTags=function(t){this.tags=t},i}),N2D("BasicCSSFont",["BasicCSSSkeleton"],function(t,e){function i(){this._singular="font",this._prular="fonts",N2Classes.BasicCSSSkeleton.prototype.constructor.apply(this,arguments),this.form={afont:t("#layerfamily"),color:t("#layercolor"),size:t("#layersize"),weight:t("#layerweight"),lineheight:t("#layerlineheight"),align:t("#layertextalign"),underline:t("#layerdecoration"),italic:t("#layerdecoration")},this.loaded()}return i.prototype=Object.create(N2Classes.BasicCSSSkeleton.prototype),i.prototype.constructor=i,i.prototype.setValue=function(t){for(var i=0;i<t.length;i++)t[i].bold!==e&&(t[i].weight!==e?delete t[i].bold:(1==t[i].bold?t[i].weight=700:t[i].bold>0&&(t[i].weight=t[i].bold),delete t[i].bold));this.value=t},i.prototype._transformsize=function(t){return t.split("||").join("|*|")},i.prototype._setsize=function(t,e){t.size=e.replace("|*|","||")},i.prototype._transformweight=function(t){return parseInt(t)},i.prototype._setweight=function(t,e){t.weight=parseInt(e)},i.prototype._transformunderline=function(t){return[1==this.value[this.activeTab].italic?"italic":"",1==t?"underline":""].join("||")},i.prototype._setunderline=function(t,e){var i=e.split("||");t.underline="underline"==i[1]?1:0},i.prototype._transformitalic=function(t){return[1==t?"italic":"",1==this.value[this.activeTab].underline?"underline":""].join("||")},i.prototype._setitalic=function(t,e){var i=e.split("||");t.italic="italic"==i[0]?1:0},i}),N2D("BasicCSSSkeleton",function(t,e){function i(e){this.hasVisuals=!1,this.isInsideChange=!1,this.isReload=!1,this.manager=e,this.$container=e.$container.find("#n2-tab-basiccss"+this._singular),this.$visuals=this.$container.find(".n2-css-name"),this.$visualsLabel=this.$visuals.find(".n2-css-name-label"),this.$visualsList=this.$visuals.find(".n2-css-name-list"),this.$tabsContainer=this.$container.find(".n2-css-tab"),this.$reset=this.$container.find(".n2-css-tab-reset").on("click",t.proxy(function(t){this.value[this.activeTab]={},this._lazySave(t),this.activateTab(this.activeTab)},this)),this.$more=this.$container.find(".n2-basiccss-more").on("click",t.proxy(function(t){t.preventDefault(),this.visuals[this.activeVisual].field.show(t);
},this)),this.activeVisual=0,this.activeTab=0,this.tabs=[]}return i.prototype.loaded=function(){for(var e in this.form)this.form[e].on({nextendChange:t.proxy(this.changeValue,this,e)})},i.prototype.changeValue=function(t,e){this.isReload||("function"==typeof this["_set"+t]?this["_set"+t](this.value[this.activeTab],this.form[t].val()):this.value[this.activeTab][t]=this.form[t].val(),this._lazySave(e))},i.prototype._lazySave=NextendDeBounce(function(t){this.isInsideChange=!0;var e=this.getBase64();this.visuals[this.activeVisual].field.save(t,e),this.visuals[this.activeVisual].value=e,this.isInsideChange=!1},50),i.prototype.save=function(t){this.isInsideChange=!0;for(var e in t)this.visualsByName[e].field.save({},t[e]),this.visualsByName[e].value=t[e];this.isInsideChange=!1},i.prototype.getBase64=function(){return N2Classes.Base64.encode(JSON.stringify({name:n2_("Static"),data:this.value}))},i.prototype.load=function(e,i){if(this.hasVisuals=i.length>0,this.$container.toggleClass("n2-css-has-"+this._singular,this.hasVisuals),this.hasVisuals){this.visuals=[],this.visualsByName={},this.$visualsList.html(""),this.$visuals.toggleClass("n2-multiple",i.length>1);for(var n=0;n<i.length;n++){var s=i[n];this.visualsByName[s.name]={value:e[s.name],mode:s.mode,field:s.field},s.field.element.off(".basiccss").on("outsideChange.basiccss",t.proxy(this.loadSingleValue,this,n,s.name)),this.visuals.push(this.visualsByName[s.name]),t("<span>"+s.field.getLabel()+"</span>").on("click",t.proxy(function(t,e){this.activateVisual(t),this.activateTab(0)},this,n)).appendTo(this.$visualsList)}this.activateVisual(0),this.activateTab(0)}},i.prototype.loadSingleValue=function(t,e,i){this.isInsideChange||(this.visuals[t].value=this.visuals[t].field.element.val(),this.activeVisual==t&&(this.activateVisual(t),this.activateTab(this.activeTab)))},i.prototype.activateVisual=function(e){this.activeVisual=e,this.$visualsLabel.html(this.visuals[e].field.getLabel()),nextend[this._singular+"Manager"].getDataFromController(this.visuals[e].value,{previewMode:this.visuals[e].mode},t.proxy(function(t,e){this.setValue(t),this.setTabs(e)},this))},i.prototype.setValue=function(t){this.value=t},i.prototype.activateTab=function(e){this.isReload=!0,this.activeTab=e,this.$container.toggleClass("n2-css-show-reset",0!=e);var i=0==e?this.value[e]:t.extend({},this.value[0],this.value[e]);for(var n in i)"undefined"!=typeof this.form[n]&&("function"==typeof this["_transform"+n]?this.form[n].data("field").insideChange(this["_transform"+n](i[n])):this.form[n].data("field").insideChange(i[n]));this.$tabs.removeClass("n2-active").eq(e).addClass("n2-active"),this.isReload=!1},i.prototype.setTabs=function(e){this.tabs=e,this.$tabsContainer.html("");for(var i=0;i<e.length;i++)t("<span>"+e[i]+"</span>").on("click",t.proxy(function(t,e){this.activateTab(t)},this,i)).appendTo(this.$tabsContainer);this.$tabs=this.$tabsContainer.find("span")},i.prototype.serialize=function(){if(this.hasVisuals){var t={};for(var e in this.visualsByName)t[e]=this.visualsByName[e].value;return t}return{}},i.prototype.unSerialize=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.visualsByName[e].field.save({},t[e]),this.visualsByName[e].value=t[e])},i}),N2D("BasicCSSStyle",["BasicCSSSkeleton"],function(t,e){function i(){this._singular="style",this._prular="styles",N2Classes.BasicCSSSkeleton.prototype.constructor.apply(this,arguments),this.form={backgroundcolor:t("#layerbackgroundcolor"),opacity:t("#layeropacity"),padding:t("#layerpadding"),border:t("#layerborder"),borderradius:t("#layerborderradius")},this.loaded()}return i.prototype=Object.create(N2Classes.BasicCSSSkeleton.prototype),i.prototype.constructor=i,i}),N2D("BasicCSS",function(t,e){function i(e,i){this.underActivate=!1,this.inPresetList=!1,this.$container=t("#"+e),this.ajaxUrl=i,this.throttleSetTimeout=null,this.throttleExitTimeout=null,this.storage={},this.assets={font:new N2Classes.BasicCSSFont(this),style:new N2Classes.BasicCSSStyle(this)},this.$preset=t('<div id="n2-tab-basiccsspreset"><div class="n2-editor-header n2-h2 n2-uc"><span class="n2-css-name n2-css-name-label">'+n2_("Preset")+"</span></div></div>").prependTo(this.$container),t('<div class="n2-ss-editor-window-notice n2-ss-responsive-helper n2-h5">'+n2_(window.n2_printf('NOTE: Layer design changes apply to each device. Watch <a href="%s" target="_blank">video tutorial</a> to learn responsive tools.',"https://www.youtube.com/watch?v=yGpVsrzwt1U&index=4&list=PLSawiBnEUNfvzcI3pBHs4iKcbtMCQU0dB"))+"</div>").prependTo(this.$container);var n=t('<div class="n2-ss-button-container"></div>').insertAfter(this.$preset.find(".n2-css-name"));t('<a class="n2-button n2-button-icon n2-button-s n2-radius-s n2-button-darker n2-h5 n2-uc" href="#" data-n2tip="'+n2_("Reset design to default")+'"><i class="n2-i n2-i-reset2"></i></a>').on("click",t.proxy(function(t){t.preventDefault(),this.exitPresetList(this.defs,t)},this)).appendTo(n),t('<a class="n2-basiccss-save n2-button n2-button-icon n2-button-s n2-radius-s n2-button-darker n2-h5 n2-uc" href="#" data-n2tip="'+n2_("Save design as new preset")+'"><i class="n2-i n2-i-save"></i></a>').on("click",t.proxy(function(t){t.preventDefault(),this.saveAsNew()},this)).appendTo(n),this.$presets=t('<div id="n2-tab-basiccsspresets"></div>').appendTo(this.$container),t('<a class="n2-basiccss-choose n2-button n2-button-icon n2-button-s n2-radius-s n2-button-green n2-h5 n2-uc" data-n2tip="'+n2_("Load design")+'" href="#"><i class="n2-i n2-i-addlayer2"></i></a>').on("click",t.proxy(function(t){t.preventDefault(),this.showList()},this)).appendTo(n),t('<a class="n2-basiccss-back n2-button n2-button-icon n2-button-s n2-radius-s n2-button-grey n2-h5 n2-uc" href="#"><i class="n2-i n2-i-closewindow"></i></a>').on("click",t.proxy(function(t){t.preventDefault(),this.exitPresetList(!1,t)},this)).appendTo(n),nextend.basicCSS=this}return i.prototype.showList=function(){this.inPresetList=!0,this.lastState=this.serialize(),t.when(this.loadType()).done(t.proxy(function(t){this.$presets.append(this.storage[this.type]),this.$container.addClass("n2-basiccss-show-preset-list")},this)),this.$presets.on("mouseleave",t.proxy(function(){this.throttledUnSerialize(this.lastState)},this))},i.prototype.activate=function(e,i,n){this.inPresetList&&this.exitPresetList(!1),this.underActivate=!0,this.type&&this.type!==e&&"undefined"!=typeof this.storage[this.type]&&this.storage[this.type].detach();var s=!1;this.defs={font:[],style:[]},this.type=e;for(var o in this.assets){for(var r=0;r<n[o].length;r++)this.defs[o][n[o][r].name]=n[o][r].def;this.assets[o].load(i,n[o]),s=s||this.assets[o].hasVisuals}t("#n2-ss-layer-window").toggleClass("n2-ss-has-design-option",s),s||t('#n2-ss-layer-window .n2-sidebar-tab-switcher .n2-td[data-tab="style"]').hasClass("n2-active")&&t('#n2-ss-layer-window .n2-sidebar-tab-switcher .n2-td[data-tab="item"]').trigger("click"),this.underActivate=!1},i.prototype.deActivate=function(){this.inPresetList&&this.exitPresetList(!1)},i.prototype.serialize=function(){var t={};for(var e in this.assets)t[e]=this.assets[e].serialize();return t},i.prototype.unSerialize=function(t){for(var e in this.assets)this.assets[e].unSerialize(t[e])},i.prototype.throttledUnSerialize=function(e){this._addThrottledRenderTimeout(t.proxy(this.unSerialize,this,e))},i.prototype.saveAsNew=function(e){if("undefined"==typeof this.saveAsModal){var i=this;this.saveAsModal=new N2Classes.NextendModal({zero:{size:[500,220],title:n2_("Save as"),close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Save as new")+"</a>"],fn:{show:function(){var e=this.controls.find(".n2-button"),n=(this.content.find(".n2-form").on("submit",function(t){t.preventDefault(),e.trigger("click")}).append(this.createInput(n2_("Name"),"n2-visual-name","width: 446px;")),this.content.find("#n2-visual-name").focus());e.on("click",t.proxy(function(e){e.preventDefault();var s=n.val();""==s?N2Classes.Notification.error(n2_("Please fill the name field!")):N2Classes.AjaxHelper.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(i.ajaxUrl,{nextendaction:"addVisual"}),data:{type:i.type,value:N2Classes.Base64.encode(JSON.stringify({name:s,data:i.serialize()}))},dataType:"json"}).done(t.proxy(function(n){t.when(i.loadType()).done(function(){i.addVisual(n.data.visual).prependTo(i.storage[i.type])}),this.hide(e)},this))},this))}}}},!1)}this.saveAsModal.show()},i.prototype.loadType=function(){if("undefined"==typeof this.storage[this.type]){var e=t.Deferred(),i=t.proxy(function(i){this.storage[this.type]=t('<ul class="n2-list n2-h4"></ul>');for(var n=0;n<i.length;n++)this.addVisual(i[n]);e.resolve()},this);"undefined"==typeof window[this.type]?(this.storage[this.type]=e,N2Classes.AjaxHelper.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"loadVisuals"}),data:{type:this.type},dataType:"json"}).done(t.proxy(function(t){i(t.data.visuals)},this))):i(window[this.type])}return this.storage[this.type]},i.prototype.addVisual=function(e){var i=e.value;"{"!=i[0]&&(i=N2Classes.Base64.decode(i));var n=JSON.parse(i),s=t('<li><a href="#">'+n.name+"</a></li>").on({mouseenter:t.proxy(function(t,e){this.throttledUnSerialize(t.data)},this,n),click:t.proxy(function(t,e){e.preventDefault(),this.exitPresetList(t,e)},this,n.data)}).appendTo(this.storage[this.type]);if(e.id>1e4){var o=t('<span class="n2-actions"></span>').appendTo(s);t('<div class="n2-button n2-button-icon n2-button-s" data-n2tip="Overwrite preset"><i class="n2-i n2-i-save n2-i-grey-opacity"></i></div>').on("click",t.proxy(function(e,i,n){n.stopPropagation(),N2Classes.AjaxHelper.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"changeVisual"}),data:{visualId:e,value:N2Classes.Base64.encode(JSON.stringify({name:i,data:this.lastState})),type:this.type},dataType:"json"}).done(t.proxy(function(t){s.replaceWith(this.addVisual(t.data.visual))},this))},this,e.id,n.name)).appendTo(o),t('<div class="n2-button n2-button-icon n2-button-s"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></div>').on("click",t.proxy(function(e,i){i.preventDefault(),i.stopPropagation(),N2Classes.AjaxHelper.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"deleteVisual"}),data:{visualId:e,type:this.type},dataType:"json"}).done(t.proxy(function(t){s.remove()},this))},this,e.id)).appendTo(o),nextend.tooltip.add(o)}return s},i.prototype.exitPresetList=function(t,e){this.throttleSetTimeout&&clearTimeout(this.throttleSetTimeout),this.$presets.off("mouseleave"),t?(this.inPresetList=!1,this.unSerialize(t)):this.unSerialize(this.lastState),this.$container.removeClass("n2-basiccss-show-preset-list"),this.inPresetList=!1},i.prototype._addThrottledRenderTimeout=function(t){this.throttleSetTimeout&&clearTimeout(this.throttleSetTimeout),this.throttleSetTimeout=setTimeout(t,100)},i.prototype._addThrottledExitTimeout=function(t){this.throttleExitTimeout&&clearTimeout(this.throttleExitTimeout),this.throttleExitTimeout=setTimeout(t,100)},i}),N2D("FormElementCheckbox",["FormElement"],function(t,e){function i(e,i){this.separator="||",this.element=t("#"+e),this.values=i,this.checkboxes=this.element.parent().find(".n2-checkbox-option"),this.states=this.element.val().split(this.separator);for(var n=0;n<this.checkboxes.length;n++)"undefined"!=typeof this.states[n]&&this.states[n]==this.values[n]||(this.states[n]=""),this.checkboxes.eq(n).on("click",t.proxy(this.switchCheckbox,this,n));N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.switchCheckbox=function(t){this.states[t]==this.values[t]?(this.states[t]="",this.setSelected(t,0)):(this.states[t]=this.values[t],this.setSelected(t,1)),this.element.val(this.states.join(this.separator)),this.triggerOutsideChange()},i.prototype.insideChange=function(t){for(var e=t.split(this.separator),i=0;i<this.checkboxes.length;i++)"undefined"==typeof e[i]||e[i]!=this.values[i]?(this.states[i]="",this.setSelected(i,0)):(this.states[i]=this.values[i],this.setSelected(i,1));this.element.val(this.states.join(this.separator)),this.triggerInsideChange()},i.prototype.setSelected=function(t,e){e?this.checkboxes.eq(t).addClass("n2-active"):this.checkboxes.eq(t).removeClass("n2-active")},i}),N2D("FormElementColor",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),1==i?this.alpha=!0:this.alpha=!1,this.element.off("change").n2spectrum({showAlpha:this.alpha,preferredFormat:1==this.alpha?"hex8":"hex6",showInput:!1,showButtons:!1,move:t.proxy(this.onMove,this),showSelectionPalette:!0,showPalette:!0,maxSelectionSize:6,localStorageKey:"color",palette:[["000000","55aa39","357cbd","bb4a28","8757b2","000000CC"],["81898d","5cba3c","4594e1","d85935","9e74c2","00000080"],["ced3d5","27ae60","01add3","e79d19","e264af","FFFFFFCC"],["ffffff","2ecc71","00c1c4","ecc31f","ec87c0","FFFFFF80"]]}).on("change",t.proxy(this.onChange,this)),this.text=this.element.data("field"),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.onMove=function(){this.element.val(this.getCurrent()),this.triggerOutsideChange()},i.prototype.onChange=function(t){var e=this.getCurrent(),i=this.element.val();e!=i&&(i.length>0&&"{"!=i.charAt(0)?this.element.n2spectrum("set",i):0===i.length&&(i=1==this.alpha?"00000000":"000000",this.element.val(i),this.element.n2spectrum("set",i)),this.triggerInsideChange(),this.triggerOutsideChange()),t.stopImmediatePropagation()},i.prototype.insideChange=function(t){this.element.val(t),this.element.n2spectrum("set",t),this.triggerInsideChange()},i.prototype.getCurrent=function(){return this.alpha?this.element.n2spectrum("get").toHexString8():this.element.n2spectrum("get").toHexString(!0)},i}),N2D("FormElementDevice",["FormElementOnoff"],function(t,e){function i(t){N2Classes.FormElementOnoff.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElementOnoff.prototype),i.prototype.constructor=i,i.prototype.detach=function(){this.onoff.detach()},i.prototype.setSelected=function(t){t?this.onoff.addClass("n2-active"):this.onoff.removeClass("n2-active")},i}),N2D("FormElementDevices",["FormElementDevice"],function(t,e){function i(e,i){this.$el=t("#"+e).data("field",this),this.fields={};for(var n=0;n<i.length;n++)this.fields[i[n]]=new N2Classes.FormElementDevice(e+"-"+i[n])}return i.prototype.setAvailableDevices=function(t){for(var e in t){var i=this.fields[e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()];t[e]||i.detach()}this.$el.children().first().addClass("n2-first"),this.$el.children().last().addClass("n2-last")},i}),N2D("FormElementFolders",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.field=this.element.data("field"),this.parameters=i,this.editButton=t("#"+e+"_edit").on("click",t.proxy(this.edit,this)),this.button=t("#"+e+"_button").on("click",t.proxy(this.open,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.val=function(t){this.element.val(t),this.triggerOutsideChange()},i.prototype.open=function(e){e.preventDefault(),nextend.imageHelper.openFoldersLightbox(t.proxy(this.val,this))},i}),N2D("FormElementFont",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.parameters=i,this.defaultSetId=i.set,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),nextend.fontManager.$.on("visualDelete",t.proxy(this.fontDeleted,this)),this.updateName(this.element.val()),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.getLabel=function(){return this.parameters.label},i.prototype.show=function(e){e.preventDefault(),""!=this.parameters.style&&nextend.fontManager.setConnectedStyle(this.parameters.style),""!=this.parameters.style2&&nextend.fontManager.setConnectedStyle2(this.parameters.style2),this.defaultSetId&&nextend.fontManager.changeSetById(this.defaultSetId),nextend.fontManager.show(this.element.val(),t.proxy(this.save,this),{previewMode:this.parameters.previewmode,previewHTML:this.parameters.preview})},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){nextend.fontManager.addVisualUsage(this.parameters.previewmode,e,window.nextend.pre),this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(e){t.when(nextend.fontManager.getVisual(e)).done(t.proxy(function(t){this.name.val(t.name)},this))},i.prototype.fontDeleted=function(t,e){e==this.element.val()&&this.insideChange("")},i.prototype.renderFont=function(){var t=this.element.val();return nextend.fontManager.addVisualUsage(this.parameters.previewmode,t,""),nextend.fontManager.getClass(t,this.parameters.previewmode)},i}),N2D("FormElementIcon2Manager",["FormElement"],function(t,e){function i(e){this.element=t("#"+e),this.button=t("#"+e+"_edit").on("click",t.proxy(this.openModal,this)),this.preview=this.element.parent().find(".n2-form-element-preview").on("click",t.proxy(this.openModal,this)),this.element.on("nextendChange",t.proxy(this.makePreview,this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this))}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.insideChange=function(t){this.element.val(t),this.triggerInsideChange()},i.prototype.openModal=function(e){e&&e.preventDefault(),N2Classes.Icons.showModal(t.proxy(this.setIcon,this),this.element.val())},i.prototype.val=function(t){this.element.val(t),this.triggerOutsideChange()},i.prototype.setIcon=function(t){this.val(t)},i.prototype.makePreview=function(){var t=N2Classes.Icons.render(this.element.val());t?this.preview.html('<i class="n2i '+t["class"]+'">'+t.ligature+"</i>"):this.preview.html("")},i.prototype.focus=function(t){t&&this.openModal()},i}),N2D("FormElementIconManager",["FormElement"],function(t,e){function i(){if(!s){var e="";s=new N2Classes.NextendModal({zero:{size:[1200,600],title:"Icons",back:!1,close:!0,content:e,fn:{show:function(){var e=this.content.find(".n2-icon");e.on("click",t.proxy(function(e){var i=t(e.currentTarget).clone(),n=i.find("svg");if(n[0].hasChildNodes())for(var s=n[0].childNodes,r=0;r<s.length;r++)s[r].setAttribute("data-style","{style}");o(i.html()),this.hide(e)},this))}}}},!1),s.setCustomClass("n2-icons-modal")}return s}function n(e){this.element=t("#"+e),this.button=t("#"+e+"_edit").on("click",t.proxy(this.openModal,this)),this.preview=this.element.parent().find("img").on("click",t.proxy(this.openModal,this)),this.element.on("nextendChange",t.proxy(this.makePreview,this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}var s=null,o=function(){};return n.prototype=Object.create(N2Classes.FormElement.prototype),n.prototype.constructor=n,n.prototype.insideChange=function(t){this.element.val(t),this.triggerInsideChange()},n.prototype.openModal=function(e){e&&e.preventDefault(),o=t.proxy(this.setIcon,this),i().show()},n.prototype.val=function(t){this.element.val(t),this.triggerOutsideChange()},n.prototype.setIcon=function(t){this.val(t)},n.prototype.makePreview=function(){this.preview.attr("src","data:image/svg+xml;base64,"+N2Classes.Base64.encode(this.element.val()))},n.prototype.focus=function(t){t&&this.openModal()},n}),N2D("FormElementImage",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.field=this.element.data("field"),this.field.connectedField=this,this.parameters=i,this.preview=t("#"+e+"_preview").on("click",t.proxy(this.open,this)),this.element.on("nextendChange",t.proxy(this.makePreview,this)),this.button=t("#"+e+"_button").on("click",t.proxy(this.open,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this))}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.val=function(e,i){i=t.extend({alt:!1},i),i.alt&&""!==i.alt&&this.parameters.alt&&""!==this.parameters.alt&&t("#"+this.parameters.alt).val(i.alt).trigger("change"),this.element.val(e),this.triggerOutsideChange()},i.prototype.makePreview=function(){var t=this.element.val();"{"===t.substr(0,1)?this.preview.css("background-image",""):this.preview.css("background-image","url("+nextend.imageHelper.fixed(t)+")")},i.prototype.open=function(e){e&&e.preventDefault(),nextend.imageHelper.openLightbox(t.proxy(this.val,this))},i.prototype.focus=function(t){t&&this.open()},i}),N2D("FormElementImageManager",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),t("#"+e+"_manage").on("click",t.proxy(this.show,this)),this.parameters=i,this.imageField=this.element.data("field"),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.show=function(e){e.preventDefault(),nextend.imageManager.show(this.element.val(),t.proxy(this.save,this))},i.prototype.save=function(){},i.prototype.insideChange=function(t){this.element.val(t),this.triggerInsideChange()},i}),N2D("FormElementList",["FormElement"],function(t,e){function i(i,n,s,o){if(this.separator="||",this.element=t("#"+i).on("change",t.proxy(this.onHiddenChange,this)),this.select=t("#"+i+"_select").on("change",t.proxy(this.onChange,this)),this.multiple=n,this.relatedFields=!1,s!==e&&s.length){this.relatedFields=t("");for(var r=0;r<s.length;r++)this.relatedFields=this.relatedFields.add(t('[data-field="'+s[r]+'"]'));this.relatedFields.toggleClass("n2-hidden",this.isOff(this.element.val()))}if(this.relatedValueFields=!1,o!==e&&o.length){var a=this.element.val();this.relatedValueFields=t("");for(var r=0;r<o.length;r++){var l=t('[data-field="'+o[r].field+'"]').data("show-values",o[r].values);l.toggleClass("n2-hidden",-1===t.inArray(a,o[r].values)),this.relatedValueFields=this.relatedValueFields.add(l)}}N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.onHiddenChange=function(){var t=this.element.val();t&&t!=this.select.val()&&this.insideChange(t)},i.prototype.onChange=function(){var t=this.select.val();null!==t&&"object"==typeof t&&(t=t.join(this.separator)),this.setHiddenValue(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){"object"==typeof t?this.select.val(t.split(this.separator)):this.select.val(t),this.setHiddenValue(t),this.select.val(t),this.triggerInsideChange()},i.prototype.setHiddenValue=function(e){this.element.val(e),this.relatedFields&&this.relatedFields.toggleClass("n2-hidden",this.isOff(e)),this.relatedValueFields&&this.relatedValueFields.each(function(){var i=t(this);i.toggleClass("n2-hidden",-1===t.inArray(e,i.data("show-values")))})},i.prototype.isOff=function(t){return""==t||"0"==t||"off"==t},i}),N2D("FormElementMarginPadding",["FormElementMixed"],function(t,e){function i(e,i,n){this.linkedValues=!1,N2Classes.FormElementMixed.prototype.constructor.apply(this,arguments),this.$field=this.element.parent(),this.$field.find(".n2-text-sub-label").on("click",t.proxy(function(t){t.preventDefault(),this.linkedValues=!this.linkedValues,this.$field.toggleClass("n2-values-linked",this.linkedValues),this.linkedValues&&this.elements[0].trigger("change")},this))}return i.prototype=Object.create(N2Classes.FormElementMixed.prototype),i.prototype.constructor=i,i.prototype.onFieldChange=function(){if(this.linkedValues)for(var t=this.elements[0].val(),e=1;4>e;e++)this.elements[e].data("field").insideChange(t);this.element.val(this.getValue()),this.triggerOutsideChange()},i.prototype.insideChange=function(t){N2Classes.FormElementMixed.prototype.insideChange.apply(this,arguments),this.linkedValues=!0;for(var t=this.elements[0].val(),e=1;4>e;e++)if(t!=this.elements[e].val()){this.linkedValues=!1;break}this.$field.toggleClass("n2-values-linked",this.linkedValues)},i}),N2D("FormElementMixed",["FormElement"],function(t,e){function i(e,i,n){this.element=t("#"+e),this.elements=[];for(var s=0;s<i.length;s++)this.elements.push(t("#"+i[s]).on("outsideChange",t.proxy(this.onFieldChange,this)));this.separator=n,N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.onFieldChange=function(){this.element.val(this.getValue()),this.triggerOutsideChange()},i.prototype.insideChange=function(t){if("string"==typeof t&&-1!==t.indexOf(this.separator)){this.element.val(t);for(var e=t.split(this.separator),i=0;i<this.elements.length;i++)this.elements[i].data("field").insideChange(e[i]);this.triggerInsideChange()}},i.prototype.getValue=function(){for(var t=[],e=0;e<this.elements.length;e++)t.push(this.elements[e].val());return t.join(this.separator)},i}),N2D("FormElementNumberSlider",function(t,e){function i(e,i){this.localChange=!1,this.element=t("#"+e).data("autocomplete",this);var n=this.element.parent().on({"mouseenter.n2slider":t.proxy(this.startSlider,this,i)}),s=n.siblings(".n2-form-element-units").find("> input");if(i.units&&s.length){var o=i.units;s.on("nextendChange",t.proxy(function(){i.min=o[s.val()+"Min"],i.max=o[s.val()+"SliderMax"],this.slider&&(this.slider.nUISlider("option","min",i.min),this.slider.nUISlider("option","max",i.max))},this))}}return i.prototype.startSlider=function(e,i){this.element.parent().off(".n2slider"),this.slider||(this.slider=t("<div></div>").appendTo(t('<div class="nui-slider-container"></div>').insertAfter(this.element)).removeAttr("slide").prop("slide",!1).nUISlider(t.extend({start:t.proxy(function(){this.element.parent().addClass("n2-active")},this),stop:t.proxy(function(){this.element.parent().removeClass("n2-active")},this),slide:t.proxy(function(t,e){this.localChange=!0,this.element.val(e.value).trigger("change"),this.localChange=!1},this)},e)),"undefined"!=typeof this.slider[0].slide&&(this.slider[0].slide=null),this.element.on("nextendChange",t.proxy(function(){if(!this.localChange){var t=this.element.val();t==parseFloat(t)&&this.slider.nUISlider("option","value",parseFloat(this.element.val()))}},this))),this.slider.nUISlider("option","value",parseFloat(this.element.val()))},i}),N2D("FormElementNumber",["FormElement"],function(t,e){function i(e,i,n,s){this.min=i,this.max=n,this.element=t("#"+e).on({focus:t.proxy(this._focus,this),blur:t.proxy(this.blur,this),change:t.proxy(this.change,this)}),this.parent=this.element.parent();var o=this.parent.siblings(".n2-form-element-units").find("> input");s&&o.length&&o.on("nextendChange",t.proxy(function(){this.min=s[o.val()+"Min"],this.max=s[o.val()+"Max"]},this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype._focus=function(){this.parent.addClass("focus"),this.element.on("keypress.n2-text",t.proxy(function(t){13==t.which&&(this.element.off("keypress.n2-text"),this.element.trigger("blur"))},this))},i.prototype.blur=function(){this.parent.removeClass("focus")},i.prototype.change=function(){var t=this.validate(this.element.val());t===!0?this.triggerOutsideChange():this.element.val(t).trigger("change")},i.prototype.insideChange=function(t){var e=this.validate(t);e===!0?this.element.val(t):this.element.val(e),this.triggerInsideChange()},i.prototype.validate=function(t){var e=parseFloat(t);return isNaN(e)&&(e=0),e=Math.max(this.min,Math.min(this.max,e)),e!=t?e:!0},i}),N2D("FormElementOnoff",["FormElement"],function(t,e){function i(i,n,s){if(this.element=t("#"+i),this.isEnable=!!n,this.relatedFields=t(""),s!==e){if(s.relatedFields!==e&&s.relatedFields.length)for(var o=0;o<s.relatedFields.length;o++)this.relatedFields=this.relatedFields.add(t('[data-field="'+s.relatedFields[o]+'"]'));if(s.relatedAttribute!==e&&""!==s.relatedAttribute){var r=t("#n2-admin");r.attr("data-"+s.relatedAttribute,this.element.val()),this.element.on("nextendChange",t.proxy(function(){r.attr("data-"+s.relatedAttribute,this.element.val())},this))}}this.onoff=this.element.parent().on("click",t.proxy(this["switch"],this)),this.onoff.hasClass("n2-onoff-on")?this.relatedFields.toggleClass("n2-hidden",!this.isEnable):this.relatedFields.toggleClass("n2-hidden",this.isEnable),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype["switch"]=function(){var t=parseInt(this.element.val());t=t?0:1,this.element.val(t),this.setSelected(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){t=parseInt(t),this.element.val(t),this.setSelected(t),this.triggerInsideChange()},i.prototype.setSelected=function(t){t?(this.onoff.addClass("n2-onoff-on"),this.relatedFields.toggleClass("n2-hidden",!this.isEnable)):(this.onoff.removeClass("n2-onoff-on"),this.relatedFields.toggleClass("n2-hidden",this.isEnable))},i}),N2D("FormElementRadio",["FormElement"],function(t,e){function i(i,n,s){if(this.element=t("#"+i),this.values=n,this.relatedFields=!1,s!==e&&s.length){this.relatedFields=t("");for(var o=0;o<s.length;o++)this.relatedFields=this.relatedFields.add(t('[data-field="'+s[o]+'"]'));this.relatedFields.toggleClass("n2-hidden",this.isOff(this.element.val()))}this.parent=this.element.parent(),this.options=this.parent.find(".n2-radio-option");for(var o=0;o<this.options.length;o++)this.options.eq(o).on("click",t.proxy(this.click,this));N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.click=function(t){this.changeSelectedIndex(this.options.index(t.currentTarget))},i.prototype.changeSelectedIndex=function(t){var e=this.values[t];this.setValue(e),this.setSelected(t),this.triggerOutsideChange()},i.prototype.insideChange=function(e,i){var n=t.inArray(e,this.values);"-1"==n&&(n=this.partialSearch(e)),"-1"==n&&"undefined"!=typeof i&&(n=this.addOption(e,i)),"-1"!=n?(this.setValue(this.values[n]),this.setSelected(n),this.triggerInsideChange()):this.options.eq(0).trigger("click")},i.prototype.setSelected=function(t){this.options.removeClass("n2-active"),this.options.eq(t).addClass("n2-active")},i.prototype.partialSearch=function(t){t=t.replace(/^.*[\\\/]/,"");for(var e=0;e<this.values.length;e++)if(-1!=this.values[e].indexOf(t))return e;return-1},i.prototype.addOption=function(e,i){var n=this.values.push(e)-1;return i.appendTo(this.parent).on("click",t.proxy(this.click,this)),this.options=this.options.add(i),n},i.prototype.addTabOption=function(e,i){var n=this.values.push(e)-1,s=t('<div class="n2-radio-option n2-h4 n2-last">'+i+"</div>").insertAfter(this.options.last().removeClass("n2-last")).on("click",t.proxy(this.click,this));return this.options=this.options.add(s),n},i.prototype.removeTabOption=function(e){var i=t.inArray(e,this.values),n=this.options.eq(i);this.options=this.options.not(n),n.remove(),0==i&&this.options.eq(0).addClass("n2-first"),
i==this.options.length&&this.options.eq(this.options.length-1).addClass("n2-last"),this.values.splice(i,1)},i.prototype.moveTab=function(t,e){},i.prototype.setValue=function(t){this.element.val(t),this.relatedFields&&this.relatedFields.toggleClass("n2-hidden",this.isOff(t))},i.prototype.isOff=function(t){return""===t||"0"===t||0===t||"off"===t},i}),N2D("FormRelatedFields",function(t,e){function i(i,n){this.$field=t("#"+i),this.field=this.$field.data("field"),this.field&&this.field.relatedFieldsOff!==e?this.fieldChanged=this.fieldChangedCallback:this.fieldChanged=this.fieldChangedSimple,this.$field.on("nextendChange",t.proxy(this.fieldChanged,this)),this.relatedFields=t("");for(var s=0;s<n.length;s++)this.relatedFields=this.relatedFields.add(t('[data-field="'+n[s]+'"]'));this.fieldChanged()}return i.prototype.fieldChangedSimple=function(){var t=this.$field.val();this.relatedFields.toggleClass("n2-hidden",""===t)},i.prototype.fieldChangedCallback=function(){this.relatedFields.toggleClass("n2-hidden",this.field.relatedFieldsOff())},i}),N2D("FormElementRichText",["FormElementText"],function(t,e){function i(e){N2Classes.FormElementText.prototype.constructor.apply(this,arguments),this.parent.find(".n2-textarea-rich-bold").on("click",t.proxy(this.bold,this)),this.parent.find(".n2-textarea-rich-italic").on("click",t.proxy(this.italic,this)),this.parent.find(".n2-textarea-rich-link").on("click",t.proxy(this.link,this))}return i.prototype=Object.create(N2Classes.FormElementText.prototype),i.prototype.constructor=i,i.prototype.bold=function(){this.wrapText("<b>","</b>")},i.prototype.italic=function(){this.wrapText("<i>","</i>")},i.prototype.link=function(){this.wrapText('<a href="#">',"</a>")},i.prototype.list=function(){this.wrapText("","\n<ul>\n<li>#1 Item</li>\n<li>#2 Item</li>\n</ul>\n")},i.prototype.wrapText=function(t,e){var i=this.element,n=i.val().length,s=i[0].selectionStart,o=i[0].selectionEnd,r=i.val().substring(s,o),a=t+r+e;i.val(i.val().substring(0,s)+a+i.val().substring(o,n)),this.triggerOutsideChange(),this.element.focus()},i}),N2D("FormElementSkin",["FormElement"],function(t,e){function i(e,i,n,s){this.element=t("#"+e),this.preId=i,this.skins=n,this.list=this.element.data("field"),this.fixedMode=s,this.firstOption=this.list.select.find("option").eq(0),this.originalText=this.firstOption.text(),this.element.on("nextendChange",t.proxy(this.onSkinSelect,this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.onSkinSelect=function(){var e=this.element.val();if("0"!=e){e=this.skins[e].settings;for(var i in e)if(e.hasOwnProperty(i)){var n=t("#"+this.preId+i);if(n.length){var s=n.data("field");s.insideChange(e[i])}}this.fixedMode||(this.changeFirstOptionText(n2_("Done")),this.list.insideChange("0"),setTimeout(t.proxy(this.changeFirstOptionText,this,this.originalText),3e3))}},i.prototype.changeFirstOptionText=function(t){this.firstOption.text(t)},i.prototype.insideChange=function(t){this.element.val(t),this.list.select.val(t)},i}),N2D("FormElementStyle",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.parameters=i,this.defaultSetId=i.set,this.element.parent().on("click",t.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this)),this.name=this.element.siblings("input"),nextend.styleManager.$.on("visualDelete",t.proxy(this.styleDeleted,this)),this.updateName(this.element.val()),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.getLabel=function(){return this.parameters.label},i.prototype.show=function(e){e.preventDefault(),""!=this.parameters.font&&nextend.styleManager.setConnectedFont(this.parameters.font),""!=this.parameters.font2&&nextend.styleManager.setConnectedFont2(this.parameters.font2),""!=this.parameters.style2&&nextend.styleManager.setConnectedStyle(this.parameters.style2),this.defaultSetId&&nextend.styleManager.changeSetById(this.defaultSetId),nextend.styleManager.show(this.element.val(),t.proxy(this.save,this),{previewMode:this.parameters.previewmode,previewHTML:this.parameters.preview})},i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("")},i.prototype.save=function(t,e){nextend.styleManager.addVisualUsage(this.parameters.previewmode,e,window.nextend.pre),this.val(e)},i.prototype.val=function(t){this.element.val(t),this.updateName(t),this.triggerOutsideChange()},i.prototype.insideChange=function(t){this.element.val(t),this.updateName(t),this.triggerInsideChange()},i.prototype.updateName=function(e){t.when(nextend.styleManager.getVisual(e)).done(t.proxy(function(t){this.name.val(t.name)},this))},i.prototype.styleDeleted=function(t,e){e==this.element.val()&&this.insideChange("")},i.prototype.renderStyle=function(){var t=this.element.val();return nextend.styleManager.addVisualUsage(this.parameters.previewmode,t,""),nextend.styleManager.getClass(t,this.parameters.previewmode)},i}),N2D("FormElementSubform",["FormElement"],function($,undefined){function FormElementSubform(t,e,i,n,s){this.id=t,this.ajaxUrl=e,this.element=$("#"+t),this.target=$("#"+i),this.tab=n,this.originalValue=s,this.form=this.element.closest("form").data("form"),this.list=this.element.data("field"),this.element.on("nextendChange",$.proxy(this.loadSubform,this)),N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return FormElementSubform.prototype=Object.create(N2Classes.FormElement.prototype),FormElementSubform.prototype.constructor=FormElementSubform,FormElementSubform.prototype.loadSubform=function(){var t=this.element.val();if("disabled"==t)this.target.html("");else{var e=[];t==this.originalValue&&(e=this.form.values);var i={values:e,value:t};N2Classes.AjaxHelper.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(this.ajaxUrl),data:i,dataType:"json"}).done($.proxy(this.load,this))}},FormElementSubform.prototype.load=function(response){this.target.html(response.data.html),eval(response.data.scripts),nextend.tooltip.add(this.target)},FormElementSubform}),N2D("FormElementSubformImage",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.options=t("#"+i).find(".n2-subform-image-option"),this.subform=this.element.data("field"),this.active=this.getIndex(this.options.filter(".n2-active").get(0));for(var n=0;n<this.options.length;n++)this.options.eq(n).on("click",t.proxy(this.selectOption,this));N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.selectOption=function(t){var e=this.getIndex(t.currentTarget);if(e!=this.active){this.options.eq(e).addClass("n2-active"),this.options.eq(this.active).removeClass("n2-active"),this.active=e;var i=this.subform.list.select.find("option").eq(e).val();this.subform.list.insideChange(i)}},i.prototype.getIndex=function(e){return t.inArray(e,this.options)},i}),N2D("FormElementSwitcher",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.options=this.element.parent().find(".n2-switcher-unit"),this.active=this.options.index(this.options.filter(".n2-active")),this.values=i;for(var n=0;n<this.options.length;n++)this.options.eq(n).on("click",t.proxy(this["switch"],this,n));N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype["switch"]=function(t,e){this.element.val(this.values[t]),this.setSelected(t),this.triggerOutsideChange()},i.prototype.insideChange=function(e){var i=t.inArray(e,this.values);this.element.val(this.values[i]),this.setSelected(i),this.triggerInsideChange()},i.prototype.setSelected=function(t){this.options.eq(this.active).removeClass("n2-active"),this.options.eq(t).addClass("n2-active"),this.active=t},i}),N2D("FormElementUnits",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.options=this.element.parent().find(".n2-element-unit"),this.currentUnit=this.element.parent().find(".n2-element-current-unit"),this.values=i;for(var n=0;n<this.options.length;n++)this.options.eq(n).on("click",t.proxy(this["switch"],this,n));N2Classes.FormElement.prototype.constructor.apply(this,arguments)}return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype["switch"]=function(t,e){this.element.val(this.values[t]),this.setSelected(t),this.triggerOutsideChange()},i.prototype.insideChange=function(e){var i=t.inArray(e,this.values);this.element.val(this.values[i]),this.setSelected(i),this.triggerInsideChange()},i.prototype.setSelected=function(t){this.currentUnit.html(this.options.eq(t).html())},i}),N2D("FormElementUrl",["FormElement"],function(t,e){function i(e,i){this.element=t("#"+e),this.field=this.element.data("field"),this.parameters=i,n=this.parameters.url,this.button=t("#"+e+"_button").on("click",t.proxy(this.open,this)),this.element.siblings(".n2-form-element-clear").on("click",t.proxy(this.clear,this))}var n="",s=null,o={},r=function(t){},a="";return i.prototype=Object.create(N2Classes.FormElement.prototype),i.prototype.constructor=i,i.prototype.clear=function(t){t.preventDefault(),t.stopPropagation(),this.val("#")},i.prototype.val=function(t){this.element.val(t),this.triggerOutsideChange()},i.prototype.open=function(e){e.preventDefault(),r=t.proxy(this.insert,this),a=this.element.val(),this.getModal().show()},i.prototype.insert=function(t){this.val(t)},i.prototype.getModal=function(){if(!s){var e=function(e){return"undefined"==typeof o[e]&&(o[e]=t.ajax({type:"POST",url:N2Classes.AjaxHelper.makeAjaxUrl(n),data:{keyword:e},dataType:"json"})),o[e]},i=(this.parameters,{size:[600,500],title:n2_("Link"),back:"zero",close:!0,content:'<div class="n2-form"></div>',fn:{show:function(){this.content.find(".n2-form").append(this.createInput(n2_("Keyword"),"n2-links-keyword","width:546px;"));var i=t("#n2-links-keyword"),n=this.createHeading("").appendTo(this.content),o=this.createResult().appendTo(this.content),l="";i.on("keyup",t.proxy(function(){l=i.val(),e(l).done(t.proxy(function(e){if(i.val()==l){var s=e.data;""==l?n.html(n2_("No search term specified. Showing recent items.")):n.html(n2_printf(n2_('Showing items match for "%s"'),l));for(var a=[],h=this,p=0;p<s.length;p++)a.push([s[p].title,s[p].info,t('<div class="n2-button n2-button-normal n2-button-xs n2-radius-s n2-button-green n2-uc n2-h5">'+n2_("Select")+"</div>").on("click",{permalink:s[p].link},function(t){r(t.data.permalink),h.hide()})]);o.html(""),this.createTable(a,["width:100%;","",""]).appendTo(this.createTableWrap().appendTo(o))}},this))},this)).trigger("keyup").focus(),this.content.append('<hr style="margin: 0 -20px;"/>');var h=t('<div class="n2-input-button"><input placeholder="'+n2_("External url")+'" type="text" id="external-url" name="external-url" value="" /><a href="#" class="n2-button n2-button-normal n2-button-l n2-radius-s n2-button-green n2-uc n2-h4">'+n2_("Insert")+"</a></div>").css({display:"block",textAlign:"center"}).appendTo(this.content),p=h.find("input").val(a);h.find(".n2-button").on("click",function(t){t.preventDefault(),r(p.val()),s.hide()})}}});i.back=!1,s=new N2Classes.NextendModal({zero:i},!1),s.setCustomClass("n2-url-modal")}return s},i}),N2R("$",function(t){function e(){this._vendor=null}function i(){var t=!1,e=document.createElement("div"),i=document.createElement("div");e.appendChild(i),e.style[c]="translate(0)",e.style.marginTop="10px",e.style.visibility="hidden",i.style.position="fixed",i.style.top=0,document.body.appendChild(e);var n=i.getBoundingClientRect();return n.top>0&&(t=!0),document.body.removeChild(e),t}function n(e,i,n){this.child=e,this._$child=t(e),this.parent=i,this.options={className:"fixto-fixed",top:0,mindViewport:!1},this._setOptions(n)}function s(t,e,i){n.call(this,t,e,i),this._replacer=new a.MimicNode(t),this._ghostNode=this._replacer.replacer,this._saveStyles(),this._saveViewportHeight(),this._proxied_onscroll=this._bind(this._onscroll,this),this._proxied_onresize=this._bind(this._onresize,this),this.start()}function o(t,e,i){n.call(this,t,e,i),this.start()}var r=function(){var t={getAll:function(t){return document.defaultView.getComputedStyle(t)},get:function(t,e){return this.getAll(t)[e]},toFloat:function(t){return parseFloat(t,10)||0},getFloat:function(t,e){return this.toFloat(this.get(t,e))},_getAllCurrentStyle:function(t){return t.currentStyle}};return document.documentElement.currentStyle&&(t.getAll=t._getAllCurrentStyle),t}(),a=function(){function e(t){this.element=t,this.replacer=document.createElement("div"),this.replacer.style.visibility="hidden",this.hide(),t.parentNode.insertBefore(this.replacer,t)}e.prototype={replace:function(){var t=this.replacer.style,e=r.getAll(this.element);t.width=this._width(),t.height=this._height(),t.marginTop=e.marginTop,t.marginBottom=e.marginBottom,t.marginLeft=e.marginLeft,t.marginRight=e.marginRight,t.cssFloat=e.cssFloat,t.styleFloat=e.styleFloat,t.position=e.position,t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left,t.display=e.display},hide:function(){this.replacer.style.display="none"},_width:function(){return this.element.getBoundingClientRect().width+"px"},_widthOffset:function(){return this.element.offsetWidth+"px"},_height:function(){return this.element.getBoundingClientRect().height+"px"},_heightOffset:function(){return this.element.offsetHeight+"px"},destroy:function(){t(this.replacer).remove();for(var e in this)this.hasOwnProperty(e)&&(this[e]=null)}};var i=document.documentElement.getBoundingClientRect();return i.width||(e.prototype._width=e.prototype._widthOffset,e.prototype._height=e.prototype._heightOffset),{MimicNode:e,computedStyle:r}}();e.prototype={_vendors:{webkit:{cssPrefix:"-webkit-",jsPrefix:"Webkit"},moz:{cssPrefix:"-moz-",jsPrefix:"Moz"},ms:{cssPrefix:"-ms-",jsPrefix:"ms"},opera:{cssPrefix:"-o-",jsPrefix:"O"}},_prefixJsProperty:function(t,e){return t.jsPrefix+e[0].toUpperCase()+e.substr(1)},_prefixValue:function(t,e){return t.cssPrefix+e},_valueSupported:function(t,e,i){try{return i.style[t]=e,i.style[t]===e}catch(n){return!1}},propertySupported:function(t){return void 0!==document.documentElement.style[t]},getJsProperty:function(t){if(this.propertySupported(t))return t;if(this._vendor)return this._prefixJsProperty(this._vendor,t);var e;for(var i in this._vendors)if(e=this._prefixJsProperty(this._vendors[i],t),this.propertySupported(e))return this._vendor=this._vendors[i],e;return null},getCssValue:function(t,e){var i=document.createElement("div"),n=this.getJsProperty(t);if(this._valueSupported(n,e,i))return e;var s;if(this._vendor&&(s=this._prefixValue(this._vendor,e),this._valueSupported(n,s,i)))return s;for(var o in this._vendors)if(s=this._prefixValue(this._vendors[o],e),this._valueSupported(n,s,i))return this._vendor=this._vendors[o],s;return null}};var l,h,p=new e,c=p.getJsProperty("transform"),u=p.getCssValue("position","sticky"),d=p.getCssValue("position","fixed"),f="Microsoft Internet Explorer"===navigator.appName;f&&(h=parseFloat(navigator.appVersion.split("MSIE")[1])),n.prototype={_mindtop:function(){var t=0;if(this._$mind)for(var e,i,n=0,s=this._$mind.length;s>n;n++)if(e=this._$mind[n],i=e.getBoundingClientRect(),i.height)t+=i.height;else{var o=r.getAll(e);t+=e.offsetHeight+r.toFloat(o.marginTop)+r.toFloat(o.marginBottom)}return t},stop:function(){this._stop(),this._running=!1},start:function(){this._running||(this._start(),this._running=!0)},destroy:function(){this.stop(),this._destroy(),this._$child.removeData("fixto-instance");for(var t in this)this.hasOwnProperty(t)&&(this[t]=null)},_setOptions:function(e){t.extend(this.options,e),this.options.mind&&(this._$mind=t(this.options.mind)),this.options.zIndex&&(this.child.style.zIndex=this.options.zIndex)},setOptions:function(t){this._setOptions(t),this.refresh()},_stop:function(){},_start:function(){},_destroy:function(){},refresh:function(){}},s.prototype=new n,t.extend(s.prototype,{_bind:function(t,e){return function(){return t.call(e)}},_toresize:8===h?document.documentElement:window,_onscroll:function(){if(this._scrollTop=document.documentElement.scrollTop||document.body.scrollTop,this._parentBottom=this.parent.offsetHeight+this._fullOffset("offsetTop",this.parent),this.options.mindBottomPadding!==!1&&(this._parentBottom-=r.getFloat(this.parent,"paddingBottom")),!this.fixed&&this._shouldFix())this._fix(),this._adjust();else{if(this._scrollTop>this._parentBottom||this._scrollTop<this._fullOffset("offsetTop",this._ghostNode)-this.options.top-this._mindtop())return void this._unfix();this._adjust()}},_shouldFix:function(){return this._scrollTop<this._parentBottom&&this._scrollTop>this._fullOffset("offsetTop",this.child)-this.options.top-this._mindtop()?!this.options.mindViewport||this._isViewportAvailable():void 0},_isViewportAvailable:function(){var t=r.getAll(this.child);return this._viewportHeight>this.child.offsetHeight+r.toFloat(t.marginTop)+r.toFloat(t.marginBottom)},_adjust:function(){var t=0,e=this._mindtop(),i=0,n=r.getAll(this.child),s=null;l&&(s=this._getContext(),s&&(t=Math.abs(s.getBoundingClientRect().top))),i=this._parentBottom-this._scrollTop-(this.child.offsetHeight+r.toFloat(n.marginBottom)+e+this.options.top),i>0&&(i=0),this.fixed?this.child.style.top=i+e+t+this.options.top-r.toFloat(n.marginTop)+"px":this.child.style.top="auto"},_fullOffset:function(t,e,i){for(var n=e[t],s=e.offsetParent;null!==s&&s!==i;)n+=s[t],s=s.offsetParent;return n},_getContext:function(){for(var t,e,i=this.child,n=null;!n;){if(t=i.parentNode,t===document.documentElement)return null;if(e=r.getAll(t),"none"!==e[c]){n=t;break}i=t}return n},_fix:function(){var t,e=window.n2const.isRTL(),i=this.child,n=i.style,s=r.getAll(i);t=e?document.body.clientWidth-i.getBoundingClientRect().right:i.getBoundingClientRect().left;var o=s.width;if(this._saveStyles(),document.documentElement.currentStyle&&(o=i.offsetWidth-(r.toFloat(s.paddingLeft)+r.toFloat(s.paddingRight)+r.toFloat(s.borderLeftWidth)+r.toFloat(s.borderRightWidth))+"px"),l){var a=this._getContext();a&&(t=e?document.body.clientWidth-i.getBoundingClientRect().right-(document.body.clientWidth-a.getBoundingClientRect().right):i.getBoundingClientRect().left-a.getBoundingClientRect().left)}this._replacer.replace(),e?n.right=t-r.toFloat(s.marginRight)+"px":n.left=t-r.toFloat(s.marginLeft)+"px",n.width=o,n.position="fixed",n.top=this._mindtop()+this.options.top-r.toFloat(s.marginTop)+"px",this._$child.addClass(this.options.className),this.fixed=!0},_unfix:function(){var t=this.child.style;this._replacer.hide(),t.position=this._childOriginalPosition,t.top=this._childOriginalTop,t.width=this._childOriginalWidth,window.n2const.isRTL()?t.right=this._childOriginalRight:t.left=this._childOriginalLeft,this._$child.removeClass(this.options.className),this.fixed=!1},_saveStyles:function(){var t=this.child.style;this._childOriginalPosition=t.position,this._childOriginalTop=t.top,this._childOriginalWidth=t.width,window.n2const.isRTL()?this._childOriginalRight=t.right:this._childOriginalLeft=t.left},_onresize:function(){this.refresh()},_saveViewportHeight:function(){this._viewportHeight=window.innerHeight||document.documentElement.clientHeight},_stop:function(){this._unfix(),t(window).unbind("scroll",this._proxied_onscroll),t(this._toresize).unbind("resize",this._proxied_onresize)},_start:function(){this._onscroll(),t(window).bind("scroll",this._proxied_onscroll),t(this._toresize).bind("resize",this._proxied_onresize)},_destroy:function(){this._replacer.destroy()},refresh:function(){this._saveViewportHeight(),this._unfix(),this._onscroll()}}),o.prototype=new n,t.extend(o.prototype,{_start:function(){var t=r.getAll(this.child);this._childOriginalPosition=t.position,this._childOriginalTop=t.top,this.child.style.position=u,this.refresh()},_stop:function(){this.child.style.position=this._childOriginalPosition,this.child.style.top=this._childOriginalTop},refresh:function(){this.child.style.top=this._mindtop()+this.options.top+"px"}});var m=function(t,e,n){return u&&!n||u&&n&&n.useNativeSticky!==!1?new o(t,e,n):d?(void 0===l&&(l=i()),new s(t,e,n)):"Neither fixed nor sticky positioning supported"};8>h&&(m=function(){return"not supported"}),t.fn.fixTo=function(e,i){var n=t(e),s=0;return this.each(function(){var o=t(this).data("fixto-instance");if(o){var r=e;o[r].call(o,i)}else t(this).data("fixto-instance",m(this,n[s],i));s++})}}),N2R("$",function(t){"use strict";function e(){var t=!1;if("localStorage"in window)try{window.localStorage.setItem("_tmptest","tmpval"),t=!0,window.localStorage.removeItem("_tmptest")}catch(e){}if(t)try{window.localStorage&&(w=window.localStorage,C="localStorage",k=w.jStorage_update)}catch(i){}else if("globalStorage"in window)try{window.globalStorage&&(w="localhost"==window.location.hostname?window.globalStorage["localhost.localdomain"]:window.globalStorage[window.location.hostname],C="globalStorage",k=w.jStorage_update)}catch(o){}else{if(_=document.createElement("link"),!_.addBehavior)return void(_=null);_.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(_);try{_.load("jStorage")}catch(r){_.setAttribute("jStorage","{}"),_.save("jStorage"),_.load("jStorage")}var a="{}";try{a=_.getAttribute("jStorage")}catch(h){}try{k=_.getAttribute("jStorage_update")}catch(p){}w.jStorage=a,C="userDataBehavior"}l(),c(),n(),u(),"addEventListener"in window&&window.addEventListener("pageshow",function(t){t.persisted&&s()},!1)}function i(){var t="{}";if("userDataBehavior"==C){_.load("jStorage");try{t=_.getAttribute("jStorage")}catch(e){}try{k=_.getAttribute("jStorage_update")}catch(i){}w.jStorage=t}l(),c(),u()}function n(){"localStorage"==C||"globalStorage"==C?"addEventListener"in window?window.addEventListener("storage",s,!1):document.attachEvent("onstorage",s):"userDataBehavior"==C&&setInterval(s,1e3)}function s(){var t;clearTimeout(T),T=setTimeout(function(){if("localStorage"==C||"globalStorage"==C)t=w.jStorage_update;else if("userDataBehavior"==C){_.load("jStorage");try{t=_.getAttribute("jStorage_update")}catch(e){}}t&&t!=k&&(k=t,o())},25)}function o(){var t,e=y.parse(y.stringify(x.__jstorage_meta.CRC32));i(),t=y.parse(y.stringify(x.__jstorage_meta.CRC32));var n,s=[],o=[];for(n in e)if(e.hasOwnProperty(n)){if(!t[n]){o.push(n);continue}e[n]!=t[n]&&"2."==String(e[n]).substr(0,2)&&s.push(n)}for(n in t)t.hasOwnProperty(n)&&(e[n]||s.push(n));r(s,"updated"),r(o,"deleted")}function r(t,e){t=[].concat(t||[]);var i,n,s,o;if("flushed"==e){t=[];for(var r in D)D.hasOwnProperty(r)&&t.push(r);e="deleted"}for(i=0,s=t.length;s>i;i++){if(D[t[i]])for(n=0,o=D[t[i]].length;o>n;n++)D[t[i]][n](t[i],e);if(D["*"])for(n=0,o=D["*"].length;o>n;n++)D["*"][n](t[i],e)}}function a(){var t=(+new Date).toString();if("localStorage"==C||"globalStorage"==C)try{w.jStorage_update=t}catch(e){C=!1}else"userDataBehavior"==C&&(_.setAttribute("jStorage_update",t),_.save("jStorage"));s()}function l(){if(w.jStorage)try{x=y.parse(String(w.jStorage))}catch(t){w.jStorage="{}"}else w.jStorage="{}";S=w.jStorage?String(w.jStorage).length:0,x.__jstorage_meta||(x.__jstorage_meta={}),x.__jstorage_meta.CRC32||(x.__jstorage_meta.CRC32={})}function h(){f();try{w.jStorage=y.stringify(x),_&&(_.setAttribute("jStorage",w.jStorage),_.save("jStorage")),S=w.jStorage?String(w.jStorage).length:0}catch(t){}}function p(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("Key name must be string or numeric");if("__jstorage_meta"==t)throw new TypeError("Reserved key name");return!0}function c(){var t,e,i,n,s=1/0,o=!1,l=[];if(clearTimeout(b),x.__jstorage_meta&&"object"==typeof x.__jstorage_meta.TTL){t=+new Date,i=x.__jstorage_meta.TTL,n=x.__jstorage_meta.CRC32;for(e in i)i.hasOwnProperty(e)&&(i[e]<=t?(delete i[e],delete n[e],delete x[e],o=!0,l.push(e)):i[e]<s&&(s=i[e]));s!=1/0&&(b=setTimeout(c,Math.min(s-t,2147483647))),o&&(h(),a(),r(l,"deleted"))}}function u(){var t,e;if(x.__jstorage_meta.PubSub){var i,n=M,s=[];for(t=e=x.__jstorage_meta.PubSub.length-1;t>=0;t--)i=x.__jstorage_meta.PubSub[t],i[0]>M&&(n=i[0],s.unshift(i));for(t=s.length-1;t>=0;t--)d(s[t][1],s[t][2]);M=n}}function d(t,e){if(N[t])for(var i=0,n=N[t].length;n>i;i++)try{N[t][i](t,y.parse(y.stringify(e)))}catch(s){}}function f(){if(x.__jstorage_meta.PubSub){for(var t=+new Date-2e3,e=0,i=x.__jstorage_meta.PubSub.length;i>e;e++)if(x.__jstorage_meta.PubSub[e][0]<=t){x.__jstorage_meta.PubSub.splice(e,x.__jstorage_meta.PubSub.length-e);break}x.__jstorage_meta.PubSub.length||delete x.__jstorage_meta.PubSub}}function m(t,e){x.__jstorage_meta||(x.__jstorage_meta={}),x.__jstorage_meta.PubSub||(x.__jstorage_meta.PubSub=[]),x.__jstorage_meta.PubSub.unshift([+new Date,t,e]),h(),a()}function g(t,e){for(var i,n=t.length,s=e^n,o=0;n>=4;)i=255&t.charCodeAt(o)|(255&t.charCodeAt(++o))<<8|(255&t.charCodeAt(++o))<<16|(255&t.charCodeAt(++o))<<24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),i^=i>>>24,i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16),s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16)^i,n-=4,++o;switch(n){case 3:s^=(255&t.charCodeAt(o+2))<<16;case 2:s^=(255&t.charCodeAt(o+1))<<8;case 1:s^=255&t.charCodeAt(o),s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16)}return s^=s>>>13,s=1540483477*(65535&s)+((1540483477*(s>>>16)&65535)<<16),s^=s>>>15,s>>>0}var v="0.4.12",y={parse:window.JSON&&(window.JSON.parse||window.JSON.decode)||String.prototype.evalJSON&&function(t){return String(t).evalJSON()}||t.parseJSON||t.evalJSON,stringify:Object.toJSON||window.JSON&&(window.JSON.stringify||window.JSON.encode)||t.toJSON};if("function"!=typeof y.parse||"function"!=typeof y.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");var b,x={__jstorage_meta:{CRC32:{}}},w={jStorage:"{}"},_=null,S=0,C=!1,D={},T=!1,k=0,N={},M=+new Date,F={isXML:function(t){var e=(t?t.ownerDocument||t:0).documentElement;return e?"HTML"!==e.nodeName:!1},encode:function(t){if(!this.isXML(t))return!1;try{return(new XMLSerializer).serializeToString(t)}catch(e){try{return t.xml}catch(i){}}return!1},decode:function(t){var e,i="DOMParser"in window&&(new DOMParser).parseFromString||window.ActiveXObject&&function(t){var e=new ActiveXObject("Microsoft.XMLDOM");return e.async="false",e.loadXML(t),e};return i?(e=i.call("DOMParser"in window&&new DOMParser||window,t,"text/xml"),this.isXML(e)?e:!1):!1}};t.jStorage={version:v,set:function(t,e,i){if(p(t),i=i||{},"undefined"==typeof e)return this.deleteKey(t),e;if(F.isXML(e))e={_is_xml:!0,xml:F.encode(e)};else{if("function"==typeof e)return;e&&"object"==typeof e&&(e=y.parse(y.stringify(e)))}return x[t]=e,x.__jstorage_meta.CRC32[t]="2."+g(y.stringify(e),2538058380),this.setTTL(t,i.TTL||0),r(t,"updated"),e},get:function(t,e){return p(t),t in x?x[t]&&"object"==typeof x[t]&&x[t]._is_xml?F.decode(x[t].xml):x[t]:"undefined"==typeof e?null:e},deleteKey:function(t){return p(t),t in x?(delete x[t],"object"==typeof x.__jstorage_meta.TTL&&t in x.__jstorage_meta.TTL&&delete x.__jstorage_meta.TTL[t],delete x.__jstorage_meta.CRC32[t],h(),a(),r(t,"deleted"),!0):!1},setTTL:function(t,e){var i=+new Date;return p(t),e=Number(e)||0,t in x?(x.__jstorage_meta.TTL||(x.__jstorage_meta.TTL={}),e>0?x.__jstorage_meta.TTL[t]=i+e:delete x.__jstorage_meta.TTL[t],h(),c(),a(),!0):!1},getTTL:function(t){var e,i=+new Date;return p(t),t in x&&x.__jstorage_meta.TTL&&x.__jstorage_meta.TTL[t]?(e=x.__jstorage_meta.TTL[t]-i,e||0):0},flush:function(){return x={__jstorage_meta:{CRC32:{}}},h(),a(),r(null,"flushed"),!0},storageObj:function(){function t(){}return t.prototype=x,new t},index:function(){var t,e=[];for(t in x)x.hasOwnProperty(t)&&"__jstorage_meta"!=t&&e.push(t);return e},storageSize:function(){return S},currentBackend:function(){return C},storageAvailable:function(){return!!C},listenKeyChange:function(t,e){p(t),D[t]||(D[t]=[]),D[t].push(e)},stopListening:function(t,e){if(p(t),D[t]){if(!e)return void delete D[t];for(var i=D[t].length-1;i>=0;i--)D[t][i]==e&&D[t].splice(i,1)}},subscribe:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");N[t]||(N[t]=[]),N[t].push(e)},publish:function(t,e){if(t=(t||"").toString(),!t)throw new TypeError("Channel not defined");m(t,e)},reInit:function(){i()},noConflict:function(t){return delete window.$.jStorage,t&&(window.jStorage=this),this}},e()}),N2R("$",function($){"use strict";var default_options={i18n:{ar:{months:["كانون الثاني","شباط","آذار","نيسان","مايو","حزيران","تموز","آب","أيلول","تشرين الأول","تشرين الثاني","كانون الأول"],dayOfWeek:["ن","ث","ع","خ","ج","س","ح"]},ro:{months:["ianuarie","februarie","martie","aprilie","mai","iunie","iulie","august","septembrie","octombrie","noiembrie","decembrie"],dayOfWeek:["l","ma","mi","j","v","s","d"]},id:{months:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],dayOfWeek:["Sen","Sel","Rab","Kam","Jum","Sab","Min"]},bg:{months:["Януари","Февруари","Март","Април","Май","Юни","Юли","Август","Септември","Октомври","Ноември","Декември"],dayOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"]},fa:{months:["فروردین","اردیبهشت","خرداد","تیر","مرداد","شهریور","مهر","آبان","آذر","دی","بهمن","اسفند"],dayOfWeek:["یکشنبه","دوشنبه","سه شنبه","چهارشنبه","پنجشنبه","جمعه","شنبه"]},ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],dayOfWeek:["Вск","Пн","Вт","Ср","Чт","Пт","Сб"]},uk:{months:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],dayOfWeek:["Ндл","Пнд","Втр","Срд","Чтв","Птн","Сбт"]},en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},el:{months:["Ιανουάριος","Φεβρουάριος","Μάρτιος","Απρίλιος","Μάιος","Ιούνιος","Ιούλιος","Αύγουστος","Σεπτέμβριος","Οκτώβριος","Νοέμβριος","Δεκέμβριος"],dayOfWeek:["Κυρ","Δευ","Τρι","Τετ","Πεμ","Παρ","Σαβ"]},de:{months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],dayOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"]},nl:{months:["januari","februari","maart","april","mei","juni","juli","augustus","september","oktober","november","december"],dayOfWeek:["zo","ma","di","wo","do","vr","za"]},tr:{months:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],dayOfWeek:["Paz","Pts","Sal","Çar","Per","Cum","Cts"]},fr:{months:["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],dayOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},es:{months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],dayOfWeek:["Dom","Lun","Mar","Mié","Jue","Vie","Sáb"]},th:{months:["มกราคม","กุมภาพันธ์","มีนาคม","เมษายน","พฤษภาคม","มิถุนายน","กรกฎาคม","สิงหาคม","กันยายน","ตุลาคม","พฤศจิกายน","ธันวาคม"],dayOfWeek:["อา.","จ.","อ.","พ.","พฤ.","ศ.","ส."]},pl:{months:["styczeń","luty","marzec","kwiecień","maj","czerwiec","lipiec","sierpień","wrzesień","październik","listopad","grudzień"],dayOfWeek:["nd","pn","wt","śr","cz","pt","sb"]},pt:{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},se:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},kr:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]
},it:{months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],dayOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},da:{months:["January","Februar","Marts","April","Maj","Juni","July","August","September","Oktober","November","December"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},no:{months:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],dayOfWeek:["Søn","Man","Tir","Ons","Tor","Fre","Lør"]},ja:{months:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["日","月","火","水","木","金","土"]},vi:{months:["Tháng 1","Tháng 2","Tháng 3","Tháng 4","Tháng 5","Tháng 6","Tháng 7","Tháng 8","Tháng 9","Tháng 10","Tháng 11","Tháng 12"],dayOfWeek:["CN","T2","T3","T4","T5","T6","T7"]},sl:{months:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],dayOfWeek:["Ned","Pon","Tor","Sre","Čet","Pet","Sob"]},cs:{months:["Leden","Únor","Březen","Duben","Květen","Červen","Červenec","Srpen","Září","Říjen","Listopad","Prosinec"],dayOfWeek:["Ne","Po","Út","St","Čt","Pá","So"]},hu:{months:["Január","Február","Március","Április","Május","Június","Július","Augusztus","Szeptember","Október","November","December"],dayOfWeek:["Va","Hé","Ke","Sze","Cs","Pé","Szo"]},az:{months:["Yanvar","Fevral","Mart","Aprel","May","Iyun","Iyul","Avqust","Sentyabr","Oktyabr","Noyabr","Dekabr"],dayOfWeek:["B","Be","Ça","Ç","Ca","C","Ş"]},bs:{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ca:{months:["Gener","Febrer","Març","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],dayOfWeek:["Dg","Dl","Dt","Dc","Dj","Dv","Ds"]},"en-GB":{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},et:{months:["Jaanuar","Veebruar","Märts","Aprill","Mai","Juuni","Juuli","August","September","Oktoober","November","Detsember"],dayOfWeek:["P","E","T","K","N","R","L"]},eu:{months:["Urtarrila","Otsaila","Martxoa","Apirila","Maiatza","Ekaina","Uztaila","Abuztua","Iraila","Urria","Azaroa","Abendua"],dayOfWeek:["Ig.","Al.","Ar.","Az.","Og.","Or.","La."]},fi:{months:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kesäkuu","Heinäkuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],dayOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"]},gl:{months:["Xan","Feb","Maz","Abr","Mai","Xun","Xul","Ago","Set","Out","Nov","Dec"],dayOfWeek:["Dom","Lun","Mar","Mer","Xov","Ven","Sab"]},hr:{months:["Siječanj","Veljača","Ožujak","Travanj","Svibanj","Lipanj","Srpanj","Kolovoz","Rujan","Listopad","Studeni","Prosinac"],dayOfWeek:["Ned","Pon","Uto","Sri","Čet","Pet","Sub"]},ko:{months:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],dayOfWeek:["일","월","화","수","목","금","토"]},lt:{months:["Sausio","Vasario","Kovo","Balandžio","Gegužės","Birželio","Liepos","Rugpjūčio","Rugsėjo","Spalio","Lapkričio","Gruodžio"],dayOfWeek:["Sek","Pir","Ant","Tre","Ket","Pen","Šeš"]},lv:{months:["Janvāris","Februāris","Marts","Aprīlis ","Maijs","Jūnijs","Jūlijs","Augusts","Septembris","Oktobris","Novembris","Decembris"],dayOfWeek:["Sv","Pr","Ot","Tr","Ct","Pk","St"]},mk:{months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],dayOfWeek:["нед","пон","вто","сре","чет","пет","саб"]},mn:{months:["1-р сар","2-р сар","3-р сар","4-р сар","5-р сар","6-р сар","7-р сар","8-р сар","9-р сар","10-р сар","11-р сар","12-р сар"],dayOfWeek:["Дав","Мяг","Лха","Пүр","Бсн","Бям","Ням"]},"pt-BR":{months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],dayOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"]},sk:{months:["Január","Február","Marec","Apríl","Máj","Jún","Júl","August","September","Október","November","December"],dayOfWeek:["Ne","Po","Ut","St","Št","Pi","So"]},sq:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},"sr-YU":{months:["Januar","Februar","Mart","April","Maj","Jun","Jul","Avgust","Septembar","Oktobar","Novembar","Decembar"],dayOfWeek:["Ned","Pon","Uto","Sre","čet","Pet","Sub"]},sr:{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],dayOfWeek:["нед","пон","уто","сре","чет","пет","суб"]},sv:{months:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],dayOfWeek:["Sön","Mån","Tis","Ons","Tor","Fre","Lör"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeek:["日","一","二","三","四","五","六"]},he:{months:["ינואר","פברואר","מרץ","אפריל","מאי","יוני","יולי","אוגוסט","ספטמבר","אוקטובר","נובמבר","דצמבר"],dayOfWeek:["א'","ב'","ג'","ד'","ה'","ו'","שבת"]}},value:"",lang:"en",format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],disabledDates:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0};Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i,n;for(i=e||0,n=this.length;n>i;i+=1)if(this[i]===t)return i;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},$.fn.xdsoftScroller=function(t){return this.each(function(){var e,i,n,s,o,r=$(this),a=function(t){var e,i={x:0,y:0};return"touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type?(e=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i.x=e.clientX,i.y=e.clientY):"mousedown"!==t.type&&"mouseup"!==t.type&&"mousemove"!==t.type&&"mouseover"!==t.type&&"mouseout"!==t.type&&"mouseenter"!==t.type&&"mouseleave"!==t.type||(i.x=t.clientX,i.y=t.clientY),i},l=100,h=!1,p=0,c=0,u=0,d=!1,f=0,m=function(){};return"hide"===t?void r.find(".xdsoft_scrollbar").hide():($(this).hasClass("xdsoft_scroller_box")||(e=r.children().eq(0),i=r[0].clientHeight,n=e[0].offsetHeight,s=$('<div class="xdsoft_scrollbar"></div>'),o=$('<div class="xdsoft_scroller"></div>'),s.append(o),r.addClass("xdsoft_scroller_box").append(s),m=function(t){var e=a(t).y-p+f;0>e&&(e=0),e+o[0].offsetHeight>u&&(e=u-o[0].offsetHeight),r.trigger("scroll_element.xdsoft_scroller",[l?e/l:0])},o.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(e){i||r.trigger("resize_scroll.xdsoft_scroller",[t]),p=a(e).y,f=parseInt(o.css("margin-top"),10),u=s[0].offsetHeight,"mousedown"===e.type?(document&&$(document.body).addClass("xdsoft_noselect"),$([document.body,window]).on("mouseup.xdsoft_scroller",function n(){$([document.body,window]).off("mouseup.xdsoft_scroller",n).off("mousemove.xdsoft_scroller",m).removeClass("xdsoft_noselect")}),$(document.body).on("mousemove.xdsoft_scroller",m)):(d=!0,e.stopPropagation(),e.preventDefault())}).on("touchmove",function(t){d&&(t.preventDefault(),m(t))}).on("touchend touchcancel",function(t){d=!1,f=0}),r.on("scroll_element.xdsoft_scroller",function(t,n){i||r.trigger("resize_scroll.xdsoft_scroller",[n,!0]),n=n>1?1:0>n||isNaN(n)?0:n,o.css("margin-top",l*n),setTimeout(function(){e.css("marginTop",-parseInt((e[0].offsetHeight-i)*n,10))},10)}).on("resize_scroll.xdsoft_scroller",function(t,a,h){var p,c;i=r[0].clientHeight,n=e[0].offsetHeight,p=i/n,c=p*s[0].offsetHeight,p>1?o.hide():(o.show(),o.css("height",parseInt(c>10?c:10,10)),l=s[0].offsetHeight-o[0].offsetHeight,h!==!0&&r.trigger("scroll_element.xdsoft_scroller",[a||Math.abs(parseInt(e.css("marginTop"),10))/(n-i)]))}),r.on("wheel",function(t){var s=Math.abs(parseInt(e.css("marginTop"),10));return s-=20*t.deltaY,0>s&&(s=0),r.trigger("scroll_element.xdsoft_scroller",[s/(n-i)]),t.stopPropagation(),!1}),r.on("touchstart",function(t){h=a(t),c=Math.abs(parseInt(e.css("marginTop"),10))}),r.on("touchmove",function(t){if(h){t.preventDefault();var e=a(t);r.trigger("scroll_element.xdsoft_scroller",[(c-(e.y-h.y))/(n-i)])}}),r.on("touchend touchcancel",function(t){h=!1,c=0})),void r.trigger("resize_scroll.xdsoft_scroller",[t]))})},$.fn.datetimepicker=function(t){var e,i,n=48,s=57,o=96,r=105,a=17,l=46,h=13,p=27,c=8,u=37,d=38,f=39,m=40,g=9,v=116,y=65,b=67,x=86,w=90,_=89,S=!1,C=$.isPlainObject(t)||!t?$.extend(!0,{},default_options,t):$.extend(!0,{},default_options),D=0,T=function(t){"undefined"==typeof C.i18n[C.lang]&&(C.lang="en"),t.on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function i(n){t.is(":disabled")||t.data("xdsoft_datetimepicker")||(clearTimeout(D),D=setTimeout(function(){t.data("xdsoft_datetimepicker")||e(t),t.off("open.xdsoft focusin.xdsoft mousedown.xdsoft",i).trigger("open.xdsoft")},100))})};return e=function(e){function i(){var t,i=!1;return C.startDate?i=F.strToDate(C.startDate):(i=C.value||(e&&e.val&&e.val()?e.val():""),i?i=F.strToDateTime(i):C.defaultDate&&(i=F.strToDate(C.defaultDate),C.defaultTime&&(t=F.strtotime(C.defaultTime),i.setHours(t.getHours()),i.setMinutes(t.getMinutes())))),i&&F.isValidDate(i)?O.data("changed",!0):i="",i||0}var D,T,k,N,M,F,O=$("<div "+(C.id?'id="'+C.id+'"':"")+" "+(C.style?'style="'+C.style+'"':"")+' class="xdsoft_datetimepicker xdsoft_'+C.theme+" xdsoft_noselect "+(C.weeks?" xdsoft_showweeks":"")+C.className+'"></div>'),I=$('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),P=$('<div class="xdsoft_datepicker active"></div>'),E=$('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),A=$('<div class="xdsoft_calendar"></div>'),z=$('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),j=z.find(".xdsoft_time_box").eq(0),H=$('<div class="xdsoft_time_variant"></div>'),U=$('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),R=$('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),W=!1,B=0,L=0;E.find(".xdsoft_month span").after(U),E.find(".xdsoft_year span").after(R),E.find(".xdsoft_month,.xdsoft_year").on("mousedown.xdsoft",function(t){var e,i,n=$(this).find(".xdsoft_select").eq(0),s=0,o=0,r=n.is(":visible");for(E.find(".xdsoft_select").hide(),F.currentTime&&(s=F.currentTime[$(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),n[r?"hide":"show"](),e=n.find("div.xdsoft_option"),i=0;i<e.length&&e.eq(i).data("value")!==s;i+=1)o+=e[0].offsetHeight;return n.xdsoftScroller(o/(n.children()[0].offsetHeight-n[0].clientHeight)),t.stopPropagation(),!1}),E.find(".xdsoft_select").xdsoftScroller().on("mousedown.xdsoft",function(t){t.stopPropagation(),t.preventDefault()}).on("mousedown.xdsoft",".xdsoft_option",function(t){var e=F.currentTime.getFullYear();F&&F.currentTime&&F.currentTime[$(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"]($(this).data("value")),$(this).parent().parent().hide(),O.trigger("xchange.xdsoft"),C.onChangeMonth&&$.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(O,F.currentTime,O.data("input")),e!==F.currentTime.getFullYear()&&$.isFunction(C.onChangeYear)&&C.onChangeYear.call(O,F.currentTime,O.data("input"))}),O.setOptions=function(t){if(C=$.extend(!0,{},C,t),t.allowTimes&&$.isArray(t.allowTimes)&&t.allowTimes.length&&(C.allowTimes=$.extend(!0,[],t.allowTimes)),t.weekends&&$.isArray(t.weekends)&&t.weekends.length&&(C.weekends=$.extend(!0,[],t.weekends)),t.disabledDates&&$.isArray(t.disabledDates)&&t.disabledDates.length&&(C.disabledDates=$.extend(!0,[],t.disabledDates)),!C.open&&!C.opened||C.inline||e.trigger("open.xdsoft"),C.inline&&(W=!0,O.addClass("xdsoft_inline"),e.after(O).hide()),C.inverseButton&&(C.next="xdsoft_prev",C.prev="xdsoft_next"),C.datepicker?P.addClass("active"):P.removeClass("active"),C.timepicker?z.addClass("active"):z.removeClass("active"),C.value&&(e&&e.val&&e.val(C.value),F.setCurrentTime(C.value)),isNaN(C.dayOfWeekStart)?C.dayOfWeekStart=0:C.dayOfWeekStart=parseInt(C.dayOfWeekStart,10)%7,C.timepickerScrollbar||j.xdsoftScroller("hide"),C.minDate&&/^-(.*)$/.test(C.minDate)&&(C.minDate=F.strToDateTime(C.minDate).dateFormat(C.formatDate)),C.maxDate&&/^\+(.*)$/.test(C.maxDate)&&(C.maxDate=F.strToDateTime(C.maxDate).dateFormat(C.formatDate)),E.find(".xdsoft_today_button").css("visibility",C.todayButton?"visible":"hidden"),C.mask){var i=function(t){try{if(document.selection&&document.selection.createRange){var e=document.selection.createRange();return e.getBookmark().charCodeAt(2)-2}if(t.setSelectionRange)return t.selectionStart}catch(i){return 0}},D=function(t,e){if(t="string"==typeof t||t instanceof String?document.getElementById(t):t,!t)return!1;if(t.createTextRange){var i=t.createTextRange();return i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select(),!0}return t.setSelectionRange?(t.setSelectionRange(e,e),!0):!1},T=function(t,e){var i=t.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(i).test(e)};e.off("keydown.xdsoft"),C.mask===!0&&(C.mask=C.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===$.type(C.mask)&&(T(C.mask,e.val())||e.val(C.mask.replace(/[0-9]/g,"_")),e.on("keydown.xdsoft",function(t){var k,N,M=this.value,F=t.which;if(F>=n&&s>=F||F>=o&&r>=F||F===c||F===l){for(k=i(this),N=F!==c&&F!==l?String.fromCharCode(F>=o&&r>=F?F-n:F):"_",F!==c&&F!==l||!k||(k-=1,N="_");/[^0-9_]/.test(C.mask.substr(k,1))&&k<C.mask.length&&k>0;)k+=F===c||F===l?-1:1;if(M=M.substr(0,k)+N+M.substr(k+1),""===$.trim(M))M=C.mask.replace(/[0-9]/g,"_");else if(k===C.mask.length)return t.preventDefault(),!1;for(k+=F===c||F===l?0:1;/[^0-9_]/.test(C.mask.substr(k,1))&&k<C.mask.length&&k>0;)k+=F===c||F===l?-1:1;T(C.mask,M)?(this.value=M,D(this,k)):""===$.trim(M)?this.value=C.mask.replace(/[0-9]/g,"_"):e.trigger("error_input.xdsoft")}else if(-1!==[y,b,x,w,_].indexOf(F)&&S||-1!==[p,d,m,u,f,v,a,g,h].indexOf(F))return!0;return t.preventDefault(),!1}))}C.validateOnBlur&&e.off("blur.xdsoft").on("blur.xdsoft",function(){C.allowBlank&&!$.trim($(this).val()).length?($(this).val(null),O.data("xdsoft_datetime").empty()):Date.parseDate($(this).val(),C.format)?O.data("xdsoft_datetime").setCurrentTime($(this).val()):($(this).val(F.now().dateFormat(C.format)),O.data("xdsoft_datetime").setCurrentTime($(this).val())),O.trigger("changedatetime.xdsoft")}),C.dayOfWeekStartPrev=0===C.dayOfWeekStart?6:C.dayOfWeekStart-1,O.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},O.data("options",C).on("mousedown.xdsoft",function(t){return t.stopPropagation(),t.preventDefault(),R.hide(),U.hide(),!1}),j.append(H),j.xdsoftScroller(),O.on("afterOpen.xdsoft",function(){j.xdsoftScroller()}),O.append(P).append(z),C.withoutCopyright!==!0&&O.append(I),P.append(E).append(A),$(C.parentID).append(O),D=function(){var t=this;t.now=function(e){var i,n,s=new Date;return!e&&C.defaultDate&&(i=t.strToDate(C.defaultDate),s.setFullYear(i.getFullYear()),s.setMonth(i.getMonth()),s.setDate(i.getDate())),C.yearOffset&&s.setFullYear(s.getFullYear()+C.yearOffset),!e&&C.defaultTime&&(n=t.strtotime(C.defaultTime),s.setHours(n.getHours()),s.setMinutes(n.getMinutes())),s},t.isValidDate=function(t){return"[object Date]"!==Object.prototype.toString.call(t)?!1:!isNaN(t.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),O.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){var e,i=t.currentTime.getMonth()+1;return 12===i&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),i=0),e=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),i+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(i),C.onChangeMonth&&$.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(O,F.currentTime,O.data("input")),e!==t.currentTime.getFullYear()&&$.isFunction(C.onChangeYear)&&C.onChangeYear.call(O,F.currentTime,O.data("input")),O.trigger("xchange.xdsoft"),i},t.prevMonth=function(){var e=t.currentTime.getMonth()-1;return-1===e&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),e=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),e+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(e),C.onChangeMonth&&$.isFunction(C.onChangeMonth)&&C.onChangeMonth.call(O,F.currentTime,O.data("input")),O.trigger("xchange.xdsoft"),e},t.getWeekOfYear=function(t){var e=new Date(t.getFullYear(),0,1);return Math.ceil(((t-e)/864e5+e.getDay()+1)/7)},t.strToDateTime=function(e){var i,n,s=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(s=/^(\+|\-)(.*)$/.exec(e),s&&(s[2]=Date.parseDate(s[2],C.formatDate)),s&&s[2]?(i=s[2].getTime()-6e4*s[2].getTimezoneOffset(),n=new Date(F.now().getTime()+parseInt(s[1]+"1",10)*i)):n=e?Date.parseDate(e,C.format):t.now(),t.isValidDate(n)||(n=t.now()),n)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var i=e?Date.parseDate(e,C.formatDate):t.now(!0);return t.isValidDate(i)||(i=t.now(!0)),i},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var i=e?Date.parseDate(e,C.formatTime):t.now(!0);return t.isValidDate(i)||(i=t.now(!0)),i},t.str=function(){return t.currentTime.dateFormat(C.format)},t.currentTime=this.now()},F=new D,E.find(".xdsoft_today_button").on("mousedown.xdsoft",function(){O.data("changed",!0),F.setCurrentTime(0),O.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){e.val(F.str()),O.trigger("close.xdsoft")}),E.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=$(this),e=0,i=!1;!function n(s){F.currentTime.getMonth();t.hasClass(C.next)?F.nextMonth():t.hasClass(C.prev)&&F.prevMonth(),C.monthChangeSpinner&&(i||(e=setTimeout(n,s||100)))}(500),$([document.body,window]).on("mouseup.xdsoft",function s(){clearTimeout(e),i=!0,$([document.body,window]).off("mouseup.xdsoft",s)})}),z.find(".xdsoft_prev,.xdsoft_next").on("mousedown.xdsoft",function(){var t=$(this),e=0,i=!1,n=110;!function s(o){var r=j[0].clientHeight,a=H[0].offsetHeight,l=Math.abs(parseInt(H.css("marginTop"),10));t.hasClass(C.next)&&a-r-C.timeHeightInTimePicker>=l?H.css("marginTop","-"+(l+C.timeHeightInTimePicker)+"px"):t.hasClass(C.prev)&&l-C.timeHeightInTimePicker>=0&&H.css("marginTop","-"+(l-C.timeHeightInTimePicker)+"px"),j.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(H.css("marginTop"),10)/(a-r))]),n=n>10?10:n-10,i||(e=setTimeout(s,o||n))}(500),$([document.body,window]).on("mouseup.xdsoft",function o(){clearTimeout(e),i=!0,$([document.body,window]).off("mouseup.xdsoft",o)})}),T=0,O.on("xchange.xdsoft",function(e){clearTimeout(T),T=setTimeout(function(){for(var e,i,n,s,o,r,a,l="",h=new Date(F.currentTime.getFullYear(),F.currentTime.getMonth(),1,12,0,0),p=0,c=F.now(),u=!1,d=!1,f=[],m=!0,g="",v="";h.getDay()!==C.dayOfWeekStart;)h.setDate(h.getDate()-1);for(l+="<table><thead><tr>",C.weeks&&(l+="<th></th>"),e=0;7>e;e+=1)l+="<th>"+C.i18n[C.lang].dayOfWeek[(e+C.dayOfWeekStart)%7]+"</th>";for(l+="</tr></thead>",l+="<tbody>",C.maxDate!==!1&&(u=F.strToDate(C.maxDate),u=new Date(u.getFullYear(),u.getMonth(),u.getDate(),23,59,59,999)),C.minDate!==!1&&(d=F.strToDate(C.minDate),d=new Date(d.getFullYear(),d.getMonth(),d.getDate()));p<F.currentTime.countDaysInMonth()||h.getDay()!==C.dayOfWeekStart||F.currentTime.getMonth()===h.getMonth();)f=[],p+=1,i=h.getDate(),n=h.getFullYear(),s=h.getMonth(),o=F.getWeekOfYear(h),f.push("xdsoft_date"),r=C.beforeShowDay&&$.isFunction(C.beforeShowDay.call)?C.beforeShowDay.call(O,h):null,u!==!1&&h>u||d!==!1&&d>h||r&&r[0]===!1?f.push("xdsoft_disabled"):-1!==C.disabledDates.indexOf(h.dateFormat(C.formatDate))&&f.push("xdsoft_disabled"),r&&""!==r[1]&&f.push(r[1]),F.currentTime.getMonth()!==s&&f.push("xdsoft_other_month"),(C.defaultSelect||O.data("changed"))&&F.currentTime.dateFormat(C.formatDate)===h.dateFormat(C.formatDate)&&f.push("xdsoft_current"),c.dateFormat(C.formatDate)===h.dateFormat(C.formatDate)&&f.push("xdsoft_today"),(0===h.getDay()||6===h.getDay()||~C.weekends.indexOf(h.dateFormat(C.formatDate)))&&f.push("xdsoft_weekend"),C.beforeShowDay&&$.isFunction(C.beforeShowDay)&&f.push(C.beforeShowDay(h)),m&&(l+="<tr>",m=!1,C.weeks&&(l+="<th>"+o+"</th>")),l+='<td data-date="'+i+'" data-month="'+s+'" data-year="'+n+'" class="xdsoft_date xdsoft_day_of_week'+h.getDay()+" "+f.join(" ")+'"><div>'+i+"</div></td>",h.getDay()===C.dayOfWeekStartPrev&&(l+="</tr>",m=!0),h.setDate(i+1);if(l+="</tbody></table>",A.html(l),E.find(".xdsoft_label span").eq(0).text(C.i18n[C.lang].months[F.currentTime.getMonth()]),E.find(".xdsoft_label span").eq(1).text(F.currentTime.getFullYear()),g="",v="",s="",a=function(t,e){var i=F.now();i.setHours(t),t=parseInt(i.getHours(),10),i.setMinutes(e),e=parseInt(i.getMinutes(),10);var n=new Date(F.currentTime);n.setHours(t),n.setMinutes(e),f=[],(C.minDateTime!==!1&&C.minDateTime>n||C.maxTime!==!1&&F.strtotime(C.maxTime).getTime()<i.getTime()||C.minTime!==!1&&F.strtotime(C.minTime).getTime()>i.getTime())&&f.push("xdsoft_disabled"),(C.initTime||C.defaultSelect||O.data("changed"))&&parseInt(F.currentTime.getHours(),10)===parseInt(t,10)&&(C.step>59||Math[C.roundTime](F.currentTime.getMinutes()/C.step)*C.step===parseInt(e,10))&&(C.defaultSelect||O.data("changed")?f.push("xdsoft_current"):C.initTime&&f.push("xdsoft_init_time")),parseInt(c.getHours(),10)===parseInt(t,10)&&parseInt(c.getMinutes(),10)===parseInt(e,10)&&f.push("xdsoft_today"),g+='<div class="xdsoft_time '+f.join(" ")+'" data-hour="'+t+'" data-minute="'+e+'">'+i.dateFormat(C.formatTime)+"</div>"},C.allowTimes&&$.isArray(C.allowTimes)&&C.allowTimes.length)for(p=0;p<C.allowTimes.length;p+=1)v=F.strtotime(C.allowTimes[p]).getHours(),s=F.strtotime(C.allowTimes[p]).getMinutes(),a(v,s);else for(p=0,e=0;p<(C.hours12?12:24);p+=1)for(e=0;60>e;e+=C.step)v=(10>p?"0":"")+p,s=(10>e?"0":"")+e,a(v,s);for(H.html(g),t="",p=0,p=parseInt(C.yearStart,10)+C.yearOffset;p<=parseInt(C.yearEnd,10)+C.yearOffset;p+=1)t+='<div class="xdsoft_option '+(F.currentTime.getFullYear()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+p+"</div>";for(R.children().eq(0).html(t),p=0,t="";11>=p;p+=1)t+='<div class="xdsoft_option '+(F.currentTime.getMonth()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+C.i18n[C.lang].months[p]+"</div>";U.children().eq(0).html(t),$(O).trigger("generate.xdsoft")},10),e.stopPropagation()}).on("afterOpen.xdsoft",function(){if(C.timepicker){var t,e,i,n;H.find(".xdsoft_current").length?t=".xdsoft_current":H.find(".xdsoft_init_time").length&&(t=".xdsoft_init_time"),t?(e=j[0].clientHeight,i=H[0].offsetHeight,n=H.find(t).index()*C.timeHeightInTimePicker+1,n>i-e&&(n=i-e),j.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(i-e)])):j.trigger("scroll_element.xdsoft_scroller",[0])}}),k=0,A.on("click.xdsoft","td",function(t){t.stopPropagation(),k+=1;var i=$(this),n=F.currentTime;return void 0!==n&&null!==n||(F.currentTime=F.now(),n=F.currentTime),i.hasClass("xdsoft_disabled")?!1:(n.setDate(1),n.setFullYear(i.data("year")),n.setMonth(i.data("month")),n.setDate(i.data("date")),O.trigger("select.xdsoft",[n]),e.val(F.str()),(k>1||C.closeOnDateSelect===!0||0===C.closeOnDateSelect&&!C.timepicker)&&!C.inline&&O.trigger("close.xdsoft"),C.onSelectDate&&$.isFunction(C.onSelectDate)&&C.onSelectDate.call(O,F.currentTime,O.data("input"),t),O.data("changed",!0),O.trigger("xchange.xdsoft"),O.trigger("changedatetime.xdsoft"),void setTimeout(function(){k=0},200))}),H.on("click.xdsoft","div",function(t){t.stopPropagation();var e=$(this),i=F.currentTime;return void 0!==i&&null!==i||(F.currentTime=F.now(),i=F.currentTime),e.hasClass("xdsoft_disabled")?!1:(i.setHours(e.data("hour")),i.setMinutes(e.data("minute")),O.trigger("select.xdsoft",[i]),O.data("input").val(F.str()),C.inline||O.trigger("close.xdsoft"),C.onSelectTime&&$.isFunction(C.onSelectTime)&&C.onSelectTime.call(O,F.currentTime,O.data("input"),t),O.data("changed",!0),O.trigger("xchange.xdsoft"),void O.trigger("changedatetime.xdsoft"))}),P.on("wheel.xdsoft",function(t){return C.scrollMonth?(t.deltaY<0?F.nextMonth():F.prevMonth(),!1):!0}),e.on("wheel.xdsoft",function(t){return C.scrollInput?!C.datepicker&&C.timepicker?(N=H.find(".xdsoft_current").length?H.find(".xdsoft_current").eq(0).index():0,N+t.deltaY>=0&&N+t.deltaY<H.children().length&&(N+=t.deltaY),H.children().eq(N).length&&H.children().eq(N).trigger("mousedown"),!1):C.datepicker&&!C.timepicker?(P.trigger(t,[t.deltaY,t.deltaX,t.deltaY]),e.val&&e.val(F.str()),O.trigger("changedatetime.xdsoft"),!1):void 0:!0}),O.on("changedatetime.xdsoft",function(t){if(C.onChangeDateTime&&$.isFunction(C.onChangeDateTime)){var e=O.data("input");C.onChangeDateTime.call(O,F.currentTime,e,t),delete C.value,e.trigger("change")}}).on("generate.xdsoft",function(){C.onGenerate&&$.isFunction(C.onGenerate)&&C.onGenerate.call(O,F.currentTime,O.data("input")),W&&(O.trigger("afterOpen.xdsoft"),W=!1)}).on("click.xdsoft",function(t){t.stopPropagation()}),N=0,M=function(){var t=O.data("input").offset(),e=t.top+O.data("input")[0].offsetHeight-1,i=t.left,n="absolute";C.fixed?(e-=$(window).scrollTop(),i-=$(window).scrollLeft(),n="fixed"):(e+O[0].offsetHeight>$(window).height()+$(window).scrollTop()&&(e=t.top-O[0].offsetHeight+1),0>e&&(e=0),i+O[0].offsetWidth>$(window).width()&&(i=$(window).width()-O[0].offsetWidth)),O.css({left:i,top:e,position:n})},O.on("open.xdsoft",function(t){var e=!0;C.onShow&&$.isFunction(C.onShow)&&(e=C.onShow.call(O,F.currentTime,O.data("input"),t)),e!==!1&&(O.show(),M(),$(window).off("resize.xdsoft",M).on("resize.xdsoft",M),C.closeOnWithoutClick&&$([document.body,window]).on("mousedown.xdsoft",function i(){O.trigger("close.xdsoft"),$([document.body,window]).off("mousedown.xdsoft",i)}))}).on("close.xdsoft",function(t){var e=!0;E.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),C.onClose&&$.isFunction(C.onClose)&&(e=C.onClose.call(O,F.currentTime,O.data("input"),t)),e===!1||C.opened||C.inline||O.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(t){O.is(":visible")?O.trigger("close.xdsoft"):O.trigger("open.xdsoft")}).data("input",e),B=0,L=0,O.data("xdsoft_datetime",F),O.setOptions(C),F.setCurrentTime(i()),e.data("xdsoft_datetimepicker",O).on("open.xdsoft focusin.xdsoft mousedown.xdsoft",function(t){e.is(":disabled")||e.data("xdsoft_datetimepicker").is(":visible")&&C.closeOnInputClick||(clearTimeout(B),B=setTimeout(function(){e.is(":disabled")||(W=!0,F.setCurrentTime(i()),O.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var e,i=(this.value,t.which);return-1!==[h].indexOf(i)&&C.enterLikeTab?(e=$("input:visible,textarea:visible"),O.trigger("close.xdsoft"),e.eq(e.index(this)+1).focus(),!1):-1!==[g].indexOf(i)?(O.trigger("close.xdsoft"),!0):void 0})},i=function(t){var e=t.data("xdsoft_datetimepicker");e&&(e.data("xdsoft_datetime",null),e.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),$(window).off("resize.xdsoft"),$([window,document.body]).off("mousedown.xdsoft"),t.unmousewheel&&t.unmousewheel())},$(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(t){t.keyCode===a&&(S=!0)}).on("keyup.xdsoftctrl",function(t){t.keyCode===a&&(S=!1)}),this.each(function(){var n=$(this).data("xdsoft_datetimepicker");if(n){if("string"===$.type(t))switch(t){case"show":$(this).select().focus(),n.trigger("open.xdsoft");break;case"hide":n.trigger("close.xdsoft");break;case"toggle":n.trigger("toggle.xdsoft");break;case"destroy":i($(this));break;case"reset":this.value=this.defaultValue,this.value&&n.data("xdsoft_datetime").isValidDate(Date.parseDate(this.value,C.format))||n.data("changed",!1),n.data("xdsoft_datetime").setCurrentTime(this.value)}else n.setOptions(t);return 0}"string"!==$.type(t)&&(!C.lazyInit||C.open||C.inline?e($(this)):T($(this)))})},$.fn.datetimepicker.defaults=default_options,function(t){function e(e){var r=e||window.event,a=l.call(arguments,1),h=0,c=0,u=0,d=0,f=0,m=0;if(e=t.event.fix(r),e.type="mousewheel","detail"in r&&(u=-1*r.detail),"wheelDelta"in r&&(u=r.wheelDelta),"wheelDeltaY"in r&&(u=r.wheelDeltaY),"wheelDeltaX"in r&&(c=-1*r.wheelDeltaX),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(c=-1*u,u=0),h=0===u?c:u,"deltaY"in r&&(u=-1*r.deltaY,h=u),"deltaX"in r&&(c=r.deltaX,0===u&&(h=-1*c)),0!==u||0!==c){if(1===r.deltaMode){var g=t.data(this,"mousewheel-line-height");h*=g,u*=g,c*=g}else if(2===r.deltaMode){var v=t.data(this,"mousewheel-page-height");h*=v,u*=v,c*=v}if(d=Math.max(Math.abs(u),Math.abs(c)),(!o||o>d)&&(o=d,n(r,d)&&(o/=40)),n(r,d)&&(h/=40,c/=40,u/=40),h=Math[h>=1?"floor":"ceil"](h/o),c=Math[c>=1?"floor":"ceil"](c/o),u=Math[u>=1?"floor":"ceil"](u/o),p.settings.normalizeOffset&&this.getBoundingClientRect){var y=this.getBoundingClientRect();f=e.clientX-y.left,m=e.clientY-y.top}return e.deltaX=c,e.deltaY=u,e.deltaFactor=o,e.offsetX=f,e.offsetY=m,e.deltaMode=0,a.unshift(e,h,c,u),s&&clearTimeout(s),s=setTimeout(i,200),(t.event.dispatch||t.event.handle).apply(this,a)}}function i(){o=null}function n(t,e){return p.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var s,o,r=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var h=r.length;h;)t.event.fixHooks[r[--h]]=t.event.mouseHooks;var p=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",p.getLineHeight(this)),t.data(this,"mousewheel-page-height",p.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var i=t(e),n=i["offsetParent"in t.fn?"offsetParent":"parent"]();return n.length||(n=t("body")),parseInt(n.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}($),Date.parseFunctions={count:0},Date.parseRegexes=[],Date.formatFunctions={count:0},Date.prototype.dateFormat=function(t){
if("unixtime"==t)return parseInt(this.getTime()/1e3);null==Date.formatFunctions[t]&&Date.createNewFormat(t);var e=Date.formatFunctions[t];return this[e]()},Date.createNewFormat=function(format){var funcName="format"+Date.formatFunctions.count++;Date.formatFunctions[format]=funcName;for(var code="Date.prototype."+funcName+" = function() {return ",special=!1,ch="",i=0;i<format.length;++i)ch=format.charAt(i),special||"\\"!=ch?special?(special=!1,code+="'"+String.escape(ch)+"' + "):code+=Date.getFormatCode(ch):special=!0;eval(code.substring(0,code.length-3)+";}")},Date.getFormatCode=function(t){switch(t){case"d":return"String.leftPad(this.getDate(), 2, '0') + ";case"D":return"Date.dayNames[this.getDay()].substring(0, 3) + ";case"j":return"this.getDate() + ";case"l":return"Date.dayNames[this.getDay()] + ";case"S":return"this.getSuffix() + ";case"w":return"this.getDay() + ";case"z":return"this.getDayOfYear() + ";case"W":return"this.getWeekOfYear() + ";case"F":return"Date.monthNames[this.getMonth()] + ";case"m":return"String.leftPad(this.getMonth() + 1, 2, '0') + ";case"M":return"Date.monthNames[this.getMonth()].substring(0, 3) + ";case"n":return"(this.getMonth() + 1) + ";case"t":return"this.getDaysInMonth() + ";case"L":return"(this.isLeapYear() ? 1 : 0) + ";case"Y":return"this.getFullYear() + ";case"y":return"('' + this.getFullYear()).substring(2, 4) + ";case"a":return"(this.getHours() < 12 ? 'am' : 'pm') + ";case"A":return"(this.getHours() < 12 ? 'AM' : 'PM') + ";case"g":return"((this.getHours() %12) ? this.getHours() % 12 : 12) + ";case"G":return"this.getHours() + ";case"h":return"String.leftPad((this.getHours() %12) ? this.getHours() % 12 : 12, 2, '0') + ";case"H":return"String.leftPad(this.getHours(), 2, '0') + ";case"i":return"String.leftPad(this.getMinutes(), 2, '0') + ";case"s":return"String.leftPad(this.getSeconds(), 2, '0') + ";case"O":return"this.getGMTOffset() + ";case"T":return"this.getTimezone() + ";case"Z":return"(this.getTimezoneOffset() * -60) + ";default:return"'"+String.escape(t)+"' + "}},Date.parseDate=function(t,e){if("unixtime"==e)return new Date(isNaN(parseInt(t))?0:1e3*parseInt(t));null==Date.parseFunctions[e]&&Date.createParser(e);var i=Date.parseFunctions[e];return Date[i](t)},Date.createParser=function(format){var funcName="parse"+Date.parseFunctions.count++,regexNum=Date.parseRegexes.length,currentGroup=1;Date.parseFunctions[format]=funcName;for(var code="Date."+funcName+" = function(input) {\nvar y = -1, m = -1, d = -1, h = -1, i = -1, s = -1, z = -1;\nvar d = new Date();\ny = d.getFullYear();\nm = d.getMonth();\nd = d.getDate();\nvar results = input.match(Date.parseRegexes["+regexNum+"]);\nif (results && results.length > 0) {",regex="",special=!1,ch="",i=0;i<format.length;++i)if(ch=format.charAt(i),special||"\\"!=ch)if(special)special=!1,regex+=String.escape(ch);else{var obj=Date.formatCodeToRegex(ch,currentGroup);currentGroup+=obj.g,regex+=obj.s,obj.g&&obj.c&&(code+=obj.c)}else special=!0;code+="if (y > 0 && z > 0){\nvar doyDate = new Date(y,0);\ndoyDate.setDate(z);\nm = doyDate.getMonth();\nd = doyDate.getDate();\n}",code+="if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0 && s >= 0)\n{return new Date(y, m, d, h, i, s);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0 && i >= 0)\n{return new Date(y, m, d, h, i);}\nelse if (y > 0 && m >= 0 && d > 0 && h >= 0)\n{return new Date(y, m, d, h);}\nelse if (y > 0 && m >= 0 && d > 0)\n{return new Date(y, m, d);}\nelse if (y > 0 && m >= 0)\n{return new Date(y, m);}\nelse if (y > 0)\n{return new Date(y);}\n}return null;}",Date.parseRegexes[regexNum]=new RegExp("^"+regex+"$"),eval(code)},Date.formatCodeToRegex=function(t,e){switch(t){case"D":return{g:0,c:null,s:"(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)"};case"j":case"d":return{g:1,c:"d = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"l":return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"};case"S":return{g:0,c:null,s:"(?:st|nd|rd|th)"};case"w":return{g:0,c:null,s:"\\d"};case"z":return{g:1,c:"z = parseInt(results["+e+"], 10);\n",s:"(\\d{1,3})"};case"W":return{g:0,c:null,s:"(?:\\d{2})"};case"F":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"].substring(0, 3)], 10);\n",s:"("+Date.monthNames.join("|")+")"};case"M":return{g:1,c:"m = parseInt(Date.monthNumbers[results["+e+"]], 10);\n",s:"(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)"};case"n":case"m":return{g:1,c:"m = parseInt(results["+e+"], 10) - 1;\n",s:"(\\d{1,2})"};case"t":return{g:0,c:null,s:"\\d{1,2}"};case"L":return{g:0,c:null,s:"(?:1|0)"};case"Y":return{g:1,c:"y = parseInt(results["+e+"], 10);\n",s:"(\\d{4})"};case"y":return{g:1,c:"var ty = parseInt(results["+e+"], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"};case"a":return{g:1,c:"if (results["+e+"] == 'am') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(am|pm)"};case"A":return{g:1,c:"if (results["+e+"] == 'AM') {\nif (h == 12) { h = 0; }\n} else { if (h < 12) { h += 12; }}",s:"(AM|PM)"};case"g":case"G":case"h":case"H":return{g:1,c:"h = parseInt(results["+e+"], 10);\n",s:"(\\d{1,2})"};case"i":return{g:1,c:"i = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"s":return{g:1,c:"s = parseInt(results["+e+"], 10);\n",s:"(\\d{2})"};case"O":return{g:0,c:null,s:"[+-]\\d{4}"};case"T":return{g:0,c:null,s:"[A-Z]{3}"};case"Z":return{g:0,c:null,s:"[+-]\\d{1,5}"};default:return{g:0,c:null,s:String.escape(t)}}},Date.prototype.getTimezone=function(){return this.toString().replace(/^.*? ([A-Z]{3}) [0-9]{4}.*$/,"$1").replace(/^.*?\(([A-Z])[a-z]+ ([A-Z])[a-z]+ ([A-Z])[a-z]+\)$/,"$1$2$3")},Date.prototype.getGMTOffset=function(){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+String.leftPad(Math.abs(this.getTimezoneOffset())%60,2,"0")},Date.prototype.getDayOfYear=function(){var t=0;Date.daysInMonth[1]=this.isLeapYear()?29:28;for(var e=0;e<this.getMonth();++e)t+=Date.daysInMonth[e];return t+this.getDate()},Date.prototype.getWeekOfYear=function(){var t=this.getDayOfYear()+(4-this.getDay()),e=new Date(this.getFullYear(),0,1),i=7-e.getDay()+4;return String.leftPad(Math.ceil((t-i)/7)+1,2,"0")},Date.prototype.isLeapYear=function(){var t=this.getFullYear();return 0==(3&t)&&(t%100||t%400==0&&t)},Date.prototype.getFirstDayOfMonth=function(){var t=(this.getDay()-(this.getDate()-1))%7;return 0>t?t+7:t},Date.prototype.getLastDayOfMonth=function(){var t=(this.getDay()+(Date.daysInMonth[this.getMonth()]-this.getDate()))%7;return 0>t?t+7:t},Date.prototype.getDaysInMonth=function(){return Date.daysInMonth[1]=this.isLeapYear()?29:28,Date.daysInMonth[this.getMonth()]},Date.prototype.getSuffix=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},String.escape=function(t){return t.replace(/('|\\)/g,"\\$1")},String.leftPad=function(t,e,i){var n=new String(t);for(null==i&&(i=" ");n.length<e;)n=i+n;return n},Date.daysInMonth=[31,28,31,30,31,30,31,31,30,31,30,31],Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Date.y2kYear=50,Date.monthNumbers={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},Date.patterns={ISO8601LongPattern:"Y-m-d H:i:s",ISO8601ShortPattern:"Y-m-d",ShortDatePattern:"n/j/Y",LongDatePattern:"l, F d, Y",FullDateTimePattern:"l, F d, Y g:i:s A",MonthDayPattern:"F d",ShortTimePattern:"g:i A",LongTimePattern:"g:i:s A",SortableDateTimePattern:"Y-m-d\\TH:i:s",UniversalSortableDateTimePattern:"Y-m-d H:i:sO",YearMonthPattern:"F, Y"}}),N2R("$",function(t){function e(t){return t+Math.floor(281474976710656*(1+Math.random())).toString(16)}t.fn.uid=function(i){var n=null;i=i||"n";do n=e(i);while(t("#"+n).length>0);return n},t.fn.generateUniqueClass=function(i){var n=null;i=i||"n";do n=e(i);while(t("."+n).length>0);return n}}),N2D("nUIAutocomplete",["nUIWidgetBase"],function(t,e){"use strict";function i(e,i){this.isRendered=!1,this.element=t(e),this.widgetName=this.widgetName||"nUIAutocomplete",this.widgetEventPrefix="autocomplete",this.isActive=!1,this.allowBlur=!0,this.options=t.extend({appendTo:"body",source:null,select:null,positionTo:"self",x:0,y:0},this.options,i),N2Classes.nUIWidgetBase.prototype.constructor.apply(this,arguments),this.element.on({focus:t.proxy(this.focus,this),blur:t.proxy(this.blur,this)}),"self"===this.options.positionTo?this.positionTo=this.element:this.positionTo=this.element.closest(this.options.positionTo)}return i.prototype=Object.create(N2Classes.nUIWidgetBase.prototype),i.prototype.constructor=i,i.prototype.focus=function(e){this.isActive===!1&&(this.showList(e),this.element.on("click."+this.widgetEventPrefix,t.proxy(this.showList,this)),this.isActive=!0)},i.prototype.showList=function(e){"function"==typeof this.options.appendTo?this.options.appendTo=this.options.appendTo.call(window):this.options.appendTo=t(this.options.appendTo);var i=this.getList().appendTo(this.options.appendTo),n={left:0,top:0},s=this.positionTo.offset();if(!this.options.appendTo.is(t("body"))){n=this.options.appendTo.offset(),n.top-=this.options.appendTo.scrollTop(),i.css("height","");var o=i.height(),r=this.options.appendTo[0].getBoundingClientRect(),a=this.positionTo[0].getBoundingClientRect(),l=Math.min(r.top+r.height-a.top-a.height-10,o);100>l&&o>l&&(l=Math.min(a.top-r.top-10,o),n.top=n.top+a.height+l),i.css("height",l)}i.css({left:s.left-n.left+this.element.position().left+this.options.x,top:s.top+this.positionTo.outerHeight()-n.top+this.options.y,minWidth:this.element.outerWidth(!0)+"px"}),i.off("."+this.widgetEventPrefix).on("mousedown."+this.widgetEventPrefix,t.proxy(function(e){t(e.target).is(i)&&(this.element.parent().addClass("focus2"),this.allowBlur=!1)},this)).on("mouseup."+this.widgetEventPrefix,t.proxy(function(e){t(e.target).is(i)&&(this.allowBlur=!0,this.element.focus(),this.element.parent().removeClass("focus2"))},this))},i.prototype.blur=function(t){this.allowBlur&&(this.hide(),this.element.off("."+this.widgetEventPrefix))},i.prototype.hide=function(){this.$list.detach(),this.isActive=!1},i.prototype.getList=function(){if(!this.isRendered){this.$list=t('<ul class="n2 nui-autocomplete"></ul>').attr({unselectable:"on"}).on({mousedown:t.proxy(N2Classes.WindowManager.setMouseDownArea,null,"nUIAutocomplete"),wheel:function(t){t.stopPropagation()}});for(var e=this.options.source.call(this,this.ui()),i=0;i<e.length;i++)t('<li class="nui-menu-item"><div tabindex="-1">'+e[i]+"</div></li>").on({mousedown:function(t){t.preventDefault()},click:t.proxy(function(t,e){this._trigger("select",e,{value:t}),this.hide()},this,e[i])}).appendTo(this.$list);this.isRendered=!0}return this.$list},i.prototype.ui=function(){return{}},N2Classes.nUIWidgetBase.register("nUIAutocomplete"),i}),N2D("nUIDraggableBar",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUIDraggable",this.widgetEventPrefix="drag",this.options=t.extend({drag:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this._mouseInit()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype._mouseStart=function(t){return this.currentData=this.originalData={margin:parseInt(this.element.css(n2const.rtl.marginLeft))},this.originalMousePosition={left:t.pageX},this.element.addClass("nui-draggable-dragging"),this._trigger("start",t,this.ui()),this._mouseDrag(t),!0},i.prototype._mouseDrag=function(t){var e=t.pageX-this.originalMousePosition.left||0;return this.currentData={},n2const.rtl.isRtl?this.currentData.margin=Math.max(0,this.originalData.margin-e):this.currentData.margin=Math.max(0,this.originalData.margin+e),this._trigger("drag",t,this.ui()),this.element.css(n2const.rtl.marginLeft,this.currentData.margin),!0},i.prototype._mouseStop=function(t){return this._trigger("stop",t,this.ui()),!0},i.prototype.ui=function(){return{currentData:this.currentData}},N2Classes.nUIWidgetBase.register("nUIDraggableBar"),i}),N2D("nUIDraggableDelay",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUIDraggable",this.widgetEventPrefix="drag",this.options=t.extend({drag:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this._mouseInit()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype._mouseStart=function(t){return this.currentData=this.originalData={width:parseInt(this.element.width())},this.originalMousePosition={left:t.pageX},this.element.addClass("nui-draggable-dragging"),this._trigger("start",t,this.ui()),this._mouseDrag(t),!0},i.prototype._mouseDrag=function(t){var e=t.pageX-this.originalMousePosition.left||0;return this.currentData={},n2const.rtl.isRtl?this.currentData.width=Math.max(0,this.originalData.width-e):this.currentData.width=Math.max(0,this.originalData.width+e),this._trigger("drag",t,this.ui()),this.element.width(this.currentData.width),!0},i.prototype._mouseStop=function(t){return this._trigger("stop",t,this.ui()),!0},i.prototype.ui=function(){return{currentData:this.currentData}},N2Classes.nUIWidgetBase.register("nUIDraggableDelay"),i}),N2D("nUIDraggable",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUIDraggable",this.widgetEventPrefix="drag",this.options=t.extend({addClasses:!0,appendTo:"parent",axis:!1,containment:!1,cursor:"auto",cursorAt:!1,handle:!1,helper:"original",scroll:!0,scrollSensitivity:20,scrollSpeed:20,drag:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype.create=function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("nui-draggable"),this._setHandleClassName(),this._mouseInit()},i.prototype._setPositionRelative=function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},i.prototype._getHandle=function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},i.prototype._setHandleClassName=function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("nui-draggable-handle")},i.prototype._mouseCapture=function(e){var i=this.options;return this.helper||i.disabled||t(e.target).closest(".nui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blurActiveElement(e),!0):!1)},i.prototype.cancel=function(){return this.helper.is(".nui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},t.fn.nuiScrollParent=function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")?!1:s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&o.length?o:t(this[0].ownerDocument||document)},i.prototype._mouseStart=function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("nui-draggable-dragging"),this._cacheHelperProportions(),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.nuiScrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),this._mouseDrag(e,!0),!0)},i.prototype._mouseDrag=function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",!1},i.prototype._mouseStop=function(t){return this._trigger("stop",t)!==!1&&this._clear(),!1},i.prototype._mouseUp=function(t){return this.handleElement.is(t.target)&&this.element.trigger("focus"),N2Classes.nUIMouse.prototype._mouseUp.call(this,t)},i.prototype._trigger=function(t,e,i){return i=i||this._uiHash(),N2Classes.nUIWidgetBase.prototype._trigger.call(this,t,e,i)},i.prototype._uiHash=function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition}},i.prototype._createHelper=function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},i.prototype._cacheHelperProportions=function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},i.prototype._cacheMargins=function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},i.prototype._refreshOffsets=function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},i.prototype._getParentOffset=function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},i.prototype._getRelativeOffset=function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},i.prototype._convertPositionTo=function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},i.prototype._setContainment=function(){var e,i,n,s=this.options,o=this.document[0];return this.relativeContainer=null,s.containment?"window"===s.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=t(s.containment),n=i[0],void(n&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i))):void(this.containment=null)},i.prototype._adjustOffsetFromHelper=function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},i.prototype._isRootNode=function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},i.prototype._generatePosition=function(t,e){var i,n,s=this.options,o=this._isRootNode(this.scrollParent[0]),r=t.pageX,a=t.pageY;return o&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(r=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(a=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(r=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(a=i[3]+this.offset.click.top)),"y"===s.axis&&(r=this.originalPageX),"x"===s.axis&&(a=this.originalPageY)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:o?0:this.offset.scroll.top),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:o?0:this.offset.scroll.left)}},i.prototype._clear=function(){this.helper.removeClass("nui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()};var n=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e},s=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")};return i.prototype._blurActiveElement=function(e){var i=n(this.document[0]),o=t(e.target);o.closest(i).length||s(i)},N2Classes.nUIWidgetBase.register("nUIDraggable"),i}),N2D("nUIFileUpload",["nUIWidgetBase"],function(t,e){"use strict";function i(e){var i="dragover"===e;return function(n){n.dataTransfer=n.originalEvent&&n.originalEvent.dataTransfer;var s=n.dataTransfer;s&&-1!==t.inArray("Files",s.types)&&this._trigger(e,t.Event(e,{delegatedEvent:n}))!==!1&&(n.preventDefault(),i&&(s.dropEffect="copy"))}}function n(i,n){this.element=t(i),this.widgetName=this.widgetName||"nUIFileUpload",this.options=t.extend({dropZone:t(document),pasteZone:e,fileInput:e,replaceFileInput:!0,paramName:e,singleFileUploads:!0,limitMultiFileUploads:e,limitMultiFileUploadSize:e,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:e,forceIframeTransport:!1,redirect:e,redirectParamName:e,postMessage:e,multipart:!0,maxChunkSize:e,uploadedBytes:e,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,i){return e=this.messages[e]||e.toString(),i&&t.each(i,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(t){return t.serializeArray()},add:function(e,i){return e.isDefaultPrevented()?!1:void((i.autoUpload||i.autoUpload!==!1&&t(this).nUIFileUpload("option","autoUpload"))&&i.process().done(function(){i.submit()}))},processData:!1,contentType:!1,cache:!1},this.options,n),N2Classes.nUIWidgetBase.prototype.constructor.apply(this,arguments),this._specialOptions=["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],this.create()}return t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),n.prototype=Object.create(N2Classes.nUIWidgetBase.prototype),n.prototype.constructor=n,n.prototype._blobSlice=t.support.blobSlice&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},n.prototype._BitrateTimer=function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var n=t-this.timestamp;return(!this.bitrate||!i||n>i)&&(this.bitrate=(e-this.loaded)*(1e3/n)*8,this.loaded=e,this.timestamp=t),this.bitrate}},n.prototype._isXHRUpload=function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},n.prototype._getFormData=function(e){var i;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},n.prototype._getTotal=function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},n.prototype._initProgressObject=function(e){var i={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,i):e._progress=i},n.prototype._initResponseObject=function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},n.prototype._onProgress=function(e,i){if(e.lengthComputable){var n,s=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&s-i._time<i.progressInterval&&e.loaded!==e.total)return;i._time=s,n=Math.floor(e.loaded/e.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=n-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(s,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=n,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(s,n,i.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),i),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},n.prototype._initProgressListener=function(e){var i=this,n=e.xhr?e.xhr():t.ajaxSettings.xhr();n.upload&&(t(n.upload).bind("progress",function(t){var n=t.originalEvent;t.lengthComputable=n.lengthComputable,t.loaded=n.loaded,t.total=n.total,i._onProgress(t,e)}),e.xhr=function(){return n})},n.prototype._isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},n.prototype._initXHRData=function(e){var i,n=this,s=e.files[0],o=e.multipart||!t.support.xhrFileUpload,r="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),o&&!e.blob&&this._isInstanceOf("File",s)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.name)+'"'),o?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:r,value:e.blob}):t.each(e.files,function(n,s){i.push({name:"array"===t.type(e.paramName)&&e.paramName[n]||r,value:s})})):(n._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?i.append(r,e.blob,s.name):t.each(e.files,function(s,o){(n._isInstanceOf("File",o)||n._isInstanceOf("Blob",o))&&i.append("array"===t.type(e.paramName)&&e.paramName[s]||r,o,o.uploadName||o.name)})),e.data=i):(e.contentType=s.type||"application/octet-stream",e.data=e.blob||s),e.blob=null},n.prototype._initIframeSettings=function(e){var i=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&i&&i!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},n.prototype._initDataSettings=function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},n.prototype._getParamName=function(e){var i=t(e.fileInput),n=e.paramName;return n?t.isArray(n)||(n=[n]):(n=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",s=(e.prop("files")||[1]).length;s;)n.push(i),s-=1}),n.length||(n=[i.prop("name")||"files[]"])),n},n.prototype._initFormSettings=function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},n.prototype._getAJAXSettings=function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},n.prototype._getDeferredState=function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},n.prototype._enhancePromise=function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},n.prototype._getXHRPromise=function(e,i,n){var s=t.Deferred(),o=s.promise();return i=i||this.options.context||o,e===!0?s.resolveWith(i,n):e===!1&&s.rejectWith(i,n),o.abort=s.promise,this._enhancePromise(o)},n.prototype._addConvenienceMethods=function(e,i){var n=this,s=function(e){return t.Deferred().resolveWith(n,e).promise()};i.process=function(e,o){return(e||o)&&(i._processQueue=this._processQueue=(this._processQueue||s([this])).pipe(function(){return i.errorThrown?t.Deferred().rejectWith(n,[i]).promise():s(arguments)}).pipe(e,o)),this._processQueue||s([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=n._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)!==!1&&n._onSend(e,this)),this.jqXHR||n._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",n._trigger("fail",null,this),n._getXHRPromise(!1))},i.state=function(){return this.jqXHR?n._getDeferredState(this.jqXHR):this._processQueue?n._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===n._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},n.prototype._getUploadedBytes=function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),n=i&&i.length>1&&parseInt(i[1],10);return n&&n+1},n.prototype._chunkedUpload=function(e,i){e.uploadedBytes=e.uploadedBytes||0;var n,s,o=this,r=e.files[0],a=r.size,l=e.uploadedBytes,h=e.maxChunkSize||a,p=this._blobSlice,c=t.Deferred(),u=c.promise();return this._isXHRUpload(e)&&p&&(l||a>h)&&!e.data?i?!0:l>=a?(r.error=e.i18n("uploadedBytes"),
this._getXHRPromise(!1,e.context,[null,"error",r.error])):(s=function(){var i=t.extend({},e),u=i._progress.loaded;i.blob=p.call(r,l,l+h,r.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,o._initXHRData(i),o._initProgressListener(i),n=(o._trigger("chunksend",null,i)!==!1&&t.ajax(i)||o._getXHRPromise(!1,i.context)).done(function(n,r,h){l=o._getUploadedBytes(h)||l+i.chunkSize,u+i.chunkSize-i._progress.loaded&&o._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=l,i.result=n,i.textStatus=r,i.jqXHR=h,o._trigger("chunkdone",null,i),o._trigger("chunkalways",null,i),a>l?s():c.resolveWith(i.context,[n,r,h])}).fail(function(t,e,n){i.jqXHR=t,i.textStatus=e,i.errorThrown=n,o._trigger("chunkfail",null,i),o._trigger("chunkalways",null,i),c.rejectWith(i.context,[t,e,n])})},this._enhancePromise(u),u.abort=function(){return n.abort()},s(),u):!1},n.prototype._beforeSend=function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},n.prototype._onDone=function(e,i,n,s){var o=s._progress.total,r=s._response;s._progress.loaded<o&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:o,total:o}),s),r.result=s.result=e,r.textStatus=s.textStatus=i,r.jqXHR=s.jqXHR=n,this._trigger("done",null,s)},n.prototype._onFail=function(t,e,i,n){var s=n._response;n.recalculateProgress&&(this._progress.loaded-=n._progress.loaded,this._progress.total-=n._progress.total),s.jqXHR=n.jqXHR=t,s.textStatus=n.textStatus=e,s.errorThrown=n.errorThrown=i,this._trigger("fail",null,n)},n.prototype._onAlways=function(t,e,i,n){this._trigger("always",null,n)},n.prototype._onSend=function(i,n){n.submit||this._addConvenienceMethods(i,n);var s,o,r,a,l=this,h=l._getAJAXSettings(n),p=function(){return l._sending+=1,h._bitrateTimer=new l._BitrateTimer,s=s||((o||l._trigger("send",t.Event("send",{delegatedEvent:i}),h)===!1)&&l._getXHRPromise(!1,h.context,o)||l._chunkedUpload(h)||t.ajax(h)).done(function(t,e,i){l._onDone(t,e,i,h)}).fail(function(t,e,i){l._onFail(t,e,i,h)}).always(function(t,e,i){if(l._onAlways(t,e,i,h),l._sending-=1,l._active-=1,h.limitConcurrentUploads&&h.limitConcurrentUploads>l._sending)for(var n=l._slots.shift();n;){if("pending"===l._getDeferredState(n)){n.resolve();break}n=l._slots.shift()}0===l._active&&l._trigger("stop")})};return this._beforeSend(i,h),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(r=t.Deferred(),this._slots.push(r),a=r.pipe(p)):(this._sequence=this._sequence.pipe(p,p),a=this._sequence),a.abort=function(){return o=[e,"abort","abort"],s?s.abort():(r&&r.rejectWith(h.context,o),p())},this._enhancePromise(a)):p()},n.prototype._onAdd=function(i,n){var s,o,r,a,l=this,h=!0,p=t.extend({},this.options,n),c=n.files,u=c.length,d=p.limitMultiFileUploads,f=p.limitMultiFileUploadSize,m=p.limitMultiFileUploadSizeOverhead,g=0,v=this._getParamName(p),y=0;if(!f||u&&c[0].size!==e||(f=e),(p.singleFileUploads||d||f)&&this._isXHRUpload(p))if(p.singleFileUploads||f||!d)if(!p.singleFileUploads&&f)for(r=[],s=[],a=0;u>a;a+=1)g+=c[a].size+m,(a+1===u||g+c[a+1].size+m>f||d&&a+1-y>=d)&&(r.push(c.slice(y,a+1)),o=v.slice(y,a+1),o.length||(o=v),s.push(o),y=a+1,g=0);else s=v;else for(r=[],s=[],a=0;u>a;a+=d)r.push(c.slice(a,a+d)),o=v.slice(a,a+d),o.length||(o=v),s.push(o);else r=[c],s=[v];return n.originalFiles=c,t.each(r||c,function(e,o){var a=t.extend({},n);return a.files=r?o:[o],a.paramName=s[e],l._initResponseObject(a),l._initProgressObject(a),l._addConvenienceMethods(i,a),h=l._trigger("add",t.Event("add",{delegatedEvent:i}),a)}),h},n.prototype._replaceFileInput=function(e){var i=e.fileInput,n=i.clone(!0);e.fileInputClone=n,t("<form></form>").append(n)[0].reset(),i.after(n).detach(),t.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===i[0]?n[0]:e}),i[0]===this.element[0]&&(this.element=n)},n.prototype._handleFileTreeEntry=function(e,i){var n,s=this,o=t.Deferred(),r=function(t){t&&!t.entry&&(t.entry=e),o.resolve([t])},a=function(t){s._handleFileTreeEntries(t,i+e.name+"/").done(function(t){o.resolve(t)}).fail(r)},l=function(){n.readEntries(function(t){t.length?(h=h.concat(t),l()):a(h)},r)},h=[];return i=i||"",e.isFile?e._file?(e._file.relativePath=i,o.resolve(e._file)):e.file(function(t){t.relativePath=i,o.resolve(t)},r):e.isDirectory?(n=e.createReader(),l()):o.resolve([]),o.promise()},n.prototype._handleFileTreeEntries=function(e,i){var n=this;return t.when.apply(t,t.map(e,function(t){return n._handleFileTreeEntry(t,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},n.prototype._getDroppedFiles=function(e){e=e||{};var i=e.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},n.prototype._getSingleFileInputFiles=function(i){i=t(i);var n,s,o=i.prop("webkitEntries")||i.prop("entries");if(o&&o.length)return this._handleFileTreeEntries(o);if(n=t.makeArray(i.prop("files")),n.length)n[0].name===e&&n[0].fileName&&t.each(n,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(s=i.prop("value"),!s)return t.Deferred().resolve([]).promise();n=[{name:s.replace(/^.*\\/,"")}]}return t.Deferred().resolve(n).promise()},n.prototype._getFileInputFiles=function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},n.prototype._onChange=function(e){var i=this,n={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(n.fileInput).always(function(s){n.files=s,i.options.replaceFileInput&&i._replaceFileInput(n),i._trigger("change",t.Event("change",{delegatedEvent:e}),n)!==!1&&i._onAdd(e,n)})},n.prototype._onPaste=function(e){var i=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,n={files:[]};i&&i.length&&(t.each(i,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&n.files.push(i)}),this._trigger("paste",t.Event("paste",{delegatedEvent:e}),n)!==!1&&this._onAdd(e,n))},n.prototype._onDrop=function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=this,n=e.dataTransfer,s={};n&&n.files&&n.files.length&&(e.preventDefault(),e.stopPropagation(),this._getDroppedFiles(n).always(function(n){s.files=n,i._trigger("drop",t.Event("drop",{delegatedEvent:e}),s)!==!1&&i._onAdd(e,s)}))},n.prototype._onDragOver=i("dragover"),n.prototype._onDragEnter=i("dragenter"),n.prototype._onDragLeave=i("dragleave"),n.prototype._initEventHandlers=function(){this._isXHRUpload(this.options)&&(t(this.options.dropZone).on({dragover:t.proxy(this._onDragOver,this),drop:t.proxy(this._onDrop,this),dragenter:t.proxy(this._onDragEnter,this),dragleave:t.proxy(this._onDragLeave,this)}),t(this.options.pasteZone).on({paste:t.proxy(this._onPaste,this)})),t.support.fileInput&&t(this.options.fileInput).on({change:t.proxy(this._onChange,this)})},n.prototype._destroyEventHandlers=function(){t(this.options.dropZone).off("dragenter dragleave dragover drop"),t(this.options.pasteZone).off("paste"),t(this.options.fileInput).off("change")},n.prototype.setOption=function(e,i){var n=-1!==t.inArray(e,this._specialOptions);n&&this._destroyEventHandlers(),N2Classes.nUIWidgetBase.prototype.setOption.apply(this,arguments),n&&(this._initSpecialOptions(),this._initEventHandlers())},n.prototype._initSpecialOptions=function(){var i=this.options;i.fileInput===e?i.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):i.fileInput instanceof t||(i.fileInput=t(i.fileInput)),i.dropZone instanceof t||(i.dropZone=t(i.dropZone)),i.pasteZone instanceof t||(i.pasteZone=t(i.pasteZone))},n.prototype._getRegExp=function(t){var e=t.split("/"),i=e.pop();return e.shift(),new RegExp(e.join("/"),i)},n.prototype._isRegExpOption=function(e,i){return"url"!==e&&"string"===t.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},n.prototype._initDataAttributes=function(){var e=this,i=this.options,n=this.element.data();t.each(this.element[0].attributes,function(t,s){var o,r=s.name.toLowerCase();/^data-/.test(r)&&(r=r.slice(5).replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()}),o=n[r],e._isRegExpOption(r,o)&&(o=e._getRegExp(o)),i[r]=o)})},n.prototype.create=function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},n.prototype.active=function(){return this._active},n.prototype.progress=function(){return this._progress},n.prototype.add=function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},n.prototype.send=function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,n,s=this,o=t.Deferred(),r=o.promise();return r.abort=function(){return n=!0,i?i.abort():(o.reject(null,"abort","abort"),r)},this._getFileInputFiles(e.fileInput).always(function(t){if(!n){if(!t.length)return void o.reject();e.files=t,i=s._onSend(null,e),i.then(function(t,e,i){o.resolve(t,e,i)},function(t,e,i){o.reject(t,e,i)})}}),this._enhancePromise(r)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)},N2Classes.nUIWidgetBase.register("nUIFileUpload"),n}),N2D("HorizontalScrollBar",function(t){"use strict";function e(e){this.$container=e,this.$document=t(document),this.currentLeft=0,this.$viewport=e.find(".n2-scroll-viewport"),this.$content=e.find(".n2-scroll-content"),this.$track=e.find(".n2-scroll-track"),this.$grip=e.find(".n2-scroll-grip"),this.side=window.n2const.isRTL()?"right":"left",this.modifier=window.n2const.isRTL()?-1:1,this.$grip.on("mousedown.scrollbar",t.proxy(this.mouseDown,this)),this.update(),t(window).resize(t.proxy(this.update,this))}return e.prototype.update=function(){this.viewportWidth=this.$viewport.width(),this.contentWidth=this.$content.outerWidth(),this.trackWidth=this.$track.width(),this.ratio=Math.min(1,this.viewportWidth/this.contentWidth),this.gripWidth=Math.max(20,Math.floor(this.ratio*this.trackWidth)),this.$grip.width(this.gripWidth),this.setLeft(this.currentLeft),this.$container.toggleClass("n2-scroll-disable",1===this.ratio)},e.prototype.setLeft=function(t){t=Math.max(0,Math.min(this.trackWidth-this.gripWidth,t)),this.$grip.css(this.side,t),this.$content.css(this.side,-1*Math.ceil(t/this.ratio)),this.currentLeft=t},e.prototype.mouseDown=function(e){this.context={pageX:e.pageX,left:this.currentLeft},this.$document.on({"mousemove.scrollbar":t.proxy(this.mouseMove,this),"mouseup.scrollbar":t.proxy(this.mouseUp,this)})},e.prototype.mouseMove=function(t){this.setLeft(this.context.left+(t.pageX-this.context.pageX)*this.modifier)},e.prototype.mouseUp=function(t){this.mouseMove(t),this.$document.off(".scrollbar"),delete this.context},e}),N2D("ajaxTransportIframe",function(t,e){"use strict";var i=0;t.ajaxTransport("iframe",function(n){if(n.async){var s,o,r,a=n.initialIframeSrc||"javascript:false;";return{send:function(l,h){s=t('<form style="display:none;"></form>'),s.attr("accept-charset",n.formAcceptCharset),r=/\?/.test(n.url)?"&":"?","DELETE"===n.type?(n.url=n.url+r+"_method=DELETE",n.type="POST"):"PUT"===n.type?(n.url=n.url+r+"_method=PUT",n.type="POST"):"PATCH"===n.type&&(n.url=n.url+r+"_method=PATCH",n.type="POST"),i+=1,o=t('<iframe src="'+a+'" name="iframe-transport-'+i+'"></iframe>').bind("load",function(){var i,r=t.isArray(n.paramName)?n.paramName:[n.paramName];o.unbind("load").bind("load",function(){var i;try{if(i=o.contents(),!i.length||!i[0].firstChild)throw new Error}catch(n){i=e}h(200,"success",{iframe:i}),t('<iframe src="'+a+'"></iframe>').appendTo(s),window.setTimeout(function(){s.remove()},0)}),s.prop("target",o.prop("name")).prop("action",n.url).prop("method",n.type),n.formData&&t.each(n.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(s)}),n.fileInput&&n.fileInput.length&&"POST"===n.type&&(i=n.fileInput.clone(),n.fileInput.after(function(t){return i[t]}),n.paramName&&n.fileInput.each(function(e){t(this).prop("name",r[e]||n.paramName)}),s.append(n.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),n.fileInput.removeAttr("form")),s.submit(),i&&i.length&&n.fileInput.each(function(e,n){var s=t(i[e]);t(n).prop("name",s.prop("name")).attr("form",s.attr("form")),s.replaceWith(n)})}),s.append(o).appendTo(document.body)},abort:function(){o&&o.unbind("load").prop("src",a),s&&s.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe xml":function(e){var i=e&&e[0];return i&&t.isXMLDoc(i)?i:t.parseXML(i.XMLDocument&&i.XMLDocument.xml||t(i.body).html())},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),N2D("nUIMouse",["nUIWidgetBase"],function(t,e){"use strict";function i(e,i){this.widgetName=this.widgetName||"nUIMouse",this.options=t.extend({},{cancel:"input, textarea, button, select, option",distance:1,delay:0},this.options),N2Classes.nUIWidgetBase.prototype.constructor.apply(this,arguments)}var n=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),s=!1;return t(document).on("mouseup",function(){s=!1}),i.prototype=Object.create(N2Classes.nUIWidgetBase.prototype),i.prototype.constructor=i,i.prototype._mouseInit=function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},i.prototype._mouseDestroy=function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},i.prototype._mouseDown=function(e){if(!s){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,o="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!o&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),s=!0,!0)):!0}},i.prototype._mouseMove=function(t){if(this._mouseMoved){if(n&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},i.prototype._mouseUp=function(e){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,s=!1,e.preventDefault()},i.prototype._mouseDistanceMet=function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},i.prototype._mouseDelayMet=function(){return this.mouseDelayMet},i.prototype._mouseStart=function(){},i.prototype._mouseDrag=function(){},i.prototype._mouseStop=function(){},i.prototype._mouseCapture=function(){return!0},i}),N2D("nUINormalSizing",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUINormalSizing",this.widgetEventPrefix="normalsizing",this.multiplier=1,this.options=t.extend({maxWidth:!0,height:!1,syncWidth:!1,start:null,resizeMaxWidth:null,resizeHeight:null,stopMaxWidth:null,stopHeight:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype.create=function(){this._setupHandles(),this._mouseInit()},i.prototype._destroy=function(){this._mouseDestroy(),this.element.removeData(this.widgetName);for(var t in this.handles)this.handles[t].remove();return this},i.prototype._setupHandles=function(){var e,i,n=this.options,s=[];for(n.maxWidth&&(s.push("w"),s.push("e")),n.height&&s.push("s"),this.handles={},e=0;e<s.length;e++){var o=s[e];i=t('<div class="nui-normal-sizing-handle nui-normal-sizing-'+o+'">').css("zIndex",90),this.handles[o]=i,this.element.append(i)}n.maxWidth&&(nextend.tooltip.addElement(this.handles.e,"Max width"),nextend.tooltip.addElement(this.handles.w,"Max width")),n.height&&nextend.tooltip.addElement(this.handles.s,"Height"),this._handles=this.element.find("> .nui-normal-sizing-handle"),this._handles.addClass("n2-unselectable")},i.prototype._removeHandles=function(){this._handles.remove()},i.prototype._mouseCapture=function(t){var e;for(e in this.handles)if(this.handles[e][0]===t.target)return this.currentHandle=e,!this.options.disabled;return!1},i.prototype._mouseStart=function(e){this.options,this.element;switch(this.resizing=!0,this.originalMousePosition={left:e.pageX,top:e.pageY},this.currentHandle){case"w":case"e":this.originalValue=this.element.width(),this.maxWidth=this.element.parent().width(),this._trigger("start",e,"maxwidth"),"center"==this.element.css("align-self")?this.multiplier=2:this.multiplier=1;break;case"s":this.originalValue=this.element.height(),this._trigger("start",e,"height")}return this.element.addClass("nui-normal-sizing-resizing"),t("body").addClass("n2-ss-normal-sizing-element"),!0},i.prototype._parse_movement_s=function(t){return t.pageY-this.originalMousePosition.top},i.prototype._parse_movement_e=function(t){return(t.pageX-this.originalMousePosition.left)*this.multiplier},i.prototype._parse_movement_w=function(t){return(this.originalMousePosition.left-t.pageX)*this.multiplier},i.prototype._mouseDrag=function(t){var e=this.options;switch(this.currentValue=nextend.roundHelper(this.originalValue+this["_parse_movement_"+this.currentHandle].call(this,t)),this.currentHandle){case"w":case"e":this.currentValue<=this.maxWidth?(this.element.css("maxWidth",this.currentValue+"px"),e.syncWidth&&this.element.css("width",this.currentValue+"px")):(this.element.css("maxWidth","none"),e.syncWidth&&this.element.css("width",""),this.currentValue=0),this._trigger("resizeMaxWidth",t,{value:this.currentValue});break;case"s":this.currentValue=Math.max(1,this.currentValue),this.element.height(this.currentValue),this._trigger("resizeHeight",t,{value:this.currentValue})}},i.prototype._mouseStop=function(e){var i=this.options;switch(this.currentValue=nextend.roundHelper(this.originalValue+this["_parse_movement_"+this.currentHandle].call(this,e)),this.currentHandle){case"w":case"e":this.currentValue<=this.maxWidth?(this.element.css("maxWidth",this.currentValue+"px"),i.syncWidth&&this.element.css("width","")):(this.element.css("maxWidth","none"),i.syncWidth&&this.element.css("width",""),this.currentValue=0),this._trigger("stopMaxWidth",e,{value:this.currentValue});break;case"s":this.currentValue=Math.max(1,this.currentValue),this.element.height(this.currentValue),this._trigger("stopHeight",e,{value:this.currentValue})}return this.resizing=!1,t("body").off(".uiNextendNormalSizing").removeClass("n2-ss-normal-sizing-element"),this.element.removeClass("nui-normal-sizing-resizing"),nextend.preventMouseUp(),!1},N2Classes.nUIWidgetBase.register("nUINormalSizing"),i}),N2D("nUIResizableBar",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUIResizable",this.widgetEventPrefix="resize",this.options=t.extend({zIndex:90,resize:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype.create=function(){this.options;this.element.addClass("nui-resizable"),this._setupHandles(),this._mouseInit(),this._trigger("create",null,{})},i.prototype._setupHandles=function(){var e,i,n,s,o,r=this.options;for(this._handles=t(),n=["e","w"],this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),s="nui-resizable-"+e,o=t("<div>").addClass("nui-resizable-handle "+s).css({zIndex:r.zIndex}),this.handles[e]=".nui-resizable-"+e,this.element.append(o),o.on({mousedown:t.proxy(function(t,e){this.currentHandle=t,this._mouseDown(e)},this,e)}),this._handles=this._handles.add(o);this._handles.css({"-ms-user-select":"none","-moz-user-select":"-moz-none","-khtml-user-select":"none","-webkit-user-select":"none","user-select":"none"})},i.prototype._mouseStart=function(e){this.currentData=this.originalData={margin:parseInt(this.element.css(n2const.rtl.marginLeft)),width:parseInt(this.element.width())},this.originalMousePosition={left:e.pageX};var i=t(".nui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"===i?this.axis+"-resize":i),this.element.addClass("nui-resizable-resizing"),this._trigger("start",e,this.ui()),!0},i.prototype._mouseDrag=function(t){var e=t.pageX-this.originalMousePosition.left||0;this.currentData={},n2const.rtl.isRtl?"e"===this.currentHandle?(this.currentData.margin=Math.max(0,this.originalData.margin-e),this.currentData.width=Math.max(0,this.originalData.width+e)):"w"===this.currentHandle&&(this.currentData.margin=this.originalData.margin,this.currentData.width=Math.max(0,this.originalData.width-e)):"e"===this.currentHandle?(this.currentData.margin=this.originalData.margin,this.currentData.width=Math.max(0,this.originalData.width+e)):"w"===this.currentHandle&&(this.currentData.margin=Math.max(0,this.originalData.margin+e),this.currentData.width=Math.max(0,this.originalData.width-e)),this._trigger("resize",t,this.ui()),this.element.css(n2const.rtl.marginLeft,this.currentData.margin),this.element.css("width",this.currentData.width)},i.prototype._mouseStop=function(e){t("body").css("cursor","auto"),this.element.removeClass("nui-resizable-resizing"),this._trigger("stop",e,this.ui())},i.prototype.ui=function(){return{currentData:this.currentData}},N2Classes.nUIWidgetBase.register("nUIResizableBar"),i}),N2D("nUIResizable",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUIResizable",this.widgetEventPrefix="resize",this.options=t.extend({alsoResize:!1,containment:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.plugins={},i.prototype._num=function(t){return parseFloat(t)||0},i.prototype._isNumber=function(t){return!isNaN(parseFloat(t))},i.prototype._hasScroll=function(e,i){if("hidden"===t(e).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return e[n]>0?!0:(e[n]=1,s=e[n]>0,e[n]=0,s)},i.prototype.create=function(){var e=this.options;this.element.addClass("nui-resizable"),t.extend(this,{originalElement:this.element,_helper:e.helper?e.helper||"nui-resizable-helper":null}),this._setupHandles(),this._mouseInit(),this._trigger("create",null,{})},i.prototype._setupHandles=function(){var e,i,n,s,o,r=this.options,a=this;if(this.handles=r.handles||(t(".nui-resizable-handle",this.element).length?{n:".nui-resizable-n",e:".nui-resizable-e",s:".nui-resizable-s",w:".nui-resizable-w",se:".nui-resizable-se",sw:".nui-resizable-sw",ne:".nui-resizable-ne",nw:".nui-resizable-nw"}:"e,s,se"),this._handles=t(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),s="nui-resizable-"+e,o=t("<div>").addClass("nui-resizable-handle "+s),o.css({zIndex:r.zIndex}),this.handles[e]=".nui-resizable-"+e,this.element.append(o);this._renderAxis=function(){var e;for(e in this.handles)this.handles[e].constructor===String?this.handles[e]=this.element.children(this.handles[e]).first().show():(this.handles[e].jquery||this.handles[e].nodeType)&&(this.handles[e]=t(this.handles[e]),this._on(this.handles[e],{mousedown:a._mouseDown})),this._handles=this._handles.add(this.handles[e])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".nui-resizable-handle")),this._handles.addClass("n2-unselectable"),this._handles.on("mouseover",function(){a.resizing||(this.className&&(o=this.className.match(/nui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")})},i.prototype._mouseCapture=function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},i.prototype._removeHandles=function(){this._handles.remove()},i.prototype._mouseStart=function(e){var i=this.element.position();this.element.css({left:i.left,top:i.top,right:"auto",bottom:"auto"});var n,s,o,r=this.options,a=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),s=this._num(this.helper.css("top")),r.containment&&(n+=t(r.containment).scrollLeft()||0,s+=t(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalPosition={left:n,top:s},this.originalMousePosition={left:e.pageX,top:e.pageY},o=t(".nui-resizable-"+this.axis).css("cursor"),t("body").css("cursor","auto"===o?this.axis+"-resize":o),this.element.addClass("nui-resizable-resizing"),this._propagate("start",e),!0},i.prototype._mouseDrag=function(e){var i,n,s=this.originalMousePosition,o=this.axis,r=e.pageX-s.left||0,a=e.pageY-s.top||0,l=this._change[o];return this._updatePrevProperties(),l?(i=l.apply(this,[e,r,a]),this._updateVirtualBoundaries(),i=this._respectSize(i,e),this._updateCache(i),this._propagate("resize",e),n=this._applyChanges(),t.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",e,this.ui()),this._applyChanges()),!1):!1},i.prototype._mouseStop=function(e){this.resizing=!1;var i,n,s,o=this;return this._helper&&(i={width:o.helper.width(),height:o.helper.height()},n=parseFloat(o.element.css("left"))+(o.position.left-o.originalPosition.left)||null,s=parseFloat(o.element.css("top"))+(o.position.top-o.originalPosition.top)||null,this.element.css(t.extend(i,{top:s,left:n})),o.helper.height(o.size.height),o.helper.width(o.size.width)),t("body").css("cursor","auto"),this.element.removeClass("nui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},i.prototype._updatePrevProperties=function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},i.prototype._applyChanges=function(){var t={};return this.position.top!==this.prevPosition.top&&(t.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(t.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(t.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(t.height=this.size.height+"px"),this.helper.css(t),t},i.prototype._updateVirtualBoundaries=function(){var t,e=this.options;t={minWidth:this._isNumber(e.minWidth)?e.minWidth:0,maxWidth:this._isNumber(e.maxWidth)?e.maxWidth:1/0,minHeight:this._isNumber(e.minHeight)?e.minHeight:0,maxHeight:this._isNumber(e.maxHeight)?e.maxHeight:1/0},this._vBoundaries=t},i.prototype._updateCache=function(t){this.offset=this.helper.offset(),this._isNumber(t.left)&&(this.position.left=t.left),this._isNumber(t.top)&&(this.position.top=t.top),this._isNumber(t.height)&&(this.size.height=t.height),this._isNumber(t.width)&&(this.size.width=t.width)},i.prototype._respectSize=function(t){var e=this._vBoundaries,i=this.axis,n=this._isNumber(t.width)&&e.maxWidth&&e.maxWidth<t.width,s=this._isNumber(t.height)&&e.maxHeight&&e.maxHeight<t.height,o=this._isNumber(t.width)&&e.minWidth&&e.minWidth>t.width,r=this._isNumber(t.height)&&e.minHeight&&e.minHeight>t.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,h=/sw|nw|w/.test(i),p=/nw|ne|n/.test(i);return o&&(t.width=e.minWidth),r&&(t.height=e.minHeight),n&&(t.width=e.maxWidth),s&&(t.height=e.maxHeight),o&&h&&(t.left=a-e.minWidth),n&&h&&(t.left=a-e.maxWidth),r&&p&&(t.top=l-e.minHeight),s&&p&&(t.top=l-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},i.prototype._renderProxy=function(){var e=this.element,i=this.options;this.elementOffset=e.offset(),this._helper?(this.helper=this.helper||t("<div style='overflow:hidden;'></div>").addClass(this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.addClass("n2-unselectable").appendTo("body")):this.helper=this.element},i.prototype._change={e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},sw:function(e,i,n){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,n]))},ne:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,n]))},nw:function(e,i,n){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,n]))}},i.prototype._propagate=function(t,e){this.callPlugin(t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},i.prototype.ui=function(){return{
originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition,axis:this.axis}},i.prototype._destroy=function(){this._mouseDestroy(),this.element.removeClass("nui-resizable").removeData(this.widgetName);for(var t in this.handles)this.handles[t].remove();return this},N2Classes.nUIWidgetBase.addPlugin(i,"smartguides",{start:function(e,i){var n=t(this).data("nUIResizable"),s=n.options;if(n.gridH=t('<div class="n2-grid n2-grid-h"></div>').appendTo(s._containment),n.gridV=t('<div class="n2-grid n2-grid-v"></div>').appendTo(s._containment),n.gridH2=t('<div class="n2-grid n2-grid-h"></div>').appendTo(s._containment),n.gridV2=t('<div class="n2-grid n2-grid-v"></div>').appendTo(s._containment),n.elements=[],"function"==typeof s.smartguides){var o=s.smartguides();if(o){var r=s._containment.offset();o.each(function(){var e=t(this),i=e.offset();this!=n.element[0]&&n.elements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:Math.round(i.top-r.top),left:Math.round(i.left-r.left)})}),n.elements.push({item:s._containment,width:s._containment.width(),height:s._containment.height(),top:0,left:0})}}},stop:function(e,i){var n=t(this).data("nUIResizable");n.gridH.remove(),n.gridV.remove(),n.gridH2.remove(),n.gridV2.remove()},resize:function(e,i){function n(t){a.gridV.css({left:Math.min(t,p.width-1),display:"block"})}function s(t){a.gridV2.css({left:Math.min(t,p.width-1),display:"block"})}function o(t){a.gridH.css({top:Math.min(t,p.height-1),display:"block"})}function r(t){a.gridH2.css({top:Math.min(t,p.height-1),display:"block"})}var a=t(this).data("nUIResizable"),l=a.options,h=l.tolerance;a.gridV.css({display:"none"}),a.gridH.css({display:"none"}),a.gridV2.css({display:"none"}),a.gridH2.css({display:"none"});var p=a.elements[a.elements.length-1],c=e.ctrlKey||e.metaKey,u=e.altKey;if(!c||!u)for(var d=i.position.left,f=d+i.size.width,m=i.position.top,g=m+i.size.height,v=a.elements.length-1;v>=0;v--){var y=a.elements[v].left,b=y+a.elements[v].width,x=a.elements[v].top,w=x+a.elements[v].height;if(!c){var _=(y+b)/2;if(Math.abs(y-f)<=h)i.size.width=y-i.position.left,n(i.position.left+i.size.width);else if(Math.abs(y-d)<=h){var S=i.position.left-y;i.position.left=y,i.size.width+=S,n(i.position.left)}else if(Math.abs(_-d)<=h){var S=i.position.left-_;i.position.left=_,i.size.width+=S,n(i.position.left)}if(Math.abs(b-d)<=h){var S=i.position.left-b;i.position.left=b,i.size.width+=S,s(i.position.left)}else Math.abs(b-f)<=h?(i.size.width=b-i.position.left,s(i.position.left+i.size.width)):Math.abs(_-f)<=h&&(i.size.width=_-i.position.left,s(i.position.left+i.size.width))}if(!u){var C=(x+w)/2;if(Math.abs(x-g)<=h)i.size.height=x-i.position.top,o(x);else if(Math.abs(x-m)<=h){var S=i.position.top-x;i.position.top=x,i.size.height+=S,o(i.position.top)}else if(Math.abs(C-m)<=h){var S=i.position.top-C;i.position.top=C,i.size.height+=S,o(i.position.top)}if(Math.abs(w-m)<=h){var S=i.position.top-w;i.position.top=w,i.size.height+=S,r(i.position.top)}else Math.abs(w-g)<=h?(i.size.height=w-i.position.top,r(i.position.top+i.size.height)):Math.abs(C-g)<=h&&(i.size.height=C-i.position.top,r(i.position.top+i.size.height))}}}}),N2Classes.nUIWidgetBase.register("nUIResizable"),i}),N2D("nUISlider",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUISlider",this.widgetEventPrefix="slide",this.options=t.extend({min:0,max:100,step:1,value:0,change:null,slide:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,N2Classes.nUIWidgetBase.register("nUISlider"),i.prototype.create=function(){this._mouseSliding=!1,this._mouseInit(),this._calculateNewMax(),this.element.addClass("nui-slider nui-slider-horizontal"),this._refresh()},i.prototype.doAction=function(t){switch(N2Classes.nUIWidgetBase.prototype.doAction.apply(this,arguments),t){case"value":return this._value()}},i.prototype.setOption=function(t,e){switch(N2Classes.nUIWidgetBase.prototype.setOption.call(this,t,e),t){case"value":this._refreshValue(),this._change(null,0);break;case"step":case"min":case"max":this._calculateNewMax(),this._refreshValue()}},i.prototype._refresh=function(){this._createHandle(),this._refreshValue()},i.prototype._createHandle=function(){var e=this.element.find(".nui-slider-handle");e.length?this.handle=e:this.handle=t("<span tabindex='0'></span>"),this.handle.attr("tabIndex",0).addClass("nui-slider-handle").appendTo(this.element)},i.prototype._mouseCapture=function(t){var e,i,n,s=this.handle,o=this.options;return o.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e),n=this._start(t),n===!1?!1:(this._mouseSliding=!0,s.trigger("focus"),this._slide(t,i),!0))},i.prototype._mouseStart=function(){return this.lastValue=Number.MAX_VALUE,!0},i.prototype._mouseDrag=function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this.lastValue!=i&&(this._slide(t,i),this.lastValue=i),!1},i.prototype._mouseStop=function(t){return this._mouseSliding=!1,this._stop(t),this._change(t),!1},i.prototype._normValueFromMouse=function(t){var e,i,n,s,o;return e=this.elementSize.width,i=t.x-this.elementOffset.left,n=i/e,n>1&&(n=1),0>n&&(n=0),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},i.prototype._trimAlignValue=function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,n=t-i;return 2*Math.abs(i)>=e&&(n+=i>0?e:-e),parseFloat(n.toFixed(5))},i.prototype._calculateNewMax=function(){var t=this.options.max,e=this._valueMin(),i=this.options.step,n=Math.round((t-e)/i)*i;t=n+e,t>this.options.max&&(t-=i),this.max=parseFloat(t.toFixed(this._precision()))},i.prototype._precision=function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},i.prototype._precisionOf=function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},i.prototype._change=function(t){this._mouseSliding||this._trigger("change",t,this._uiHash())},i.prototype.value=function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},i.prototype._value=function(){var t=this.options.value;return t=this._trimAlignValue(t)},i.prototype._valueMin=function(){return this.options.min},i.prototype._valueMax=function(){return this.max},i.prototype._refreshValue=function(){var t=this.value(),e=this._valueMin(),i=this._valueMax(),n=i!==e?(t-e)/(i-e)*100:0;this.handle.css("left",n+"%")},i.prototype._uiHash=function(t){return{handle:this.handle[0],value:t!==e?t:this.value()}},i.prototype._start=function(t){return this._trigger("start",t,this._uiHash())},i.prototype._slide=function(t,e){var i,n=this.value();e!==n&&(i=this._trigger("slide",t,this._uiHash(e)),i!==!1&&this.value(e))},i.prototype._stop=function(t){this._trigger("stop",t,this._uiHash())},i}),N2D("nUISortable",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUISortable",this.widgetEventPrefix="sortable",this.options=t.extend({items:"> *",handle:"",placeholder:!1,helper:"original",forcePlaceholderSize:!1,forceHelperSize:!1,axis:!1,droppables:!1},this.options,i),this.isOver=!1,N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype.create=function(){this._mouseInit()},i.prototype._mouseCapture=function(e){if(this.options.disabled)return!1;var i=null,n=t(e.target);if(""!==this.options.handle){var s=this.element.find(this.options.items+" "+this.options.handle);if(-1===s.index(n)&&!s.has(n).length)return!1}var o=this.element.find(this.options.items);return i=-1!==o.index(n)?n:o.has(n),i.length?(this.currentItem=i,!0):!1},i.prototype._mouseStart=function(e){this._trigger("beforestart",e,{currentItem:this.currentItem}),this.context={e:e,original:{pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY,elementBCR:this.element[0].getBoundingClientRect(),currentItemBCR:this.currentItem[0].getBoundingClientRect()},offsetShift:{top:0,left:0},scrollCB:t.proxy(this._mouseScroll,this)},this.element.addClass("n2-ui-sortable-in-progress"),this._cacheItems(),this.placeholder=t("<div/>").addClass(this.options.placeholder||this.currentItem[0].className);var i={width:this.currentItem.width(),height:this.currentItem.height()};"clone"===this.options.helper?this.helper=this.currentItem.clone():"clone_hide"===this.options.helper?(this.helper=this.currentItem.clone(),this.currentItem.css("display","none")):this.helper=this.currentItem,this.options.forceHelperSize&&this.helper.css(i),this.options.forcePlaceholderSize&&this.placeholder.css(i),this.helper.addClass("n2-ui-sortable-helper").css({position:"absolute",zIndex:1e3}).appendTo(this.element),this._trigger("start",e,this.ui()),window.addEventListener("scroll",this.context.scrollCB,{capture:!0,passive:!0})},i.prototype._mouseDrag=function(e){this.context.e=e;var i=this.element[0].getBoundingClientRect(),n={};if(!this.options.axis||"x"===this.options.axis){var s=i.left+this.context.original.clientX-e.clientX;this.context.offsetShift.left=e.pageX-this.context.original.pageX-this.context.original.elementBCR.left+s,n.left=this.context.original.currentItemBCR.left-s}if(!this.options.axis||"y"===this.options.axis){var o=i.top+this.context.original.clientY-e.clientY;this.context.offsetShift.top=e.pageY-this.context.original.pageY-this.context.original.elementBCR.top+o,n.top=this.context.original.currentItemBCR.top-o}this.helper.css(n);var r=this._findClosestItem(e),a="before"===r[1]?this.items[Math.max(0,r[2]-1)]:this.items[Math.min(this.items.length-1,r[2])];"clone"===this.options.helper&&(r[0].is(this.currentItem)||t(a).is(this.currentItem))?this.placeholder.detach():this.positionPlaceholder(r),this.options.droppables&&("over"!==r[1]?this.isOver&&(this._trigger("out",e,this.ui()),this.isOver=!1):(this.isOver&&!this.isOver.is(r[0])&&(this._trigger("out",e,this.ui()),this.isOver=!1),this.isOver||(this.isOver=r[0],this._trigger("over",e,this.ui()))))},i.prototype.positionPlaceholder=function(t){switch(t[1]){case"before":this.placeholder.insertBefore(t[0]);break;case"after":this.placeholder.insertAfter(t[0]);break;case"over":this.placeholder.detach()}},i.prototype._mouseStop=function(t){this.context.e=t,this._trigger("beforestop",t,this.ui()),window.removeEventListener("scroll",this.context.scrollCB,{capture:!0,passive:!0}),this.placeholder.remove();var e=this._findClosestItem(t);switch(e[1]){case"before":this.currentItem.insertBefore(e[0]);break;case"after":this.currentItem.insertAfter(e[0])}this.helper.removeClass("n2-ui-sortable-helper").css({position:"",zIndex:"",left:"",top:""}),"clone"!==this.options.helper&&"clone_hide"!==this.options.helper||this.helper.remove(),"clone_hide"===this.options.helper&&this.currentItem.css("display",""),this.element.removeClass("n2-ui-sortable-in-progress"),"over"===e[1]?(this._trigger("drop",t,this.ui()),this._trigger("out",t,this.ui())):this._trigger("stop",t,this.ui()),this.currentItem=null},i.prototype._findClosestItem=function(t){for(var e,i,n,s=Number.MAX_VALUE,o=t.pageX-this.context.offsetShift.left,r=t.pageY-this.context.offsetShift.top,a=0;a<this.itemsData.length;a++){var l=this.itemsData[a];for(var h in l.side){var p=Math.sqrt(Math.pow((o-l.side[h].left)/l.width,2)+Math.pow((r-l.side[h].top)/l.height,2));s>p&&(s=p,e=l.item,i=h,"after"===h?n=a+1:"before"===h&&(n=a))}}return[e,i,n]},i.prototype.getItems=function(){return this.element.find(this.options.items)},i.prototype._cacheItems=function(){this.items=this.getItems(),this.itemsData=[];for(var t=0;t<this.items.length;t++)if("original"!==this.options.helper||this.items[t]!==this.currentItem[0]){var e=this.items.eq(t).offset(),i=this.items.eq(t).width(),n=this.items.eq(t).height(),s={};if(this.options.droppables&&!this.currentItem.hasClass(this.options.droppables)&&this.items.eq(t).hasClass(this.options.droppables)?(s.before={left:e.left+i/6,top:e.top+n/6},s.over={left:e.left+3*i/6,top:e.top+3*n/6},s.after={left:e.left+5*i/6,top:e.top+5*n/6}):(s.before={left:e.left+i/4,top:e.top+n/4},s.after={left:e.left+3*i/4,top:e.top+3*n/4}),window.n2const.isRTL()){var o=s.after;s.after=s.before,s.before=o}this.itemsData.push({item:this.items.eq(t),side:s,width:i,height:n})}},i.prototype._mouseScroll=function(){var t=this.context.e;document.dispatchEvent(new MouseEvent("mousemove",{clientX:t.clientX,clientY:t.clientY}))},i.prototype.ui=function(){return{placeholder:this.placeholder,helper:this.helper,item:this.currentItem,droppable:this.isOver}},N2Classes.nUIWidgetBase.register("nUISortable"),i}),N2D("nUISortableRow",["nUISortable"],function(t,e){"use strict";function i(t,e){N2Classes.nUISortable.prototype.constructor.apply(this,arguments),this.lastPosition=null}return i.prototype=Object.create(N2Classes.nUISortable.prototype),i.prototype.constructor=i,i.prototype.getItems=function(){var e=this.element.find(this.options.items);return-1!==e.eq(0).attr("style").indexOf("order:")?(e.sort(function(e,i){var n=t(e).css("order"),s=t(i).css("order");return s>n?-1:n>s?1:0}),this.hasOrder=!0):this.hasOrder=!1,this.lastPosition=null,e},i.prototype.positionPlaceholder=function(t){switch(t[1]){case"before":this.placeholder.insertBefore(t[0]),this.hasOrder&&this.placeholder.css("order",t[0].css("order")-1);break;case"after":this.placeholder.insertAfter(t[0]),this.hasOrder&&this.placeholder.css("order",t[0].css("order")+1);break;case"over":this.placeholder.detach()}this.lastPosition=t},i.prototype.ui=function(){return{placeholder:this.placeholder,helper:this.helper,item:this.currentItem,droppable:this.isOver,lastPosition:this.lastPosition}},N2Classes.nUIWidgetBase.register("nUISortableRow"),i}),N2D("nUISpacing",["nUIMouse"],function(t,e){"use strict";function i(e,i){this.element=t(e),this.widgetName=this.widgetName||"nUISpacing",this.widgetEventPrefix="spacing",this.options=t.extend({handles:"",mode:"padding",sync:{n:"padding-top",e:"padding-right",s:"padding-bottom",w:"padding-left"},syncInv:{n:"s",e:"w",s:"n",w:"e"},side:{n:"top",e:"right",s:"bottom",w:"left"},size:{n:"height",e:"width",s:"height",w:"width"},drag:null,start:null,stop:null},this.options,i),N2Classes.nUIMouse.prototype.constructor.apply(this,arguments),this.create()}return i.prototype=Object.create(N2Classes.nUIMouse.prototype),i.prototype.constructor=i,i.prototype.create=function(){this._setupHandles(),this._mouseInit()},i.prototype._destroy=function(){this._mouseDestroy(),this.element.removeData(this.widgetName);for(var t in this.handles)this.handles[t].remove();return this},i.prototype._setupHandles=function(){var e,i,n,s,o,r=this.options;for(n="n,e,s,w".split(","),this.handles={},i=0;i<n.length;i++)e=t.trim(n[i]),s="nui-spacing-"+e,this.handles[e]=o=t("<div>").addClass("nui-spacing-handle nui-spacing-handle-"+r.mode+" nui-spacing-handle "+s).addClass("n2-unselectable").on("mousedown",t.proxy(this._mouseDown,this)).appendTo(this.element),nextend.tooltip.addElement(this.handles[e],N2Classes.StringHelper.capitalize(r.mode)+" "+r.side[e])},i.prototype._removeHandles=function(){this.element.find("> .nui-spacing-handle").remove()},i.prototype._parse_movement_n=function(t){return t.pageY-this.originalMousePosition.top},i.prototype._parse_movement_w=function(t){return t.pageX-this.originalMousePosition.left},i.prototype._parse_movement_s=function(t){return t.pageY-this.originalMousePosition.top},i.prototype._parse_movement_e=function(t){return this.originalMousePosition.left-t.pageX},i.prototype._mouseCapture=function(e){var i,n,s=!1;for(i in this.handles)n=t(this.handles[i])[0],(n===e.target||t.contains(n,e.target))&&(s=!0);return!this.options.disabled&&s},i.prototype._mouseStart=function(e){this.wasShiftPressed=!1;var i;for(var n in this.handles)if(i=this.handles[n][0],i===e.target||t.contains(i,e.target)){this.direction=n;break}return this.syncProperty=this.options.sync[this.direction],this.originalValue=parseInt(this.element.css(this.syncProperty)),this.invSyncProperty=this.options.sync[this.options.syncInv[this.direction]],this.invOriginalValue=parseInt(this.element.css(this.invSyncProperty)),this.resizing=!0,this.originalMousePosition={left:e.pageX,top:e.pageY},this.currentValue=this.originalValue,this.handles[this.direction].addClass("nui-spacing-under-spacing"),this.element.addClass("nui-spacing-resizing"),t("body").on("keydown."+this.widgetEventPrefix,t.proxy(this._keyDown,this)).on("keyup."+this.widgetEventPrefix,t.proxy(this._keyUp,this)).addClass("n2-ss-spacing-element"),this._trigger("start",e,this.ui()),!0},i.prototype._keyDown=function(t){t.shiftKey&&!this.wasShiftPressed&&(this.wasShiftPressed=!0,this.element.css(this.invSyncProperty,this.currentValue),this.handles[this.options.syncInv[this.direction]].css(this.options.size[this.options.syncInv[this.direction]],this.currentValue),this._trigger("spacing",t,this.ui()))},i.prototype._keyUp=function(t){!t.shiftKey&&this.wasShiftPressed&&(this.wasShiftPressed=!1,this.element.css(this.invSyncProperty,this.invOriginalValue),this.handles[this.options.syncInv[this.direction]].css(this.options.size[this.options.syncInv[this.direction]],""),this._trigger("spacing",t,this.ui()))},i.prototype._mouseDrag=function(t){this.movement=this["_parse_movement_"+this.direction].call(this,t),this.currentValue=nextend.roundHelper(this.originalValue+this.movement),"padding"==this.options.mode&&(this.currentValue=Math.max(0,this.currentValue)),this.element.css(this.syncProperty,this.currentValue),this.handles[this.direction].css(this.options.size[this.direction],this.currentValue),t.shiftKey?(this.wasShiftPressed=!0,this.element.css(this.invSyncProperty,this.currentValue),this.handles[this.options.syncInv[this.direction]].css(this.options.size[this.options.syncInv[this.direction]],this.currentValue)):this.wasShiftPressed&&(this.wasShiftPressed=!1,this.element.css(this.invSyncProperty,this.invOriginalValue),this.handles[this.options.syncInv[this.direction]].css(this.options.size[this.options.syncInv[this.direction]],"")),this._trigger("spacing",t,this.ui())},i.prototype._mouseStop=function(e){return this.movement=this["_parse_movement_"+this.direction].call(this,e),this.currentValue=nextend.roundHelper(this.originalValue+this.movement),"padding"==this.options.mode&&(this.currentValue=Math.max(0,this.currentValue)),this.element.css(this.syncProperty,this.currentValue),e.shiftKey?this.element.css(this.invSyncProperty,this.currentValue):this.wasShiftPressed&&this.element.css(this.invSyncProperty,this.invOriginalValue),this.resizing=!1,t("body").off("."+this.widgetEventPrefix).removeClass("n2-ss-spacing-element"),this.handles[this.direction].removeClass("nui-spacing-under-spacing"),this.element.removeClass("nui-spacing-resizing"),this._trigger("stop",e,this.ui()),nextend.preventMouseUp(),!1},i.prototype.ui=function(){var t={};return t[this.options.side[this.direction]]=this.currentValue,this.wasShiftPressed&&(t[this.options.side[this.options.syncInv[this.direction]]]=this.currentValue),{element:this.element,changed:t}},i.prototype.setOption=function(t,e){if(N2Classes.nUIWidgetBase.prototype.setOption.apply(this,arguments),"current"===t){var i=e.split(" ");this.handles.n.css("height",i[0]),this.handles.e.css("width",i[1]),this.handles.s.css("height",i[2]),this.handles.w.css("width",i[3])}},N2Classes.nUIWidgetBase.register("nUISpacing"),i}),N2D("nUIWidgetBase",function(t,e){"use strict";function i(e,i){this.document=t(e.style?e.ownerDocument:e.document||e),this.window=t(this.document[0].defaultView||this.document[0].parentWindow),this.disabled=!1,this.plugins=[]}return i.prototype.doAction=function(t){switch(t){case"option":return this.setOption.apply(this,Array.prototype.slice.call(arguments,1));case"instance":return this;case"destroy":return this._destroy()}},i.prototype.setOption=function(t,e){return this.options[t]=e,this},i.prototype._destroy=function(){return this},i.prototype._trigger=function(e,i,n){var s,o,r=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(t.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())},i.register=function(e,i){i=i||e,t.fn[e]=function(){if(arguments.length&&"string"==typeof arguments[0]){var n=this.eq(0).data(e);return n?n.doAction.apply(n,arguments):!1}var s={};return 1==arguments.length&&(s=arguments[0]),this.each(function(){var n=t(this).data(e);n||t(this).data(e,new N2Classes[i](this,s))}),this}},i.addPlugin=function(t,e,i){for(var n in i)t.plugins[n]=t.plugins[n]||[],t.plugins[n].push([e,i[n]])},i.prototype.callPlugin=function(t,e,i){var n=this.constructor.plugins[t];if(n&&(i||this.element[0].parentNode&&11!==this.element[0].parentNode.nodeType))for(var s=0;s<n.length;s++)this.options[n[s][0]]&&n[s][1].apply(this.element,e)},i}),N2D("nextend-backend");