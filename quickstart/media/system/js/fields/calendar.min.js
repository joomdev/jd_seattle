!function(s,l){"use strict";Date.convertNumbers=function(e){e=e.toString();if("[object Array]"===Object.prototype.toString.call(JoomlaCalLocale.localLangNumbers))for(var a=0;a<JoomlaCalLocale.localLangNumbers.length;a++)e=e.replace(new RegExp(a,"g"),JoomlaCalLocale.localLangNumbers[a]);return e},Date.toEnglish=function(e){e=this.toString();for(var a=[0,1,2,3,4,5,6,7,8,9],t=0;t<10;t++)e=e.replace(new RegExp(a[t],"g"),t);return e};var o=function(e){if(!e)throw new Error("Calendar setup failed:\n  No valid element found, Please check your code");if("function"!=typeof Date.parseFieldDate)throw new Error("Calendar setup failed:\n  No valid date helper, Please check your code");if(e._joomlaCalendar)throw new Error("JoomlaCalendar instance already exists for the element");if((e._joomlaCalendar=this).writable=!0,this.hidden=!0,this.params={},this.element=e,this.inputField=e.getElementsByTagName("input")[0],this.button=e.getElementsByTagName("button")[0],!this.inputField)throw new Error("Calendar setup failed:\n  No valid input found, Please check your code");this.params={debug:!1,clicked:!1,element:{style:{display:"none"}},writable:!0};var a=this,t=this.button,r={inputField:this.inputField,dateType:JoomlaCalLocale.dateType?JoomlaCalLocale.dateType:"gregorian",direction:void 0!==l.dir?l.dir:l.getElementsByTagName("html")[0].getAttribute("dir"),firstDayOfWeek:t.getAttribute("data-firstday")?parseInt(t.getAttribute("data-firstday")):0,dateFormat:"%Y-%m-%d %H:%M:%S",weekend:JoomlaCalLocale.weekend?JoomlaCalLocale.weekend:[0,6],minYear:JoomlaCalLocale.minYear?JoomlaCalLocale.minYear:1900,maxYear:JoomlaCalLocale.maxYear?JoomlaCalLocale.maxYear:2100,minYearTmp:t.getAttribute("data-min-year"),maxYearTmp:t.getAttribute("data-max-year"),weekendTmp:t.getAttribute("data-weekend"),time24:!0,showsOthers:1===parseInt(t.getAttribute("data-show-others")),showsTime:!0,weekNumbers:1===parseInt(t.getAttribute("data-week-numbers")),showsTodayBtn:!0,compressedHeader:1===parseInt(t.getAttribute("data-only-months-nav"))};for(var s in t.getAttribute("data-dayformat")&&(r.dateFormat=t.getAttribute("data-dayformat")?t.getAttribute("data-dayformat"):"%Y-%m-%d %H:%M:%S"),t.getAttribute("data-time-24")&&(r.time24=24===parseInt(t.getAttribute("data-time-24"))),t.getAttribute("data-show-time")&&(r.showsTime=1===parseInt(t.getAttribute("data-show-time"))),t.getAttribute("data-today-btn")&&(r.showsTodayBtn=1===parseInt(t.getAttribute("data-today-btn"))),r)this.params[s]=r[s];i(a.params.minYearTmp)&&(a.params.minYear=d(parseInt(a.params.minYearTmp),a.params.dateType)),i(a.params.maxYearTmp)&&(a.params.maxYear=d(parseInt(a.params.maxYearTmp),a.params.dateType)),"undefined"!==a.params.weekendTmp&&(a.params.weekend=a.params.weekendTmp.split(",").map(function(e){return parseInt(e,10)})),this._dayMouseDown=function(e){return a._handleDayMouseDown(e)},this._calKeyEvent=function(e){return a._handleCalKeyEvent(e)},this._documentClick=function(e){return a._handleDocumentClick(e)},this.checkInputs(),this.inputField.getAttribute("readonly")||(this._create(),this._bindEvents())};o.prototype.checkInputs=function(){var e=Date.parseFieldDate(this.inputField.getAttribute("data-alt-value"),this.params.dateFormat,"gregorian");""!==this.inputField.value?(this.date=e,this.inputField.value=e.print(this.params.dateFormat,this.params.dateType,!0)):this.date=new Date},o.prototype.recreate=function(){var e=this.element,a=e.querySelector(".js-calendar");a&&(e._joomlaCalendar=null,a.parentNode.removeChild(a),new o(e))},o.prototype.updateTime=function(e,a,t){var r=this,s=r.date,l=r.date.getLocalDate(r.params.dateType),o=r.date.getLocalMonth(r.params.dateType),i=r.date.getLocalFullYear(r.params.dateType),n=this.inputField.parentNode.parentNode.querySelectorAll(".time-ampm")[0];r.params.time24||(/pm/i.test(n.value)&&e<12?e=parseInt(e)+12:/am/i.test(n.value)&&12==e&&(e=0)),s.setHours(e),s.setMinutes(parseInt(a,10)),s.setSeconds(s.getSeconds()),s.setLocalFullYear(r.params.dateType,i),s.setLocalMonth(r.params.dateType,o),s.setLocalDate(r.params.dateType,l),r.dateClicked=!1,this.callHandler()},o.prototype.setDate=function(e){e.equalsTo(this.date)||(this.date=e,this.processCalendar(this.params.firstDayOfWeek,e))},o.prototype.moveCursorBy=function(e){var a=new Date(this.date);a.setDate(a.getDate()-e),this.setDate(a)},o.prototype.resetSelected=function(e){for(var a=e.options,t=a.length;t--;){var r=a[t];r.selected&&(r.selected=!1)}},o.prototype.callHandler=function(){this.inputField.setAttribute("data-alt-value",this.date.print(this.params.dateFormat,"gregorian",!1)),this.inputField.getAttribute("data-alt-value")&&"0000-00-00 00:00:00"!==this.inputField.getAttribute("data-alt-value")&&(this.inputField.value=this.date.print(this.params.dateFormat,this.params.dateType,!0),"gregorian"!==this.params.dateType&&this.inputField.setAttribute("data-local-value",this.date.print(this.params.dateFormat,this.params.dateType,!0))),this.inputField.value=this.date.print(this.params.dateFormat,this.params.dateType,!0),"function"==typeof this.inputField.onchange&&this.inputField.onchange(),this.dateClicked&&"function"==typeof this.params.onUpdate&&this.params.onUpdate(this),this.dateClicked?this.close():this.processCalendar()},o.prototype.close=function(){this.hide()},o.prototype.show=function(){if(-1!==navigator.appName.indexOf("Internet Explorer")&&(-1===navigator.appVersion.indexOf("MSIE 9")&&-1===navigator.appVersion.indexOf("MSIE 1")&&s.jQuery&&jQuery().chosen))for(var e=this.element.getElementsByTagName("select"),a=0;a<e.length;a++)jQuery(e[a]).chosen("destroy");this.checkInputs(),this.inputField.focus(),this.dropdownElement.style.display="block",this.hidden=!1,l.addEventListener("keydown",this._calKeyEvent,!0),l.addEventListener("keypress",this._calKeyEvent,!0),l.addEventListener("mousedown",this._documentClick,!0);var t=this.element.querySelector(".js-calendar");s.innerHeight<t.getBoundingClientRect().bottom+20&&(t.style.marginTop=-(t.getBoundingClientRect().height+this.inputField.getBoundingClientRect().height)+"px"),this.processCalendar()},o.prototype.hide=function(){l.removeEventListener("keydown",this._calKeyEvent,!0),l.removeEventListener("keypress",this._calKeyEvent,!0),l.removeEventListener("mousedown",this._documentClick,!0),this.dropdownElement.style.display="none",this.hidden=!0},o.prototype._handleDocumentClick=function(e){var a=e.target;if(null!==a&&!a.classList.contains("time"))for(;null!==a&&a!==this.element;a=a.parentNode);if(null===a)return l.activeElement.blur(),this.hide(),n(e)},o.prototype._handleDayMouseDown=function(e){var a=this,t=e.currentTarget,r=e.target||e.srcElement;if(!r||!r.hasAttribute("data-action")){if("TD"!==t.nodeName){var s=t.getParent("TD");"TD"===s.nodeName?t=s:(t=t.getParent("TD")).classList.contains("js-calendar")&&(t=t.getElementsByTagName("table")[0])}else if(!r.classList.contains("js-btn")&&!t.classList.contains("day")&&!t.classList.contains("title"))return;if(!t||t.disabled)return!1;if(void 0===t.navtype||300!==t.navtype){50===t.navtype&&(t._current=t.innerHTML),r!==t&&r.parentNode!==t||a.cellClick(t,e);var l=null;void 0!==t.month&&(l=t),void 0!==t.parentNode.month&&(l=t.parentNode);var o=null;if(l)o=new Date(a.date),l.month!==o.getLocalMonth(a.params.dateType)&&(o.setLocalMonth(a.params.dateType,l.month),a.setDate(o),a.dateClicked=!1,this.callHandler());else{var i=null;void 0!==t.year&&(i=r),void 0!==t.parentNode.year&&(i=r.parentNode),i&&(o=new Date(a.date),i.year!==o.getLocalFullYear(a.params.dateType)&&(o.setFullYear(a.params.dateType,i.year),a.setDate(o),a.dateClicked=!1,this.callHandler()))}}return n(e)}},o.prototype.cellClick=function(e,a){var t=this,r=!1,s=!1,l=null;if(void 0===e.navtype){t.currentDateEl&&(e.classList.add("selected"),t.currentDateEl=e.caldate,(r=t.currentDateEl===e.caldate)||(t.currentDateEl=e.caldate)),t.date.setLocalDateOnly("gregorian",e.caldate);var o=!(t.dateClicked=!e.otherMonth);t.currentDateEl&&(s=!e.disabled),o&&this.processCalendar()}else{l=new Date(t.date),t.dateClicked=!1;var i=l.getOtherFullYear(t.params.dateType),n=l.getLocalMonth(t.params.dateType);switch(e.navtype){case 400:break;case-2:t.params.compressedHeader||i>t.params.minYear&&l.setOtherFullYear(t.params.dateType,i-1);break;case-1:var d=l.getLocalDate(t.params.dateType);if(0<n)(m=l.getLocalMonthDays(t.params.dateType,n-1))<d&&l.setLocalDate(t.params.dateType,m),l.setLocalMonth(t.params.dateType,n-1);else if(i-- >t.params.minYear){l.setOtherFullYear(t.params.dateType,i),(m=l.getLocalMonthDays(t.params.dateType,11))<d&&l.setLocalDate(t.params.dateType,m),l.setLocalMonth(t.params.dateType,11)}break;case 1:d=l.getLocalDate(t.params.dateType);if(n<11)(m=l.getLocalMonthDays(t.params.dateType,n+1))<d&&l.setLocalDate(t.params.dateType,m),l.setLocalMonth(t.params.dateType,n+1);else if(i<t.params.maxYear){var m;l.setOtherFullYear(t.params.dateType,i+1),(m=l.getLocalMonthDays(t.params.dateType,0))<d&&l.setLocalDate(t.params.dateType,m),l.setLocalMonth(t.params.dateType,0)}break;case 2:t.params.compressedHeader||i<t.params.maxYear&&l.setOtherFullYear(t.params.dateType,i+1)}l.equalsTo(t.date)?0===e.navtype&&(s=r=!0):(this.setDate(l),s=!0)}s&&(t.params.showsTime&&(this.dateClicked=!1),a&&this.callHandler()),e.classList.remove("hilite"),r&&!t.params.showsTime&&(t.dateClicked=!1,a&&this.close())},o.prototype._handleCalKeyEvent=function(e){var a=e.keyCode;if(e.target!==this.inputField||13!==a&&9!==a||this.close(),"rtl"===this.params.direction&&(37===a?a=39:39===a&&(a=37)),32===a&&e.shiftKey&&(e.preventDefault(),this.cellClick(this._nav_now,e),this.close()),27===a&&this.close(),38===a&&this.moveCursorBy(7),40===a&&this.moveCursorBy(-7),37===a&&this.moveCursorBy(1),39===a&&this.moveCursorBy(-1),e.target===this.inputField&&!(48<a||a<57||186===a||189===a||190===a||32===a))return n(e)},o.prototype._create=function(){var m=this,e=this.element,a=g("table"),t=g("div");(this.table=a).className="table",a.cellSpacing=0,a.cellPadding=0,a.style.marginBottom=0,this.dropdownElement=t,e.appendChild(t),this.params.direction&&(t.style.direction=this.params.direction),t.className="js-calendar",t.style.position="absolute",t.style.boxShadow="0px 0px 70px 0px rgba(0,0,0,0.67)",t.style.minWidth=this.inputField.width,t.style.padding="0",t.style.display="none",t.style.left="auto",t.style.top="auto",t.style.zIndex=1060,t.style.borderRadius="20px",this.wrapper=g("div"),this.wrapper.className="calendar-container",t.appendChild(this.wrapper),this.wrapper.appendChild(a);var r=g("thead",a);r.className="calendar-header";var n=null,d=null,p=this,s=function(e,a,t,r,s,l,o){for(var i in s=s||{},n=g(r=r||"td",d),a&&(l=l?'class="'+l+'"':"",n.colSpan=a),s)n.style[i]=s[i];for(var i in o)n.setAttribute(i,o[i]);return 0!==t&&Math.abs(t)<=2&&(n.className+=" nav"),a&&n.addEventListener("mousedown",m._dayMouseDown,!0),n.calendar=p,0!==(n.navtype=t)&&Math.abs(t)<=2?n.innerHTML="<a "+l+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+e+"</a>":(n.innerHTML=a?"<div unselectable='on'"+l+">"+e+"</div>":e,!a&&l&&(n.className=l)),n};!1===this.params.compressedHeader&&((d=g("tr",r)).className="calendar-head-row",this._nav_py=s("&lsaquo;",1,-2,"",{"text-align":"center","font-size":"18px","line-height":"18px"},"js-btn btn-prev-year"),this.title=s('<div style="text-align:center;font-size:18px"><span></span></div>',this.params.weekNumbers?6:5,300),this.title.className="title",this._nav_ny=s(" &rsaquo;",1,2,"",{"text-align":"center","font-size":"18px","line-height":"18px"},"js-btn btn-next-year")),(d=g("tr",r)).className="calendar-head-row",this._nav_pm=s("&lsaquo;",1,-1,"",{"text-align":"center","font-size":"2em","line-height":"1em"},"js-btn btn-prev-month"),this._nav_month=s('<div style="text-align:center;font-size:1.2em"><span></span></div>',this.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),this._nav_month.className="title",this._nav_nm=s(" &rsaquo;",1,1,"",{"text-align":"center","font-size":"2em","line-height":"1em"},"js-btn btn-next-month"),(d=g("tr",r)).className=m.params.weekNumbers?"daynames wk":"daynames",this.params.weekNumbers&&((n=g("td",d)).className="day-name wn",n.innerHTML=JoomlaCalLocale.wk);for(var l=7;0<l;--l)n=g("td",d),l||(n.calendar=m);this.firstdayname=this.params.weekNumbers?d.firstChild.nextSibling:d.firstChild;var o=this.params.firstDayOfWeek,i=(n=this.firstdayname,JoomlaCalLocale.weekend);for(l=0;l<7;++l){var c=(l+o)%7;n.classList.add("day-name"),this.params.weekNumbers&&n.classList.add("day-name-week"),l&&(n.calendar=m,n.fdow=c),-1!==i.indexOf(i)&&n.classList.add("weekend"),n.innerHTML=JoomlaCalLocale.shortDays[(l+o)%7],n=n.nextSibling}var u=g("tbody",a);for(this.tbody=u,l=6;0<l;--l){d=g("tr",u),this.params.weekNumbers&&(n=g("td",d));for(var h=7;0<h;--h)(n=g("td",d)).calendar=this,n.addEventListener("mousedown",this._dayMouseDown,!0)}if(this.params.showsTime){(d=g("tr",u)).className="time",(n=g("td",d)).className="time time-title",n.colSpan=1,n.style.verticalAlign="middle",n.innerHTML=" ";var y=g("td",d);y.className="time hours-select",y.colSpan=2;var v=g("td",d);v.className="time minutes-select",v.colSpan=2,function(){function e(e,a,t,r,s){var l,o=g("select",s);o.calendar=m,o.className=e,o.setAttribute("data-chosen",!0),o.style.width="100%",o.navtype=50,o._range=[];for(var i=t;i<=r;++i){var n,d="";i===a&&(d=!0),i<10&&10<=r?(l="0"+i,n=Date.convertNumbers("0")+Date.convertNumbers(i)):(l=""+i,n=""+Date.convertNumbers(i)),o.options.add(new Option(n,l,d,d))}return o}var a=m.date.getHours(),t=m.date.getMinutes(),r=!m.params.time24,s=12<m.date.getHours();r&&s&&(a-=12);var l=e("time time-hours",a,r?1:0,r?12:23,y),o=e("time time-minutes",t,0,59,v);if((n=g("td",d)).className="time ampm-select",n.colSpan=m.params.weekNumbers?1:2,r){s=12<=Date.parseFieldDate(m.inputField.getAttribute("data-alt-value"),m.params.dateFormat,"gregorian").getHours();var i=g("select",n);i.className="time-ampm",i.style.width="100%",i.options.add(new Option(JoomlaCalLocale.PM,"pm",!!s||"",!!s||"")),i.options.add(new Option(JoomlaCalLocale.AM,"am",!s||"",!s||"")),i.addEventListener("change",function(e){m.updateTime(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)}else n.innerHTML="&#160;",n.colSpan=m.params.weekNumbers?3:2;l.addEventListener("change",function(e){m.updateTime(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1),o.addEventListener("change",function(e){m.updateTime(e.target.parentNode.parentNode.childNodes[1].childNodes[0].value,e.target.parentNode.parentNode.childNodes[2].childNodes[0].value,e.target.parentNode.parentNode.childNodes[3].childNodes[0].value)},!1)}()}((d=g("div",this.wrapper)).className="buttons-wrapper btn-group",this._nav_clear=s(JoomlaCalLocale.clear,"",100,"button","","js-btn btn btn-clear",{type:"button","data-action":"clear"}),d.querySelector('[data-action="clear"]').addEventListener("click",function(e){e.preventDefault();for(var a=m.table.querySelectorAll("td"),t=0;t<a.length;t++)if(a[t].classList.contains("selected")){a[t].classList.remove("selected");break}m.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00"),m.inputField.setAttribute("value",""),m.inputField.value=""}),this.params.showsTodayBtn)&&(this._nav_now=s(JoomlaCalLocale.today,"",0,"button","","js-btn btn btn-today",{type:"button","data-action":"today"}),this.wrapper.querySelector('[data-action="today"]').addEventListener("click",function(e){e.preventDefault(),m.date.setLocalDateOnly("gregorian",new Date),m.dateClicked=!0,m.callHandler(),m.close()}));this._nav_exit=s(JoomlaCalLocale.exit,"",999,"button","","js-btn btn btn-exit",{type:"button","data-action":"exit"}),this.wrapper.querySelector('[data-action="exit"]').addEventListener("click",function(e){e.preventDefault(),m.dateClicked||(m.inputField.value?("gregorian"!==m.params.dateType&&m.inputField.setAttribute("data-local-value",m.inputField.value),void 0===m.dateClicked?m.inputField.setAttribute("data-alt-value",Date.parseFieldDate(m.inputField.value,m.params.dateFormat,m.params.dateType).print(m.params.dateFormat,"gregorian",!1)):m.inputField.setAttribute("data-alt-value",m.date.print(m.params.dateFormat,"gregorian",!1))):m.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00"),m.date=Date.parseFieldDate(m.inputField.getAttribute("data-alt-value"),m.params.dateFormat,m.params.dateType)),m.close()}),this.processCalendar()},o.prototype.processCalendar=function(){this.table.style.visibility="hidden";var e=this.params.firstDayOfWeek,a=this.date,t=new Date,r=t.getLocalFullYear(this.params.dateType),s=t.getLocalMonth(this.params.dateType),l=t.getLocalDate(this.params.dateType),o=a.getOtherFullYear(this.params.dateType),i=a.getHours(),n=a.getMinutes(),d=(a.getSeconds(),!this.params.time24);o<this.params.minYear?(o=this.params.minYear,a.getOtherFullYear(this.params.dateType,o)):o>this.params.maxYear&&(o=this.params.maxYear,a.getOtherFullYear(this.params.dateType,o)),this.params.firstDayOfWeek=e,this.date=new Date(a);var m=a.getLocalMonth(this.params.dateType),p=a.getLocalDate(this.params.dateType);a.setLocalDate(this.params.dateType,1);var c=(a.getLocalDay(this.params.dateType)-this.params.firstDayOfWeek)%7;c<0&&(c+=7),a.setLocalDate(this.params.dateType,-c),a.setLocalDate(this.params.dateType,a.getLocalDate(this.params.dateType)+1);for(var u=this.tbody.firstChild,h=this.ar_days=new Array,y=JoomlaCalLocale.weekend,v=parseInt(a.getLocalWeekDays(this.params.dateType)),g=0;g<v;++g,u=u.nextSibling){var b=u.firstChild;this.params.weekNumbers&&(b.className="day wn",b.innerHTML=a.getLocalWeekNumber(this.params.dateType),b=b.nextSibling),u.className=this.params.weekNumbers?"daysrow wk":"daysrow";for(var f,L=!1,C=h[g]=[],w=v+1,T=0;T<w;++T,b=b.nextSibling,a.setLocalDate(this.params.dateType,f+1)){b.className="day",b.style.textAlign="center",f=a.getLocalDate(this.params.dateType);var N=a.getLocalDay(this.params.dateType);b.pos=g<<4|T,C[T]=b;var D=a.getLocalMonth(this.params.dateType)===m;if(D)L=!(b.otherMonth=!1),b.style.cursor="pointer";else{if(!this.params.showsOthers){b.className+=" emptycell",b.innerHTML="&#160;",b.disabled=!0;continue}b.className+=" disabled othermonth ",b.otherMonth=!0}b.disabled=!1,b.innerHTML=this.params.debug?f:Date.convertNumbers(f),b.disabled||(b.caldate=new Date(a),D&&f===p&&(b.className+=" selected",this.currentDateEl=b),a.getLocalFullYear(this.params.dateType)===r&&a.getLocalMonth(this.params.dateType)===s&&f===l&&(b.className+=" today"),-1!==y.indexOf(N)&&(b.className+=" weekend"))}L||this.params.showsOthers?u.style.display="":(u.style.display="none",u.className="emptyrow")}if(this.params.showsTime){12<i&&d&&(i-=12),i=i<10?"0"+i:i,n=n<10?"0"+n:n;var F=this.table.querySelector(".time-hours"),k=this.table.querySelector(".time-minutes");if(this.resetSelected(F),this.params.time24?F.value=i:F.value="00"==i?"12":i,this.resetSelected(k),k.value=n,!this.params.time24){var J=new Date(this.inputField.getAttribute("data-alt-value")),A=this.table.querySelector(".time-ampm");12<J.getHours()&&(this.resetSelected(A),A.value="pm")}}if(this.params.compressedHeader){var M=Date.convertNumbers(o.toString());this._nav_month.getElementsByTagName("span")[0].innerHTML=this.params.monthBefore?M+" - "+JoomlaCalLocale.months[m]:JoomlaCalLocale.months[m]+" - "+M}else this._nav_month.getElementsByTagName("span")[0].innerHTML=this.params.debug?m+" "+JoomlaCalLocale.months[m]:JoomlaCalLocale.months[m],this.title.getElementsByTagName("span")[0].innerHTML=this.params.debug?o+" "+Date.convertNumbers(o.toString()):Date.convertNumbers(o.toString());this.table.style.visibility="visible"},o.prototype._bindEvents=function(){var s=this;this.inputField.addEventListener("blur",function(e){var a=o.getCalObject(this)._joomlaCalendar;if("block"!==a.dropdownElement.style.display){if(a){if(a.inputField.value)if(void 0===a.params.dateClicked)if(a.inputField.setAttribute("data-local-value",a.inputField.value),"gregorian"!==a.params.dateType){var t,r=Date.parseFieldDate(a.inputField.value,a.params.dateFormat,a.params.dateType);t=Date.localCalToGregorian(r.getFullYear(),r.getMonth(),r.getDate()),r.setFullYear(t[0]),r.setMonth(t[1]),r.setDate(t[2]),a.inputField.setAttribute("data-alt-value",r.print(a.params.dateFormat,"gregorian",!1))}else a.inputField.setAttribute("data-alt-value",Date.parseFieldDate(a.inputField.value,a.params.dateFormat,a.params.dateType).print(a.params.dateFormat,"gregorian",!1));else a.inputField.setAttribute("data-alt-value",a.date.print(a.params.dateFormat,"gregorian",!1));else a.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00");a.date=Date.parseFieldDate(a.inputField.getAttribute("data-alt-value"),a.params.dateFormat,a.params.dateType)}s.close()}else e.preventDefault()},!0),this.button.addEventListener("click",function(){s.show()},!1)};var n=function(e){return e||(e=s.event),e.preventDefault(),e.stopPropagation(),!1},g=function(e,a){var t;return t=l.createElement(e),void 0!==a&&a.appendChild(t),t},i=function(e){return!isNaN(e)&&(0|(a=parseFloat(e)))===a;var a},d=function(e,a){return(new Date).getLocalFullYear(a)+e};Array.prototype.indexOf||(Array.prototype.indexOf=function(e){var a=this.length>>>0,t=Number(arguments[1])||0;for((t=t<0?Math.ceil(t):Math.floor(t))<0&&(t+=a);t<a;t++)if(t in this&&this[t]===e)return t;return-1}),o.getCalObject=function(e){if(!e)return!1;for(;e.parentNode;)if((e=e.parentNode).classList.contains("field-calendar"))return e;return!1},o.prototype.setAltValue=function(){var e=this.inputField;e.getAttribute("disabled")||(e.value=e.getAttribute("data-alt-value")?e.getAttribute("data-alt-value"):"")},o.onSubmit=function(){if(Joomla=s.Joomla||{},!Joomla.calendarProcessed){Joomla.calendarProcessed=!0;for(var e=l.querySelectorAll(".field-calendar"),a=0;a<e.length;a++){var t=e[a]._joomlaCalendar;t&&t.setAltValue()}}},o.init=function(e,a){s.JoomlaCalLocale=s.JoomlaCalLocale?JoomlaCalLocale:{},JoomlaCalLocale.today=JoomlaCalLocale.today?JoomlaCalLocale.today:"today",JoomlaCalLocale.weekend=JoomlaCalLocale.weekend?JoomlaCalLocale.weekend:[0,6],JoomlaCalLocale.localLangNumbers=JoomlaCalLocale.localLangNumbers?JoomlaCalLocale.localLangNumbers:[0,1,2,3,4,5,6,7,8,9],JoomlaCalLocale.wk=JoomlaCalLocale.wk?JoomlaCalLocale.wk:"wk",JoomlaCalLocale.AM=JoomlaCalLocale.AM?JoomlaCalLocale.AM:"AM",JoomlaCalLocale.PM=JoomlaCalLocale.PM?JoomlaCalLocale.PM:"PM",JoomlaCalLocale.am=JoomlaCalLocale.am?JoomlaCalLocale.am:"am",JoomlaCalLocale.pm=JoomlaCalLocale.pm?JoomlaCalLocale.pm:"pm",JoomlaCalLocale.dateType=JoomlaCalLocale.dateType?JoomlaCalLocale.dateType:"gregorian",JoomlaCalLocale.time=JoomlaCalLocale.time?JoomlaCalLocale.time:"time",JoomlaCalLocale.days=JoomlaCalLocale.days?JoomlaCalLocale.days:'["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"]',JoomlaCalLocale.shortDays=JoomlaCalLocale.shortDays?JoomlaCalLocale.shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],JoomlaCalLocale.months=JoomlaCalLocale.months?JoomlaCalLocale.months:["January","February","March","April","May","June","July","August","September","October","November","December"],JoomlaCalLocale.shortMonths=JoomlaCalLocale.shortMonths?JoomlaCalLocale.shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JoomlaCalLocale.minYear=JoomlaCalLocale.minYear?JoomlaCalLocale.minYear:1900,JoomlaCalLocale.maxYear=JoomlaCalLocale.maxYear?JoomlaCalLocale.maxYear:2100,JoomlaCalLocale.exit=JoomlaCalLocale.exit?JoomlaCalLocale.exit:"Cancel",JoomlaCalLocale.clear=JoomlaCalLocale.clear?JoomlaCalLocale.clear:"Clear";var t=e._joomlaCalendar;t?t.recreate():new o(e),e&&e.getElementsByTagName("input")[0]&&e.getElementsByTagName("input")[0].form&&!e.getElementsByTagName("input")[0].disabled&&e.getElementsByTagName("input")[0].form.addEventListener("submit",o.onSubmit)},s.JoomlaCalendar=o,l.addEventListener("DOMContentLoaded",function(){var t,r;for(t=l.querySelectorAll(".field-calendar"),r=0;r<t.length;r++)o.init(t[r]);s.jQuery&&jQuery(l).on("subform-row-add",function(e,a){for(t=a.querySelectorAll(".field-calendar"),r=0;r<t.length;r++)o.init(t[r])}),s.Calendar={},Calendar.setup=function(e){if(e.inputField&&l.getElementById(e.inputField)){var a=l.getElementById(e.inputField),t=a.parentNode.querySelectorAll("button")[0];for(var r in e)if(e.hasOwnProperty(r))switch(r){case"ifFormat":t&&t.setAttribute("data-dayformat",e.ifFormat);break;case"firstDay":t&&t.setAttribute("data-firstday",parseInt(e.firstDay));break;case"weekNumbers":t&&t.setAttribute("data-week-numbers","true"===e.weekNumbers||!0===e.weekNumbers?"1":"0");break;case"showOthers":t&&t.setAttribute("data-show-others","true"===e.showOthers||!0===e.showOthers?"1":"0");break;case"showsTime":t&&t.setAttribute("data-show-time","true"===e.showsTime||!0===e.showsTime?"1":"0");break;case"timeFormat":t&&t.setAttribute("data-time-24",parseInt(e.timeFormat))}o.init(a.parentNode.parentNode)}return null}})}(window,document);