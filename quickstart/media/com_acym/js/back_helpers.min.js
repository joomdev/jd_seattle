"use strict";var acym_helperHeader={setVersionButton:function(){var e=jQuery("#checkVersionButton");e.on("click",function(){var e=jQuery("#checkVersionArea");e.html('<i class="acymicon-circle-o-notch acymicon-spin"></i>');var t=ACYM_AJAX_URL+"&ctrl=update&task=checkForNewVersion";jQuery.get(t,function(t){t=acym_helper.parseJson(t),e.html(t.content),jQuery("#acym__check__version__last__check").html(t.lastcheck)})}),1===e.data("check")&&e.click()}},acym_helperBack={config_get:function(e){var t=ACYM_AJAX_URL+"&ctrl=configuration&task=getAjax&field="+e;return jQuery.ajax({type:"GET",url:t,dataType:"json"})},setDoNotRemindMe:function(){jQuery("#acym__reviews__footer__link").on("click",function(){var e=ACYM_TOGGLE_URL+"&task=setDoNotRemindMe&value="+encodeURIComponent(jQuery(this).attr("title"));jQuery.get(e,function(e){""===(e=acym_helper.parseJson(e)).error?jQuery("#acym__reviews__footer").html(e.message):console.log(e.error)})}),jQuery(".acym__do__not__remindme").on("click",function(){var e=jQuery(this).attr("title");jQuery('[data-news="'+e+'"]').remove();var t=ACYM_TOGGLE_URL+"&task=setDoNotRemindMe&value="+encodeURIComponent(e);jQuery.get(t,function(e){""!==(e=acym_helper.parseJson(e)).error?console.log(e.error):location.reload()})}),jQuery("#acym__multilingual__reminder").on("click",function(){localStorage.setItem("acyconfiguration","languages")})},setCookie:function(e,t,a){var o=new Date;o.setDate(o.getDate()+a),document.cookie=e+"="+escape(t)+(null==a?"":";expires="+o.toGMTString())}},acym_helperIntroJS={introContent:[],setIntrojs:function(e,t){t=void 0!==t&&t;var a=ACYM_TOGGLE_URL+"&task=getIntroJSConfig";jQuery.post(a,function(a){if((void 0===(a=JSON.parse(a))[e]||0==a[e]||t)&&!jQuery(".introjs-tooltip").is(":visible")){for(var o=acym_helperIntroJS.introContent,i=[],r=0;r<o.length;r++)jQuery(""+o[r].element).attr("data-intro",o.text),i.push({element:document.querySelector(""+o[r].element),intro:o[r].text,position:void 0===o[r].position?"bottom":o[r].position});var c=introJs();c.setOptions({steps:i}),c.start(),jQuery(".introjs-nextbutton").html(ACYM_JS_TXT.ACYM_NEXT),jQuery(".introjs-prevbutton").html(ACYM_JS_TXT.ACYM_BACK),jQuery(".introjs-skipbutton").html(ACYM_JS_TXT.ACYM_SKIP);var n=ACYM_TOGGLE_URL+"&task=toggleIntroJS&where="+e;jQuery.post(n,function(e){})}})}},acym_helperJoomla={setWidthJoomlaContent:function(){var e=jQuery("#acym__joomla__left-menu");if(e){var t=e.width();jQuery(window).width()<640?(t=0,e.css({display:"none"})):e.css({display:"block"}),jQuery("#acym_content, .acym_no_foundation").css({width:"calc(100% - "+t+"px)","margin-left":t+"px"}),jQuery("#system-message-container").css({"margin-left":t+15+"px"})}},setJoomlaLeftMenu:function(){var e=jQuery("#acym__joomla__left-menu"),t=jQuery("#acym__joomla__left-menu--toggle"),a=jQuery("#acym__joomla__left-menu a span"),o=jQuery("#acym__joomla__left-menu--toggle i");jQuery(".btn-subhead").hide(),"none"!=t.css("display")&&(e.hasClass("collapsed")?(a.hide(),e.css({width:"55px"}),o.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right")):(a.show(),e.css({width:"200px"}),o.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left")),acym_helperJoomla.setWidthJoomlaContent(),t.off("click").on("click",function(){e.hasClass("collapsed")?(e.removeClass("collapsed"),a.show(),e.css({width:"200px"}),o.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left"),acym_helperBack.setCookie("menuJoomla","",365)):(e.addClass("collapsed"),a.hide(),e.css({width:"55px"}),o.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right"),acym_helperBack.setCookie("menuJoomla","collapsed",365)),acym_helperJoomla.setWidthJoomlaContent()})),jQuery(".btn-navbar").off("click").on("click",function(){e.hide()}),jQuery("#acym__joomla__left-menu--show").off("click").on("click",function(){jQuery(".btn-navbar").hasClass("collapsed")||(".nav-collapse".css("height","0px").removeClass("in"),jQuery(".btn-navbar").removeClass("collapsed")),e.toggle()}),jQuery(window).on("resize",function(){acym_helperJoomla.setWidthJoomlaContent()})}},acym_helperNotification={setNotificationCenter:function(){acym_helperNotification.removeNotifications();var e=jQuery(".acym__header__notification");e.find("i").hasClass("acymicon-check-circle")&&setTimeout(function(){e.find("> i").attr("class","acymicon-bell-o"),e.find(".acym__tooltip__text").remove(),e.removeAttr("data-acym-tooltip").removeAttr("data-acym-tooltip-position").removeClass("acym__header__notification__button__success acym__header__notification__pulse")},8e3),e.off("click").on("click",function(){var t=jQuery(this),a=jQuery(".acym__header__notification__center"),o=t.offset(),i=o.left-a.width()+t.width()+"px",r=o.top+t.height()+10+"px";a.css({top:r,left:i}).addClass("acym__header__notification__center__visible");var c=ACYM_AJAX_URL+"&ctrl=configuration&task=markNotificationRead";jQuery.get(c,function(e){void 0===(e=acym_helper.parseJson(e)).error?jQuery(".acym__header__notification").removeClass("acym__header__notification__pulse acym__header__notification__button__success acym__header__notification__button__info acym__header__notification__button__warning acym__header__notification__button__error").find("> i").attr("class","acymicon-bell-o"):console.log(e.error)}),e.off("click").on("click",function(e){if(jQuery(e.target).hasClass("acym__header__notification__center__visible")||jQuery(e.target).closest(".acym__header__notification__center__visible").length>0)return!0;acym_helperNotification.removeNotificationsCenter()}),setTimeout(function(){jQuery(window).off("click").on("click",function(e){if(jQuery(e.target).hasClass("acym__header__notification__center__visible")||jQuery(e.target).closest(".acym__header__notification__center__visible").length>0)return!0;acym_helperNotification.removeNotificationsCenter()})},100)}),jQuery(".acym__message__close").off("click").on("click",function(){var e=jQuery(this),t=e.attr("data-id");if(void 0!==t&&0!=t){var a=ACYM_AJAX_URL+"&ctrl=configuration&task=markNotificationRead&id="+t;jQuery.get(a,function(t){void 0===(t=acym_helper.parseJson(t)).error?e.closest(".acym__message").remove():console.log(t.error)})}else e.closest(".acym__message").remove()})},removeNotifications:function(){jQuery(".acym__header__notification__one__delete, .acym__header__notification__toolbox__remove").off("click").on("click",function(){var e=jQuery(this).hasClass("acym__header__notification__toolbox__remove")?"all":jQuery(this).attr("data-id"),t=ACYM_AJAX_URL+"&ctrl=configuration&task=removeNotification&id="+e;jQuery.get(t,function(e){void 0===(e=acym_helper.parseJson(e)).error?(jQuery(".acym__header__notification__center").html(e.data),jQuery(".acym__header__notification").find("> i").attr("class","acymicon-bell-o"),acym_helperNotification.removeNotifications()):console.log(e.error)})})},removeNotificationsCenter:function(){jQuery(".acym__header__notification__center").removeClass("acym__header__notification__center__visible"),jQuery(window).off("click"),acym_helperNotification.setNotificationCenter()},addNotification:function(e,t,a){void 0===a&&(a=!1),a&&jQuery(".acym__message").remove(),void 0!==t&&-1!=jQuery.inArray(t,["success","warning","error"])||(t="info");var o=acym_helperNotification.addHeaderNotification(e,t);jQuery("#acym_header").after(o);var i=ACYM_AJAX_URL+"&ctrl=configuration&task=addNotification&message="+e+"&level="+t;jQuery.get(i,function(e){void 0===(e=acym_helper.parseJson(e)).error?(jQuery(".acym__header__notification").replaceWith(e.data),acym_helperNotification.setNotificationCenter()):console.log(e.error)})},addHeaderNotification:function(e,t){return'<div class="acym__message grid-x acym__message__'+t+'"><div class="cell auto"><p>'+e+'</p></div><i data-id="0" class="cell shrink acym__message__close acymicon-remove"></i></div>'}},acym_helperRadio={setRadioIconsGlobal:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery('[for="'+jQuery(this).attr("data-radio")+'"]').click()}),jQuery('input[type="radio"]').on("change",function(){var e=jQuery('input[name="'+jQuery(this).attr("name")+'"]:checked').val();jQuery('input[name="'+jQuery(this).attr("name")+'"]').each(function(){jQuery(this).val()==e?(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').show()):(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').hide())})}).change()}},acym_helperSelect2={initJsSelect2:function(){this.setSelect2(),this.setAjaxSelect2(),this.setSelect2Email(),this.setSelect2ChooseTagsGlobal(),this.setSelect2SortBy()},setSelect2:function(){jQuery(".acym__select:not([acym-data-infinite])").select2({theme:"foundation",width:"100%"}),jQuery(".acym__select[acym-data-infinite]").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),jQuery(".intext_select").select2({theme:"foundation",minimumResultsForSearch:1/0})},setSelect2SortBy:function(){jQuery("#acym__listing__ordering").select2({theme:"sortBy",minimumResultsForSearch:1/0})},setAjaxSelect2:function(){jQuery(".acym_select2_ajax").each(function(){var e=jQuery(this).attr("data-placeholder");e||(e="- - -");var t=jQuery(this).attr("data-ctrl");t||(t="dynamics");var a=jQuery(this).attr("data-task");a||(a="trigger");var o=jQuery(this).attr("acym-data-default"),i={ctrl:t,task:a},r=jQuery(this).attr("data-params");if(r){var c=JSON.parse(r);Object.assign(i,c)}var n=jQuery(this).attr("data-min");n||(n=3),jQuery(this).select2({theme:"foundation",ajax:{url:ACYM_AJAX_URL,dataType:"json",delay:250,data:function(e){return i.search=e.term,i},processResults:function(e){var t=[];return void 0===o||""!==i.search&&void 0!==i.search||t.push({id:0,text:o}),e&&jQuery.each(e,function(e,a){t.push({id:a[0],text:a[1]})}),{results:t}},cache:!0},minimumInputLength:n,width:"100%",allowClear:!0,placeholder:e});var s=jQuery(this).attr("data-selected");if(s&&s>0){var _=ACYM_AJAX_URL+"&ctrl="+t+"&task="+a+"&id="+encodeURIComponent(s),l=jQuery(this);jQuery.get(_,function(e){e=acym_helper.parseJson(e);var t=new Option(e.text,e.value,!1,!1);l.append(t)})}})},setSelect2Email:function(){var e=jQuery(".acym__multiselect__email"),t={ctrl:"campaigns",task:"searchTestReceivers"};e.select2({width:"100%",placeholder:e.attr("placeholder"),tags:!0,tokenSeparators:[" ",",",";"],createTag:function(e){var t=jQuery.trim(e.term);return acym_helper.emailValid(t)?{id:t,text:t}:null},ajax:{url:ACYM_AJAX_URL,dataType:"json",delay:250,data:function(e){return t.search=e.term,t},processResults:function(t){var a=[];return t&&jQuery.each(t,function(t,o){var i=o[0];e.length>1&&(i=o[1]),a.push({id:i,text:o[1]})}),{results:a}}},minimumInputLength:3})},setSelect2ChooseTagsGlobal:function(){var e=jQuery("#acym__tags__field"),t=e.attr("placeholder");e.select2({width:"100%",placeholder:t,tags:!0,tokenSeparators:[" "],createTag:function(e){var t=jQuery.trim(e.term);return""===t?null:{id:"acy_new_tag_"+t,text:t,newTag:!0}}})}};