/**
 * @package    AcyMailing for Joomla
 * @version    6.2.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(e){var _={text:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__authorized-content","#acym__fields__error-message-invalid","#acym__fields__default-value","#acym__fields__size"],textarea:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__rows","#acym__fields__columns"],radio:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db"],checkbox:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db"],single_dropdown:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db","#acym__fields__size"],multiple_dropdown:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__value","#acym__fields__from-db","#acym__fields__size"],date:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__format"],file:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__size"],phone:["#acym__fields__required","#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__error-message","#acym__fields__default-value","#acym__fields__size"],custom_text:["#acym__fields__editable-user-creation","#acym__fields__editable-user-modification","#acym__fields__custom-text"]};function a(){e(".acym__fields__values__listing__sortable").sortable({item:".acym__fields__value__sortable",handle:".acym__sortable__field__edit__handle",animation:150})}function i(){e(".acym__field__delete__value").off("click").on("click",function(){e(this).parent().remove()})}e(".acym__fields__choose__back-front .hollow").off("click").on("click",function(_){_.preventDefault(),e(".acym__fields__choose__back-front .hollow").removeClass("is-active"),e(this).addClass("is-active"),"backend"==e(this).attr("type")?(e(".acym__fields__back").show(),e(".acym__fields__front").hide()):(e(".acym__fields__back").hide(),e(".acym__fields__front").show())}),function(){if(e("#acym__fields__edit").length>0){var a=_[e("#fieldtype").val()];e(".acym__fields__change").hide();for(var i=0;i<a.length;i++)e(""+a[i]).show();e("#fieldtype").off("change").on("change",function(){var a=_[e(this).val()];e(".acym__fields__change").hide();for(var i=0;i<a.length;i++)e(""+a[i]).show()})}}(),e("#acym__fields__value__add-value").off("click").on("click",function(){var _='<select class="acym__fields__edit__select" name="field[value][disabled][]" class=""><option value="n">'+ACYM_JS_TXT.ACYM_NO+'</option><option value="y">'+ACYM_JS_TXT.ACYM_YES+"</option></select>";e(".acym__fields__values__listing__sortable").append('<div class="grid-x cell acym__fields__value__sortable acym__content margin-bottom-1 grid-margin-x"><div class="medium-1 cell acym_vcenter align-center acym__field__sortable__listing__handle"><div class="grabbable acym__sortable__field__edit__handle grid-x"><i class="fa fa-ellipsis-h cell acym__color__dark-gray"></i><i class="fa fa-ellipsis-h cell acym__color__dark-gray"></i></div></div><input type="text" name="field[value][value][]" class="cell medium-4" value=""><input type="text" name="field[value][title][]" class="cell medium-4" value=""><div class="cell small-2">'+_+'</div><i class="cell acymicon-close small-1 acym__color__red cursor-pointer acym__field__delete__value"></i></div>'),e(".acym__fields__edit__select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),a(),i()}),e('select[name="fieldDB[database]"]').off("change").on("change",function(){var _=AJAX_URL_ACYM+"&ctrl=fields&task=getTables&database="+e(this).val();e.post(_,function(_){var a=JSON.parse(_);e('select[name="fieldDB[table]"]').html("");for(var i=0;i<a.length;i++)e('select[name="fieldDB[table]"]').append('<option value="'+a[i]+'">'+a[i]+"</option>")})}),e('select[name="fieldDB[table]"]').off("change").on("change",function(){var _=AJAX_URL_ACYM+"&ctrl=fields&task=setColumns&table="+e(this).val()+"&database="+e('select[name="fieldDB[database]"]').val();e.post(_,function(_){var a=JSON.parse(_);e(".acym__fields__database__columns").html("");for(var i=0;i<a.length;i++){var l=a[i];"ACYM_CHOOSE_COLUMN"===a[i]?e(".acym__fields__database__columns").append('<option value="">'+ACYM_JS_TXT.ACYM_CHOOSE_COLUMN+"</option>"):e(".acym__fields__database__columns").append('<option value="'+l+'">'+l+"</option>")}})}),e("#acym__display_if_and-or").off("change").on("change",function(){var _=e(".acym__fields__display-if__list-fields option"),a='<select class="acym__fields__edit__select" name="field[option][display_field][]">';_.each(function(){a+='<option value="'+e(this).html()+'">'+e(this).html()+"</option>"}),a+="</select>",e(".acym__display_if_add").before('<input type="hidden" name="field[option][display_and_or][]" value="'+e(this).find("option:selected").val()+'"><div class="cell grid-x grid-margin-x"><h6 class="cell">'+e(this).find("option:selected").text()+'</h6><div class="cell medium-5">'+a+'</div><div class="cell medium-2"><select name="field[option][display_sign][]" class="acym__fields__edit__select"><option value="=">=</option><option value="!=">!=</option><option value=">">></option><option value="<"><</option><option value="<="><=</option><option value=">=">>=</option></select></div><input class="medium-5 cell" type="text" name="field[option][display_value][]"></div>'),e(".acym__fields__edit__select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),e(this).val("none")}),a(),i(),e(".acym__fields__edit__select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0})});