/**
 * @package    AcyMailing for Joomla
 * @version    6.2.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(_){var a,t,e,n;_("#campaign_mail_id").select2({theme:"foundation",width:"100%"}),_(".acym__stats__select").select2({theme:"foundation",width:"100%"}),_("#campaign_mail_id").on("select2:open",function(){_(".select2-search--dropdown .select2-search__field").attr("placeholder",ACYM_JS_TXT.ACYM_SEARCH_CAMPAIGN)}),_(".acym__stats__select").off("change").on("change",function(){_("#formSubmit").click()}),a=_("#chart__line__start"),t=_("#chart__line__end"),e=a.attr("data-start"),n=t.attr("data-end"),a.val(e),t.val(n),_(".acym__stats__chart__line__input__date").off("change").on("change",function(){var e,n=moment(a.val(),"DD MMM YYYY HH:mm").unix(),i=moment(t.val(),"DD MMM YYYY HH:mm").add(1,"hours").unix();e=AJAX_URL_ACYM+'&ctrl=stats&task=setDataForChartLine"&start='+n+"&end="+i+"&id="+_("#campaign_mail_id").val(),_.post(e,function(a){"error"==a?_.acym_add_notification("Please enter a start date under the end date","warning",5e3):_("#acym__stats__chart__line__canvas").html(a)})}),_(".select2-container--sortBy").css({width:"auto","min-width":"140px"}),function(){var a=_("#acym__stats_click__map__all-links__click");if(!(a.length<1)){var t=JSON.parse(a.val());_("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find("body").prepend('<link rel="stylesheet" href="'+_("#acym__stats__css__file").val()+'"></link>'),_.each(t,function(a,e){if("allClick"!==a){var n=_("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find('[href="'+a+'"]');n.css({position:"relative",overflow:"initial",display:"inline-block"}).append('<span class="acym__stats__cliked__link__percentage overviewbubble" style="background-color: rgba('+e.color+', 0.8);"><span class="acym__tooltip" style="display:flex;justify-content:center;align-items:center;"><span class="acym__tooltip__text"> <span class="acym__tooltip__title">'+_.acym_sprintf(ACYM_JS_TXT.ACYM_OF_CLICKS,'<span class="acym__color__light-blue">'+e.percentage+"%</span> ")+"</span>"+_.acym_sprintf(ACYM_JS_TXT.ACYM_CLICKS_OUT_OF,"<b>"+e.numberClick+"</b>"," <b> "+t.allClick+"</b>")+"</span>"+e.percentage+"%</span></span>")}}),_.setTooltip()}}()});