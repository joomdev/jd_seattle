jQuery(document).ready(function(e){acym_helperIntroJS.introContent=[{element:"#spam_test_zone",text:ACYM_JS_TXT.ACYM_INTRO_SAFE_CHECK,position:"right"}],acym_helperIntroJS.setIntrojs("campaigns_tests"),e("#launch_spamtest").off("click").on("click",function(){if(e(this).hasClass("acym_icon_disabled"))return!1;e(this).addClass("acym_icon_disabled"),e(".acym_icon_container").find('i:not(".acymicon-question-circle-o")').removeClass().html("").addClass("acymicon-circle-o-notch acymicon-spin"),e(".acym_check_results").hide().html(""),e("#acym_spam_test_details").addClass("is-hidden"),e("#safe_check_results").removeClass("is-hidden"),a("Content","check_words","checkContent"),a("Links","check_links","checkLinks"),e("#check_spam").find("i").hasClass("acymicon-question-circle-o")?e(".acym__campaigns__test__pro").toggle():a("SPAM","check_spam","checkSPAM")}),e("#acym_spam_test_details button").off("click").on("click",function(){e("#check_spam").click()}),e("#acym__campaign__send-test").off("click").on("click",function(){e("#acym__campaigns__send-test__spinner").show();let c=e(this);c.attr("disabled","true");let a=ACYM_AJAX_URL+"&page=acymailing_campaigns&ctrl=campaigns&task=test&id="+e('input[name="id"]').val()+"&test_note="+encodeURIComponent(jQuery("#acym__wysid__send__test__note").val())+"&test_emails="+encodeURIComponent(e(".acym__multiselect__email").val().join(","));e.post(a,function(a){c.removeAttr("disabled"),e("#acym__campaigns__send-test__spinner").hide(),a=JSON.parse(a),acym_helperNotification.addNotification(a.message,a.type)})});let c=0;function a(a,s,t){let i=e('input[name="id"]').val(),n=e("#"+s).removeClass("acym_clickable").off("click"),l=n.find(".acym_icon_container i");e.ajax({url:ACYM_AJAX_URL+"&ctrl=campaigns&task="+t+"&id="+i,success:function(s){if("SPAM"===a){let c=e.parseJSON(s);if("success"===c.type){n.next(".acym_check_results").html(ACYM_JS_TXT.ACYM_TESTS_SPAM_SENT).show();let a=0,s=setInterval(function(){a++,e.getJSON(c.message+"&format=json",function(t){!1!==t.status?(clearInterval(s),n.next(".acym_check_results").hide(),e("#acym_spam_test_details").removeClass("is-hidden"),t.mark>-2?l.removeClass().addClass("acymicon-check-circle acym_icon_green"):l.removeClass().addClass("acymicon-exclamation-circle acym_icon_red"),n.attr("data-open")||n.attr("data-open",n.attr("data-iframe")),n.addClass("acym_clickable").attr("data-iframe",c.message+"&lang="+c.lang),acym_helperModal.initModal()):a>5&&(n.next(".acym_check_results").html(t.title),n.addClass("acym_clickable").on("click",function(){e(this).next(".acym_check_results").slideToggle()}),l.removeClass().addClass("acymicon-exclamation-circle acym_icon_red"),clearInterval(s))})},1e4)}else n.next(".acym_check_results").html(c.message),n.addClass("acym_clickable").on("click",function(){e(this).next(".acym_check_results").slideToggle()}),l.removeClass().addClass("acymicon-exclamation-circle acym_icon_red")}else s?(l.removeClass().addClass("acymicon-exclamation-circle acym_icon_red"),n.addClass("acym_clickable").on("click",function(){e(this).next(".acym_check_results").slideToggle()}),n.next(".acym_check_results").html(s)):l.removeClass().addClass("acymicon-check-circle acym_icon_green");3===++c&&(c=0,e("#launch_spamtest").removeClass("acym_icon_disabled"))}})}});