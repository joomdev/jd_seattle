!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.infiniteScroll=t()}(this,function(){"use strict";var e="@@InfiniteScroll",t=function(e){return e===window?Math.max(window.pageYOffset||0,document.documentElement.scrollTop):e.scrollTop},n=document.defaultView.getComputedStyle,i=function(e){return e===window?t(window):e.getBoundingClientRect().top+t(window)},o=function(e){for(var t=e.parentNode;t;){if("HTML"===t.tagName)return!0;if(11===t.nodeType)return!1;t=t.parentNode}return!1},r=function(){if(!this.binded){this.binded=!0;var e,t,i,o,r,c,s,u,a=this,d=a.el,f=d.getAttribute("infinite-scroll-throttle-delay"),m=200;f&&(m=Number(a.vm[f]||f),(isNaN(m)||m<0)&&(m=200)),a.throttleDelay=m,a.scrollEventTarget=function(e){for(var t=e;t&&"HTML"!==t.tagName&&"BODY"!==t.tagName&&1===t.nodeType;){var i=n(t).overflowY;if("scroll"===i||"auto"===i)return t;t=t.parentNode}return window}(d),a.scrollListener=(e=l.bind(a),t=a.throttleDelay,u=function(){e.apply(c,s),o=i},function(){if(c=this,s=arguments,i=Date.now(),r&&(clearTimeout(r),r=null),o){var e=t-(i-o);e<0?u():r=setTimeout(function(){u()},e)}else u()}),a.scrollEventTarget.addEventListener("scroll",a.scrollListener),this.vm.$on("hook:beforeDestroy",function(){a.scrollEventTarget.removeEventListener("scroll",a.scrollListener)});var v=d.getAttribute("infinite-scroll-disabled"),h=!1;v&&(this.vm.$watch(v,function(e){a.disabled=e,!e&&a.immediateCheck&&l.call(a)}),h=Boolean(a.vm[v])),a.disabled=h;var g=d.getAttribute("infinite-scroll-distance"),w=0;g&&(w=Number(a.vm[g]||g),isNaN(w)&&(w=0)),a.distance=w;var b=d.getAttribute("infinite-scroll-immediate-check"),p=!0;b&&(p=Boolean(a.vm[b])),a.immediateCheck=p,p&&l.call(a);var T=d.getAttribute("infinite-scroll-listen-for-event");T&&a.vm.$on(T,function(){l.call(a)})}},l=function(e){var n=this.scrollEventTarget,o=this.el,r=this.distance;if(!0===e||!this.disabled){var l=t(n),c=l+function(e){return e===window?document.documentElement.clientHeight:e.clientHeight}(n),s=!1;if(n===o)s=n.scrollHeight-c<=r;else s=c+r>=i(o)-i(n)+o.offsetHeight+l;s&&this.expression&&this.expression()}},c={bind:function(t,n,i){t[e]={el:t,vm:i.context,expression:n.value};var l=arguments;t[e].vm.$on("hook:mounted",function(){t[e].vm.$nextTick(function(){o(t)&&r.call(t[e],l),t[e].bindTryCount=0;!function n(){t[e].bindTryCount>10||(t[e].bindTryCount++,o(t)?r.call(t[e],l):setTimeout(n,50))}()})})},unbind:function(t){t&&t[e]&&t[e].scrollEventTarget&&t[e].scrollEventTarget.removeEventListener("scroll",t[e].scrollListener)}},s=function(e){e.directive("InfiniteScroll",c)};return window.Vue&&(window.infiniteScroll=c,Vue.use(s)),c.install=s,c});