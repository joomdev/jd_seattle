/* jQuery based CSS parser
// documentation: http://youngisrael-stl.org/wordpress/2009/01/16/jquery-css-parser/
// Version: 1.5
// Copyright (c) 2011 Daniel Wachsstock
// MIT license:
// Permission is hereby granted, free of charge, to any person
// obtaining a copy of this software and associated documentation
// files (the "Software"), to deal in the Software without
// restriction, including without limitation the rights to use,
// copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the
// Software is furnished to do so, subject to the following
// conditions:

// The above copyright notice and this permission notice shall be
// included in all copies or substantial portions of the Software.

// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
// OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
// HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
// WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
// OTHER DEALINGS IN THE SOFTWARE.*/
!function($){$.fn.findandfilter=function(e){var t=this.filter(e).add(this.find(e));return t.prevObject=t.prevObject.prevObject,t},$.fn.parsecss=function(e,t){var r=function(t){$.parsecss(t,e)};return this.findandfilter("style").each(function(){r(this.innerHTML)}).end().findandfilter('link[type="text/css"]').each(function(){this.disabled||/^\w+:/.test($(this).attr("href"))||!$.parsecss.mediumApplies(this.media)||$.get(this.href,r)}).end(),t&&$.get(location.pathname+location.search,function(t){styleAttributes(t,e)},"text"),this},$.parsecss=function(e,t){var r={};e=munge(e).replace(/@(([^;`]|`[^b]|`b[^%])*(`b%)?);?/g,function(e,r){return processAtRule($.trim(r),t),""}),$.each(e.split("`b%"),function(e,t){(t=t.split("%b`")).length<2||(t[0]=restore(t[0]),r[t[0]]=$.extend(r[t[0]]||{},parsedeclarations(t[1])))}),t(r)},$.parsecss.mediumApplies=window.media&&window.media.query||function(e){if(!e)return!0;if(e in media)return media[e];var t=$('<style media="'+e+'">body {position: relative; z-index: 1;}</style>').appendTo("head");return media[e]=[1==$("body").css("z-index"),t.remove()][0]},$.parsecss.isValidSelector=function(e){var t=$("<style>"+e+"{}</style>").appendTo("head")[0];return[t.styleSheet?!/UNKNOWN/i.test(t.styleSheet.cssText):!!t.sheet.cssRules.length,$(t).remove()][0]},$.parsecss.parseArguments=function(str){if(!str)return[];for(var ret=[],mungedArguments=munge(str,!0).split(/\s+/),i=0;i<mungedArguments.length;++i){var a=restore(mungedArguments[i]);try{ret.push(eval("("+a+")"))}catch(e){ret.push(a)}}return ret},$.parsecss.jquery=function(e){for(var t in e)for(var r in e[t]){var s=/^-jquery(-(.*))?/.exec(r);if(s){var n=munge(e[t][r]).split("!");dojQuery(t,s[2],restore(n[0]),restore(n[1]))}}},$.parsecss.styleAttributes=styleAttributes;var media={},munged={};function parsedeclarations(e){var t=munged[e].replace(/^{|}$/g,"");t=munge(t);var r={};return $.each(t.split(";"),function(e,t){(t=t.split(":")).length<2||(r[restore(t[0])]=restore(t.slice(1).join(":")))}),r}var REbraces=/{[^{}]*}/,REfull=/\[[^\[\]]*\]|{[^{}]*}|\([^()]*\)|function(\s+\w+)?(\s*%b`\d+`b%){2}/,REatcomment=/\/\*@((?:[^\*]|\*[^\/])*)\*\//g,REcomment_string=/(?:\/\*(?:[^\*]|\*[^\/])*\*\/)|(\\.|"(?:[^\\\"]|\\.|\\\n)*"|'(?:[^\\\']|\\.|\\\n)*')/g,REmunged=/%\w`(\d+)`\w%/,uid=0;function munge(e,t){e=e.replace(REatcomment,"$1").replace(REcomment_string,function(e,t){if(!t)return"";var r="%s`"+ ++uid+"`s%";return munged[uid]=t.replace(/^\\/,""),r});for(var r=t?REfull:REbraces;match=r.exec(e);)replacement="%b`"+ ++uid+"`b%",munged[uid]=match[0],e=e.replace(r,replacement);return e}function restore(e){if(void 0===e)return e;for(;match=REmunged.exec(e);)e=e.replace(REmunged,munged[match[1]]);return $.trim(e)}function processAtRule(e,t){var r=e.split(/\s+/),s=r.shift();if("media"==s){var n=restore(r.pop()).slice(1,-1);$.parsecss.mediumApplies(r.join(" "))&&$.parsecss(n,t)}else if("import"==s){var i=restore(r.shift());$.parsecss.mediumApplies(r.join(" "))&&(i=i.replace(/^url\(|\)$/gi,"").replace(/^["']|["']$/g,""),$.get(i,function(e){$.parsecss(e,t)}))}}function dojQuery(selector,which,value,value2){if(/show|hide/.test(which)&&(which+="Default"),void 0!==value2&&$.livequery)var mode=2;else mode=/\bthis\b/.test(value)?1:0;if(which&&$.fn[which]){function p(e){return function(){return $.fn[which].apply($(this),$.parsecss.parseArguments.call(this,e))}}switch(mode){case 0:return $.fn[which].apply($(selector),$.parsecss.parseArguments(value));case 1:return $(selector).each(p(value));case 2:return new $.livequery(selector,document,void 0,p(value),""===value2?void 0:p(value2)).run()}}else{if(which)return;switch(mode){case 0:return eval(value);case 1:return $(selector).each(Function(value));case 2:return new $.livequery(selector,document,void 0,Function(value),""===value2?void 0:Function(value2)).run()}}}var _show={show:$.fn.show,hide:$.fn.hide};$.each(["show","hide"],function(){var e=this,t=_show[e],r=e+"Default";$.fn[e]=function(){return arguments.length>0?t.apply(this,arguments):this.each(function(){var e=$.data(this,r),s=$(this);e?($.removeData(this,r),e.call(s),s.queue(function(){s.data(r,e).dequeue()})):t.call(s)})},$.fn[r]=function(){var t=$.makeArray(arguments),s=t[0];if($.fn[s]){t.shift();var n=$.fn[s]}else $.effects&&$.effects[s]?("object"!=typeof t[1]&&t.splice(1,0,{}),n=_show[e]):n=_show[e];return this.data(r,function(){n.apply(this,t)})}});var RESGMLcomment=/<!--([^-]|-[^-])*-->/g,REnotATag=/(>)[^<]*/g,REtag=/<(\w+)([^>]*)>/g;function styleAttributes(e,t){var r,s="",n={};munge(e=e.replace(RESGMLcomment,"").replace(REnotATag,"$1")).replace(REtag,function(e,t,i){if(t=t.toLowerCase(),n[t]?++n[t]:n[t]=1,r=/\bstyle\s*=\s*(%s`\d+`s%)/i.exec(i)){var a=/\bid\s*=\s*(\S+)/i.exec(i);a=a?"#"+restore(a[1]).replace(/^['"]|['"]$/g,""):t+":eq("+(n[t]-1)+")",s+=[a,"{",restore(r[1]).replace(/^['"]|['"]$/g,""),"}"].join("")}}),$.parsecss(s,t)}}(jQuery);