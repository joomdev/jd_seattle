"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var acym_helperCampaigns={attachmentNb:1,initCampaigns:function(){acym_helperCampaigns.setChooseConfirmReplaceTemplate(),acym_helperCampaigns.initAttachmentCampaigns(),acym_helperCampaigns.setStopScheduled(),acym_helperCampaigns.setStopSending(),acym_helperCampaigns.setDeactivateAutomatic(),acym_helperCampaigns.setSummaryScroll(),jQuery("#acym__wysid").length<1&&acym_helperCampaigns.setSendSettingsButtons()},setSummaryScroll:function(){var e=jQuery("#workflow"),t=e.find("a").attr("href");void 0!==t&&(t.indexOf("summary")||t.indexOf("test"))&&jQuery(document).ready(function(){e.scrollLeft(e.outerWidth())})},setChooseConfirmReplaceTemplate:function(){var e=jQuery("#acym__campaign__choose__campaign").val();jQuery("#acym__templates__choose__create__empty").off("click").on("click",function(t){if(e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM))return t.preventDefault(),!1}),jQuery(".acym__templates__oneTpl").off("click").on("click",function(t){e&&0!=e&&!confirm(ACYM_JS_TXT.ACYM_REPLACE_CONFIRM)||(window.location.href=jQuery(this).find(".acym__templates__oneTpl__choose").val())})},setAutoOpenEditor:function(){jQuery("#acym__campaign__edit_email").length&&"0"===jQuery("#acym__campaign__recipients__form__campaign").val()&&jQuery("#acym__wysid__edit__button").click()},initAttachmentCampaigns:function(){acym_helperCampaigns.setAddAttachmentButton(),acym_helperCampaigns.setRemoveAttachment(),acym_helperCampaigns.setDeleteAttachment()},setAddAttachmentButton:function(){jQuery("#acym__campaigns__attach__add").off("click").on("click",function(){acym_helperCampaigns.attachmentNb>9||(jQuery("#acym__campaigns__attach__"+acym_helperCampaigns.attachmentNb).css("display",""),acym_helperCampaigns.attachmentNb++)})},setRemoveAttachment:function(){jQuery(".acym__campaigns__attach__remove").off("click").on("click",function(e){var t=e.currentTarget.getAttribute("data-id");jQuery("#attachments"+t+"selection").html(""),jQuery("#attachments"+t+"suppr").css("display","none"),jQuery("#attachments"+t).val("")})},setDeleteAttachment:function(){jQuery(".acym__campaigns__attach__delete").off("click").on("click",function(e){var t=jQuery(".acym__campaigns__attach__delete"),a=jQuery(this),i="",r="";t.each(function(e){jQuery(this).attr("data-id")==a.attr("data-id")&&(i=e,r=a.attr("data-id"))});var _=a.attr("data-mail");jQuery.get(ACYM_AJAX_URL+"&ctrl=campaigns&task=deleteAttach&id="+i+"&mail="+_,function(e){void 0!==(e=acym_helper.parseJson(e)).error?acym_helperNotification.addNotification(e.error,"error"):(acym_helperNotification.addNotification(e.message,"info"),jQuery("#acym__campaigns__attach__del"+r).remove())}).fail(function(e){console.log(e)})})},setSendSettingsButtons:function(){jQuery(".acym__campaign__sendsettings__buttons-type").off("click").on("click",function(){if(jQuery(this).hasClass("button-radio-disabled"))return!0;jQuery(".acym__campaign__sendsettings__buttons-type").addClass("button-radio-unselected"),jQuery(this).removeClass("button-radio-unselected"),jQuery(".acym__campaign__sendsettings__params").hide(),jQuery('[data-show="'+jQuery(this).attr("id")+'"]').show(),jQuery('[name="sending_type"]').val(jQuery(this).attr("data-sending-type")),"acym__campaign__sendsettings__scheduled"!==jQuery(this).attr("id")?jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").removeAttr("required"):jQuery("#acym__campaign__sendsettings__send-type-scheduled__date").attr("required","required")})},setStopScheduled:function(){jQuery(".acym__campaign__listing__scheduled__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopScheduledCampaignId" value="'+t+'">'),e.find('[name="task"]').val("stopScheduled"),e.submit()})},setStopSending:function(){jQuery(".acym__campaign__listing__sending__stop").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="stopSendingCampaignId" value="'+t+'">'),e.find('[name="task"]').val("stopSending"),e.submit()})},setDeactivateAutomatic:function(){jQuery(".acym__campaign__listing__automatic__deactivate").off("click").on("click",function(){var e=jQuery("#acym_form"),t=jQuery(this).attr("data-campaignid");e.append('<input type="hidden" name="id" value="'+t+'">'),e.find('[name="task"]').val("toggleActivateColumnCampaign"),e.submit()})},setSelectionCreateNewMail:function(){var e=jQuery(".acym__email__new__card:not(.acym__email__new__card__disabled)");e.off("click").on("click",function(){jQuery(this).hasClass("acym__email__new__card-selected")||(e.removeClass("acym__email__new__card-selected"),jQuery(this).addClass("acym__email__new__card-selected"),jQuery(this).hasClass("acym__email__new__card-list")&&""!==jQuery(this).find(".acym__email__new__card__select").val()||!jQuery(this).hasClass("acym__email__new__card-list")?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setSelectCreateNewMail:function(){jQuery(".acym__email__new__card__select").on("change",function(){jQuery(this).closest(".acym__email__new__card").hasClass("acym__email__new__card-selected")&&(""!==jQuery(this).val()?jQuery("#acym__email__new__button-create").removeAttr("disabled"):jQuery("#acym__email__new__button-create").attr("disabled","true"))})},setButtonCreateNewEmail:function(){jQuery("#acym__email__new__button-create").off("click").on("click",function(){var e=jQuery(".acym__email__new__card-selected"),t=e.attr("acym-data-link");if(-1!==t.indexOf("{listid}")){var a=e.find(".acym__email__new__card__select").val();t=t.replace("{listid}",a)}window.location.href=t})},setSelectSelect2Theme:function(){jQuery(".acym__email__new__card__select").select2({theme:"sortBy",minimumResultsForSearch:1/0})},setClickFlagsSummary:function(){jQuery(".acym__campaign__summary__preview__languages-one").not(".acym__campaign__summary__preview__languages-one__empty").off("click").on("click",function(){if(!jQuery(this).hasClass("language__selected")){jQuery(".language__selected").removeClass("language__selected"),jQuery(this).addClass("language__selected");var e="#acym__summary-body-"+jQuery(this).attr("data-acym-lang"),t="#acym__summary-subject-"+jQuery(this).attr("data-acym-lang"),a="#acym__summary-preview-"+jQuery(this).attr("data-acym-lang");jQuery(".acym__hidden__mail__content").val(jQuery(e).val()),acym_helperPreview.loadIframe("acym__wysid__preview__iframe__acym__wysid__email__preview",!1),jQuery(".acym__campaign__summary__email__information-subject").html(jQuery(t).val()),jQuery(".acym__campaign__summary__generated__mail__one__preview").html(jQuery(a).val())}})}},acym_helperDatePicker={setDatePickerGlobal:function(){jQuery(".acy_date_picker").off("click").on("click",function(){var e=jQuery(this),t=void 0===e.attr("data-acym-translate")||"0"!==e.attr("data-acym-translate"),a=e.val()?moment(e.val(),"YYYY-MM-DD HH:mm"):moment();new MaterialDatetimePicker({default:a}).on("submit",function(a){e.val(moment(a,"MM-DD-YYYY").format(t?"DD MMM YYYY HH:mm":"YYYY-MM-DD HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},setRelativeTime:function(e){var t=e.closest(".reveal"),a=parseInt(t.find(".relativenumber").val())*parseInt(t.find(".relativetype").val());jQuery('[data-rs="'+t.attr("id")+'"]').val("[time]"+(a>0?t.find(".relativewhen").val()+a:"")),jQuery('[data-open="'+t.attr("id")+'"]').val("[time]"+(a>0?t.find(".relativewhen").val()+a:"")).trigger("change")},setSpecificTime:function(e){var t=e.closest(".reveal"),a=t.find('[name^="specific_"]');jQuery('[data-rs="'+t.attr("id")+'"]').val(moment(a.val()).unix()),jQuery('[data-open="'+t.attr("id")+'"]').val(a.val()).trigger("change")},setRSDateChoice:function(){jQuery(".acym__button__clear__time").on("click",function(){var e=jQuery(this).closest(".reveal").attr("id");jQuery('[data-rs="'+e+'"]').val(""),jQuery('[data-open="'+e+'"]').val("").trigger("change")}),jQuery(".acym__button__set__time").on("click",function(){"relative"===jQuery(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?acym_helperDatePicker.setRelativeTime(jQuery(this)):acym_helperDatePicker.setSpecificTime(jQuery(this))}),jQuery(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(".date_rs_selection_popup");t.find(".date_rs_selection").removeClass("is-active"),jQuery(this).addClass("is-active"),t.find(".date_rs_selection_choice").hide(),t.find(".date_rs_selection_"+jQuery(this).attr("data-type")).show()}),acym_helperDatePicker.resetThePopup()},resetThePopup:function(){jQuery(".rs_date_field").on("click",function(){var e=jQuery(this),t=jQuery('[data-rs="'.concat(e.attr("data-open"),'"]')),a=jQuery("#".concat(e.attr("data-open")));if(void 0===t.val()||""===t.val()||"[time]"===t.val())return a.find(".relativewhen").val("-").trigger("change"),a.find(".relativetype").val("60").trigger("change"),a.find(".relativenumber").val("0").trigger("change"),!0;if(-1!==t.val().indexOf("[time]")){a.find('[data-type="relative"]').click();var i,r,_=-1!==t.val().indexOf("-")?"-":"+",n=t.val().split(_),o=parseInt(n[1]);a.find(".relativewhen").val(_).trigger("change"),i=o/(r=o>=86400&&o%86400==0?86400:o>=3600&&o%3600==0?3600:60),a.find(".relativetype").val(r).trigger("change"),a.find(".relativenumber").val(i).trigger("change")}else a.find('[data-type="specific"]').click(),a.find(".acy_date_picker").val(moment.unix(t.val()).format("YYYY-MM-DD HH:mm"))})}},acym_helperDebugger={initDebugger:function(){window.addEventListener("keydown",function(e){e.key},!1)}},acym_helperDynamic={initPopup:function(){setTimeout(function(){jQuery("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body").css("padding",0).css("margin",0).css("height","100%"),jQuery("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body #acym_wrapper").css("min-height","100%")},1e3)},setModalDynamics:function(){jQuery(".acym__wysid__modal__dynamic-text--close").off("click").on("click",function(){jQuery("#acym__wysid__modal__dynamic-text").hide()}),jQuery("#dtext_subject_button").off("click").on("click",function(e){e.preventDefault(),jQuery("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),jQuery("#acym__wysid__modal__dynamic-text").show()})}},acym_helperEditorHtml={initEditorHtml:function(){acym_helperEditorHtml.setEditorField()},setEditorField:function(){jQuery("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}},acym_helperEditorWysid={};jQuery(document).ready(function(e){acym_helperEditorWysid={initEditor:function(){if(jQuery("#acym__wysid").length<1)return!1;acym_helperEditorWysid.mailsSettings=""===acym_helperEditorWysid.saveSettings?{}:JSON.parse(acym_helperEditorWysid.saveSettings),jQuery("#editor_thumbnail").val(""),jQuery("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+acym_helperEditorWysid.parseTextToCss(acym_helperEditorWysid.savedStylesheet)+"</style>"),acym_editorWysidVersioning.checkForUnsavedVersion(),jQuery("#acym__walkthrough__email").length>0&&(jQuery("#acym__wysid").parent().insertAfter("#acym__walkthrough__email"),jQuery("#acym__wysid__modal__dynamic-text").insertAfter("#acym__walkthrough__email")),acym_editorWysidDragDrop.setFixJquerySortableWYSID(),acym_editorWysidDragDrop.setNewColumnElementDraggableWYSID(),acym_editorWysidDragDrop.setNewRowElementDraggableWYSID(),acym_editorWysidFormAction.setEditButtonWYSID(),acym_editorWysidFormAction.setCancelButtonWYSID(),acym_editorWysidFormAction.setSaveButtonWYSID(),acym_editorWysidFormAction.setSaveAsTmplButtonWYSID(),acym_editorWysidModal.setModalWindowWYSID(),acym_editorWysidToolbar.setRightToolbarWYSID(),acym_editorWysidModal.setDynamicsModal(),acym_editorWysidFontStyle.setApplyStylesheetSettings(),acym_editorWysidFontStyle.setOpenStylesheet(),acym_editorWysidFontStyle.setCancelStylesheet(),acym_editorWysidVersioning.setVersionControlCtrlZ(),acym_helperEditorWysid.setAlertTimeoutSession(),acym_editorWysidFontStyle.setSocialIconImport(),acym_editorWysidTest.toggleSendTest(),acym_editorWysidTest.sendTestAjax(),acym_helperEditorWysid.preventSubmitEditor(),jQuery('[id^="mce_"]').removeAttr("id"),acym_editorWysidMultilingual.setLanguageSelection()},setColumnRefreshUiWYSID:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];acym_editorWysidRowSelector.setRowSelector(),acym_editorWysidImage.setImageWidthHeightOnInsert(),acym_editorWysidDragDrop.setRowElementSortableWYSID(),acym_editorWysidImage.setDoubleClickImage(),acym_editorWysidDragDrop.setColumnElementDraggableWYSID(),acym_editorWysidDragDrop.setColumnSortableWYSID(),acym_editorWysidColorPicker.setGeneralColorPickerWYSID(),acym_editorWysidContextModal.setButtonContextModalWYSID(),acym_editorWysidContextModal.setSpaceContextModalWYSID(),acym_editorWysidContextModal.setFollowContextModalWYSID(),acym_editorWysidContextModal.setSeparatorContextModalWYSID(),acym_editorWysidColorPicker.setSettingsColorPickerWYSID(acym_editorWysidFontStyle.getSettingsOfHtmlElementWYSID(jQuery("#acym__wysid__right__toolbar__settings__font--select").val(),"color")),acym_editorWysidFontStyle.setSettingsWYSID(),acym_editorWysidFontStyle.setSettingsControlsWYSID(),acym_editorWysidFontStyle.setAllHtmlElementStyleWYSID(),acym_helperEditorWysid.checkForEmptyTbodyWYSID(),acym_helperEditorWysid.setSizeEditorWYSID(),acym_helperEditorWysid.setSelectOneTemplate(),acym_editorWysidDynammic.setDynamicsActions(),acym_editorWysidDynammic.setTagPWordBreak(),acym_editorWysidDynammic.setTagPreInserted(),acym_helperEditorWysid.setIntroForDynamics(),acym_helperEditorWysid.removeBlankCharacters(),e&&acym_editorWysidTinymce.addTinyMceWYSID(),acym_editorWysidTinymce.checkForEmptyText(),jQuery(".columns, .acym__wysid__column").css("height","auto"),jQuery(".acym__wysid__column__element__button").css("overflow","unset")},checkForEmptyTbodyWYSID:function(){var e=jQuery(".acym__wysid__row");if(1===e.length){var t=e.find(".acym__wysid__column");if(1===t.length&&!t.find("tbody").children().length&&!jQuery("#acym__wysid__default").length){t.addClass("acym__wysid__column__first");var a='<div id="acym__wysid__default">';a+='<div id="acym__wysid__default__start" class="cell grid-x acym_vcenter">',a+='<h1 class="cell">'+ACYM_JS_TXT.ACYM_TEMPLATE_EMPTY+"</h1>",a+='<p class="cell">'+ACYM_JS_TXT.ACYM_DRAG_BLOCK_AND_DROP_HERE+"</p>",a+="</div>",a+='<div id="acym__wysid__default__dragging" style="display: none" class="cell grid-x acym_vcenter">',a+='<h1 class="cell text-center">'+ACYM_JS_TXT.ACYM_WELL_DONE_DROP_HERE+"</h1>",a+="</div>",a+="</div>",t.before(a);var i=jQuery("#acym__wysid__default__start");i.closest("#acym__wysid__default").attr("height","auto").closest(".columns").height(i.height()).find("table").height(i.height()).find("tbody").height(i.height())}}e.each(function(){0==jQuery(this).children().length?(jQuery(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),acym_editorWysidNewRow.addRow1WYSID(jQuery("#acym__wysid__row__temp_div")),acym_editorWysidRowSelector.setRowSelector(),acym_helperEditorWysid.checkForEmptyTbodyWYSID()):jQuery(this).css({"min-height":"0",display:"table-cell"})}),jQuery(".acym__wysid__column tbody").each(function(){0==jQuery(this).children().length?jQuery(this).css({"min-height":"75px",display:"block"}).closest("table").css("min-height","75px").css("display","block"):jQuery(this).css({"min-height":"0px",display:"table-row-group"}).closest("table").css("min-height","0").css("display","table")})},removeBlankCharacters:function(){var e=jQuery(".acym__wysid__link__image");jQuery.each(e,function(){jQuery(this).html(jQuery(this).html().replace(/\uFEFF/g,""))})},setIntroForDynamics:function(){ACYM_IS_ADMIN&&jQuery(".acym__wysid__tinymce--text").on("click",function(){setTimeout(function(){acym_helperIntroJS.introContent=[{element:".mce-widget .mce-i-codesample",text:ACYM_JS_TXT.ACYM_INTRO_ADD_DTEXT,position:"right"}],acym_helperIntroJS.setIntrojs("mail_editor_dtext")},200)})},setSizeEditorWYSID:function(){jQuery(window).off("resize").on("resize",function(){acym_editorWysidTinymce.addTinyMceWYSID(),acym_helperEditorWysid.setSizeEditorWYSID()});var e=0;e="wordpress"==CMS_ACYM?jQuery("#wpadminbar").innerHeight():jQuery("nav.navbar").innerHeight()+jQuery("#status").innerHeight();var t=jQuery(window).width()>639?56:0,a=jQuery("#acym__wysid__top-toolbar").innerHeight();jQuery("#acym__wysid").css("min-height",jQuery(window).height()-(t+e)),jQuery("#acym__wysid__template").css({"max-height":jQuery(window).height()-(t+e+a+64),"min-height":jQuery(window).height()-(t+e+a+64)}),jQuery(".acym__wysid__right-toolbar__content").css("max-height",jQuery(window).height()-(t+e+48))},setSelectOneTemplate:function(){jQuery(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){jQuery(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).find("a").attr("href"),a=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getMailContent&from="+jQuery(this).attr("id");jQuery.post(a,function(e){return"error"==e?(alert(ACYM_JS_TXT.ACYM_ERROR),!1):(window.location.href=t,!1)})})})},parseTextToCss:function(e){var t="";return jQuery.parsecss(e,function(e){jQuery("#acym__wysid__custom__style").remove();var a=e;for(var i in a){var r=a[i],_=-1!==i.indexOf("#acym__wysid__template")?"":"#acym__wysid__template .body ";for(var n in t+=_+i+"{",r)t+=n+":"+r[n]+";";t+="} "}}),t},preventSubmitEditor:function(){jQuery("#acym_wrapper").keydown(function(e){if(13==e.keyCode&&"TEXTAREA"!=e.target.nodeName)return e.preventDefault(),!1})},setAlertTimeoutSession:function(){var e=jQuery("#acym__wysid__session--lifetime").val();setTimeout(function(){acym_editorWysidNotifications.addEditorNotification({message:ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END,level:"warning"})},1e3*(e-60))},_selectedRows:[],$focusElement:"",saveSettings:jQuery(".acym__wysid__hidden__save__settings").val(),mailsSettings:{},insertDTextInSubject:!0,stylesheetTemp:"",savedStylesheet:jQuery(".acym__wysid__hidden__save__stylesheet").val(),clicking:!1,$resizingElement:"",versionControl:0,timeClickImage:0,dynamicPreviewIdentifier:0,typingTimer:"",typingTimerGiphy:"",offsetGiphy:0,queryGiphy:"hello",defaultMailsSettings:{"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#000000"},a:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#0000F1"},li:{"font-family":"Helvetica","font-size":"12px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"}},socialMedia:{facebook:{src:MEDIA_URL_ACYM+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:MEDIA_URL_ACYM+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:MEDIA_URL_ACYM+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:MEDIA_URL_ACYM+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:MEDIA_URL_ACYM+"/images/logo/instagram.png"},vimeo:{src:MEDIA_URL_ACYM+"/images/logo/vimeo.png"},wordpress:{src:MEDIA_URL_ACYM+"/images/logo/wordpress.png"},youtube:{src:MEDIA_URL_ACYM+"/images/logo/youtube.png"}}}});var acym_helperErrorMessage={initErrorMessage:function(){var e=[],t=!1;jQuery(document).on("invalid.zf.abide",function(t,a){if(!a.is(":radio")||void 0!==a.attr("required")){jQuery("#formSubmit")[0].disabled=!1;var i=acym_helperErrorMessage.getErrorMessage(a);a.after('<div class="acym__input-error"><i class="acymicon-exclamation-circle"></i>'+i+"</div>");var r=jQuery(".acym__input-error");setTimeout(function(){r.remove()},5e3),e=[]}}).on("valid.zf.abide",function(t,a){"email"===a.attr("type")&&""!==a.val()&&(e[0]=void 0===e[0]?0:e[0],e[0]=acym_helper.emailValid(a.val())&&""!==a.val()?0:e[0]+1)}).on("submit",function(a){var i=jQuery("#formSubmit")[0];if(void 0===i)return!0;e[3]=void 0===e[3]?0:e[3];var r=jQuery("#acym__users__export"),_=r.find("#acym__modal__lists-selected"),n=jQuery('input[name="export_users-to-export"]:checked');r.length>0&&"list"===n.val()&&"[]"===_.val()?(e[3]++,acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error")):r.length>0&&"list"===n.val()&&"[]"!==_.val()&&(e[3]=0),e.length>0&&jQuery.each(e,function(e,a){a>0&&(t=!0)}),t?(i.disabled=!1,a.preventDefault(),t=!1):(i.disabled=!0,t=!1)})},getErrorMessage:function(e){var t=e.attr("type"),a=e.attr("pattern"),i=[];return void 0!==e.attr("required")&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"===t?i.push(ACYM_JS_TXT.email):"text"===t&&(void 0!==a&&void 0!==ACYM_JS_TXT[a]?i.push(ACYM_JS_TXT[a]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}},acym_helperFile={initFile:function(){acym_helperFile.setAttachment(),acym_helperFile.setDisplayFileTree(),acym_helperFile.setChangeFolder()},setAttachment:function(){jQuery(".acym__file__select__add").off("click").on("click",function(e){var t=jQuery("#acym__file__select__mapid").val(),a=e.currentTarget.getAttribute("mapdata"),i=jQuery("#currentPath").val();jQuery("#"+t,window.parent.document).val(i+"/"+a),jQuery("#"+t+"suppr",window.parent.document).css("display",""),a.length>30&&(a=a.substr(0,12)+"..."+a.substr(a.length-12)),jQuery("#"+t+"selection",window.parent.document).html(a),jQuery("#acym__campaign__email__"+t,window.parent.document).closest(".reveal-overlay").click()})},setDisplayFileTree:function(){jQuery("#displaytree").on("click",function(){var e=jQuery("#treefile");"none"===e.css("display")?e.css("display","block"):e.css("display","none")})},setChangeFolder:function(){jQuery(".tree-child-item").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.getAttribute("data-path"),a=window.location.href,i=a.substring(a.lastIndexOf("&")+1);"selected_folder"===(i=i.split("="))?a=a.replace(i,"selected_folder="+t):a+="&currentFolder="+t,window.location.href=a})}},acym_helper={ctrlMails:ACYM_IS_ADMIN?"mails":"frontmails",ctrlDynamics:ACYM_IS_ADMIN?"dynamics":"frontdynamics",ctrlLists:ACYM_IS_ADMIN?"lists":"frontlists",ctrlUsers:ACYM_IS_ADMIN?"users":"frontusers",ctrlCampaigns:ACYM_IS_ADMIN?"campaigns":"frontcampaigns",emailValid:function(e){return null!==e.match(ACYM_REGEX_EMAIL)},escape:function(e){return e=e.replace(/"/g,"&quot;")},parseJson:function(e,t){try{var a=e.indexOf("{"),i=e.indexOf("[");if(!isNaN(a)&&a>0&&!isNaN(i)&&i>0&&(e=e.substring(a)),void 0!==e||""!==e)return JSON.parse(e)}catch(e){console.log(e.stack)}return t},sprintf:function(){var e=Object.values(arguments),t=e.splice(0,1)[0];return 1===e.length?t=t.replace("%s",e[0]):jQuery.each(e,function(e,a){t=t.replace("%"+(e+1)+"$s",a)}),t},setSubmitButtonGlobal:function setSubmitButtonGlobal(){jQuery(".acy_button_submit").off("click").on("click",function(e){if(void 0!==jQuery(this).attr("data-force-submit")&&jQuery("[required]").removeAttr("required"),jQuery(this).hasClass("disabled-button"))return!1;e.preventDefault();var condition=jQuery(this).attr("data-condition");if(condition&&"function"==typeof jQuery[condition]&&!jQuery[condition]())return!1;var confirmationMessage=jQuery(this).attr("data-confirmation-message");if("undefined"!==_typeof(confirmationMessage)&&!acym_helper.confirm(ACYM_JS_TXT[confirmationMessage]))return!1;if(jQuery(this).attr("acym-data-before")){var result=eval(jQuery(this).attr("acym-data-before"));if(!1===result)return!1}var $form=jQuery("#acym_form"),task=jQuery(this).attr("data-task"),controller=jQuery(this).attr("data-ctrl");void 0!==controller&&$form.find("[name=ctrl]").val(controller),$form.find('[name="task"]').val(task);var step=jQuery(this).attr("data-step");null!=step&&$form.find('[name="nextstep"]').val(step);var and=jQuery(this).attr("data-and");null!=and&&$form.append('<input type="hidden" value="'+and+'" name="and_action">');var $buttonSubmit=$form.find("#formSubmit");if(null==$buttonSubmit[0]){var evt=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(evt)}else $buttonSubmit.click()})},setDeleteOptionsGlobal:function(){jQuery(".acym__listing__block__delete__trash").off("click").on("click",function(e){e.preventDefault();var t=jQuery(this).closest(" .acym__listing__block__delete");t.css("width","auto"),t.find("i").css("width","0"),t.animate({maxWidth:t.parent().innerWidth()},"fast",function(){jQuery(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).closest(".acym__listing__block__delete"))})}),jQuery(".acym__listing__block").off("mouseleave").on("mouseleave",function(){acym_helper.setHideDeleteOptionsGlobal(jQuery(this).find(".acym__listing__block__delete"))})})},setHideDeleteOptionsGlobal:function(e){jQuery(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})},confirm:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return confirm(e)}),setMessageClose:function(){jQuery(".acym_message i.acymicon-remove").off("click").on("click",function(){jQuery(this).parent().remove()})},preventEnter:function(){jQuery("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(e){if(13===e.keyCode&&!jQuery('[name$="_pagination_page"], [name="pagination_page_ajax"]').is(":visible"))return e.preventDefault(),!1})},getIntValueWithoutPixel:function(e){return void 0===e||""===e?0:parseInt(e.replace(/[^-\d\.]/g,""))},empty:function(e){return null===e||(void 0===e||(void 0===e||(""===e||(0===e.length||(0===e||("0"===e||!1===e))))))},alert:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return alert(e)})},acym_helperImport={initImport:function(){acym_helperImport.setVerificationGenericImport(),acym_helperImport.setImportCMSLists(),acym_helperImport.setImportFromFileEvent(),acym_helperImport.setImportSubmit(),acym_helperImport.setChangeCharset(),acym_helperImport.setChangeTableName(),acym_helperImport.setCreateListFromImportPage()},setImportCMSLists:function(){var e=jQuery("#acym__users__import__from_database").is(":visible")?jQuery("#submit_import_database"):jQuery("#submit_import_cms");jQuery(".acym__users__import__button").off("click").on("click",function(){jQuery("#acym__import__new-list").attr("value",jQuery("#modal__pagination__create__list").val()),e.click()}),jQuery("#acym__users__import__skip__button").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').attr("value",""),e.click()})},setVerificationGenericImport:function(){var e=jQuery("#formSubmit");jQuery(".acym__users__import__generic__import__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&e.click()}),jQuery("#acym__users__generic__import__skip__button").off("click").on("click",function(){acym_helperImport.verifyGenericImport()&&(jQuery('[name="acym__entity_select__selected"]').attr("value",""),e.click())})},verifyGenericImport:function(){var e=jQuery("#modal__pagination__create__list").val();""!==e&&jQuery("#acym__import__new-list").attr("value",e),"no-list"===jQuery(this).attr("id")&&(jQuery("#acym__modal__lists-selected").attr("value",""),jQuery("#acym__import__new-list").attr("value",""));var t=!0,a="",i="",r=!1,_="",n=[],o=jQuery("#acym__users__import__from_file__ignore__checkbox").is(":checked"),c=jQuery(".fieldAssignment").length;isNaN(c)&&(c=1);for(var l=0;l<c;l++){var s=jQuery("#fieldAssignment"+l);0==(i=s.val())&&(o?(s.val(1),i=1):(acym_helperImport.setColorUnassignedField(s),t=!1,a+="\n"+acym_helper.sprintf(ACYM_JS_TXT.ACYM_ASSIGN_COLUMN_TO_FIELD,l+1))),"email"==i&&(r=!0),1!=i&&-1!==n.indexOf(i)?(t=!1,a+="\n"+acym_helper.sprintf(ACYM_JS_TXT.ACYM_DUPLICATE_X_FOR_X,i,l+1)):n.push(i),_+=","+i}return r||(t=!1,a+="\n"+ACYM_JS_TXT.ACYM_ASSIGN_EMAIL_COLUMN),!1===t?(alert(ACYM_JS_TXT.ACYM_FILL_ALL_INFORMATION+"\n"+a),!1):(","===_.substr(0,1)&&(_=_.substring(1)),jQuery("#import_columns").val(_),!0)},setColorUnassignedField:function(e){0==e.val()?e.addClass("fieldAssignmentError"):e.removeClass("fieldAssignmentError")},setImportFromFileEvent:function(){var e=jQuery("#acym__users__import__from_file__import__input");e.val(null),e.off("change").on("change",function(){var t=jQuery("#acym_form");this.files.length>0&&"csv"===this.files[0].name.substr(this.files[0].name.length-3).toLowerCase()?(jQuery(".acym__users__import__from_file__file-name").html(this.files[0].name),jQuery(".acym__users__import__from_file__file").show(),jQuery(".acym__users__import__from_file__choose").hide(),jQuery(".acym__users__import__from_file__button-valid").removeAttr("disabled"),jQuery(".acym__users__import__from_file__file__close").off("click").on("click",function(){jQuery(".acym__users__import__from_file__file-name").html(""),jQuery(".acym__users__import__from_file__button-valid").prop("disabled",!0),jQuery(".acym__users__import__from_file__file").hide(),jQuery(".acym__users__import__from_file__choose").show(),e.val(null)}),jQuery(".acym__users__import__from_file__button-valid").off("click").on("click",function(){t.find('[name="import_from"]').val("file"),t.submit()})):acym_helperNotification.addNotification(ACYM_JS_TXT.ACYM_COULD_NOT_UPLOAD_CSV_FILE,"error")})},setImportSubmit:function(){jQuery(".acym__import__submit").on("click",function(){var e=jQuery(this).attr("data-from"),t=jQuery("#acym_form");t.find('[name="import_from"]').val(e),t.find("#formSubmit").click()})},setChangeCharset:function(){jQuery("#acyencoding").off("change").on("change",function(){var e=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlUsers+"&task=ajaxEncoding&encoding="+jQuery(this).val()+"&filename="+jQuery(this).attr("data-filename"),t="",a=jQuery(".fieldAssignment").length;isNaN(a)&&(a=1);for(var i=0;i<a;i++)t+="&fieldAssignment"+i+"="+jQuery("#fieldAssignment"+i).val();e+=t,jQuery.post(e,function(e){jQuery("#acym__users__import__generic__matchdata").html(e)})})},setChangeTableName:function(){var e="";jQuery("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){e=jQuery(this).val(),jQuery("#select2-acym__users__import__from_database__field--tablename-container").html(e);var t=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlUsers+"&task=getColumnsFromTable&tablename="+e;jQuery.post(t,function(e){jQuery(".acym__users__import__from_database__fields").html(e)})})},setCreateListFromImportPage:function(){var e=jQuery("#acym__users__import__create-list__button"),t=jQuery("#acym__users__generic__import__create-list__button");e.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!1)}),t.off("click").on("click",function(){jQuery(this).html(ACYM_JS_TXT.ACYM_SAVE),acym_helperImport.setActionListenerButtonCreateList(!0)})},setActionListenerButtonCreateList:function(e){var t=jQuery("#acym__users__import__create-list"),a=jQuery("#acym__users__import__create-list__field"),i=jQuery("#acym__user__import__add-subscription__modal");if(t.is(":visible")){if(""===a.val())return;jQuery("#acym__users__import__create-list__loading-logo").show();var r=jQuery('[name="acym__entity_select__selected"]').val(),_=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlLists+"&task=ajaxCreateNewList&list_name="+encodeURIComponent(a.val())+"&generic="+(e?"1":"0")+"&selected="+r;jQuery.post(_,function(e){i.html(e),i.children().show(),i.children().append('<button class="close-button" data-close aria-label="Close reveal" type="button"><span aria-hidden="true">&times;</span></button>'),t.hide(),jQuery(window).trigger("refreshEntitySelect"),jQuery("#acym__users__import__create-list__loading-logo").hide(),acym_helperImport.setCreateListFromImportPage()})}else t.show(),a.focus();a.keydown(function(e){if(13===e.keyCode)return e.preventDefault(),!1})}},acym_helperInput={setInputFile:function(){jQuery(".acym__button__file").off("click").on("click",function(){var e=jQuery(this),t=e.prev();t.click(),t.off("change").on("change",function(){e.next().html(jQuery(this).val().split("\\").pop())})})}},acym_helperListing={initJsListing:function(){acym_helperListing.setCheckAll(),acym_helperListing.setOrdering(),acym_helperListing.setSelectActions(),acym_helperListing.setCheckboxesActionsListings(),acym_helperToolbar.initToolbar()},setSortableListing:function(){jQuery(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,t){var a=jQuery(".acym__sortable__listing .acym__listing__row"),i=jQuery(".acym__sortable__listing").attr("data-sort-ctrl"),r=[];a.each(function(e){r.push(jQuery(this).attr("data-id-element"))}),r=JSON.stringify(r);var _=ACYM_AJAX_URL+"&ctrl="+i+"&task=setOrdering&order="+r;jQuery.post(_,function(e){"error"==e&&console.log("Error can't order these elements")})}})},setCheckAll:function(){jQuery("#checkbox_all").off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]');jQuery(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")})},setOrdering:function(){jQuery("#acym__listing__ordering").off("change").on("change",function(){var e=jQuery(this).closest("#acym_form");e.find('[name="task"]').val("listing"),e.submit()}),jQuery(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=jQuery("#acym__listing__ordering__sort-order--input"),t=jQuery(this).closest("#acym_form");"asc"==e.val()?e.val("desc"):e.val("asc"),""===t.find('[name="task"]').val()&&t.find('[name="task"]').val("listing"),t.submit()})},setSelectActions:function(){ACYM_IS_ADMIN&&jQuery("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),jQuery("#listing_actions").off("change").on("change",function(){var e=this.value,t="",a=jQuery("#acym__listing__action__delete-message").val();switch(e){case"delete":t="".concat(ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE," ").concat(a);break;case"setActive":t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:t=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if("duplicate"==e||acym_helper.confirm(t)){var i=jQuery(this).closest("#acym_form"),r=jQuery(this).attr("data-ctrl");void 0!==r&&(i.find('[name="return_listing"]').val(i.find('[name="ctrl"]').val()),i.find('[name="ctrl"]').val(r)),i.find('[name="task"]').val(jQuery(this).val()),i.submit()}else jQuery(this).val("0")})},setCheckboxesActionsListings:function(){var e=jQuery('[name="elements_checked[]"]');e.off("change").on("change",function(){var e=jQuery('[name="elements_checked[]"]:checked').length;if(1===e?jQuery(".acym__campaign__duplicate").show():jQuery(".acym__campaign__duplicate").hide(),e>0?jQuery("#listing_actions").removeAttr("disabled"):jQuery("#listing_actions").attr("disabled","true"),jQuery('[name="elements_checked[]"]:not(:checked)').length>0?jQuery("#checkbox_all").prop("checked",!1):jQuery("#checkbox_all").prop("checked",!0),jQuery("#acym__users").length){var t=jQuery("#acym__users__listing__number_to_export"),a=jQuery("#acym__users__listing__number_to_add_to_list"),i=jQuery("#acym__users__listing__button--add-to-list");0==e?(t.html(t.attr("data-default")),i.addClass("disabled").attr("disabled","true"),a.html(e)):(t.html(e),i.removeClass("disabled").removeAttr("disabled"),a.html(e))}if(jQuery("#acym__lists").length){var r=jQuery("#acym__lists__listing__number_to_export");0==e?r.html(r.attr("data-default")):r.html(e)}}),e.trigger("change")}},acym_helperModal={initModal:function(){acym_helperModal.setPopupIframeToggleGlobal(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setButtonModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists(),acym_helperModal.getContentAjaxModalPaginationLists(),acym_helperModal.setButtonModalPaginationUsers(),acym_helperModal.getContentAjaxModalPaginationUsers(),acym_helperModal.setShowSelectedOrShowAllUsersModalPaginationUsers(),acym_helperModal.setSearchUserModalPaginationUsers(),acym_helperModal.setButtonConfirmModalPaginationUsers(),acym_helperModal.setClearButtonImportLists(),acym_helperModal.initOverlay()},initOverlay:function(){!jQuery("#acym_form").length||jQuery("#acym__editor__content").length||jQuery(".campaigns_edit_email").length||jQuery(".frontcampaigns_edit_email").length?jQuery(".reveal-overlay").appendTo("#acym_wrapper"):jQuery(".reveal-overlay").appendTo("#acym_form")},setResetMail:function(){jQuery(".acym__automation__action__reset__mail").off("click").on("click",function(){if(acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var e=jQuery(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),t=jQuery(this).parent(),a=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=deleteMailAutomation&id="+e.val();jQuery.get(a,function(a){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),t.html(""),acym_helperModal.setAjaxCallStartFrom()})}})},setAjaxCallStartFrom:function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=getTemplateAjax",t=jQuery('input[name="return"]'),a=t.length>0&&-1!==t.val().indexOf("automation")||jQuery("#acym__automation__actions__json").length>0?"1":"0",i=jQuery('input[name="id"]').val();e+="&search="+jQuery("#acym_search_template_choose__ajax").val(),e+="&tag="+jQuery("#acym_tag_template_choose__ajax").val(),e+="&type="+jQuery("#acym__mail__type").val(),e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&editor="+jQuery("#acym__mail__edit__editor").val(),e+="&automation="+a,e+="&inmail="+(jQuery("#editor_autoSave").length>0?"1":"0"),e+="&id="+(void 0===i?0:i),e+="&acym_pagination_element_per_page="+jQuery('[name="acym_pagination_element_per_page"]').val(),t.length>=1&&(e+="&return="+encodeURIComponent(t.val())),jQuery.post(e,function(e){jQuery(".acym__template__choose__ajax").html(e),acym_helperModal.setSearchAjaxModalChooseTemplateStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.setStartFromHtmlEditor(),jQuery("#acym__automation__actions").length>0&&acym_helperModal.chooseOneTemplate()})},setPaginationAjaxStartFrom:function(){jQuery(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),jQuery("#acym_pagination__ajax").attr("value",jQuery(this).attr("page")),acym_helperModal.setAjaxCallStartFrom()}),ACYM_IS_ADMIN&&jQuery('[name="acym_pagination_element_per_page"]').select2({theme:"foundation",width:"100%"}),jQuery('#acym_pagination__ajax, [name="acym_pagination_element_per_page"]').on("change",function(){acym_helperModal.setAjaxCallStartFrom()})},setSearchAjaxModalChooseTemplateStartFrom:function(){acym_helperModal.setSearchValueStartFrom(),acym_helperModal.setSelectTagStartFrom(),acym_helperModal.setChoosenTypeStartFrom()},setStartFromHtmlEditor:function(){"acyEditor"!==jQuery("#acym__mail__edit__editor").val()&&jQuery("#acym__automation__actions").length<1&&(jQuery(".reveal .acym__templates__oneTpl").on("click",function(){window.location.replace(jQuery(this).find("a").attr("href"))}),jQuery(".acym__templates__choose__ribbon").on("click",function(){window.location.replace(jQuery(this).closest(".acym__templates__pic").find("a").attr("href"))}))},chooseOneTemplate:function(){jQuery(".acym__templates__oneTpl").off("click").on("click",function(){var e=ACYM_AJAX_URL+"&page=acymailing_mails&ctrl="+acym_helper.ctrlMails+"&task=duplicateMailAutomation&id="+jQuery(this).attr("id"),t=jQuery("#acym__template__choose__modal"),a=jQuery('[data-modal-name="'+t.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+a.find('[name$="[mail_id]"]').val(),jQuery.get(e,function(e){var t=acym_helper.parseJson(e,{error:acym_helper.sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)});if(void 0!==t.error)return alert(t.error),!1;a.find(".acym__automation__action__mail__name").html(t.name+'<i class="cursor-pointer acymicon-close acym__color__red acym__automation__action__reset__mail margin-left-1"></i>'),a.find('[name$="[mail_id]"]').val(t.id),a.find('[data-task="createMail"]').html(ACYM_JS_TXT.ACYM_EDIT_MAIL),jQuery(".reveal").foundation("close"),acym_helperModal.setResetMail()})})},setSearchValueStartFrom:function(){var e=null;jQuery('input[name="mailchoose_search__ajax"]').off("keydown").on("keydown",function(t){var a=jQuery(this),i=a.val();if((i||8==t.which)&&""!=i&&i.length>=2&&(clearTimeout(e),e=setTimeout(function(){jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom()},1500)),13==t.which)return t.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",i),acym_helperModal.setAjaxAndResetPaginationStartFrom(),!1;8==t.which&&""==a.val()&&(clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",""),acym_helperModal.setAjaxAndResetPaginationStartFrom())}),jQuery("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),jQuery("#acym_search_template_choose__ajax").attr("value",jQuery('input[name="mailchoose_search__ajax"]').attr("value")),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setAjaxAndResetPaginationStartFrom:function(){jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.setAjaxCallStartFrom()},setSelectTagStartFrom:function(){jQuery("#mailchoose_tag__ajax").on("change",function(e){jQuery("#acym_tag_template_choose__ajax").attr("value",jQuery(this).attr("value")),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setChoosenTypeStartFrom:function(){jQuery("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(e){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym__type__choosen").removeClass("is-active"),jQuery(this).addClass("is-active").blur(),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setTemplateModal:function(e){e=void 0!==e,acym_helperModal.setAjaxAndResetPaginationStartFrom(),acym_helperModal.setPaginationAjaxStartFrom(),acym_helperModal.setClearButtonStartFrom(),e&&jQuery('[data-open="acym__template__choose__modal"]').on("click",function(){jQuery("#acym__template__choose__modal").attr("data-button",jQuery(this).attr("data-modal-name"))})},setClearButtonStartFrom:function(){jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(){jQuery('input[name="mailchoose_search__ajax"]').val(""),jQuery("#acym_search_template_choose__ajax").val(""),acym_helperModal.setAjaxAndResetPaginationStartFrom()})},setPopupIframeToggleGlobal:function(){jQuery("[data-iframe]").on("click",function(){var e=jQuery("#"+jQuery(this).attr("data-open")),t=jQuery(this).attr("data-reload"),a=jQuery(this).attr("data-ajax"),i=jQuery(this).attr("data-iframe-class"),r="true"==a?ACYM_AJAX_URL+jQuery(this).attr("data-iframe"):jQuery(this).attr("data-iframe");e.prepend('<iframe src="'+r+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){jQuery(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){jQuery(this).siblings("iframe").remove(),t&&location.reload()}),jQuery(".reveal-overlay").on("click",function(){e.find("iframe").remove(),t&&location.reload()})})},setShowSelectedOrShowAllListsModalPaginationLists:function(){var e=jQuery(".modal__pagination__show-selected"),t=jQuery(".modal__pagination__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),jQuery(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1)),acym_helperModal.getContentAjaxModalPaginationLists()})},getContentAjaxModalPaginationLists:function(){var e=ACYM_AJAX_URL+"&page=acymailing_lists&ctrl="+acym_helper.ctrlLists+"&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&selectedLists="+jQuery("#acym__modal__lists-selected").val(),e+="&alreadyLists="+jQuery("#acym__user__lists_already_add").val(),e+="&show_selected="+jQuery("#modal__pagination__show-information").val(),e+="&search_lists="+jQuery("#modal__pagination__search__lists").val(),e+=jQuery("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0";var t=jQuery(".modal__pagination__listing__lists__in-form");t.length&&jQuery.get(e,function(e){jQuery("#modal__pagination__search__spinner").hide(),t.html(e),acym_helperModal.setAjaxPaginationModalPagination(),acym_helperModal.setListingAjaxUserModalPaginationLists(),acym_helperModal.setShowSelectedOrShowAllListsModalPaginationLists(),acym_helperModal.setSearchListModalPaginationLists()})},setAjaxPaginationModalPagination:function(){jQuery(".acym__pagination__page__ajax").off("click").on("click",function(){jQuery("#acym_pagination__ajax").val(jQuery(this).attr("page")),acym_helperModal.getContentAjaxModalPaginationLists(),acym_helperModal.getContentAjaxModalPaginationUsers()})},setListingAjaxUserModalPaginationLists:function(){jQuery(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=jQuery(this).next().children("label .modal__pagination__listing__lists__list-name "),t=jQuery("#acym__modal__lists-selected"),a=t.val(),i=[];a=""===a?[]:JSON.parse(a),jQuery(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(jQuery(this).val()),1)),jQuery(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(parseInt(jQuery(this).val()))}),jQuery.each(i,function(e){-1!=jQuery.inArray(i[e],a)||a.push(i[e])}),t.val(JSON.stringify(a)),jQuery("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),jQuery("#acym__popup__subscription__change").trigger("change")})},setSearchListModalPaginationLists:function(){var e=null,t=jQuery('input[name="modal_search_lists"]'),a=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__search__lists");t.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),acym_helperModal.setSearchLists(e))}),t.off("keyup").on("keyup",function(t){var r=jQuery(this),_=r.val();(_||8==t.which)&&""!=_&&_.length>=2?(jQuery("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",_),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists()},1e3)):clearTimeout(e),""==r.val()&&(clearTimeout(e),a.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationLists())}),jQuery(".modal__pagination__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),acym_helperModal.setSearchLists(e)}),jQuery(".modal__pagination__search .acym__search-clear").off("click").on("click",function(r){r.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show(),acym_helperModal.getContentAjaxModalPaginationLists()})},getContentAjaxModalPaginationUsers:function(){var e=ACYM_AJAX_URL+"&page=acymailing_users&ctrl="+acym_helper.ctrlUsers+"&action=acymailing_router&noheader=1&task=setAjaxListing&usersPerPage=10";e+="&pagination_page_ajax="+jQuery("#acym_pagination__ajax").val(),e+="&selectedUsers="+jQuery("#acym__modal__users-selected").val(),e+="&hiddenUsers="+jQuery("#acym__modal__users-hidden").val(),e+="&showSelected="+jQuery("#modal__pagination__users__show-information").val(),e+="&searchUsers="+jQuery("#modal__pagination__users__search__input").val();var t=jQuery(".modal__pagination__users__listing__in-form");t.length&&jQuery.get(e,function(e){jQuery("#modal__pagination__users__search__spinner").hide(),t.html(e),acym_helperModal.setAjaxPaginationModalPagination(),acym_helperModal.setListingAjaxUserModalPaginationUsers(),acym_helperModal.setShowSelectedOrShowAllUsersModalPaginationUsers(),acym_helperModal.setSearchUserModalPaginationUsers()})},setListingAjaxUserModalPaginationUsers:function(){jQuery(".modal__pagination__users__listing__user--checkbox").off("change").on("change",function(){var e=jQuery(this).next().children("label .modal__pagination__users__listing__user-name "),t=jQuery("#acym__modal__users-selected"),a=t.val(),i=[];a=""==a?[]:JSON.parse(a),jQuery(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(jQuery(this).val()),1)),jQuery(".modal__pagination__users__listing__user--checkbox:checked").each(function(){i.push(jQuery(this).val())}),jQuery.each(i,function(e){-1!=jQuery.inArray(i[e],a)||a.push(i[e])}),t.val(JSON.stringify(a))})},setShowSelectedOrShowAllUsersModalPaginationUsers:function(){var e=jQuery(".modal__pagination__users__show-selected"),t=jQuery(".modal__pagination__users__show-all");e.hasClass("selected")?(t.hide(),e.show()):(t.show(),e.hide()),jQuery(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(t.show(),e.hide().removeClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","true"),jQuery("#acym_pagination__ajax").attr("value",1)):(t.hide(),e.show().addClass("selected"),jQuery("#modal__pagination__users__show-information").attr("value","false"),jQuery("#acym_pagination__ajax").attr("value",1)),acym_helperModal.getContentAjaxModalPaginationUsers()})},setSearchUserModalPaginationUsers:function(){var e=null,t=jQuery('input[name="modal_search_users"]'),a=jQuery(".modal__pagination__show"),i=jQuery("#modal__pagination__users__search__input");t.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),acym_helperModal.setSearchUsers(e))}),t.off("keyup").on("keyup",function(t){var r=jQuery(this).val();(r||8==t.which)&&""!=r&&r.length>=2?(jQuery("#modal__pagination__users__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",r),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationUsers()},1e3)):clearTimeout(e),""==r&&(clearTimeout(e),a.show(),i.attr("value",""),jQuery("#acym_pagination__ajax").attr("value",1),acym_helperModal.getContentAjaxModalPaginationUsers())}),jQuery(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),acym_helperModal.setSearchUsers(e)}),jQuery(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(r){r.preventDefault(),clearTimeout(e),i.attr("value",""),t.attr("value",""),a.show(),acym_helperModal.getContentAjaxModalPaginationUsers()})},setSearchUsers:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__users__search__input").attr("value",jQuery('input[name="modal_search_users"]').attr("value")),acym_helperModal.getContentAjaxModalPaginationUsers()},setSearchLists:function(e){clearTimeout(e),jQuery(".modal__pagination__show").hide(),jQuery("#acym_pagination__ajax").attr("value",1),jQuery("#modal__pagination__search__lists").attr("value",jQuery('input[name="modal_search_lists"]').attr("value")),acym_helperModal.getContentAjaxModalPaginationLists()},setButtonModalPaginationLists:function(){jQuery(".modal__pagination__button-open").off("click").on("click",function(){acym_helperModal.getContentAjaxModalPaginationLists()})},setButtonModalPaginationUsers:function(){jQuery(".modal__pagination__users__button-open").off("click").on("click",function(){jQuery("#acym__modal__users-selected").val(""),acym_helperModal.getContentAjaxModalPaginationUsers()})},setButtonConfirmModalPaginationUsers:function(){jQuery("#modal__pagination__users__confirm").off("click").on("click",function(){var e=jQuery("#acym__modal__users__form-task").val();jQuery('input[name="task"]').val(e),jQuery("#acym_form").submit()})},setClearButtonImportLists:function(){jQuery("#acym__modal__lists_import__clear").off("click").on("click",function(){jQuery("#modal__pagination__create__list").val("")})}},acym_helperPagination={setPaginationGlobal:function(){jQuery(".acym__pagination__page").off("click").on("click",function(){jQuery("#acym_pagination").val(jQuery(this).attr("page")),jQuery("#acym_form").submit()}),jQuery(".acym__lists__filter__tags").off("change").on("change",function(){jQuery("#select2-lists_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__templates__filter__tags").off("change").on("change",function(){jQuery("#select2-mails_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__campaigns__filter__tags").off("change").on("change",function(){jQuery("#select2-campaigns_tag-container").html(jQuery(this).find("option:selected").text()),jQuery("#acym_pagination").val(1)}),jQuery(".acym__queue__filter__tags").off("change").on("change",function(){acym_helperPagination.initPagination()}),jQuery(".acym__type__choosen").off("click").on("click",function(){jQuery('[id^="acym__type-template"]').val(jQuery(this).attr("data-type")),jQuery(".acym_ordering_option").removeClass("is-active"),jQuery(this).addClass("is-active"),acym_helperPagination.initPagination()}),jQuery(".acym__filter__status").off("click").on("click",function(){jQuery("#acym_filter_status").val(jQuery(this).attr("status")),acym_helperPagination.initPagination()}),ACYM_IS_ADMIN&&jQuery(".acym__select__pagination__dropdown").select2({theme:"foundation",width:"60px"}),jQuery("#acym_pagination_element_per_page").on("change",function(){jQuery("#formSubmit").click()})},initPagination:function(){jQuery("#acym_pagination").val(1),jQuery("#acym_form").submit()}},acym_helperPreview={setPreviewIframe:function(){jQuery(".acym__wysid__hidden__save__content").off("change").on("change",function(){acym_helperPreview.setPreviewIframe()}),acym_helperPreview.addIframePreview("acym__wysid__email__preview","desktop"),jQuery("#acym__wysid__view__desktop").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!0)}),jQuery("#acym__wysid__view__smartphone").off("click").on("click",function(){tinymce.remove(),acym_helperPreview.setTemplateForPreview(!1)})},addIframePreview:function(e,t,a){a=null!=a;var i,r=!0,_=jQuery("#acym__wysid__email__preview"),n="acym__wysid__preview__iframe__"+e,o='<div class="cell auto"></div>';o+='<iframe id="'+n+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"></iframe>',o+='<div class="cell auto"></div>',o+='<div class="acym__fadeout"></div>',o+='<i class="acymicon-keyboard_arrow_down acym__preview__extend acym__preview__toggle acym__preview-toggle"></i>',o+='<i class="acymicon-sort acym__preview-toggle acym__preview__toggle__top"></i>',jQuery("#"+e).html(o);var c=jQuery("#"+n);"smartphone"==t?c.css("maxWidth","425px"):c.css("maxWidth","inherit"),c.css("height","100%"),i=c.css("height");jQuery("#acym__campaign__summary").length?(c.css({height:"200px"}),_.css("padding-bottom","200px"),c.contents().find("body").css("overflow","hidden"),jQuery(".acym__preview-toggle").off("click").on("click",function(){jQuery(".acym__fadeout").toggle(),r?(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_down").removeClass("acym__preview__extend").addClass("acymicon-keyboard_arrow_up").addClass("acym__preview__collapse"),c.css({height:i}).contents().find("body").css("overflow","auto"),_.css("padding-bottom",i),r=!r):(jQuery(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_up").removeClass("acym__preview__collapse").addClass("acymicon-keyboard_arrow_down").addClass("acym__preview__extend"),c.css({height:"200px"}).contents().find("body").css("overflow","hidden"),_.css("padding-bottom","200px"),r=!r)})):(jQuery(".acym__fadeout").hide(),jQuery(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?acym_helperPreview.loadIframe(n,a):c.on("load",function(){acym_helperPreview.loadIframe(n,a)})},setTemplateForPreview:function(e){var t=jQuery("#acym__wysid__template"),a=e?"desktop":"smartphone";t.find(".acym__wysid__row__selector").remove(),jQuery("#acym__template__preview").val(t.html()),jQuery(".acym__wysid__fullscreen__modal__content__container").hide(),jQuery("#acym__wysid__fullscreen__modal__content__"+a).closest(".acym__wysid__fullscreen__modal__content__container").show(),acym_helperPreview.addIframePreview("acym__wysid__fullscreen__modal__content__"+a,a,!0),jQuery("#acym__wysid__fullscreen__modal").css("display","flex").on("click",function(){acym_helperEditorWysid.setColumnRefreshUiWYSID(),jQuery(this).css("display","none")})},loadIframe:function(e,t){var a='<div id="acym__wysid__template" class="cell acym__foundation__for__email">';a+='<table class="body"><tbody><tr>',a+='<td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(239, 239, 239);"><center>',a+='<table align="center" border="0" cellpadding="0" cellspacing="0"><tbody>',a+='<tr><td class="acym__wysid__row ui-droppable ui-sortable">',a+='<table class="row acym__wysid__row__element" border="0" cellpadding="0" cellspacing="0"><tbody style="background-color: rgb(255, 255, 255);">',a+='<tr><th class="small-12 medium-12 large-12 columns">',a+='<table class="acym__wysid__column" style="min-height: 75px; display: block;" border="0" cellpadding="0" cellspacing="0"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table>',a+="</th></tr>",a+="</tbody></table>",a+="</td></tr>",a+="</tbody></table>",a+="</center></td>",a+="</tr></tbody></table>",a+="</div>";var i=jQuery("#"+e).contents(),r=i.find("head"),_=i.find("body"),n=jQuery(".acym__wysid__hidden__save__stylesheet").attr("value"),o=jQuery(".acym__wysid__hidden__save__content"),c=jQuery(".acym__hidden__mail__content").val(),l=jQuery("#acym__wysid__template"),s=l.find("#acym__wysid__default").detach();l.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove();var y=l.html();l.find(".acym__wysid__column__first").before(s),r.append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'),r.append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),r.append("<style>"+ACYM_FIXES_FOR_EMAIL+"</style>"),null!=n&&""!=n&&setTimeout(function(){r.append("<style>"+n+"</style>")},100);var m="";if(t?(o.attr("value",'<div id="acym__wysid__template" class="cell">'+y+"</div>"),m='<div id="acym__wysid__template" class="cell">'+jQuery("#acym__template__preview").val()+"</div>"):""==o.attr("value")&&(""==y?o.attr("value",a):o.attr("value",'<div id="acym__wysid__template" class="cell">'+y+"</div>")),"empty"==o.attr("value")&&o.attr("value",a),""!=c){var u=jQuery(".acym__hidden__mail__stylesheet").html();null!=u&&""!=u&&r.append("<style>"+u+"</style>"),_.html(""),_.append(c)}null!=m&&""!=m?_.css("margin","0").append(m):_.css("margin","0").append(o.attr("value")),i.find("a").attr("target","_blank"),i.find('a[href^="#"]').attr("target","_top"),jQuery(document).trigger("acy_preview_loaded")}},acym_helperSearch={setClearSearch:function(){jQuery(".acym__search-clear").off("click").on("click",function(){jQuery(".acym__search-field").attr("value",""),acym_helperPagination.initPagination()})}},acym_helperSelectionPage={initSelectionPage:function(){this.setSelectionElement(),this.setSelectionSelectCard(),this.setSelectionButton(),ACYM_IS_ADMIN&&this.setSelectSelect2Theme()},setSelectionElement:function(){var e=jQuery(".acym__selection__card:not(.acym__selection__card__disabled)");e.off("click").on("click",function(){jQuery(this).hasClass("acym__selection__card-selected")||(e.removeClass("acym__selection__card-selected"),jQuery(this).addClass("acym__selection__card-selected"),jQuery(this).hasClass("acym__selection__select-card")&&""!==jQuery(this).find(".acym__selection__select-card__select").val()||!jQuery(this).hasClass("acym__selection__select-card")?jQuery("#acym__selection__button-select").removeAttr("disabled"):jQuery("#acym__selection__button-select").attr("disabled","true"))})},setSelectionSelectCard:function(){jQuery(".acym__selection__select-card__select").on("change",function(){jQuery(this).closest(".acym__selection__card").hasClass("acym__selection__card-selected")&&(""!==jQuery(this).val()?jQuery("#acym__selection__button-select").removeAttr("disabled"):jQuery("#acym__selection__button-select").attr("disabled","true"))})},setSelectionButton:function(){jQuery("#acym__selection__button-select").off("click").on("click",function(){var e=jQuery(".acym__selection__card-selected"),t=e.attr("acym-data-link");if(-1!==t.indexOf("{dataid}")){var a=e.find(".acym__selection__select-card__select").val();t=t.replace("{dataid}",a)}window.location.href=t})},setSelectSelect2Theme:function(){jQuery(".acym__selection__select-card__select").select2({theme:"sortBy",minimumResultsForSearch:1/0})}},acym_helperSwitch={setSwitchFieldsGlobal:function(){jQuery(".switch-label").on("click",function(){var e=jQuery('input[data-switch="'+jQuery(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))})}},acym_helperTab={initTab:function(){acym_helperTab.setTab(),acym_helperTab.reloadRadioButtons()},setTab:function(){jQuery(".acym_tab").off("click").on("click",function(e){if("true"==jQuery(this).attr("data-empty"))return!1;if(jQuery(this).attr("data-dynamics")){var t=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlDynamics+"&task=trigger&trigger=textPopup&plugin="+jQuery(this).attr("data-dynamics");jQuery.post(t,function(e){jQuery(".tabs-panel.is-active").html(e),acym_helperTab.reloadRadioButtons()})}var a=jQuery(this).closest(".tabs").attr("id");localStorage.setItem("acy"+a,jQuery(this).attr("data-tab-identifier"));var i=jQuery(this).attr("data-tab-identifier");jQuery(".acym__tabs__inbar__element").each(function(){var e=jQuery(this).attr("acym-data-identifier");e.length>0&&(e===i?jQuery(this).show():jQuery(this).hide())})});var e=jQuery(".tabs").attr("id"),t=localStorage.getItem("acy"+e),a=jQuery("#"+e).find('a[data-tab-identifier="'+t+'"]');a.length&&!a.closest(".tabs-title").hasClass("tabs-title-empty")?a.click():jQuery("#"+e+" .acym_tab").each(function(){if(!jQuery(this).closest(".tabs-title").hasClass("tabs-title-empty"))return jQuery(this).click(),!1})},reloadRadioButtons:function(){jQuery("i.acym_radio_unchecked").on("click",function(){jQuery("#"+jQuery(this).attr("data-radio")).click()}),jQuery('input[type="radio"]').on("change",function(){var e=jQuery('input[name="'+jQuery(this).attr("name")+'"]:checked').val();jQuery('input[name="'+jQuery(this).attr("name")+'"]').each(function(){jQuery(this).val()==e?(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').hide(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').show()):(jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_unchecked').show(),jQuery('i[data-radio="'+jQuery(this).attr("id")+'"].acym_radio_checked').hide())})}).change()}},acym_helperThumbnail={setAjaxSaveThumbnail:function(){var e=jQuery("#editor_thumbnail"),t=jQuery('[name="thumbnail"]'),a=ACYM_AJAX_URL+"&ctrl="+acym_helper.ctrlMails+"&task=setNewThumbnail";if(-1!==e.val().indexOf(".png"))return!0;if(""===e.val()&&""!==t.val())return e.val(t.val()),!0;if(""===t.val()&&""===e.val())return!0;var i=t.val();return t.val(""),jQuery.ajax({type:"POST",url:a,data:{content:e.val(),thumbnail:i},timeout:5e3,success:function(t){e.val(t)},error:function(t,a,i){"timeout"===a&&(i=ACYM_JS_TXT.ACYM_REQUEST_FAILED_TIMEOUT),acym_helperNotification.addNotification(acym_helper.sprintf(ACYM_JS_TXT.ACYM_COULD_NOT_SAVE_THUMBNAIL_ERROR_X,i),"error"),e.val("")}})}},acym_helperToggle={initJsToggle:function(){acym_helperToggle.setSwitchToggle(),acym_helperToggle.setToggleArrow(),acym_helperToggle.setToggleGlobal(),acym_helperToggle.setToggleCheckboxesGlobal(),acym_helperToggle.setSelectToggle()},setToggleGlobal:function(){jQuery(".acym_toggleable").off("click").on("click",function(){var e=jQuery(this);e.attr("class","acymicon-circle-o-notch acymicon-spin");var t=e.attr("data-acy-table"),a=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),r=e.attr("data-acy-newvalue"),_=ACYM_TOGGLE_URL+"&table="+t+"&field="+a+"&id="+i+"&value="+r;jQuery.ajax({url:_,type:"GET"}).done(function(e){var r=jQuery.parseJSON(e),_=jQuery("[data-acy-table="+t+"][data-acy-field="+a+"][data-acy-elementid="+i+"]");_.attr("data-acy-newvalue",r.value).attr("class",r.classes),void 0!==r.tooltip&&_.closest(".acym__tooltip").find(".acym__tooltip__text").html(r.tooltip)})}),jQuery(".acym_toggle_delete").off("click").on("click",function(){var e=jQuery(this);if(!e.attr("confirmation")||acym_helper.confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var t=e.attr("data-acy-table"),a=e.attr("data-acy-elementid"),i=ACYM_TOGGLE_URL+"&task=delete&table="+t+"&id="+a,r=e.attr("data-acy-method");void 0!==r&&(i+="&method="+r),jQuery.ajax({url:i,type:"GET"}).done(function(e){"mail"===t?jQuery("#acym_form").submit():jQuery(".grid-x[data-acy-elementid="+a+"]").remove()})}}),jQuery(".switch-label").off("click").on("click",function(){var e=jQuery(this).attr("for");jQuery('[data-switch="'+e+'"]').trigger("change")}),jQuery(".acym_toggle_switch").off("change").on("change",function(){var e=jQuery(this),t=e.attr("data-acy-table"),a=e.attr("data-acy-field"),i=e.attr("data-acy-elementid"),r=e.attr("data-acy-newvalue"),_=ACYM_TOGGLE_URL+"&table="+t+"&field="+a+"&id="+i+"&value="+r;jQuery.ajax({url:_,type:"GET"}).done(function(t){var a=jQuery.parseJSON(t);e.attr("data-acy-newvalue",a.value)})})},setToggleCheckboxesGlobal:function(){var e=jQuery('input.acym_toggle[type="checkbox"]');e.off("change").on("change",function(){var e=jQuery("."+jQuery(this).attr("data-toggle")),t=jQuery(this).is(":checked"),a=jQuery("#"+jQuery(this).attr("data-value"));e.each(function(){var e=jQuery(this);t?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),a&&a.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),a&&a.val(0))})}),e.trigger("change")},setSwitchToggle:function(){var e=jQuery('[data-toggle-switch]:not([data-toggle-switch=""])');e.off("change").on("change",function(){var e=jQuery(this).attr("data-toggle-switch-open");1!=jQuery(this).val()&&"show"==e||1==jQuery(this).val()&&"hide"==e?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()}),e.each(function(e){var t=jQuery(this).attr("data-toggle-switch-open");1==jQuery(this).val()&&"show"==t||1!=jQuery(this).val()&&"hide"==t?jQuery("#"+jQuery(this).attr("data-toggle-switch")).show():jQuery("#"+jQuery(this).attr("data-toggle-switch")).hide()})},setToggleArrow:function(){jQuery(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=jQuery(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(e.show(),jQuery(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up"))})},setSelectToggle:function(){jQuery('[data-toggle-select]:not([data-toggle-select=""])').on("change",function(){var e=acym_helper.parseJson(jQuery(this).attr("data-toggle-select")),t=jQuery(this).val();jQuery.each(e,function(e,a){e!=t?jQuery(a).hide():jQuery(a).show()})}).trigger("change")}},acym_helperToolbar={initToolbar:function(){this.setSearchBar(),this.setMoreOptionsButtons(),this.setStatusOnload()},setSearchBar:function(){var e=jQuery(".acym__toolbar__search-button"),t=jQuery("#acym__toolbar__search-bar"),a=jQuery(".acym__toolbar__search-field");e.off("click").on("click",function(){t.toggle("fast",function(){a.focus()})}),t.off("keydown").on("keydown",function(t){13===t.which&&e.attr("type","submit")})},setMoreOptionsButtons:function(){var e=jQuery("#acym__toolbar__button-more-filters"),t=jQuery(".acym__toolbar__more-filters"),a=jQuery("#acym__toolbar__more-filters-apply"),i=jQuery("#acym__toolbar__more-filters-clear");e.off("click").on("click",function(){t.toggle(),t.is(":visible")?(e.addClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_HIDE_FILTERS)):(e.removeClass("toggled"),e.html('<i class="acymicon-filter"></i>'+ACYM_JS_TXT.ACYM_SHOW_FILTERS))}),a.off("click").on("click",function(){jQuery("#acym_form").submit()}),i.off("click").on("click",function(){t.find("select").each(function(){this.selectedIndex=0}),jQuery(".acym__search-field").val(""),jQuery("#acym_form").submit()})},setStatusOnload:function(){var e=jQuery("#acym__toolbar__statuses-value").val();void 0!==e&&""!==e&&(e=acym_helper.parseJson(e),Object.keys(e).map(function(t){var a=jQuery('[name="'+t+'"]');if(0===a.length)return!1;a.val(e[t])}),jQuery("#acym__toolbar__button-more-filters").click())}},acym_helperTooltip={setTooltip:function(){jQuery(".acym__tooltip, [data-acym-tooltip]").off("mouseenter").on("mouseenter",function(){if(void 0!==jQuery(this).attr("data-acym-tooltip")){jQuery(this).addClass("acym__tooltip");var e=void 0!==jQuery(this).attr("data-acym-tooltip-position")?"acym__tooltip__text__"+jQuery(this).attr("data-acym-tooltip-position"):"";0==jQuery(this).find(".acym__tooltip__text").length&&jQuery(this).append('<span class="acym__tooltip__text '+e+'">'+jQuery(this).attr("data-acym-tooltip")+"</span>")}acym_helperTooltip.setPositionTooltip(jQuery(this).find(".acym__tooltip__text"),jQuery(this))})},setPositionTooltip:function(e,t){if(e.hasClass("wysid_tooltip"))e.css({position:"absolute",top:t.outerHeight()+14+"px",left:"-"+(250-t.outerWidth())/2+"px",width:"250px"});else{var a,i,r=t.offset(),_=jQuery(window).scrollTop(),n=r.top-_;e.hasClass("acym__tooltip__text__right")?(a=n-e.height()<0?0:n-e.height(),i=r.left+t.width()+10<0?0:r.left+t.width()+10):e.hasClass("acym__tooltip__text__left")?(a=n-e.height()<0?0:n-e.height(),i=r.left-e.width()-t.width()-10<0?0:r.left-e.width()-t.width()-10):(a=n-e.height()-15<0?0:n-e.height()-15,i=r.left-e.height()/2<0?0:r.left-e.height()/2),e.css({top:a+"px",left:i+"px"})}}},acym_helperUser={setSubscribeUnsubscribeUser:function(){var e=jQuery("#acym_form");jQuery(".acym__user__action--subscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("id")),e.find('[name="task"]').attr("value","subscribeUser"),e.submit()}),jQuery(".acym__user__action--unsubscribe").off("click").on("click",function(){jQuery('[name="acym__entity_select__selected"]').val(jQuery(this).attr("id")),e.find('[name="task"]').attr("value","unsubscribeUser"),e.submit()}),jQuery(".acym__user__action--unsubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","unsubscribeUserFromAll"),e.submit()}),jQuery(".acym__user__action--resubscribeall").off("click").on("click",function(){e.find('[name="task"]').attr("value","resubscribeUserToAll"),e.submit()})}};