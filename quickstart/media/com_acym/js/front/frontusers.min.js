/**
 * @package    AcyMailing for Joomla
 * @version    6.2.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

function acym_checkChangeForm(){var e,t,a,r,n,l=document.acyprofileform,u=l.elements["data[user][email]"];if(u){u.value!=acymModule.EMAILCAPTION&&(u.value=u.value.replace(/ /g,""));var o=acymModule.emailRegex;if(!u||u.value==acymModule.EMAILCAPTION||!o.test(u.value))return alert(acymModule.VALID_EMAIL),u.className=u.className+" invalid",!1}var s=document.querySelectorAll('[type="radio"][data-required]');if(s.length>0){for(e="",t=0,a=0;a<s.length;a++){if(r=JSON.parse(s[a].getAttribute("data-required")),""!==e&&e!=s[a].getAttribute("name")&&0==t)return r=JSON.parse(s[a-1].getAttribute("data-required")),alert(r.message),!1;""!==e&&e!=s[a].getAttribute("name")&&t>0&&(t=0),s[a].checked&&t++,e=s[a].getAttribute("name")}if(0==t)return alert(r.message),!1}var d=document.querySelectorAll('[type="checkbox"][data-required]');if(d.length>0){for(e="",t=0,a=0;a<d.length;a++){if(r=JSON.parse(d[a].getAttribute("data-required")),""!==e&&e!=d[a].getAttribute("name")&&0==t)return r=JSON.parse(d[a-1].getAttribute("data-required")),alert(r.message),!1;""!==e&&e!=d[a].getAttribute("name")&&t>0&&(t=0),d[a].checked&&t++,e=d[a].getAttribute("name")}if(0==t)return alert(r.message),!1}var i=document.querySelectorAll("[data-required]");if(i.length>0)for(a=0;a<i.length;a++){if(("text"===(r=JSON.parse(i[a].getAttribute("data-required"))).type||"textarea"===r.type||"single_dropdown"===r.type||"multiple_dropdown"===r.type||"phone"===r.type||"file"===r.type)&&""===i[a].value)return alert(r.message),!1;if("file"===r.type&&0===i[a].files.length)return alert(r.message),!1}var m=document.querySelectorAll("[data-authorized-content]");if(m.length>0)for(a=0;a<m.length;a++){var c=JSON.parse(m[a].getAttribute("data-authorized-content"));if(n="","number"===c[0]?n=/^[0-9]+$/:"letters"===c[0]?n=/^[a-zA-Z]+$/:"numbers_letters"===c[0]?n=/^[a-zA-Z0-9]+$/:"regex"===c[0]&&(n=new RegExp(c.regex)),""!=n&&!n.test(m[a].value))return alert(c.message),!1}var g=new FormData(l);l.className+=" acym_module_loading",l.style.filter="alpha(opacity=50)",l.style.opacity="0.5";var p=document.querySelector(".message_acyprofileform");p&&p.parentNode.removeChild(p);var f=new XMLHttpRequest;return f.open("POST",l.action),f.onload=function(){var e="Ajax Request Failure",t="error";if(200===f.status){var a=JSON.parse(f.responseText);e=a.message,t=a.type}acymDisplayAjaxResponse(decodeURIComponent(e),t,"acyprofileform",!1)},f.send(g),!1}document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll('select[name="data[listsubdropdown]"]');for(var t in e)e.hasOwnProperty(t)&&e[t].addEventListener("change",function(){for(var e=document.getElementById("datalistsubdropdown"),t=e.options[e.selectedIndex].value,a=document.getElementsByClassName("listsub-dropdown"),r=0;r<a.length;r++)a[r].value="0",a[r].name=="data[listsub]["+t+"][status]"&&(a[r].value="1")})});