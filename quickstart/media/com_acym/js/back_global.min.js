/**
 * @package    AcyMailing for Joomla
 * @version    6.2.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

jQuery(document).ready(function(t){var e,_,a,i,o,s,n,c,l;function r(){var e=t("#acym__joomla__left-menu");e&&(t("#acym_content, .acym_no_foundation").css({width:"calc(100% - "+e.width()+"px)","margin-left":e.width()+"px"}),t("#system-message-container").css({"margin-left":e.width()+15+"px"}))}function d(t,e,_){var a=new Date;a.setDate(a.getDate()+_),document.cookie=t+"="+escape(e)+(null==_?"":";expires="+a.toGMTString())}function m(e){t(".acym__listing__block__delete__cancel").off("click"),e.animate({maxWidth:"40px"},"fast",function(){e.find("i").css("width","40px")})}function y(){t("#acym_pagination").val(1),t("#acym_form").submit()}function h(e,_,a){a=null!=a;var i,o=!0,s=t("#acym__wysid__email__preview"),n="acym__wysid__preview__iframe__"+e;t("#"+e).html('<div class="cell auto"></div><iframe id="'+n+'" src="about:blank" frameborder="0" class="cell shrink" style="width: 100%"/><div class="cell auto"></div><div class="acym__fadeout"></div><i class="acymicon-keyboard_arrow_down acym__preview__extend acym__preview__toggle acym__preview-toggle"></i><i class="fa fa-unsorted acym__preview-toggle acym__preview__toggle__top"></i>');var c=t("#"+n);"smartphone"==_?c.css("maxWidth","425px"):c.css("maxWidth","inherit"),i=c.css("height");t("#acym__campaign__summary").length?(c.css({height:"200px"}),s.css("padding-bottom","200px"),c.contents().find("body").css("overflow","hidden"),t(".acym__preview-toggle").off("click").on("click",function(){t(".acym__fadeout").toggle(),o?(t(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_down").removeClass("acym__preview__extend").addClass("acymicon-keyboard_arrow_up").addClass("acym__preview__collapse"),c.css({height:i}).contents().find("body").css("overflow","auto"),s.css("padding-bottom",i),o=!o):(t(".acym__preview__toggle").removeClass("acymicon-keyboard_arrow_up").removeClass("acym__preview__collapse").addClass("acymicon-keyboard_arrow_down").addClass("acym__preview__extend"),c.css({height:"200px"}).contents().find("body").css("overflow","hidden"),s.css("padding-bottom","200px"),o=!o)})):(t(".acym__fadeout").hide(),t(".acym__preview-toggle").hide()),/chrom(e|ium)/.test(navigator.userAgent.toLowerCase())||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?u(n,a):c.on("load",function(){u(n,a)})}function u(e,_){var a='<div id="acym__wysid__template" class="cell acym__foundation__for__email">';a+='<table class="body"><tbody><tr>',a+='<td align="center" class="center acym__wysid__template__content" valign="top" style="background-color: rgb(120, 120, 120);"><center>',a+='<table align="center"><tbody>',a+='<tr><td class="acym__wysid__row ui-droppable ui-sortable">',a+='<table class="row acym__wysid__row__element"><tbody style="background-color: rgb(255, 255, 255);">',a+='<tr><th class="small-12 medium-12 large-12 columns">',a+='<table class="acym__wysid__column" style="min-height: 75px; display: block;"><tbody class="ui-sortable" style="min-height: 75px; display: block;"></tbody></table>',a+="</th></tr>",a+="</tbody></table>",a+="</td></tr>",a+="</tbody></table>",a+="</center></td>",a+="</tr></tbody></table>",a+="</div>";var i=t("#"+e).contents(),o=i.find("head"),s=i.find("body"),n=t(".acym__wysid__hidden__save__stylesheet").attr("value"),c=t(".acym__wysid__hidden__save__content"),l=t(".acym__hidden__mail__content").html();t("#acym__wysid__template").find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove();var r=t("#acym__wysid__template").html();if(o.append('<meta name="viewport" content="width=device-width, initial-scale=1.0" />'),o.append('<link rel="stylesheet" href="'+FOUNDATION_FOR_EMAIL+'">'),o.append('<link rel="stylesheet" href="'+ACYM_FIXES_FOR_EMAIL+'">'),null!=n&&""!=n&&setTimeout(function(){o.append("<style>"+n+"</style>")},100),_?c.attr("value",'<div id="acym__wysid__template" class="cell">'+r+"</div>"):""==c.attr("value")&&(""==r?c.attr("value",a):c.attr("value",'<div id="acym__wysid__template" class="cell">'+r+"</div>")),"empty"==c.attr("value")&&c.attr("value",a),""!=l){var d=t(".acym__hidden__mail__stylesheet").html();null!=d&&""!=d&&o.append("<style>"+d+"</style>"),s.append(l)}s.css("margin","0").append(c.attr("value")),i.find("a").attr("target","_blank"),i.find('a[href^="#"]').attr("target","_top")}function f(){t(".callout").appendTo("#acym__callout__container").css("display","flex"),t(".callout","#acym__callout__container").each(function(e){var _=t(".callout").eq(e);_.find(".fa-close").off("click").on("click",function(){p(_)}),setTimeout(function(){_.find(".progress-meter").css("transitionDuration",parseInt(_.attr("callout-timer"))+"ms"),_.find(".progress-meter").css("width",_.css("width")),_.attr("callout-timer")>0&&setTimeout(function(){p(_)},_.attr("callout-timer")),_.css({"margin-left":"0","margin-right":"0"})},500*e)})}function p(t){t.css({"margin-left":"640px","margin-right":"-640px"}),setTimeout(function(){t.remove()},1e3)}t.introContent=[],t.acym_emailValid=function(t){return null!==t.match(ACYM_REGEX_EMAIL)},t.acym_isEmpty=function(t){var e=[void 0,null,!1,0,"","0"];if("object"==typeof t){for(var _ in t)if(t.hasOwnProperty(_))return!1;return!0}for(var a=0;a<e.length;a++)if(t===e[a])return!0;return!1},t.acym_parseJson=function(t,e){try{if(void 0!==t||""!==t)return JSON.parse(t)}catch(t){console.log(t.stack)}return e},t.acym_sprintf=function(){var e=(arguments=Object.values(arguments)).splice(0,1)[0];return 1===arguments.length?e=e.replace("%s",arguments[0]):t.each(arguments,function(t,_){e=e.replace("%"+(t+1)+"$s",_)}),e},t.setTooltip=function(){t(".acym__tooltip, [data-tooltip]").on("mouseenter",function(){if(void 0!==t(this).attr("data-tooltip")){t(this).addClass("acym__tooltip");var e=void 0!==t(this).attr("data-tooltip-position")?"acym__tooltip__text__"+t(this).attr("data-tooltip-position"):"";t(this).append('<span class="acym__tooltip__text '+e+'">'+t(this).attr("data-tooltip")+"</span>")}!function(e,_){var a,i,o=_.offset(),s=t(window).scrollTop(),n=o.top-s;e.hasClass("acym__tooltip__text__right")?(a=n-e.height()<0?0:n-e.height(),i=o.left+_.width()+10<0?0:o.left+_.width()+10):e.hasClass("acym__tooltip__text__left")?(a=n-e.height()<0?0:n-e.height(),i=o.left-e.width()-_.width()-10<0?0:o.left-e.width()-_.width()-10):(a=n-e.height()-15<0?0:n-e.height()-15,i=o.left-e.height()/2<0?0:o.left-e.height()/2);e.css({top:a+"px",left:i+"px"})}(t(this).find(".acym__tooltip__text"),t(this))})},t.setDatePickerGlobal=function(){t(".acy_date_picker").off("click").on("click",function(){var e=t(this),_=e.val()?moment(e.val(),"DD MMM YYYY HH:mm"):moment();new MaterialDatetimePicker({default:_}).on("submit",function(t){e.val(moment(t,"MM-DD-YYYY").format("DD MMM YYYY HH:mm")),e.trigger("change"),e.trigger("acy_change")}).open()})},t.setAjaxSelect2=function(){t(".acym_select2_ajax").each(function(){$placeholder=t(this).attr("data-placeholder"),$placeholder||($placeholder="- - -");var e=t(this).attr("data-ctrl");e||(e="dynamics");var _=t(this).attr("data-task");_||(_="trigger");var a={ctrl:e,task:_},i=t(this).attr("data-params");if(i){var o=JSON.parse(i);Object.assign(a,o)}t(this).select2({theme:"foundation",ajax:{url:AJAX_URL_ACYM,dataType:"json",delay:250,data:function(t){return a.search=t.term,a},processResults:function(e){var _=[];return e&&t.each(e,function(t,e){_.push({id:e[0],text:e[1]})}),{results:_}},cache:!0},minimumInputLength:3,width:"100%",allowClear:!0,placeholder:$placeholder})})},t.setAjaxSaveThumbnail=function(){var e=t("#editor_thumbnail"),_=t('[name="thumbnail"]'),a=AJAX_URL_ACYM+"&ctrl=mails&task=setNewThumbnail";return-1!==e.val().indexOf(".png")||(""===e.val()&&""!==_.val()?(e.val(_.val()),!0):""===_.val()&&""===e.val()?(e.val(""),!0):t.ajax({type:"POST",url:a,data:{content:e.val(),thumbnail:_.val()},success:function(t){e.val(t)}}))},t.setRSDateChoice=function(){t(".acym__button__clear__time").on("click",function(){var e=t(this).closest(".reveal").attr("id");t('[data-rs="'+e+'"]').val(""),t('[data-open="'+e+'"]').val("").trigger("change")}),t(".acym__button__set__time").on("click",function(){var e,_,a;"relative"===t(this).closest(".reveal").find(".date_rs_selection.is-active").attr("data-type")?(e=t(this),_=e.closest(".reveal"),a=parseInt(_.find(".relativenumber").val())*parseInt(_.find(".relativetype").val()),t('[data-rs="'+_.attr("id")+'"]').val("[time]"+(a>0?_.find(".relativewhen").val()+a:"")),t('[data-open="'+_.attr("id")+'"]').val("[time]"+(a>0?_.find(".relativewhen").val()+a:"")).trigger("change")):function(e){var _=e.closest(".reveal"),a=_.find('[name^="specific_"]');t('[data-rs="'+_.attr("id")+'"]').val(moment(a.val(),"DD MMM YYYY HH:mm").unix()),t('[data-open="'+_.attr("id")+'"]').val(a.val()).trigger("change")}(t(this))}),t(".date_rs_selection").off("click").on("click",function(e){e.preventDefault();var _=t(this).closest(".date_rs_selection_popup");_.find(".date_rs_selection").removeClass("is-active"),t(this).addClass("is-active"),_.find(".date_rs_selection_choice").hide(),_.find(".date_rs_selection_"+t(this).attr("data-type")).show()})},t.setSubmitButtonGlobal=function(){var e=!1,_={".acym__form__campaign__edit":['button[data-task="save"]','button[data-task="addQueue"]','button[data-task="saveAsDraftCampaign"]','button[data-task="confirmCampaign"]','li[data-task="edit"]','button[data-task="test"]','button[data-task="unpause_campaign"]'],".acym__form__mail__edit":['button[data-task="apply"]','button[data-task="save"]']};t.each(_,function(_,a){t(_).length>0&&t(window).on("beforeunload",function(_){if(!e)return t("#formSubmit").attr("disabled",!1),""})}),t(".acy_button_submit").off("click").on("click",function(a){if(void 0!==t(this).attr("data-force-submit")&&t("[required]").removeAttr("required"),t.each(_,function(_,i){t(_).length>0&&t.each(i,function(t,_){a.target.matches(_)&&(e=!0)})}),t(this).hasClass("disabled-button"))return!1;a.preventDefault();var i=t(this).attr("data-condition");if(i&&"function"==typeof t[i]&&!t[i]())return!1;var o=t(this).attr("data-confirmation-message");if(void 0!==o&&!t.acym_confirm(ACYM_JS_TXT[o]))return!1;var s=t("#acym_form"),n=t(this).attr("data-task");s.find('[name="task"]').val(n);var c=t(this).attr("data-step");null!=c&&s.find('[name="nextstep"]').val(c);var l=t(this).attr("data-and");null!=l&&s.append('<input type="hidden" value="'+l+'" name="and_action">');var r=s.find("#formSubmit");if(null==r[0]){var d=new MouseEvent("click");document.querySelector("#formSubmit").dispatchEvent(d)}else r.click()})},t(document).foundation(),t(".acym__select").select2({theme:"foundation",width:"100%"}),t(".acym__format__view").off("click").on("click",function(){t(".acym__format__view--current").removeClass("acym__format__view--current"),t(this).addClass("acym__format__view--current");var e=t(this).attr("format");t("#acym_listingformat").val(e),t(".acym__listing").addClass("acym__listing--hidden"),t(".acym__listing__view__"+e).removeClass("acym__listing--hidden")}),t.setSubmitButtonGlobal(),t(".acym__pagination__page").off("click").on("click",function(){t("#acym_pagination").val(t(this).attr("page")),t("#acym_form").submit()}),t(".acym__lists__filter__tags").off("change").on("change",function(){y()}),t(".acym__templates__filter__tags").off("change").on("change",function(){y()}),t(".acym__campaigns__filter__tags").off("change").on("change",function(){y()}),t(".acym__queue__filter__tags").off("change").on("change",function(){y()}),t(".acym__search__button").off("click").on("click",function(){y()}),t(".acym__type__choosen").off("click").on("click",function(){t("#acym__type-template").val(t(this).attr("data-type")),t(".acym_ordering_option").removeClass("is-active"),t(this).addClass("is-active"),y()}),t(".acym__filter__status").off("click").on("click",function(){t("#acym_filter_status").val(t(this).attr("status")),y()}),t(".acym_toggleable").off("click").on("click",function(){var e=t(this);e.attr("class","fa fa-circle-o-notch fa-spin");var _=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),s=TOGGLE_URL_ACYM+"&table="+_+"&field="+a+"&id="+i+"&value="+o;t.ajax({url:s,type:"GET"}).done(function(e){var o=t.parseJSON(e);t("[table="+_+"][field="+a+"][elementid="+i+"]").attr("newvalue",o.value).attr("class",o.classes)})}),t(".acym_toggle_delete").off("click").on("click",function(){var e=t(this),_=e.attr("confirmation");if(!_||t.acym_confirm(ACYM_JS_TXT.ACYM_ARE_YOU_SURE)){var a=e.attr("table"),i=e.attr("elementid"),o=TOGGLE_URL_ACYM+"&task=delete&table="+a+"&id="+i,s=e.attr("method");null!=s&&(o+="&method="+s),t.ajax({url:o,type:"GET"}).done(function(e){"mail"===a?t("#acym_form").submit():t(".grid-x[elementid="+i+"]").remove()})}}),t(".switch-label").off("click").on("click",function(){var e=t(this).attr("for");t('[data-switch="'+e+'"]').trigger("change")}),t(".acym_toggle_switch").off("change").on("change",function(){var e=t(this),_=e.attr("table"),a=e.attr("field"),i=e.attr("elementid"),o=e.attr("newvalue"),s=TOGGLE_URL_ACYM+"&table="+_+"&field="+a+"&id="+i+"&value="+o;t.ajax({url:s,type:"GET"}).done(function(_){var a=t.parseJSON(_);e.attr("newvalue",a.value)})}),t(".acym__listing__block__delete__trash").off("click").on("click",function(e){e.preventDefault();var _=t(this).closest(" .acym__listing__block__delete");_.css("width","auto"),_.find("i").css("width","0"),_.animate({maxWidth:_.parent().innerWidth()},"fast",function(){t(".acym__listing__block__delete__cancel",this).off("click").on("click",function(){m(t(this).closest(".acym__listing__block__delete"))})}),t(".acym__listing__block").off("mouseleave").on("mouseleave",function(){m(t(this).find(".acym__listing__block__delete"))})}),(e=t('input.acym_toggle[type="checkbox"]')).off("change").on("change",function(){var e=t("."+t(this).attr("data-toggle")),_=t(this).is(":checked"),a=t("#"+t(this).attr("data-value"));e.each(function(){var e=t(this);_?(e.hide(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").attr("data-abide-ignore",""),a&&a.val(1)):(e.show(),e.hasClass("acym_apply_data_abide_hide")||e.find("input").removeAttr("data-abide-ignore"),a&&a.val(0))})}),e.trigger("change"),t(".switch-label").on("click",function(){var e=t('input[data-switch="'+t(this).attr("for")+'"]');e.attr("value",1-e.attr("value"))}),t(".acym_template_option").off("click").on("click",function(){t(".acym_template_option").addClass("acym_template_option--clean"),t(".acym_template_option").prev().removeClass("selected_template").addClass("not_selected_template"),t(this).attr("template")==t("#acym_template").val()?(t("#acym_template").val(0),t(".acym_template_option").removeClass("acym_template_option--selected")):(t("#acym_template").val(t(this).attr("template")),t(".acym_template_option").removeClass("acym_template_option--selected"),t(this).prev().addClass("selected_template").removeClass("not_selected_template"),t(this).removeClass("acym_template_option--clean").addClass("acym_template_option--selected"))}),_=t("#acym__tags__field"),a=_.attr("placeholder"),_.select2({width:"100%",placeholder:a,tags:!0,tokenSeparators:[" "],createTag:function(e){var _=t.trim(e.term);return""===_?null:{id:"acy_new_tag_"+_,text:_,newTag:!0}}}),t.setDatePickerGlobal(),t(".acym__search-clear").off("click").on("click",function(){t(".acym__search-field").attr("value",""),y()}),function e(){t(".acym__wysid__hidden__save__content").off("change").on("change",function(){e()}),h("acym__wysid__email__preview","desktop"),t("#acym__wysid__view__desktop").off("click").on("click",function(){h("acym__wysid__fullscreen__modal__content","desktop",!0),t("#acym__wysid__fullscreen__modal").css({display:"inherit"}).find("iframe").contents().find('table[align="center"]').css({"margin-top":"30px","margin-bottom":"30px"})}),t("#acym__wysid__view__smartphone").off("click").on("click",function(){h("acym__wysid__fullscreen__modal__content","smartphone",!0),t("#acym__wysid__fullscreen__modal").css("display","inherit").find("iframe").css({"margin-top":"30px","margin-bottom":"30px"})})}(),t("#acym__listing__ordering").select2({theme:"sortBy",minimumResultsForSearch:1/0}),i={},t(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){return null==i.id?(i.id=t(this).attr("id"),void(i.style=t(this).attr("style"))):i.id!=t(this).attr("id")?(i.id=t(this).attr("id"),void(i.style=t(this).attr("style"))):void t(this).attr("style",i.style)}),t(".dropdown-pane").off("show.zf.dropdown").on("show.zf.dropdown",function(e){var _=t(this).position();t(this).css("margin-top",""),_.top+t(this).outerHeight()+100>t(window).height()?(t(this).css({"margin-top":"-80px"}),t(this).removeClass("dropdown-bottom dropdown-top"),t(this).addClass("dropdown-top")):(t(this).attr("data-position","bottom"),t(this).removeClass("dropdown-bottom dropdown-top"),t(this).addClass("dropdown-bottom"))}),t(".dropdown-pane").off("hide.zf.dropdown").on("hide.zf.dropdown",function(e){t(this).css("margin-top","")}),t("i.acym_radio_unchecked").on("click",function(){var e=t("#"+t(this).attr("data-radio"));e.click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),t(".acym_message i.fa-close").off("click").on("click",function(){t(this).parent().remove()}),(o=t('[data-toggle-switch]:not([data-toggle-switch=""])')).off("change").on("change",function(){var e=t(this).attr("data-toggle-switch-open");1!=t(this).val()&&"show"==e||1==t(this).val()&&"hide"==e?t("#"+t(this).attr("data-toggle-switch")).show():t("#"+t(this).attr("data-toggle-switch")).hide()}),o.each(function(e){var _=t(this).attr("data-toggle-switch-open");1==t(this).val()&&"show"==_||1!=t(this).val()&&"hide"==_?t("#"+t(this).attr("data-toggle-switch")).show():t("#"+t(this).attr("data-toggle-switch")).hide()}),t(".acym__button__file").off("click").on("click",function(){var e=t(this),_=e.prev();_.click(),_.off("change").on("change",function(){e.next().html(t(this).val().split("\\").pop())})}),t.setTooltip(),t(".acym__sortable__listing").sortable({items:".acym__listing__row",handle:".acym__sortable__listing__handle",animation:150,stop:function(e,_){var a=t(".acym__sortable__listing .acym__listing__row"),i=t(".acym__sortable__listing").attr("data-sort-ctrl"),o=[];a.each(function(e){o.push(t(this).attr("data-id-element"))}),o=JSON.stringify(o);var s=AJAX_URL_ACYM+"&ctrl="+i+"&task=setOrdering&order="+o;t.post(s,function(t){"error"==t&&console.log("Error can't order these elements")})}}),t.setAjaxSelect2(),t("#acym__reviews__footer__link").on("click",function(){var e=AJAX_URL_ACYM+"&ctrl=toggle&task=setDoNotRemindMe&value="+encodeURIComponent(t(this).attr("title"));t.get(e,function(e){""===(e=t.acym_parseJson(e)).error?t("#acym__reviews__footer").html(e.message):console.log(e.error)})}),t(".acym__do__not__remindme").on("click",function(){var e=t(this).attr("title");t('[data-news="'+e+'"]').remove();var _=AJAX_URL_ACYM+"&ctrl=toggle&task=setDoNotRemindMe&value="+encodeURIComponent(e);t.get(_,function(e){""!==(e=t.acym_parseJson(e)).error?console.log(e.error):location.reload()})}),t(".acym__toggle__arrow .acym__toggle__arrow__trigger").off("click").on("click",function(){var e=t(this).closest(".acym__toggle__arrow").children(".acym__toggle__arrow__contain");e.is(":visible")?(e.hide(),t(this).find("i").removeClass("acymicon-keyboard_arrow_up").addClass("acymicon-keyboard_arrow_down")):(e.show(),t(this).find("i").removeClass("acymicon-keyboard_arrow_down").addClass("acymicon-keyboard_arrow_up"))}),t('[data-toggle-select]:not([data-toggle-select=""])').on("change",function(){var e=t.acym_parseJson(t(this).attr("data-toggle-select")),_=t(this).val();t.each(e,function(e,a){e!=_?t(a).hide():t(a).show()})}).trigger("change"),"joomla"!=CMS_ACYM||(s=t("#acym__joomla__left-menu"),n=t("#acym__joomla__left-menu--toggle"),c=t("#acym__joomla__left-menu a span"),l=t("#acym__joomla__left-menu--toggle i"),s.css("top",t(".navbar").height()),t(".btn-subhead").hide(),"none"!=n.css("display")&&(s.hasClass("collapsed")?(c.hide(),s.css({width:"55px"}),l.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right")):(c.show(),s.css({width:"200px"}),l.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left")),r(),n.off("click").on("click",function(){s.hasClass("collapsed")?(s.removeClass("collapsed"),c.show(),s.css({width:"200px"}),l.removeClass("acymicon-keyboard_arrow_right").addClass("acymicon-keyboard_arrow_left"),d("menuJoomla","",365)):(s.addClass("collapsed"),c.hide(),s.css({width:"55px"}),l.removeClass("acymicon-keyboard_arrow_left").addClass("acymicon-keyboard_arrow_right"),d("menuJoomla","collapsed",365)),r()})),t(".btn-navbar").off("click").on("click",function(){s.hide()}),t("#acym__joomla__left-menu--show").off("click").on("click",function(){t(".btn-navbar").hasClass("collapsed")||(".nav-collapse".css("height","0px").removeClass("in"),t(".btn-navbar").removeClass("collapsed")),s.toggle()})),t(".acym_select_foundation").select2({theme:"foundation",width:"100%"}),t("#acym_form").length&&!t("#acym__editor__content").length?t(".reveal-overlay").appendTo("#acym_form"):t(".reveal-overlay").appendTo("#acym_wrapper"),t("#acym_wrapper").on("keypress",":input:not(textarea, input:text)",function(t){if(13==t.keyCode)return t.preventDefault(),!1}),t.setIntrojs=function(e,_){_=void 0!==_&&_;var a=TOGGLE_URL_ACYM+"&task=getIntroJSConfig";t.post(a,function(a){if((void 0===(a=JSON.parse(a))[e]||0==a[e]||_)&&!t(".introjs-tooltip").is(":visible")){for(var i=t.introContent,o=[],s=0;s<i.length;s++)t(""+i[s].element).attr("data-intro",i.text),o.push({element:document.querySelector(""+i[s].element),intro:i[s].text,position:void 0===i[s].position?"bottom":i[s].position});var n=introJs();n.setOptions({steps:o}),n.start(),t(".introjs-nextbutton").html(ACYM_JS_TXT.ACYM_NEXT),t(".introjs-prevbutton").html(ACYM_JS_TXT.ACYM_BACK),t(".introjs-skipbutton").html(ACYM_JS_TXT.ACYM_SKIP);var c=TOGGLE_URL_ACYM+"&task=toggleIntroJS&where="+e;t.post(c,function(t){})}})},t.acym_confirm=function(t){return confirm(t)},f(),t.acym_add_notification=function(e,_,a){null!=_&&-1!=t.inArray(_,["success","warning","error"])||(_="info"),null==a&&(a=0);var i="",o="fa-bell";"success"==_?o="fa-check-circle":"warning"==_?o="fa-exclamation-triangle":"error"==_&&(o="fa-exclamation-circle"),i+='<div class="callout acym__callout__'+_+'"',i+=a>0?' callout-timer="'+a+'" style="display: none"><div class="progress" role="progressbar"><div class="progress-meter" style="width: 0"></div></div>':' style="display: none">',i+='<i class="fa '+o+'"></i><div class="acym_notification_container">'+e+'</div><i class="fa fa-close"></i></div>',t("body").append(i),f()},setTimeout(function(){t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body").css("padding",0).css("margin",0).css("height","100%"),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find("body #acym_wrapper").css("min-height","100%")},1e3)}),jQuery(document).ready(function(t){t(".acym__wysid__modal__dynamic-text--close").off("click").on("click",function(){t("#acym__wysid__modal__dynamic-text").hide()}),t("#dtext_subject_button").off("click").on("click",function(e){e.preventDefault(),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),t("#acym__wysid__modal__dynamic-text").show()})}),jQuery(document).ready(function(t){t("#acym_form").on("submit",function(){"function"==typeof acyOnSaveEditor&&acyOnSaveEditor()})}),jQuery(document).ready(function(t){var e,_="",a=t(".acym__wysid__hidden__save__settings").val(),i={},o=!0,s="",n=t(".acym__wysid__hidden__save__stylesheet").val(),c=!1,l="",r=0,d={"#acym__wysid__background-colorpicker":{"background-color":"#efefef"},p:{"font-family":"Helvetica","font-size":"16px","font-weight":"normal","font-style":"normal",color:"#000000"},h1:{"font-family":"Helvetica","font-size":"34px","font-weight":"normal","font-style":"normal",color:"#000000"},h2:{"font-family":"Helvetica","font-size":"30px","font-weight":"normal","font-style":"normal",color:"#000000"},h3:{"font-family":"Helvetica","font-size":"28px","font-weight":"normal","font-style":"normal",color:"#000000"},h4:{"font-family":"Helvetica","font-size":"24px","font-weight":"normal","font-style":"normal",color:"#000000"},h5:{"font-family":"Helvetica","font-size":"20px","font-weight":"normal","font-style":"normal",color:"#000000"},h6:{"font-family":"Helvetica","font-size":"18px","font-weight":"normal","font-style":"normal",color:"#000000"}},m={facebook:{src:MEDIA_URL_ACYM+"/images/logo/facebook.png",link:"#",text:"Like"},twitter:{src:MEDIA_URL_ACYM+"/images/logo/twitter.png",link:"#",text:"Tweet"},pinterest:{src:MEDIA_URL_ACYM+"/images/logo/pinterest.png",link:"#",text:"pin it"},linkedin:{src:MEDIA_URL_ACYM+"/images/logo/linkedin.png",link:"#",text:"share"},instagram:{src:MEDIA_URL_ACYM+"/images/logo/instagram.png"},vimeo:{src:MEDIA_URL_ACYM+"/images/logo/vimeo.png"},wordpress:{src:MEDIA_URL_ACYM+"/images/logo/wordpress.png"},youtube:{src:MEDIA_URL_ACYM+"/images/logo/youtube.png"}};function y(){var e=t("#acym__wysid__template");e.css({overflow:"hidden","overflow-y":"auto"}),t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),t("img").each(function(){t(this).attr("width",t(this).width()).attr("height",t(this).height())}),t('[id^="template_version_"]').remove(),t("#acym__wysid__template *").contents().each(function(){this.nodeType===Node.COMMENT_NODE&&t(this).remove()}),e.find(".acym__wysid__column__element__td").css("outline-width","0px"),e.find("[contenteditable]").attr("contenteditable","false"),t("#acym__wysid__template a.acym__wysid__column__element__button").each(function(){var e,_,a,i,o,s,n,c,l=(e=t(this),_=parseInt(e.css("border-radius")),a=e.css("border-color"),i=e.css("background-color"),o=e.attr("href"),s='style = "width: '+e.outerWidth()+"; height:"+e.css("height").replace(/[^-\d\.]/g,"")+'"',n="color :"+e.css("color")+"; word-break:"+e.css("word-break")+"; font-family:"+e.css("font-family")+"; font-size:"+e.css("font-size")+";",c=e.html(),"\x3c!--[if mso]><v:roundrect "+s+' xmlns:v="urn:schemas-microsoft-com:vml" xmlns:w="urn:schemas-microsoft-com:office:word" href="'+o+'" style="v-text-anchor:middle;" arcsize="'+_+'%" strokecolor="'+a+'" fillcolor="'+i+'"><w:anchorlock/><center style="'+n+'">'+c+"</center></v:roundrect><![endif]--\x3e\x3c!--[if !mso]> --\x3e");t(this).before(l),t(this).after("\x3c!-- <![endif]--\x3e")}),t(".acym__wysid__hidden__save__stylesheet").val(t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()),o=!0,t("#acym_header").css("display",""),t(".acym__content").css("display",""),t("#acym__wysid").css("display","none"),t("#acym__wysid__edit").css("display",""),t(".mce-edit-focus").removeClass("mce-edit-focus"),e.find('[name^="mce_"]').remove(),t(".acym__wysid__hidden__save__content").val('<div id="acym__wysid__template" class="cell">'+e.html()+"</div>").trigger("change"),t(".acym__wysid__hidden__save__settings").val(JSON.stringify(i)),function(e){var _=t('[name="mail[name]"]'),a=t('[name="mail[subject]"]');""===a.val()&&a.val(ACYM_JS_TXT.ACYM_EMAIL_SUBJECT);""===_.val()&&_.val("campaigns"===e?ACYM_JS_TXT.ACYM_CAMPAIGN_NAME:ACYM_JS_TXT.ACYM_TEMPLATE_NAME);"mails"===e?t.when(t.setAjaxSaveThumbnail()).done(function(){h(e)}):h(e)}(t('[name="ctrl"]').val())}function h(e){t('input[name="task"]').val("saveAjax");var _=AJAX_URL_ACYM+"&ctrl="+e;t.ajax({type:"POST",url:_,data:t("#acym_form").serialize()}).done(function(_){""!==(_=t.acym_parseJson(_)).error?t.acym_add_notification(_.error,"error"):t("mail"===e?'[name="id"]':'[name="id"], [name="mail[id]"]').val(_.data)}).fail(function(t,e){alert("Request failed: "+e)})}function u(){t(".acym__wysid__right__toolbar__tabs").off("click").on("click",function(){!function(e){var _=t("#"+t(".acym__wysid__right__toolbar__selected").attr("data-attr-show")),a=t("#"+e.attr("data-attr-show"));if(_.attr("id")===a.attr("id"))return;var i=t(".acym__wysid__right__toolbar__tabs");i.removeClass("acym__wysid__right__toolbar__selected");var o={hide:"",show:""};i.each(function(){return t(this).attr("data-attr-show")===_.attr("id")?(o.hide="left",o.show="right",!1):t(this).attr("data-attr-show")===a.attr("id")?(o.hide="right",o.show="left",!1):void 0}),e.addClass("acym__wysid__right__toolbar__selected"),_.hide("slide",{direction:o.hide},200,function(){a.show("slide",{direction:o.show},200,function(){u()})})}(t(this))}),t(".acym__wysid__right__toolbar--menu .acym__wysid__right__toolbar__p").off("click").on("click",function(){t(this).next().slideToggle(200),t(this).hasClass("acym__wysid__right__toolbar__p__open")?t(this).removeClass("acym__wysid__right__toolbar__p__open"):t(this).addClass("acym__wysid__right__toolbar__p__open"),t(this).toggleClass("acym__wysid__right__toolbar__last--text")})}function f(){t(".acym__wysid__row").sortable({axis:"y",cursorAt:{top:20},scroll:!1,placeholder:"acym__wysid__row__element--placeholder",handle:".acym__wysid__row__element__toolbox__move",forcePlaceholderSize:!0,tolerance:"intersect",start:function(e,_){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),_.helper.first().addClass("acym__wysid__row__element--sortable"),t(_.placeholder).css({height:"75px"}),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover")},stop:function(e,_){t(".acym__wysid__row__element--sortable").removeClass("acym__wysid__row__element--sortable");var a=_.item;a.hasClass("acym__wysid__row__element--new--1")?p(a):a.hasClass("acym__wysid__row__element--new--2")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-6 large-6 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}(a):a.hasClass("acym__wysid__row__element--new--3")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}(a):a.hasClass("acym__wysid__row__element--new--4")?function(e){"<tbody>","<tr>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-6 medium-3 large-3 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}(a):a.hasClass("acym__wysid__row__element--new--5")?function(e){"<tbody>","<tr>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}(a):!a.hasClass("acym__wysid__row__element--new--6")||function(e){"<tbody>","<tr>",'<th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>",'<th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top">','<table class="acym__wysid__column"><tbody></tbody></table>',"</th>","</tr>","</tbody>","</table>",t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-12 medium-4 large-4 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th><th class="small-12 medium-8 large-8 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}(a),g(),D(),H()}})}function p(e){t(e).replaceWith('<table class="row acym__wysid__row__element" bgcolor="#ffffff" style="background-color: rgb(255, 255, 255);"><tbody><tr><th class="small-12 medium-12 large-12 columns acym__wysid__row__element__th" valign="top"><table class="acym__wysid__column"><tbody></tbody></table></th></tr></tbody></table>'),X(),v()}function g(){t("#insertDContent").off("click").on("click",function(e){e.preventDefault();var a=t("#dcontentcode").val();if(a){var i='<tr class="acym__wysid__column__element ui-draggable" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';i+='<td class="large-12 acym__wysid__column__element__td">';_.replaceWith(i+a.split("~").join("</td></tr>"+i)+"</td></tr>")}else _.replaceWith("");t("#acym__wysid__modal_plugins").css("display","none"),t("#dcontentcode").val(""),v(),X()}),t("#dcontentcode").off("click").on("click",function(){this.select()}),t(".acym__wysid__column tbody").sortable({scroll:!1,handle:".acym__wysid__column__element__toolbox__move",placeholder:"acym__wysid__column__element--placeholder",forcePlaceholderSize:!0,cursorAt:{top:20,left:50},stop:function(a,i){var o=i.item,s=o.attr("data-plugin");if(s){_=t(o),t("#acym__plugins__modal__options").html('<i class="fa fa-gear fa-spin centered_spinner text-center"/>'),t("#acym__wysid__modal_plugins").css("display","inherit");var n=AJAX_URL_ACYM+"&page=acymailing_lists&action=acymailing_router&noheader=1&ctrl=dynamics&task=trigger&trigger=contentPopup&plugin="+s;t.ajax({url:n,success:function(_){t("#acym__plugins__modal__options").html(_),t("i.acym_radio_unchecked").on("click",function(){t('label[for="'+t(this).attr("data-radio")+'"]').click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change(),t("#plugin_listing_filters select").off("change").on("change",function(){L()}),t('#plugin_listing_filters input[type="text"]').off("keyup").on("keyup",function(){var _=t(this).val();clearTimeout(e),_.length>=2?e=setTimeout(function(){L()},1e3):""==_&&L()}),t("#acym__plugins__modal__options select").select2({theme:"foundation"}),z(),t(document).foundation(),t(".tabs").each(function(){var e=t(this).attr("id"),_=localStorage.getItem("acy"+e),a=t("#"+e).find('a[data-tab-identifier="'+_+'"]');a.length?a.click():t("#"+e+" .acym_tab:first").click()}),t.setDatePickerGlobal(),t.setTooltip(),t("body > .reveal-overlay").appendTo("#acym__plugins__modal__options"),t.setRSDateChoice()}})}else o.hasClass("acym__wysid__column__element--new--title")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<h1>Title</h1>","</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><h1>Title</h1></div></td></tr>'),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--text")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div class="acym__wysid__tinymce--text">',"<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p>","</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--text"><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam in magna in leo volutpat congue vitae eu nibh. Lorem ipsum dolor sit amet, consectetur adipiscing elit. In varius sed ipsum vel egestas.</p></div></td></tr>'),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--picture")?"wordpress"==CMS_ACYM?b(o):k(o):o.hasClass("acym__wysid__column__element--new--button")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<div style="text-align: center;box-sizing: inherit;">','<a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 1; border-radius: 0" href="#">Button</a>',"</div>","</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><div style="text-align: center;box-sizing: inherit;"><a class="acym__wysid__column__element__button" style="background-color: #222222; color: white; padding: 25px 30px; max-width: 100%; overflow: hidden; border: 1px solid white; text-overflow: ellipsis; text-align: center; text-decoration: none; word-break: break-all;display: inline-block; box-shadow: none;font-family: Arial; font-size: 14px; cursor: pointer; line-height: 1; border-radius: 0" href="#">Button</a></div></td></tr>'),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--follow")?function(e){var _='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';_+='<td class="large-12 acym__wysid__column__element__td">',_+='<div style="text-align: center;">',_+='<p class="acym__wysid__column__element__follow" style="text-align: center; cursor: pointer; padding: 0;margin: 0;">',_+='<a class="acym__wysid__column__element__follow__facebook" href="">',_+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.facebook.src+'" width="40" alt="facebook">',_+="</a>",_+='<a class="acym__wysid__column__element__follow__twitter" href="">',_+='<img style="display: inline-block; max-width: 100%; height: auto;  box-sizing: border-box; width: 40px; padding: 3px;" src="'+m.twitter.src+'"  width="40" alt="twitter">',_+="</a>",_+="</p>",_+="</div>",_+="</td>",_+="</tr>",t(e).replaceWith(_),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--share")?function(e){var _='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';_+='<td class="large-12 acym__wysid__column__element__td">',_+='<div class="acym__wysid__column__element__share acym__wysid__column__element__share--add acy" style="text-align: center; margin-top: 10px; margin-bottom: 10px;">',_+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__facebook" href="'+m.facebook.link+'">',_+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.facebook.src+'" alt="'+m.facebook.src+'">',_+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.facebook.text+"</span>",_+="</a>",_+='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__twitter" href="'+m.twitter.link+'">',_+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m.twitter.src+'" alt="'+m.twitter.src+'">',_+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m.twitter.text+"</span>",_+="</a>",_+="</div>",_+="</td>",_+="</tr>",t(e).replaceWith(_),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--space")?function(e){'<td class="large-12 acym__wysid__column__element__td">','<span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span>',"</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><span class="acy-editor__space" style="display:block; padding: 0;margin: 0; height: 50px"></span></td></tr>'),v(),X()}(o):o.hasClass("acym__wysid__column__element--new--cms")?function(e){_=t(e),setModalCMSWYSID(),t("#acym__wysid__modal").css("display","inherit")}(o):o.hasClass("acym__wysid__column__element--new--video")?function(e){_=t(e),function(){var e='<div class="grid-container">';e+='<div class="grid-x grid-padding-x grid-padding-y">',e+='<div class="auto cell"></div>',e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/vimeo.png">',e+="</div>",e+='<div class="small-3 medium-3 cell" style="display: inline-flex">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/youtube.png">',e+="</div>",e+='<div class="small-4 medium-3 cell" style="display: inline-flex; padding: 15px 0 0 30px;">',e+='<img alt="" style="display: block; margin: auto; max-height: 50px" src="'+MEDIA_URL_ACYM+'images/dailymotion.png">',e+="</div>",e+='<div class="auto cell"></div>',e+='<div class="small-8 medium-10 cell">',e+='<input id="acym__wysid__modal__video__search" type="text" placeholder="Url">',e+="</div>",e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__load" class="button primary expanded smaller-button" href="#">Load</button>',e+="</div>",e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__fields").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div id="acym__wysid__modal__video__result" class="medium-12 cell"></div>',e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__display").html(e),e='<div class="grid-container">',e+='<div class="grid-x grid-padding-x">',e+='<div class="small-8 medium-10 cell"></div>',e+='<div class="small-4 medium-2 cell">',e+='<button type="button" id="acym__wysid__modal__video__insert" class="button primary expanded disabled" href="#">Insert</button>',e+="</div>",e+="</div>",e+="</div>",t("#acym__wysid__modal__ui__search").html(e);var a=t("#acym__wysid__modal__video__load"),i=t("#acym__wysid__modal__video__insert"),o=t("#acym__wysid__modal__video__search"),s=t("#acym__wysid__modal__video__result");a.off("click").on("click",function(){var e=o.val();i.unbind("click").click(function(){_.replaceWith('<tr class="acym__wysid__column__element"><td class="large-12 acym__wysid__column__element__td"><div class="acym__wysid__tinymce--image"><p>'+s.html()+"</p></div></td></tr>"),I(),t("#acym__wysid__modal").css("display","none"),X(),v()});var a=e.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/),n=e.match(/^(?:(?:http|https):\/\/)?(?:www.)?(dailymotion\.com|dai\.ly)\/((video\/([^_]+))|(hub\/([^_]+)|([^\/_]+)))$/),c=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);null!=a?(s.html('<a href="https://www.youtube.com/watch?v='+a[1]+'"><img alt="" src="https://img.youtube.com/vi/'+a[1]+'/0.jpg" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block;margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")):null!=n?(null!==n&&(void 0!==n[4]&&s.html('<a href="https://www.dailymotion.com/video/'+n[4]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+n[4]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),s.html('<a href="https://www.dailymotion.com/video/'+n[2]+'"><img alt="" src="https://www.dailymotion.com/thumbnail/video/'+n[2]+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>')),i.removeClass("disabled")):null!=c?t.ajax({url:"https://www.vimeo.com/api/v2/video/"+c[5]+".json",dataType:"jsonp",success:function(t){s.html('<a href="https://vimeo.com/'+c[5]+'"><img alt="" src="'+t[0].thumbnail_large+'" style="max-width: 100%; height: auto; box-sizing: border-box; padding: 0 5px; display: block; margin-left: auto; margin-right: auto;"/></a>'),i.removeClass("disabled")}}):(s.html('<div class="acym__wysid__error_msg" style="text-align: center; margin-top: 100px;">'+ACYM_JS_TXT.ACYM_NON_VALID_URL+"</div>"),i.addClass("disabled").off("click")),s.unbind("click").click(function(t){t.preventDefault()})}),o.keyup(function(t){var e=t.which;13==e&&t.preventDefault(),13!=e&&188!=e&&186!=e||a.click()})}(),t("#acym__wysid__modal").css("display","inherit"),v()}(o):o.hasClass("acym__wysid__column__element--new--separator")&&function(e){'<td class="large-12 acym__wysid__column__element__td">','<hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator">',"</td>","</tr>",t(e).replaceWith('<tr class="acym__wysid__column__element acym__wysid__column__element__separator cursor-pointer" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;"><td class="large-12 acym__wysid__column__element__td"><hr style="border-bottom: 3px solid black; width: 100%; border-top: none; border-left: none; border-right: none;" class="acym__wysid__row__separator"></td></tr>'),v(),X()}(o)},change:function(){D()},out:function(){setTimeout(function(){D()},1)},receive:function(t,e){e.item.hasClass("acym__wysid__column__element--new")||(e.item.remove(),v(),X())},start:function(){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}})}function w(){t(".acym__wysid__column__element").draggable({cursor:"move",helper:"clone",revert:"invalid",handle:".acym__wysid__column__element__toolbox__move",cursorAt:{top:20,left:50},connectToSortable:".acym__wysid__column tbody",revertDuration:300,start:function(e,_){_.helper.first().addClass("acym__wysid__column__element--helper"),t(this).addClass("acym__wysid__column__element__original--helper"),t(".acym__wysid__column").addClass("acym__wysid__column--drag-start")},stop:function(){t(".acym__wysid__column__element--helper").removeClass("acym__wysid__column__element--helper"),t(".acym__wysid__column__element__original--helper").removeClass("acym__wysid__column__element__original--helper"),t(".acym__wysid__column").removeClass("acym__wysid__column--drag-start"),t(".acym__wysid__column__element").css({position:"relative",top:"inherit",left:"inherit",right:"inherit",bottom:"inherit",height:"auto"}),H()}})}function v(){var e,_,a,i,o;H(),t(".acym__wysid__media__inserted").length>0&&setTimeout(function(){var e=t(".acym__wysid__media__inserted");e.attr("height",e.height()).attr("width",e.width()),e.removeClass("acym__wysid__media__inserted")},200),f(),I(),w(),g(),e=t(".acym__wysid__template__content"),t("#acym__wysid__background-colorpicker").spectrum({color:e.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){S("#acym__wysid__background-colorpicker","background-color",t.toHexString())},change:function(t){S("#acym__wysid__background-colorpicker","background-color",t.toHexString())}}),t(".acym__wysid__column__element__button").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault(),t(".acym__context__color__picker").remove(),t(".acym__wysid__column__element__button--focus").removeClass("acym__wysid__column__element__button--focus"),t(this).addClass("acym__wysid__column__element__button--focus");var _=t(this);B(t("#acym__wysid__context__button__background-color"),"background-color",_,_,"background-color"),B(t("#acym__wysid__context__button__border-color"),"border-left-color",_,_,"border-color"),B(t("#acym__wysid__context__button__color"),"color",_,_,"color");var a=t("#acym__wysid__context__button");t("#acym__wysid__context__button__border-radius").val(_.css("border-radius").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){_.css("border-radius",t(this).val()+"px")}),t("#acym__wysid__context__button__border-width").val(_.css("border-left-width").replace(/[^-\d\.]/g,"")).off("change paste keyup").on("change paste keyup",function(){_.css("border-width",t(this).val()+"px")}),t("#acym__wysid__context__button__font-family").val(_.css("font-family").replace(/['"]/g,"")).off("change").on("change",function(){_.css("font-family",t(this).val())}),t("#acym__wysid__context__button__font-size").val(_.css("font-size").replace(/[^-\d\.]/g,"")).off("change").on("change",function(){_.css("font-size",t(this).val()+"px")}),t("#acym__wysid__context__button__text").val(_.text()).off("change paste keyup").on("change paste keyup",function(){_.text(t(this).val())}),t("#acym__wysid__context__button__link").val(_.attr("href")).off("change paste keyup").on("change paste keyup",function(){_.attr("href",t(this).val())}),t("#acym__wysid__context__button__bold").css("background-color",700==_.css("font-weight")?"":"inherit").off("click").on("click",function(){700==_.css("font-weight")?t("#acym__wysid__context__button__bold").css("background-color","inherit")&&_.css("font-weight","inherit"):t("#acym__wysid__context__button__bold").css("background-color","")&&_.css("font-weight",700)}),t("#acym__wysid__context__button__italic").css("background-color","italic"==_.css("font-style")?"":"inherit").off("click").on("click",function(){"italic"==_.css("font-style")?t("#acym__wysid__context__button__italic").css("background-color","inherit")&&_.css("font-style","inherit"):t("#acym__wysid__context__button__italic").css("background-color","")&&_.css("font-style","italic")}),t(".acym__wysid__context__button__align").each(function(){t(this).css("background-color","acym__wysid__context__button__align__"+_.closest("div").css("text-align")===t(this).attr("id")?"":"inherit"),t(this).off("click").on("click",function(){_.closest("div").css("text-align",t(this).attr("data-align")),t(".acym__wysid__context__button__align").css("background-color","inherit"),t(this).css("background-color","")})}),t(".acym__button__padding__input").each(function(){t(this).val(_.css(t(this).attr("name")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(){_.css(t(this).attr("name"),t(this).val()+"px")})}),t("#acym__wysid__context__button__font-family").select2({theme:"foundation",width:"40%"}),t("#acym__wysid__context__button__font-size").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),t("#acym__wysid__context__button__border-width").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),t("#acym__wysid__context__button__border-radius").select2({theme:"foundation",width:"15%",minimumResultsForSearch:1/0}),a.find(".switch-input").off("change"),("100%"===document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&!a.find(".switch-input").is(":checked")||"100%"!==document.getElementsByClassName("acym__wysid__column__element__button--focus")[0].style.width&&a.find(".switch-input").is(":checked"))&&a.find(".switch-paddle").click();var i=a.find(".slider-handle");i.each(function(){var e,a,i;"slider__output__button__width"===t(this).attr("aria-controls")?(e="left",a=_.css("padding-right").replace(/[^-\d\.]/g,""),i=90*a/100,t(this).next().css("width",a+"%")):(e="top",a=_.css("padding-top").replace(/[^-\d\.]/g,""),i=77*a/100,t(this).next().css("height",a+"%")),t(this).css(e,i+"%"),t("#"+t(this).attr("aria-controls")).val(a)}),a.find(".switch-input").on("change",function(){var e,a;t(this).is(":checked")?(e="100%",a="0"):(e="auto",a=t("#slider__output__button__width").val()+"px"),_.css({width:e,"padding-right":a,"padding-left":a})}),t(".acym__wysid__context__button__slider").on("moved.zf.slider",function(){var e=t("#"+t(this).attr("data-output")).val(),a="slider__output__button__width"!==t(this).attr("data-output")?{"padding-top":e+"px","padding-bottom":e+"px"}:{"padding-right":e+"px","padding-left":e+"px"};_.css(a)}),W(a),t.setTooltip(),a.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).on("mousedown",function(){t(".sp-container").is(":visible")||(t(this).off("mousedown"),G(a),t(window).unbind("click"),v(),X())})}),t(".acy-editor__space").unbind("click").click(function(e){e.stopPropagation(),t(".acym__context__color__picker").remove();var _=t(this),a=t("#acym__wysid__context__space"),i=a.find(".slider-handle");W(a);var o=_.height();i.css("left",o+"%"),a.find(".slider-fill").css("width",o+"%"),t("#sliderOutput1").val(o),t(".acy-editor__space--focus").removeClass("acy-editor__space--focus"),_.addClass("acy-editor__space--focus");var s=t("#acym__wysid__context__space__slider");s.on("moved.zf.slider",function(){t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px")}),s.on("changed.zf.slider",function(){v()}),a.off("mousedown").on("mousedown",function(e){t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px"),e.stopPropagation()}),t(window).on("mousedown",function(){t(".acy-editor__space--focus").css("height",t("#sliderOutput1").val()+"px"),t(this).off("mousedown"),G(a),t(window).unbind("click"),v(),X()})}),function e(){t(".acym__wysid__column__element__follow").off("click").on("click",function(_){_.stopPropagation(),t(".acym__wysid__column__element__follow--focus").removeClass("acym__wysid__column__element__follow--focus"),t(this).addClass("acym__wysid__column__element__follow--focus"),t("#acym__wysid__context__follow__list").empty(),t("#acym__wysid__context__follow__select").html("<option></option>");var a=t(".acym__wysid__column__element__follow--focus img").eq(0);l=a.length?a.css("width").replace(/[^-\d\.]/g,"")<=80?a.css("width").replace(/[^-\d\.]/g,"")>=30?a.eq(0).css("width").replace(/[^-\d\.]/g,""):30:80:40,t("#acym__wysid__context__social__width").val(l);for(var i=["facebook","twitter","instagram","linkedin","pinterest","vimeo","wordpress","youtube"],o=0,s=i.length;o<s;o++){var n=0;t(".acym__wysid__column__element__follow--focus a").each(function(){if(-1!==t(this).attr("class").indexOf(i[o])){var _=i[o];n=1;var a='<div class="grid-x small-12 cell acym__wysid__context__follow__list__item">';a+='<div class="small-3 cell">',a+='<img style="height: auto;  box-sizing: border-box; width: 42px; padding: 5px; margin-left: 5px" src="'+m[_].src+'" alt="">',a+="</div>",a+='<div class="small-7 cell">',a+='<div class="input-group small-12 cell">',a+='<input id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+_+'" type="text" placeholder="https://" value="'+t(this).attr("href")+'">',a+="</div>",a+="</div>",a+='<div class="auto cell">',a+='<p class="acym__wysid__context__follow__list__remove acym__wysid__context__follow__list__remove--'+_+'" aria-hidden="true"></p>',a+="</div>",a+="</div>",t("#acym__wysid__context__follow__list").append(a),t(".acym__wysid__context__follow__list__remove--"+_).off("click").on("click",function(){var a=t(".acym__wysid__column__element__follow--focus");a.find(".acym__wysid__column__element__follow__"+_).remove(),t(this).closest(".acym__wysid__context__follow__list__item").remove(),e(),a.click()}),t(".acym__wysid__context__button__link--"+_).off("change paste keyup").on("change paste keyupe",function(){t(".acym__wysid__column__element__follow--focus").find(".acym__wysid__column__element__follow__"+_).attr("href",t(this).val())})}}),0==n&&t("#acym__wysid__context__follow__select").append(new Option("",i[o],!1,!1)).trigger("change")}var c=t(this),l=c.innerWidth(),r=t("#acym__wysid__context__follow");t(".acym__wysid__context__follow__align").each(function(){t(this).css("background-color","acym__wysid__context__follow__align__"+c.css("text-align")===t(this).attr("id")?"":"inherit"),t(this).off("click").on("click",function(){c.css("text-align",t(this).attr("data-align")),t(".acym__wysid__context__follow__align").css("background-color","inherit"),t(this).css("background-color","")})}),W(r),t("#acym__wysid__context__follow__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:x,templateSelection:x}),r.off("mousedown").on("mousedown",function(t){t.stopPropagation()}),t(window).on("mousedown",function(){t(this).off("mousedown"),G(r),t(window).unbind("click"),v(),X()}),t("#acym__wysid__context__follow__select").off("select2:select").on("select2:select",function(_){var a=_.params.data.id;l=t("#acym__wysid__context__social__width").val()<=80?t("#acym__wysid__context__social__width").val()>=30?t("#acym__wysid__context__social__width").val():30:80;var i='<a class="acym__wysid__column__element__follow__'+a+'" href="">';i+='<img style="display: inline-block; max-width: 100%; height: auto; box-sizing: border-box; width: '+l+'px; padding: 3px;" src="'+m[a].src+'" width="'+l+'" alt="">',i+="</a>",t(".acym__wysid__column__element__follow--focus").append(i),e(),t(".acym__wysid__column__element__follow--focus").click()}),t("#acym__wysid__context__social__width").off("change").on("change",function(){l=t("#acym__wysid__context__social__width").val()<=80?t("#acym__wysid__context__social__width").val()>=30?t("#acym__wysid__context__social__width").val():30:80,t(".acym__wysid__column__element__follow--focus img").css("width",l).attr("width",l)})});t(".acym__wysid__column__element__follow a").unbind("click").click(function(t){t.preventDefault()})}(),function e(){t(".acym__wysid__column__element__share").off("click").on("click",function(_){_.stopPropagation(),t(".acym__context__color__picker").remove(),t(".acym__wysid__column__element__share--focus").removeClass("acym__wysid__column__element__share--focus"),t(this).addClass("acym__wysid__column__element__share--focus"),t("#acym__wysid__context__share__list").empty(),t("#acym__wysid__context__share__select").html("<option></option>");var a=t(".acym__wysid__column__element__share--focus span").eq(0),i=t("#acym__wysid__context__social__share__width");i.attr("value",a.length?a.css("font-size").replace(/[^-\d\.]/g,"")<=40?a.css("font-size").replace(/[^-\d\.]/g,"")>=15?a.eq(0).css("font-size").replace(/[^-\d\.]/g,""):15:40:20),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",i.attr("value")+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(i.attr("value"))+15+"px");for(var o=["facebook","twitter","linkedin","pinterest"],s=[],n=0,c=o.length;n<c;n++){var l=0;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social").each(function(_){if(-1!=t(this).attr("class").indexOf(o[n])){var a=o[n];l=1;var i='<div id="acym__wysid__context__share__list__item" class="grid-x small-12 cell">';i+='<div class="small-2 cell acym__wysid__context__share__list__item__'+a+'">',i+='<img style="width: 35px;display: inline; margin-left: 10px;" src="'+m[a].src+'" alt="'+m[a].src+'"/>',i+="</div>",i+='<div class="small-8 cell">',i+='<div class="input-group small-12 cell">',i+='<input maxlength="15" id="acym__wysid__context__button__link" class="input-group-field acym__wysid__context__button__link--'+a+'" type="text" value="'+t(this).children("span").html()+'">',i+="</div>",i+="</div>",i+='<div class="auto cell">',i+='<p class="acym__wysid__context__share__list__remove acym__wysid__context__share__list__remove--'+a+'" aria-hidden="true"></p>',i+="</div>",i+="</div>",t("#acym__wysid__context__share__list").append(i),t(".acym__wysid__context__share__list__remove--"+a).off("click").on("click",function(){var _=a;t(".acym__wysid__column__element__share--focus").find(".acym__wysid__column__element__share__"+_).remove(),e(),t(".acym__wysid__column__element__share--focus").click()}),t(".acym__wysid__context__button__link--"+a).off("change paste keyup").on("change paste keyup",function(){var e=a;t(this).val().length>15?t(this).val(t(this).val().substr(0,15)):t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__"+e+" span").html(t(this).val())})}}),0==l&&t("#acym__wysid__context__share__select").append(new Option("",o[n],!1,!1)).trigger("change")}t(".acym__wysid__column__element__share__social").off("click").on("click",function(t){t.preventDefault()});var r=t(this).parent(),d=r.offset(),y=r.innerHeight(),h=r.innerWidth(),u=t("#acym__wysid__context__share"),f=u.innerHeight(),p=t("#wpadminbar").innerHeight()+5,g=t("nav.navbar").innerHeight()+5,w=t(window).width(),v=d.top-f<p+g?d.top+y-p+5:d.top-p-f;u.css({display:"inherit",top:v,left:w>800?d.left-t("#adminmenuback").innerWidth()+h/2-u.innerWidth()/2:d.left+h/2-u.innerWidth()/2}),t("#acym__wysid__context__share__select").select2({minimumResultsForSearch:-1,placeholder:"+",selectOnClose:!1,closeOnSelect:!0,templateResult:C,templateSelection:C}),u.unbind("click").click(function(t){t.stopPropagation()}),t(window).click(function(){u.css({display:"none"}),t(window).unbind("click")}),t("#acym__wysid__context__share__select").off("select2:select").on("select2:select",function(_){var a=_.params.data.id;s.push(a);var o='<a style="display: inline-block" class="acym__wysid__column__element__share__social acym__wysid__column__element__share__'+a+'" href="'+m[a].link+'">';o+='<img style="vertical-align: middle; width: 30px; display: inline; margin-right: 5px;" src="'+m[a].src+'" alt="'+m[a].src+'">',o+='<span style="color: #303e46; vertical-align: middle; margin-right: 10px; font-size: 15px">'+m[a].text+"</span>",o+="</a>",t(".acym__wysid__column__element__share--focus").append(o);var n=i.val()<=40?i.val()>=15?i.val():15:40;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",n+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(n)+15+"px"),e(),t(".acym__wysid__column__element__share--focus").click()}),i.off("change").on("change",function(){var e=i.val()<=40?i.val()>=15?i.val():15:40;t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social span").css("font-size",e+"px"),t(".acym__wysid__column__element__share--focus .acym__wysid__column__element__share__social img").css("width",parseInt(e)+15+"px")})});t(".acym__wysid__column__element__share__social").off("click").on("click",function(t){t.preventDefault()})}(),O(T(t("#acym__wysid__right__toolbar__settings__font--select").val(),"color")),E(),_=t("#acym__wysid__right__toolbar__settings__bold"),a=t("#acym__wysid__right__toolbar__settings__italic"),(i=t("#acym__wysid__right__toolbar__settings__font--select")).on("change",function(){E()}),t("#acym__wysid__right__toolbar__settings__font-family").on("change",function(){S(t("#acym__wysid__right__toolbar__settings__font--select").val(),"font-family",t(this).val())}),t("#acym__wysid__right__toolbar__settings__font-size").on("change",function(){S(t("#acym__wysid__right__toolbar__settings__font--select").val(),"font-size",t(this).val())}),_.off("click").on("click",function(){_.hasClass("acym__wysid__right__toolbar__settings__bold--selected")?_.removeClass("acym__wysid__right__toolbar__settings__bold--selected")&&S(i.val(),"font-weight","normal"):_.addClass("acym__wysid__right__toolbar__settings__bold--selected")&&S(i.val(),"font-weight","bold")}),a.off("click").on("click",function(){a.hasClass("acym__wysid__right__toolbar__settings__italic--selected")?a.removeClass("acym__wysid__right__toolbar__settings__italic--selected")&&S(i.val(),"font-style","normal"):a.addClass("acym__wysid__right__toolbar__settings__italic--selected")&&S(i.val(),"font-style","italic")}),j(),D(),function e(){t(window).off("resize").on("resize",function(){e()});var _=0;_="wordpress"==CMS_ACYM?t("#wpadminbar").innerHeight():t("nav.navbar").innerHeight()+t("#status").innerHeight();var a=t(window).width()>639?56:0;var i=t("#acym__wysid__top-toolbar").innerHeight();t("#acym__wysid").css("min-height",t(window).height()-(a+_));t("#acym__wysid__template").css({"max-height":t(window).height()-(a+_+i+64),"min-height":t(window).height()-(a+_+i+64)});t(".acym__wysid__right-toolbar__content").css("max-height",t(window).height()-(a+_+48))}(),J(),t(".acym_dynamic").off("click").on("click",function(){var e=window.getSelection(),_=document.createRange();_.selectNode(this),e.removeAllRanges(),e.addRange(_),t("#acym__wysid__modal__dynamic-text__ui__iframe").contents().find('input[name="dtextcode"]').val(""),t("#acym__wysid__modal__dynamic-text").show()}),t(".acym_remove_dynamic").off("click").on("click",function(){t(this).closest("span").remove(),v(),X()}),t("#acym__wysid__template").find("p").css("word-break","break-word"),(o=navigator.userAgent).toLowerCase().indexOf("chrome")>-1||o.toLowerCase().indexOf("firefox")>-1?(t("p").find("code").css("white-space","pre-wrap"),t("pre").css("white-space","pre-wrap"),t("code").css("white-space","pre-wrap")):o.indexOf("MSIE ")>-1||o.indexOf("Trident/")>-1?(t("pre").css("word-wrap","break-word"),t("code").css("word-wrap","break-word")):o.toLowerCase().indexOf("opera")>-1&&(t("pre").css("white-space","-o-pre-wrap"),t("code").css("white-space","-o-pre-wrap")),t(".acym__wysid__tinymce--text").on("click",function(){setTimeout(function(){t.introContent=[{element:".mce-widget .mce-i-codesample",text:ACYM_JS_TXT.ACYM_INTRO_ADD_DTEXT,position:"right"}],t.setIntrojs("mail_editor_dtext")},200)}),t(".acym__wysid__column__element__separator").off("click").on("click",function(e){e.stopPropagation(),t(".acym__context__color__picker").remove();var _=t(this).find("hr:first");t("#sliderOutput2").val(_.css("border-bottom-width").replace(/[^-\d\.]/g,"")),B(t("#acym__wysid__context__separator__color"),"border-bottom-color",_,_,"border-bottom-color");var a=t(".acym__wysid__context__separator__kind");a.removeClass("separator-selected"),a.each(function(){t(this).find("hr").attr("data-kind")==_.css("border-bottom-style")&&t(this).addClass("separator-selected")}),a.off("click").on("click",function(){a.removeClass("separator-selected"),t(this).addClass("separator-selected"),_.css("border-bottom-style",t(this).find("hr").attr("data-kind"))});var i=t("#acym__wysid__context__separator__slide"),o=t("#acym__wysid__context__separator__slide__width");i.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==i.css("display")&&_.css("border-bottom-width",t("#sliderOutput2").val()+"px")}),o.off("moved.zf.slider").on("moved.zf.slider",function(){"none"!==i.css("display")&&_.css("width",t("#sliderOutput3").val()-5+"%")});var s=t("#acym__wysid__context__separator");W(s),s.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).on("mousedown",function(){t(".sp-container").is(":visible")||(t(this).off("mousedown"),G(s),t(window).off("click"),v(),X())})}),N()}function b(e,_){var a,i=t(e).html();_=void 0!==_&&_,(a=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",function(){var i=a.state().get("selection").first().toJSON(),o=!0;if(i.url.indexOf("..")>=0&&(o=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),o)if(_){var s=t(e).css("padding-top");t(e).hasClass("acym__wysid__template__content")?(t(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center top; background-repeat: no-repeat; padding: "+s+" 0 40px 0"),"none"!==t(e).css("background-image")&&t("#acym__wysid__background-image__template-delete").css("display","flex")):(t(e).css("background-color","").attr("bgcolor",""),t(e).attr("style","background-image: url('"+i.url+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+s+" 0").attr("width",t(e).width())),t.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)}else{var n='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';n+='<td class="large-12 acym__wysid__column__element__td">',n+='<div class="acym__wysid__tinymce--image">',n+='<img class="acym__wysid__media__inserted acym__wysid__media__inserted--focus" src="'+i.url+'" alt="'+i.title+'" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;"/>',n+="</div>",n+="</td>",n+="</tr>",t(e).replaceWith(n),t(".acym__wysid__media__inserted--focus").on("load",function(){t(this).removeClass("acym__wysid__media__inserted--focus"),v(),X()})}else _||(t(e).replaceWith(""),v(),X())}),a.on("escape",function(){_||(-1!==i.indexOf("insert_photo")&&t(e).replaceWith(""),v(),X())}),a.open()}function k(e,a){a=void 0!==a&&a,_=t(e);var i=t("#acym__wysid__modal__joomla-image__ui__iframe");i.css("height","100%").css("width","100%"),i.contents().find(".chzn-container-single").attr("style","").css("width","150px"),M(i,a),i.on("load",function(){M(i,a)}),t("#acym__wysid__modal__joomla-image").css("display","inherit")}function x(e){return e.id?t('<span><img src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function C(e){return e.id?t('<span><img style="margin-left: 5px" src="'+m[e.element.value.toLowerCase()].src+'"/>'+e.text+"</span>"):e.text}function A(){t(".acym__wysid__row__selector").off("click").on("click",function(e){e.stopPropagation(),e.preventDefault();var _="#ffffff";t(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),t(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus");var a,i,o,s=t(this).closest(".acym__wysid__row__element"),n=t(this);n.addClass("acym__wysid__row__selector--focus"),n.closest(".acym__wysid__row__element").addClass("acym__wysid__row__element--focus"),B(t("#acym__wysid__context__block__background-color"),"background-color",s,s,"background-color"),B(t("#acym__wysid__context__block__border__color"),"border-color",s,s,"border-color"),a=s,t("#acym__wysid__context__block__background-color").spectrum({color:a.css("background-color"),preferredFormat:"hex",showButtons:!1,showInput:!0,showInitial:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){a.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),a.css("background-image","")},change:function(t){a.css("background-color",t.toHexString()).attr("bgcolor",t.toHexString()),a.css("background-image","")}}),i=s,o=t("#acym__wysid__context__block__background-image__remove"),"none"!==i.css("background-image")?o.show():o.hide(),t("#acym__wysid__context__block__background-image").off("click").on("click",function(){"wordpress"===CMS_ACYM?b(i,!0):k(i,!0)}),o.off("click").on("click",function(){i.css({"background-image":"none"}),t(this).hide()}),"transparent"===s.css("background-color")&&t(".acym__wysid__context__block__transparent__bg").click(),t('[name="transparent_background"]').next().off("change").on("change",function(){t(this).is(":checked")?(_=s.css("background-color"),s.css("background-color","transparent").attr("bgcolor","transparent")):s.css("background-color",_).attr("bgcolor",_)});let c=t("#acym__wysid__context__block__custom_id");c.val(s.attr("id")),c.off("keyup").on("keyup",function(e){32===e.which&&e.preventDefault(),s.attr("id",t(this).val())}),t("[data-block-padding]").each(function(){t(this).val(s.css("padding-"+t(this).attr("data-block-padding")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(e){t(this).val()>20&&(t(this).val(20),e.stopPropagation()),s.css("padding-"+t(this).attr("data-block-padding"),t(this).val()+"px"),"top"!==t(this).attr("data-block-padding")&&"bottom"!==t(this).attr("data-block-padding")||n.css("height",s.height()+parseInt(s.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(s.css("padding-bottom").replace(/[^-\d\.]/g,""))+"px")})}),t(".acym__wysid__context__block__border__actions").each(function(){t(this).val(s.css(t(this).attr("data-css")).replace(/[^-\d\.]/g,"")),t(this).off("change").on("change",function(e){if(t(this).val()>parseInt(t(this).attr("max"))&&(t(this).val(parseInt(t(this).attr("max"))),e.stopPropagation()),s.css(t(this).attr("data-css"),t(this).val()+"px"),"border-width"===t(this).attr("data-css")){s.css("border-style",0===t(this).val()?"none":"solid");var _=t(".acym__wysid__template__content").offset(),a=n.closest(".acym__wysid__row__element").offset(),i=s.height()+parseInt(s.css("padding-top").replace(/[^-\d\.]/g,""))+parseInt(s.css("padding-bottom").replace(/[^-\d\.]/g,""))+2*parseInt(s.css("border-width").replace(/[^-\d\.]/g,""));n.css({left:"-"+(a.left-_.left+parseInt(n.closest(".acym__wysid__row__element").css("border-width").replace(/[^-\d\.]/g,"")))+"px",height:i,top:0-parseInt(s.css("border-width").replace(/[^-\d\.]/g,""))+"px"})}})});var l=t("#acym__wysid__context__block");W(l),l.off("mousedown").on("mousedown",function(e){t(".sp-container").addClass("sp-hidden").attr("style",""),e.stopPropagation()}),t(window).off("mousedown").on("mousedown",function(e){t(e.target).hasClass("acym__wysid__row__selector")||t(".sp-container").is(":visible")||(t(".acym__wysid__row__selector--focus").removeClass("acym__wysid__row__selector--focus"),t(".acym__wysid__row__element--focus").removeClass("acym__wysid__row__element--focus"),_="#ffffff",t(this).off("mousedown"),G(l),v(),X())})})}function M(e,a){e.contents().find(".button-cancel").attr("onclick","").off("click").on("click",function(){t("#acym__wysid__modal__joomla-image").hide(),a||(_.length&&-1!==_.html().indexOf("insert_photo")&&_.replaceWith(""),v(),X(),D())}),e.contents().find(".pull-right .btn-success, .pull-right .btn-primary").attr("onclick","").off("click").on("click",function(){var i=e.contents().find("#f_url").val(),o=e.contents().find("#imageframe").contents().find(".img-preview"),s=!1,n=!0;if(o.each(function(){if(t(this).hasClass("selected")&&(t(this).find(".imgThumbInside img").attr("src").indexOf("..")>=0&&(n=confirm(ACYM_JS_TXT.ACYM_INSERT_IMG_BAD_NAME)),n)){if(a){var e=_.css("padding-top");_.hasClass("acym__wysid__template__content")?(_.attr("style","background-image: url('"+t(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0 40px 0"),"none"!==_.css("background-image")&&t("#acym__wysid__background-image__template-delete").css("display","flex")):(_.css("background-color","").attr("bgcolor",""),_.attr("style","background-image: url('"+t(this).find(".imgThumbInside img").attr("src")+"'); background-size: cover; background-position: center; background-repeat: no-repeat; padding: "+e+" 0").attr("width",_.width())),t.acym_add_notification(ACYM_JS_TXT.ACYM_BECARFUL_BACKGROUND_IMG,"warning",0)}else{var i='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';i+='<td class="large-12 acym__wysid__column__element__td">',i+='<div class="acym__wysid__tinymce--image">',i+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+t(this).find(".imgThumbInside img").attr("src")+'" alt="'+t(this).attr("title")+'"/>',i+="</div>",i+="</td>",i+="</tr>",_.replaceWith(i)}t("#acym__wysid__modal__joomla-image").css("display","none"),v(),X(),s=!0}}),!s&&""!==i){var c='<tr class="acym__wysid__column__element" style="position: relative; top: inherit; left: inherit; right: inherit; bottom: inherit; height: auto;">';return c+='<td class="large-12 acym__wysid__column__element__td">',c+='<div class="acym__wysid__tinymce--image">',c+='<img class="acym__wysid__media__inserted" style="max-width: 100%; height: auto;  box-sizing: border-box; padding: 0 5px;display:block; margin-left: auto; margin-right: auto;" src="'+(i=i.match("^images/")?ACYM_JOOMLA_MEDIA_IMAGE+i:i)+'" alt="'+t(this).attr("title")+'"/>',c+="</div>",c+="</td>",c+="</tr>",_.replaceWith(c),t("#acym__wysid__modal__joomla-image").css("display","none"),v(),X(),void(s=!0)}0!=s||1!=n||alert("Please select a picture"),s=!1})}function T(t,e){return void 0!==i[t]&&i[t][e]&&void 0!==i[t][e]?i[t][e]:d[t][e]}function S(t,e,_){null!=i[t]||(i[t]={}),i[t][e]=_,j()}function Y(e){t.each(d[e],function(_){t(".acym__wysid__column__element "+e).css(_,T(e,_))})}function j(){Y("p"),Y("h1"),Y("h2"),Y("h3"),Y("h4"),Y("h5"),Y("h6"),t(".acym__wysid__template__content").css("background-color",T("#acym__wysid__background-colorpicker","background-color"))}function E(){var e=t("#acym__wysid__right__toolbar__settings__bold"),_=t("#acym__wysid__right__toolbar__settings__italic"),a=t("#acym__wysid__right__toolbar__settings__font--select").val(),i=t("#acym__wysid .acym__wysid__template__content"),o=t("#acym__wysid__background-image__template-delete");t("#acym__wysid__right__toolbar__settings__font-family").val(T(a,"font-family")).trigger("change"),t("#acym__wysid__right__toolbar__settings__font-size").val(T(a,"font-size")).trigger("change"),e.val("bold"==T(a,"font-weight")?e.addClass("acym__wysid__right__toolbar__settings__bold--selected"):e.removeClass("acym__wysid__right__toolbar__settings__bold--selected")),_.val("italic"==T(a,"font-style")?_.addClass("acym__wysid__right__toolbar__settings__italic--selected"):_.removeClass("acym__wysid__right__toolbar__settings__italic--selected")),O(T(a,"color")),Y(a),t("#acym__wysid__background-image__template").off("click").on("click",function(){"wordpress"==CMS_ACYM?b(i,!0):k(i,!0)}),"none"!==i.css("background-image")&&o.css("display","flex"),o.off("click").on("click",function(){i.css("background-image","none"),t(this).hide()});var s=t("#acym__wysid__padding__top__content");s.val(i.css("padding-top").replace(/[^-\d\.]/g,"")),s.off("change").on("change",function(){i.css("padding-top",t(this).val()+"px")})}function R(e){var _="";return t.parsecss(e,function(e){t("#acym__wysid__custom__style").remove();var a=e;for(var i in a){var o=a[i];for(var s in _+="#acym__wysid__template .body "+i+"{",o)_+=s+":"+o[s]+";";_+="} "}}),_}function O(e){var _=t("#acym__wysid__right__toolbar__settings__color"),a=t("#acym__wysid__right__toolbar__settings__font--select").val();_.spectrum({color:""!=e?e:"black",preferredFormat:"hex",showButtons:!1,showInput:!0,showPalette:!0,palette:[["#fff"],["#000"]],maxSelectionSize:1,move:function(t){S(a,"color",t.toHexString())},change:function(t){S(a,"color",t.toHexString())}})}function I(){tinymce.remove("div"),tinymce.init({selector:".acym__wysid__tinymce--text",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code acydtext noneditable",image_class_list:[{title:"Responsive",value:"img-responsive"}],fontsize_formats:"10px 12px 14px 18px 20px 24px 28px 30px 34px 36px",toolbar:["undo redo formatselect fontsizeselect | code acydtext","alignleft aligncenter alignright | bold italic | forecolor backcolor | link unlink"],preview_styles:!1,block_formats:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6",init_instance_callback:function(t){t.on("click",function(){U()}),t.off("change").on("change",function(t){j()}),t.on("blur",function(t){t.target.startContent!==t.target.bodyElement.innerHTML&&X(),H()})}}),tinyMCE.execCommand("mceAddEditor",!0,""),tinymce.init({selector:".acym__wysid__tinymce--image",inline:!0,menubar:!1,plugins:"textcolor colorpicker lists link code noneditable",toolbar:["alignleft aligncenter alignright | link unlink"],image_class_list:[{title:"Responsive",value:"img-responsive"}],preview_styles:!1,init_instance_callback:function(t){N(),t.on("click",function(){U()}),t.on("Change",function(){j()}),t.on("blur",function(){H()})},formats:{alignleft:{selector:"img",styles:{float:"left",marginTop:"-10px",marginBottom:"10px"}},alignright:{selector:"img",styles:{float:"right",marginTop:"-10px",marginBottom:"10px"}}},style_formats:[{title:"Align left",format:"alignleft"},{title:"Align right",format:"alignright"}],themes:"modern"}),tinyMCE.execCommand("mceAddEditor",!0,"")}function D(){t(".acym__wysid__row").each(function(){0==t(this).children().length?(t(".acym__wysid__row").append('<div id="acym__wysid__row__temp_div"></div>'),p(t("#acym__wysid__row__temp_div")),H(),D()):t(this).css({"min-height":"0",display:"table-cell"})}),t(".acym__wysid__column tbody").each(function(){0==t(this).children().length?t(this).css({"min-height":"75px",display:"block"}).closest("table").css("min-height","75px").css("display","block"):t(this).css({"min-height":"0px",display:"table-row-group"}).closest("table").css("min-height","0").css("display","table")})}function J(){t(".acym__template__choose__ajax").off("DOMSubtreeModified").on("DOMSubtreeModified",function(){t(".acym__template__choose__list .acym__templates__oneTpl").off("click").on("click",function(e){e.preventDefault();var _=t(this).find("a").attr("href"),a=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getMailContent&from="+t(this).attr("id");t.post(a,function(t){return"error"==t?(alert(ACYM_JS_TXT.ACYM_ERROR),!1):(window.location.href=_,!1)})})})}function L(){var e=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=trigger&trigger=displayListing";if(t("#plugin_listing_filters input, #plugin_listing_filters select").each(function(){e+="&"+t(this).attr("name")+"="+t(this).val()}),e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&plugin="+t('input[name="plugin"]').val(),void 0!==_selectedRows){var _=[];for(var a in _selectedRows)_selectedRows.hasOwnProperty(a)&&_.push(a);e+="&selected="+_.join(",")}t.post(e,function(e){t("#plugin_listing").html(e),z()})}function z(){t(".acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),t("#acym_pagination__ajax").attr("value",t(this).attr("page")),L()})}function U(){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove()}function N(){t(".acym__wysid__tinymce--image img").off("dblclick").on("dblclick",function(){"wordpress"===CMS_ACYM?b(t(this).closest(".acym__wysid__column__element")):k(t(this).closest(".acym__wysid__column__element"))})}function X(e=!1){t('[id^="template_version_"]').length>=10&&t('[id^="template_version_"]')[0].remove();for(var _=r+1;t("#template_version_"+_).length>0;)t("#template_version_"+_).remove(),_++;r++,t('[name^="mce_"]').remove(),t(".acym__wysid__column--drag-start").removeClass("acym__wysid__column--drag-start"),t(".acym__editor__area").append('<input type="hidden" value="" id="template_version_'+r+'">');var a=t("#acym__wysid__template").html();if(t("#template_version_"+(r-1)).val()===a)return!1;t("#template_version_"+r).val(a);var i=t("#acym__campaign__recipients__form__campaign");if(0==i.length||i.length>0&&0!=i.val()){var o=t(t.parseHTML('<div id="acym__wysid__template-save" class="cell">'+a+"</div>")[0]);o.find(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),o=o.html();var s=t("#editor_mailid").val();if(null!=s&&""!=s&&0!=s&&0==e){var n=AJAX_URL_ACYM+"&ctrl=mails&task=autoSave";t.ajax({type:"POST",url:n,data:{autoSave:o,mailId:s},success:function(t){P(t),setTimeout(function(){P("end")},1e3)},error:function(){P("error"),setTimeout(function(){P("end")},1e3)}})}}}function P(e){null!=e&&"end"==e?(t(".acym__wysid__autosave__status__success").hide(),t(".acym__wysid__autosave__status__fail").hide()):null!=e&&"saved"==e?(t(".acym__wysid__autosave__status__success").show(),t(".acym__wysid__autosave__status__fail").hide()):(t(".acym__wysid__autosave__status__success").hide(),t(".acym__wysid__autosave__status__fail").show())}function H(){setTimeout(function(){t(".acym__wysid__row__selector, .acym__wysid__element__toolbox").remove(),t(".acym__wysid__row__element").css("z-index","100").each(function(){var e=t(this).find("> tbody");""!==e.css("background-color")&&void 0!==e.css("background-color")&&"inherit"!==e.css("background-color")&&"rgba(0, 0, 0, 0)"!==e.css("background-color")&&(t(this).css("background-color",e.css("background-color")),e.css("background-color","inherit").attr("bgcolor","")),t(this).prepend('<div class="acym__wysid__row__selector"></div>')});var e=t(".acym__wysid__template__content"),_=e.css("width").replace(/[^-\d\.]/g,""),a=e.offset();t(".acym__wysid__row__selector").each(function(){var e=t(this).closest(".acym__wysid__row__element"),i=e.offset(),o=""===e.css("border-width")?0:parseInt(e.css("border-width").replace(/[^-\d\.]/g,"")),s=""===e.css("padding-bottom")?0:parseInt(e.css("padding-bottom").replace(/[^-\d\.]/g,"")),n=e.height()+parseInt(e.css("padding-top").replace(/[^-\d\.]/g,""))+s+2*o,c="-"+(Math.round(i.left)-Math.round(a.left)+o)+"px";t(this).css({width:_+"px",height:n,left:c,top:0-o+"px"}),t(this).attr("style",t(this).attr("style")+"width: "+_+"px; height: "+n+"left: "+c+"top: "+(0-o)+"px");t(this).append('<div  class="acym__wysid__row__toolbox"><i class="acymicon-content_copy acym__wysid__row__toolbox__copy acym__wysid__row__toolbox__actions"></i><i class="fa fa-arrows acym__wysid__row__element__toolbox__move acym__wysid__row__toolbox__actions"></i><i class="acymicon-delete acym__wysid__row__toolbox__actions acym__wysid__row__toolbox__delete__row"></i></div><div class="acym__wysid__row__height__container"><i class="acymicon-code acym__wysid__row__toolbox__height"></i></div>')}),t(".acym__wysid__column__element").each(function(){t(this).append('<div class="acym__wysid__element__toolbox"><i class="acymicon-content_copy acym__wysid__element__toolbox__copy acym__wysid__element__toolbox__actions"></i><i class="fa fa-arrows acym__wysid__column__element__toolbox__move acym__wysid__element__toolbox__actions"></i><i class="acymicon-delete acym__wysid__element__toolbox__actions acym__wysid__element__toolbox__delete"></i></div>')}),t(".acym__wysid__row__toolbox__copy").unbind("click").click(function(){t(this).closest(".acym__wysid__row__element").clone().insertAfter(t(this).closest(".acym__wysid__row__element")),v(),X()}),t(".acym__wysid__row__toolbox__delete__row").off("click").on("click",function(){t(this).closest(".acym__wysid__row__element").remove(),v(),X()}),t(".acym__wysid__element__toolbox__copy").off("click").on("click",function(){var e=t(this).closest(".acym__wysid__column__element");e.clone().insertAfter(e),v(),X()}),t(".acym__wysid__element__toolbox__delete").off("click").on("click",function(){var e=t(this).closest(".acym__wysid__column__element");e.closest("th").removeClass("margin_padding_none").find("margin_padding_none").removeClass("margin_padding_none"),e.remove(),v(),X()}),t(".acym__wysid__row__toolbox__height").off("mousedown").on("mousedown",function(){c=!0,l=t(this).closest("table").css({"border-collapse":"initial","border-spacing":""}),t(document).on("mousemove",function(t){if(c){var e=l.offset().top,_=t.pageY-(e-10);l.find("th:first").height(_).attr("height",_),l.find(".acym__wysid__row__selector").css("height",l.css("height"))}}),t(document).off("mouseup").on("mouseup",function(){c=!1,H()})}),f(),w(),A()},150)}function W(e){t(".acym__wysid__context__modal").hide(),t("#acym__wysid__right__toolbar__block__tab").click(),e.show(),t(".acym__wysid__right__toolbar__current-block__empty").hide(),t("#acym__wysid__right__toolbar__current-block").off("mousedown").on("mousedown",function(t){t.stopPropagation()}),u()}function G(e){e.hide(),t(".acym__wysid__right__toolbar__current-block__empty").show()}function B(t,e,_,a,i){t.spectrum({color:a.css(e),preferredFormat:"hex",showButtons:!1,showInput:!0,move:function(t){_.css(i,t.toHexString())},change:function(t){_.css(i,t.toHexString())},containerClassName:"acym__context__color__picker"})}!(t("#acym__wysid").length>0)||function(){t("#acym__wysid__right__toolbar__settings__font-family").select2({theme:"foundation",width:"100%"}),t("#acym__wysid__right__toolbar__settings__font-size").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),t("#acym__wysid__right__toolbar__settings__font--select").select2({theme:"foundation",width:"100%",minimumResultsForSearch:1/0}),i=""==a?{}:JSON.parse(a);var e,c,l=t("#editor_autoSave").val(),d='<div id="acym__wysid__template" class="cell">'+l+"</div>";null!=l&&""!=l&&(t.acym_confirm(ACYM_JS_TXT.ACYM_AUTOSAVE_USE)?(t(".acym__wysid__hidden__save__content").val(d),t(".acym__wysid #acym__wysid__template").replaceWith(l),t("#acym__wysid__preview__iframe__acym__wysid__email__preview").contents().find("#acym__wysid__template").replaceWith(d)):t(".acym__wysid__hidden__save__content").val('<div id="acym__wysid__template" class="cell">'+t("#acym__wysid__template").html()+"</div>"),t("#editor_autoSave").val("")),t("#editor_thumbnail").val(""),t("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+R(n)+"</style>"),t.ui.plugin.add("draggable","connectToSortable104",{start:function(e,_,a){var i=t(this).data("ui-draggable"),o=(i.options,t.extend({},_,{item:i.element}));i.sortables=[],t(a.options.connectToSortable104).each(function(){var _=t(this).sortable("instance");_&&!_.options.disabled&&(i.sortables.push({instance:_,shouldRevert:_.options.revert}),_.refreshPositions(),_._trigger("activate",e,o))})},stop:function(e,_,a){var i=t(this).data("ui-draggable"),o=t.extend({},_,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,o))})},drag:function(e,_,a){var i=t(this).data("ui-draggable"),o=this;t.each(i.sortables,function(){var a=!1,s=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return _.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t(".acym__wysid__column__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__column tbody",revert:function(t){if(!t)return H(),!0},revertDuration:300,start:function(e,_){t(_.helper).css({width:t(this).width()+"px",opacity:1}),t(".acym__wysid__column").addClass("acym__wysid__column--drag-start"),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover")},stop:function(){t(".acym__wysid__column").removeClass("acym__wysid__column--drag-start")}}),g(),t(".acym__wysid__row__element--new").draggable({cursor:"move",helper:"clone",cursorAt:{top:12,left:40},connectToSortable104:".acym__wysid__row",revert:function(t){if(!t)return H(),!0},revertDuration:300,start:function(e,_){t(_.helper).css({width:t(this).width()+"px",opacity:1}),t(".acym__wysid__column__element").unbind("hover"),t(".acym__wysid__row__element").unbind("hover")}}),H(),t("#acym__wysid__edit__button").off("click").on("click",function(){"none"!==t("#acym__wysid .acym__wysid__template__content").css("background-image")&&t("#acym__wysid__background-image__template-delete").hide(),o=!1,t(".acym__wysid__row__element__toolbox__colorpicker").spectrum("destroy"),t(".sp-container").remove(),t("#acym_header").css("display","none"),t(".acym__content").css("display","none"),t("#acym__wysid").css("display","inherit"),t("#acym__wysid__edit").css("display","none"),t("#acym__wysid__template").replaceWith(t(".acym__wysid__hidden__save__content").val()),a=""!=t(".acym__wysid__hidden__save__settings").val()?t(".acym__wysid__hidden__save__settings").val():"",i=""==a?{}:JSON.parse(a),""!=t(".acym__wysid__hidden__save__stylesheet").val()&&(n=t(".acym__wysid__hidden__save__stylesheet").val(),t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(n)),H(),v(),X(!0)}),t("#acym__wysid__cancel__button").off("click").on("click",function(){o=!0,t("#acym_header").css("display",""),t(".acym__content").css("display",""),t("#acym__wysid").css("display","none"),t("#acym__wysid__edit").css("display",""),t(".acym__wysid__hidden__save__stylesheet").val(n)}),t("#acym__wysid__save__button").off("click").on("click",function(){var e=t("#acym__wysid__template");e.css({overflow:"unset","overflow-y":"unset"});var _=document.getElementById("acym__wysid__template");domtoimage.toPng(_).then(function(e){t("#editor_thumbnail").attr("value",e),y()}).catch(function(t){y(),console.error("Error generating template thumbnail: "+t)})}),t(".acym__wysid__modal--close").click(function(){t(".acym__wysid__modal").hide(),_.length&&"TR"!=_.prop("tagName")&&_.replaceWith(""),D(),t("#dcontentcode").val("")}),t("#acym__wysid__fullscreen__modal__close").off("click").on("click",function(){v(),t("#acym__wysid__fullscreen__modal").css("display","none")}),"joomla"==CMS_ACYM&&t(".acym__wysid__modal__joomla-image--close").click(function(){t("#acym__wysid__modal__joomla-image").hide(),_.length&&"TR"!=_.prop("tagName")&&!_.hasClass("acym__wysid__template__content")&&_.replaceWith(""),D()}),u(),v(),J(),(e=t("#acym__wysid__modal__dynamic-text__ui__iframe")).on("load",function(){t(this).contents().find("#wpadminbar").remove(),e.contents().find("#insertButton").off("click").on("click",function(){var _=e.contents().find("#dtextcode").val();if(_){if(o){var a=t("#acym_subject_field");a.val(a.val()+_)}else{var i=t('input[name="editor_autoSave"]').val(),s=AJAX_URL_ACYM+"&page=acymailing_dynamics&ctrl=dynamics&task=replaceDummy&mailId="+i+"&code="+encodeURIComponent(_);t.post(s,function(t){t&&0!=t.indexOf("<style")||(t=_),_='<span class="acym_dynamic mceNonEditable" data-dynamic="'+_+'">'+t+'<i class="acym_remove_dynamic acymicon-close">&zwj;</i></span> ',window.getSelection().getRangeAt(0).extractContents(),tinymce.activeEditor.execCommand("mceInsertContent",!1,_),v(),X()})}t("#acym__wysid__modal__dynamic-text").hide()}}),e.contents().find(".acym__dynamics__choose__type__users").off("click").on("click",function(){e.contents().find(".selected-type-dynamics").removeClass("selected-type-dynamics"),t(this).addClass("selected-type-dynamics")})}),t("#acym__wysid__right__toolbar__settings__stylesheet__apply").off("click").on("click",function(){var e=t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val();t(".acym__wysid__hidden__save__stylesheet").val(e),t("#acym__wysid__edit").append('<style id="acym__wysid__custom__style">'+R(e)+"</style>"),t("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),t("#acym__wysid__right__toolbar__settings__stylesheet__open").on("click",function(){s=t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val()}),t("#acym__wysid__right__toolbar__settings__stylesheet__cancel").on("click",function(){t("#acym__wysid__right__toolbar__settings__stylesheet__textarea").val(s),t("#acym__wysid__right__toolbar__settings__stylesheet__modal").foundation("close")}),t(document).keydown(function(e){if(!(void 0!==tinyMCE.focusedEditor&&null!==tinyMCE.focusedEditor||t("#acym__wysid__context__button").is(":visible")||t("#acym__wysid__context__follow").is(":visible")||t("#acym__wysid__context__separator").is(":visible")||t("#acym__wysid__context__share").is(":visible")||90!==e.which||!e.ctrlKey&&!e.metaKey||r<=0))if(!e.shiftKey&&t("#template_version_"+(r-1)).length>0){if(0===t("#template_version_"+(r-1)).val().length)return;r--,t("#acym__wysid__template").html(t("#template_version_"+r).val()),0===r&&X(),v()}else if(e.shiftKey&&t("#template_version_"+(r+1)).length>0){if(0===t("#template_version_"+(r+1)).val().length)return;r++,t("#acym__wysid__template").html(t("#template_version_"+r).val()),v()}}),c=t("#acym__wysid__session--lifetime").val(),setTimeout(function(){alert(ACYM_JS_TXT.ACYM_SESSION_IS_GOING_TO_END)},1e3*(c-60)),h=JSON.parse(t("#acym__mail__edit__editor__social__icons").val()),void 0!==h&&(t.each(Object.keys(h),function(t,e){m[e].src=h[e]}),t(".acym__wysid__social__icons__import__text").off("click").on("click",function(){var e=t(this),_=e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input");_.click(),_.off("change").on("change",function(){var _=t(this).val().split("\\").pop();e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find(".acym__wysid__social__icons__import__delete").remove(),void 0===_||""===_?(e.html(ACYM_JS_TXT.ACYM_SELECT_NEW_ICON),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled")):(e.html(_).after('<i class="acymicon-close cell shrink acym__wysid__social__icons__import__delete cursor-pointer"></i>'),e.closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").removeAttr("disabled")),t(".acym__wysid__social__icons__import__delete").off("click").on("click",function(){t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("button").attr("disabled","disabled"),t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input").val("").trigger("change"),t(this).remove()})})}),t(".acym__wysid__social__icons__import").off("click").on("click",function(){t(this).closest("div").find(".acym__wysid__social__icons__import__delete").html("").attr("class","fa fa-circle-o-notch fa-spin acym__wysid__social__icons__import__delete").css("color","#303e46");var e=t(this).closest(".acym__wysid__right__toolbar__design__social__icons__one").find("input"),_=e.prop("files")[0],a=new FormData;a.append("file",_);var i=e.attr("name").replace("icon_",""),o=AJAX_URL_ACYM+"&ctrl=mails&task=setNewIconShare&social="+i;t.ajax({url:o,dataType:"text",cache:!1,contentType:!1,processData:!1,data:a,type:"post",success:function(_){var a=t("img").filter('[src^="'+_+'"]');t.each(a,function(e,a){var i=new Date;t(this).removeAttr("src").attr("src",_+"?d="+i.getTime())}),m[i].src=_,e.val("").trigger("change"),t.acym_add_notification(ACYM_JS_TXT.ACYM_ICON_IMPORTED,"success",7e3)}})})),t("#acym_wrapper").keydown(function(t){if(13==t.keyCode&&"TEXTAREA"!=t.target.nodeName)return t.preventDefault(),!1}),t("#acym__walkthrough__email").length>0&&(t("#acym__wysid").parent().insertAfter("#acym__walkthrough__email"),t("#acym__wysid__modal__dynamic-text").insertAfter("#acym__walkthrough__email"));var h}()});var _selectedRows=[];function setDContent(t){jQuery("#dcontentcode").val(t)}jQuery(document).ready(function(t){var e,_;e=[],_=!1,t(document).on("invalid.zf.abide",function(_,a){t("#formSubmit")[0].disabled=!1;var i=function(t){var e=t.attr("type"),_=t.attr("pattern"),a=t.attr("required"),i=new Array;return null!=a&&i.push(ACYM_JS_TXT.requiredMsg+"."),"email"==e?i.push(ACYM_JS_TXT.email):"text"==e&&(null!=_&&null!=ACYM_JS_TXT[_]?i.push(ACYM_JS_TXT[_]):i.push(ACYM_JS_TXT.defaultMsg)),i.join(" ")}(a);a.after('<div class="acym__input-error"><i class="fa fa-exclamation-circle"></i>'+i+"</div>");var o=t(".acym__input-error");setTimeout(function(){o.remove()},5e3),e=[]}).on("valid.zf.abide",function(_,a){if("email"==a.attr("type")&&""!=a.val())e[0]=null==e[0]?0:e[0],e[0]=t.acym_emailValid(a.val())&&""!=a.val()?0:e[0]+1;else if("acym__campaign__sendsettings__send-type-scheduled__date"==a.attr("id")){var i=moment(a.prop("value"),"DD MMM YYYY HH:mm");e[1]=null==e[1]?0:e[1],e[1]=i<moment()?e[1]+1:0,!(i<moment())||t.acym_add_notification("You can't set a sending date in the past","error","5000")}}).on("submit",function(a){e[3]=null==e[3]?0:e[3],t("#acym__users__export").length>0&&"list"===t('input[name="export_users-to-export"]:checked').val()&&"[]"===t("#acym__users__export #acym__modal__lists-selected").val()?(e[3],t.acym_add_notification(ACYM_JS_TXT.ACYM_EXPORT_SELECT_LIST,"error",5e3)):t("#acym__users__export").length>0&&"list"===t('input[name="export_users-to-export"]:checked').val()&&"[]"!==t("#acym__users__export #acym__modal__lists-selected").val()&&(e[3]=0),e.length>0&&t.each(e,function(t,e){e>0&&(_=!0)}),_?(t("#formSubmit")[0].disabled=!1,a.preventDefault(),_=!1):(t("#formSubmit")[0].disabled=!0,_=!1)})}),jQuery(document).ready(function(t){var e;(e=t("#checkVersionButton")).on("click",function(){var e=t("#checkVersionArea");e.html('<i class="fa fa-circle-o-notch fa-spin"></i>');var _=AJAX_URL_ACYM+"&ctrl=update&task=checkForNewVersion";t.get(_,function(_){_=t.acym_parseJson(_),e.html(_.content),t("#acym__check__version__last__check").html(_.lastcheck)})}),1===e.data("check")&&e.click()}),jQuery(document).ready(function(t){var e;function _(t){0==t.val()?t.addClass("fieldAssignmentError"):t.removeClass("fieldAssignmentError")}(e=t("#acym__users__import__from_file__import__input")).val(null),e.off("change").on("change",function(){var _=t("#acym_form");this.files.length>0&&("text/csv"===this.files[0].type||"application/vnd.ms-excel"===this.files[0].type)&&"csv"===this.files[0].name.substr(this.files[0].name.length-3)&&(t(".acym__users__import__from_file__file-name").html(this.files[0].name),t(".acym__users__import__from_file__file").show(),t(".acym__users__import__from_file__choose").hide(),t(".acym__users__import__from_file__button-valid").removeAttr("disabled"),t(".acym__users__import__from_file__file__close").off("click").on("click",function(){t(".acym__users__import__from_file__file-name").html(""),t(".acym__users__import__from_file__button-valid").prop("disabled",!0),t(".acym__users__import__from_file__file").hide(),t(".acym__users__import__from_file__choose").show(),e.val(null)}),t(".acym__users__import__from_file__button-valid").off("click").on("click",function(){_.find('[name="import_from"]').val("file"),_.submit()}))}),t(".acym__users__import__generic__import__button").off("click").on("click",function(){var e=t("#modal__pagination__create__list").val();""==e||t("#acym__import__new-list").attr("value",e),"no-list"!=t(this).attr("id")||t("#acym__modal__lists-selected").attr("value","")&&t("#acym__import__new-list").attr("value","");var a=!0,i="",o="",s=!1,n="",c=[],l=t("#formSubmit"),r=t("#acym__users__import__from_file__ignore__checkbox").is(":checked"),d=t(".fieldAssignment").length;isNaN(d)&&(d=1);for(var m=0;m<d;m++){var y=t("#fieldAssignment"+m);0==(o=y.val())&&(r?(y.val(1),o=1):(_(y),a=!1,i+="\nAssign the column "+(m+1)+" to a field")),"email"==o&&(s=!0),1!=o&&-1!=c.indexOf(o)?(a=!1,i+='\nDuplicate field "'+o+'" for the column '+(m+1)):c.push(o),n+=","+o}if(s||(a=!1,i+="\nPlease assign a column for the e-mail field"),0==a)return alert("Please fill all information\n"+i),!1;","==n.substr(0,1)&&(n=n.substring(1)),t("#import_columns").val(n),l.click()}),t(".acym__users__import__button").off("click").on("click",function(){t("#acym__import__new-list").attr("value",t("#modal__pagination__create__list").val());var e=t("#acym__users__import__from_database").is(":visible")?t("#submit_import_database"):t("#submit_import_cms");e.click()}),t(".acym__import__submit").on("click",function(){var e=t(this).attr("data-from"),_=t("#acym_form");_.find('[name="import_from"]').val(e),_.find("#formSubmit").click()}),t("#acyencoding").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=ajaxEncoding&encoding="+t(this).val()+"&filename="+t(this).attr("data-filename"),_="",a=t(".fieldAssignment").length;isNaN(a)&&(a=1);for(var i=0;i<a;i++)_+="&fieldAssignment"+i+"="+t("#fieldAssignment"+i).val();e+=_,jQuery.post(e,function(e){t("#acym__users__import__generic__matchdata").html(e)})}),t("#acym__users__import__from_database__field--tablename").off("change").on("change",function(){var e=AJAX_URL_ACYM+"&ctrl=users&task=getColumnsFromTable&tablename="+t(this).val();jQuery.post(e,function(e){t(".acym__users__import__from_database__fields").html(e)})}),t("#acym__users__import__from_database__field--tablename").select2({theme:"foundation",width:"100%"}),t("#acym__users__import__from_database").keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1})}),jQuery(document).ready(function(t){var e;t("#listing_actions").select2({theme:"foundation",minimumResultsForSearch:1/0}),(e=t('[name="elements_checked[]"]')).off("change").on("change",function(){var e=t('[name="elements_checked[]"]:checked').length;if(1===e?t(".acym__campaign__duplicate").show():t(".acym__campaign__duplicate").hide(),e>0?t("#select2-listing_actions-container").parent().parent().parent().show():t("#select2-listing_actions-container").parent().parent().parent().hide(),t('[name="elements_checked[]"]:not(:checked)').length>0?t("#checkbox_all").prop("checked",!1):t("#checkbox_all").prop("checked",!0),t("#acym__users").length){var _=t("#acym__users__listing__number_to_export"),a=t("#acym__users__listing__number_to_add_to_list"),i=t("#acym__users__listing__button--add-to-list");0==e?(_.html(_.attr("data-default")),i.addClass("disabled"),a.html(e)):(_.html(e),i.removeClass("disabled"),a.html(e))}}),e.trigger("change"),t("#listing_actions").off("change").on("change",function(){var e=this.value;switch(e){case"delete":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_DELETE;break;case"setActive":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_ACTIVE;break;case"setInactive":var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE_INACTIVE;break;default:var _=ACYM_JS_TXT.ACYM_ARE_YOU_SURE}if("duplicate"==e||t.acym_confirm(_)){var a=t(this).closest("#acym_form");a.find('[name="task"]').val(t(this).val()),a.submit()}else t(this).val("0")}),t("#checkbox_all").off("change").on("change",function(){var e=t('[name="elements_checked[]"]');t(this).is(":checked")?e.prop("checked",!0):e.prop("checked",!1),e.trigger("change")}),t("#acym__listing__ordering").off("change").on("change",function(){var e=t(this).closest("#acym_form");e.find('[name="task"]').val("listing"),e.submit()}),t(".acym__listing__ordering__sort-order").off("click").on("click",function(){var e=t("#acym__listing__ordering__sort-order--input"),_=t(this).closest("#acym_form");"asc"==e.val()?e.val("desc"):e.val("asc"),_.find('[name="task"]').val("listing"),_.submit()})}),jQuery(document).ready(function(t){function e(){t("#acym_pagination__ajax").attr("value",1),_()}function _(){var _=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=getTemplateAjax",i=t('[name="return"]');i=i.length>0&&-1!==i.val().indexOf("automation")||t("#acym__automation__actions__json").length>0?"true":"false",_+="&search="+t("#acym_search_template_choose__ajax").val(),_+="&tag="+t("#acym_tag_template_choose__ajax").val(),_+="&type="+t("#acym__type-template").val(),_+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),_+="&editor="+t("#acym__mail__edit__editor").val(),_+="&automation="+i,_+="&inmail="+(t("#editor_autoSave").length>0?"1":"0"),t.post(_,function(_){var i;t(".acym__template__choose__ajax").html(_),i=null,t('input[name="mailchoose_search__ajax"]').off("keydown").on("keydown",function(_){var a=t(this),o=a.val();if((o||8==_.which)&&""!=o&&o.length>=2&&(clearTimeout(i),i=setTimeout(function(){t("#acym_search_template_choose__ajax").attr("value",o),e()},1500)),13==_.which)return _.preventDefault(),clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",o),e(),!1;8==_.which&&""==a.val()&&(clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",""),e())}),t("#acym__template__choose__modal .acym__search__button").off("click").on("click",function(_){_.preventDefault(),clearTimeout(i),t("#acym_search_template_choose__ajax").attr("value",t('input[name="mailchoose_search__ajax"]').attr("value")),e()}),t("#mailchoose_tag__ajax").on("change",function(_){t("#acym_tag_template_choose__ajax").attr("value",t(this).attr("value")),e()}),t("#acym__template__choose__modal .acym__type__choosen").off("click").on("click",function(_){t("#acym__type-template").val(t(this).attr("data-type")),t(".acym__type__choosen").removeClass("is-active"),t(this).addClass("is-active").blur(),e()}),a(),"acyEditor"!==t("#acym__mail__edit__editor").val()&&(t(".reveal .acym__templates__oneTpl").on("click",function(){window.location.replace(t(this).find("a").attr("href"))}),t(".acym__templates__choose__ribbon").on("click",function(){window.location.replace(t(this).closest(".acym__templates__pic").find("a").attr("href"))})),t("#acym__automation__actions").length>0&&t(".acym__templates__oneTpl").off("click").on("click",function(){if(!t.acym_confirm(ACYM_JS_TXT.ACYM_ARE_SURE_DUPLICATE_TEMPLATE))return!1;var e=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=duplicateMailAutomation&id="+t(this).attr("id"),_=t("#acym__template__choose__modal"),a=t('[data-modal-name="'+_.attr("data-button")+'"]').closest(".acym__automation__inserted__action");e+="&previousId="+a.find('[name$="[mail_id]"]').val(),t.get(e,function(e){var _=t.acym_parseJson(e,{error:t.acym_sprintf(ACYM_JS_TXT.ACYM_NOT_FOUND,ACYM_JS_TXT.ACYM_EMAIL)});if(void 0!==_.error)return alert(_.error),!1;a.find(".acym__automation__action__mail__name").html(_.name+'<i class="cursor-pointer acymicon-close acym__color__red acym__automation__action__reset__mail margin-left-1"></i>'),a.find('[name$="[mail_id]"]').val(_.id),a.find(".acy_button_submit").html(ACYM_JS_TXT.ACYM_EDIT_MAIL).click()})})})}function a(){t(".acym__template__choose__ajax .acym__pagination__page__ajax").off("click").on("click",function(e){e.preventDefault(),t("#acym_pagination__ajax").attr("value",t(this).attr("page")),_()})}function i(){t(".acym__pagination__page__ajax").off("click").on("click",function(){t("#acym_pagination__ajax").val(t(this).attr("page")),s(),r()})}function o(){var e=t(".modal__pagination__show-selected"),_=t(".modal__pagination__show-all");e.hasClass("selected")?(_.hide(),e.show()):(_.show(),e.hide()),t(".modal__pagination__show-button").off("click").on("click",function(){e.hasClass("selected")?(_.show(),e.hide().removeClass("selected"),t("#modal__pagination__show-information").attr("value","true"),t("#acym_pagination__ajax").attr("value",1)):(_.hide(),e.show().addClass("selected"),t("#modal__pagination__show-information").attr("value","false"),t("#acym_pagination__ajax").attr("value",1)),s()})}function s(){var e=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&action=acymailing_router&noheader=1&task=setAjaxListing&listsPerPage=10";e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&selectedLists="+t("#acym__modal__lists-selected").val(),e+="&alreadyLists="+t("#acym__user__lists_already_add").val(),e+="&show_selected="+t("#modal__pagination__show-information").val(),e+="&search_lists="+t("#modal__pagination__search__lists").val(),e+=t("#modal__pagination__need__display__sub").length>0?"&needDisplaySub=1&nonActive=1":"&needDisplaySub=0&nonActive=0";var _=t(".modal__pagination__listing__lists__in-form");_.length&&jQuery.post(e,function(e){t("#modal__pagination__search__spinner").hide(),_.html(e),i(),t(".modal__pagination__listing__lists__list--checkbox").off("change").on("change",function(){var e=t(this).next().children("label .modal__pagination__listing__lists__list-name "),_=t("#acym__modal__lists-selected"),a=_.val(),i=[];a=""==a?[]:JSON.parse(a),t(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(t(this).val()),1)),t(".modal__pagination__listing__lists__list--checkbox:checked").each(function(){i.push(t(this).val())}),t.each(i,function(e){-1!=t.inArray(i[e],a)||a.push(i[e])}),_.val(JSON.stringify(a)),t("#acym__campaigns__recipients__event_on_change_count_recipients").trigger("change"),t("#acym__popup__subscription__change").trigger("change")}),o(),n()})}function n(){var e=null,_=t('input[name="modal_search_lists"]'),a=t(".modal__pagination__show"),i=t("#modal__pagination__search__lists");_.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),c(e))}),_.off("keyup").on("keyup",function(_){var o=t(this),n=o.val();(n||8==_.which)&&""!=n&&n.length>=2?(t("#modal__pagination__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",n),t("#acym_pagination__ajax").attr("value",1),s()},1e3)):clearTimeout(e),""==o.val()&&(clearTimeout(e),a.show(),i.attr("value",""),t("#acym_pagination__ajax").attr("value",1),s())}),t(".modal__pagination__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),c(e)}),t(".modal__pagination__search .acym__search-clear").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),i.attr("value",""),_.attr("value",""),a.show(),s()})}function c(e){clearTimeout(e),t(".modal__pagination__show").hide(),t("#acym_pagination__ajax").attr("value",1),t("#modal__pagination__search__lists").attr("value",t('input[name="modal_search_lists"]').attr("value")),s()}function l(){var e=t(".acym__listing__subscribe-to").children(".acym__listing__row");e=e.length;var _=t("#acym__user__edit #tab0-label"),a=t("#acym__user__edit #tab1-label"),i=t("#acym__listing__subscribe-to__count");setTimeout(function(){e<=0?""!=t('input[name="id"]').val()?_.hide()&&i.html("0")&&a.click():_.show()&&a.hide()&&i.html(""+e)&&_.click():_.show()&&i.html(""+e)&&_.click()},5)}function r(){var e=AJAX_URL_ACYM+"&page=acymailing_users&ctrl=users&action=acymailing_router&noheader=1&task=setAjaxListing&usersPerPage=10";e+="&pagination_page_ajax="+t("#acym_pagination__ajax").val(),e+="&selectedUsers="+t("#acym__modal__users-selected").val(),e+="&hiddenUsers="+t("#acym__modal__users-hidden").val(),e+="&showSelected="+t("#modal__pagination__users__show-information").val(),e+="&searchUsers="+t("#modal__pagination__users__search__input").val();var _=t(".modal__pagination__users__listing__in-form");_.length&&jQuery.post(e,function(e){t("#modal__pagination__users__search__spinner").hide(),_.html(e),i(),t(".modal__pagination__users__listing__user--checkbox").off("change").on("change",function(){var e=t(this).next().children("label .modal__pagination__users__listing__user-name "),_=t("#acym__modal__users-selected"),a=_.val(),i=[];a=""==a?[]:JSON.parse(a),t(this).is(":checked")?e.addClass("acym__color__blue"):(e.removeClass("acym__color__blue"),a.splice(a.indexOf(t(this).val()),1)),t(".modal__pagination__users__listing__user--checkbox:checked").each(function(){i.push(t(this).val())}),t.each(i,function(e){-1!=t.inArray(i[e],a)||a.push(i[e])}),_.val(JSON.stringify(a))}),d(),m()})}function d(){var e=t(".modal__pagination__users__show-selected"),_=t(".modal__pagination__users__show-all");e.hasClass("selected")?(_.hide(),e.show()):(_.show(),e.hide()),t(".modal__pagination__users__show-button").off("click").on("click",function(){e.hasClass("selected")?(_.show(),e.hide().removeClass("selected"),t("#modal__pagination__users__show-information").attr("value","true"),t("#acym_pagination__ajax").attr("value",1)):(_.hide(),e.show().addClass("selected"),t("#modal__pagination__users__show-information").attr("value","false"),t("#acym_pagination__ajax").attr("value",1)),r()})}function m(){var e=null,_=t('input[name="modal_search_users"]'),a=t(".modal__pagination__show"),i=t("#modal__pagination__users__search__input");_.off("keydown").on("keydown",function(t){13==t.which&&(t.preventDefault(),y(e))}),_.off("keyup").on("keyup",function(_){var o=t(this).val();(o||8==_.which)&&""!=o&&o.length>=2?(t("#modal__pagination__users__search__spinner").show(),a.hide(),clearTimeout(e),e=setTimeout(function(){i.attr("value",o),t("#acym_pagination__ajax").attr("value",1),r()},1e3)):clearTimeout(e),""==o&&(clearTimeout(e),a.show(),i.attr("value",""),t("#acym_pagination__ajax").attr("value",1),r())}),t(".modal__pagination__users__search .acym__search__button").off("click").on("click",function(t){t.preventDefault(),y(e)}),t(".modal__pagination__users__search .acym__search-clear").off("click").on("click",function(t){t.preventDefault(),clearTimeout(e),i.attr("value",""),_.attr("value",""),a.show(),r()})}function y(e){clearTimeout(e),t(".modal__pagination__show").hide(),t("#acym_pagination__ajax").attr("value",1),t("#modal__pagination__users__search__input").attr("value",t('input[name="modal_search_users"]').attr("value")),r()}t.Modal=function(){t("[data-iframe]").on("click",function(){var e=t("#"+t(this).attr("data-open")),_=t(this).attr("data-reload"),a=t(this).attr("data-ajax"),i=t(this).attr("data-iframe-class"),o="true"==a?AJAX_URL_ACYM+t(this).attr("data-iframe"):t(this).attr("data-iframe");e.prepend('<iframe src="'+o+'"></iframe>'),void 0!==i&&e.find("iframe").addClass(i),e.find("iframe").on("load",function(){t(this).contents().find("#wpadminbar").remove()}),e.find(".close-button").on("click",function(){t(this).siblings("iframe").remove(),_&&location.reload()}),t(".reveal-overlay").on("click",function(){e.find("iframe").remove(),_&&location.reload()})}),o(),t(".modal__pagination__button-open").off("click").on("click",function(){s()}),n(),t("#modal__pagination__confirm").off("click").on("click",function(e){var _=""!=t("#acym__user__lists_already_add").val()?JSON.parse(t("#acym__user__lists_already_add").val()):{},a=""!=t("#acym__modal__lists-selected").val()?JSON.parse(t("#acym__modal__lists-selected").val()):{};if(t.isEmptyObject(a))return alert(t(this).attr("text-empty")),!1;_=_.concat(a),t("#acym__user__lists_already_add").attr("value",JSON.stringify(_));var i=AJAX_URL_ACYM+"&page=acymailing_lists&ctrl=lists&task=ajaxGetLists&ids="+a.join(",");jQuery.post(i,function(e){e=JSON.parse(e),t(".acym__users__display__subscriptions--list .acym__listing__subscribe-to").html(e.html),t("#acym__user__edit__add-subscription__modal").foundation("close"),t(".acym__user__action--remove").off("click").on("click",function(){var e=t("#acym__modal__lists-selected"),_=JSON.parse(e.val());_.splice(_.indexOf(t(this).attr("id")),1),e.attr("value",JSON.stringify(_)),t("#acym__user__lists_already_add").val(JSON.stringify(_)),t(this).parent().remove(),l()}),l(),t.acym_add_notification(e.notif,"success",1e4)})}),l(),s(),t(".modal__pagination__users__button-open").off("click").on("click",function(){t("#acym__modal__users-selected").val(""),r()}),r(),d(),m(),t("#modal__pagination__users__confirm").off("click").on("click",function(){$task=t("#acym__modal__users__form-task").val(),t('input[name="task"]').val($task),t("#acym_form").submit()}),t("#acym__modal__lists_import__clear").off("click").on("click",function(){t("#modal__pagination__create__list").val("")})},t.Modal(),t.setResetMail=function(){t(".acym__automation__action__reset__mail").off("click").on("click",function(){var e=t(this).closest(".acym__automation__inserted__action").find('[name$="[mail_id]"]'),a=t(this).parent(),i=AJAX_URL_ACYM+"&page=acymailing_mails&ctrl=mails&task=deleteMailAutomation&id="+e.val();t.get(i,function(t){e.val("").prev().html(ACYM_JS_TXT.ACYM_CREATE_MAIL),a.html(""),_()})})},t.setTemplateModal=function(_){e(),a(),t(".acym__search-clear").off("click").on("click",function(){t('input[name="mailchoose_search__ajax"]').val(""),t("#acym_search_template_choose__ajax").val(""),e()}),t(".acym__templates__filter__tags__ajax").select2({theme:"foundation",width:"100%"}),_&&t('[data-open="acym__template__choose__modal"]').on("click",function(){t("#acym__template__choose__modal").attr("data-button",t(this).attr("data-modal-name"))})}}),jQuery(document).ready(function(t){!function(){t(".acym_tab").off("click").on("click",function(e){if("true"==t(this).attr("data-empty"))return!1;if(t(this).attr("data-dynamics")){var _=AJAX_URL_ACYM+"&ctrl=dynamics&task=trigger&trigger=textPopup&plugin="+t(this).attr("data-dynamics");t.post(_,function(e){t(".tabs-panel.is-active").html(e),t("i.acym_radio_unchecked").on("click",function(){var e=t("#"+t(this).attr("data-radio"));e.click()}),t('input[type="radio"]').on("change",function(){var e=t('input[name="'+t(this).attr("name")+'"]:checked').val();t('input[name="'+t(this).attr("name")+'"]').each(function(){t(this).val()==e?(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').hide(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').show()):(t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_unchecked').show(),t('i[data-radio="'+t(this).attr("id")+'"].acym_radio_checked').hide())})}).change()})}var a=t(this).closest(".tabs").attr("id");localStorage.setItem("acy"+a,t(this).attr("data-tab-identifier"))});var e=t(".tabs").attr("id"),_=localStorage.getItem("acy"+e),a=t("#"+e).find('a[data-tab-identifier="'+_+'"]');a.length?a.click():t("#"+e+" .acym_tab:first").click()}()});