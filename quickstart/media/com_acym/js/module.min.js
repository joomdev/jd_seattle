let acytask,acyformName;function submitAcymForm(e,t,a){acytask=e,acyformName=t,a=void 0===a?"acySubmitSubForm":a;let l="acym-captcha";t&&(l=t+"-captcha");let r=document.querySelector("#"+l+'[class="acyg-recaptcha"][data-size="invisible"]');r&&(r.className="g-recaptcha");let s=document.querySelector("#"+l+'[class="g-recaptcha"][data-size="invisible"]');if(!s||"object"!=typeof grecaptcha)return window[a]();let c=s.getAttribute("grcID");return c||(c=grecaptcha.render(l,{sitekey:s.getAttribute("data-sitekey"),callback:a,size:"invisible","expired-callback":"resetRecaptcha"}),s.setAttribute("grcID",c)),grecaptcha.getResponse(c)?window[a]():(grecaptcha.execute(c),!1)}function resetRecaptcha(){let e="acym-captcha";acyformName&&(e=acyformName+"-captcha");let t=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(!t)return;let a=t.getAttribute("grcID");grecaptcha.reset(a)}function acySubmitSubForm(){let e,t=document[acyformName],a=acymModule.emailRegex,l="";t.elements||(t=t[0].elements["user[email]"]&&t[0].elements["user[email]"].value&&a.test(t[0].elements["user[email]"].value)?t[0]:t[t.length-1]);let r=document.querySelectorAll("#"+acyformName+" .invalid");if(0!=r.length)for(e=0;e<r.length;e++)r[e].classList.remove("invalid");let s,c,i,n,m,u=t.elements["user[email]"];u.value!=acymModule.EMAILCAPTION&&(u.value=u.value.replace(/ /g,"")),u&&u.value!=acymModule.EMAILCAPTION&&a.test(u.value)||(l=acymModule.VALID_EMAIL,u.classList.add("invalid"));let o=document.querySelectorAll("#"+acyformName+' [type="radio"][data-required]');if(o.length>0){for(s="",c=0,e=0;e<o.length;e++)i=JSON.parse(o[e].getAttribute("data-required")),""!==s&&s!=o[e].getAttribute("name")&&0===c?(l+="\r\n"+(m=JSON.parse(o[e-1].getAttribute("data-required"))).message,acymAddInvalidClass(acyformName,s)):""!==s&&s!=o[e].getAttribute("name")&&c>0&&(c=0),o[e].checked&&c++,s=o[e].getAttribute("name");0===c&&(l+="\r\n"+i.message,acymAddInvalidClass(acyformName,s))}let d=document.querySelectorAll("#"+acyformName+' [type="checkbox"][data-required]');if(d.length>0){for(s="",c=0,e=0;e<d.length;e++)i=JSON.parse(d[e].getAttribute("data-required")),""!==s&&s!=d[e].getAttribute("name").slice(0,d[e].getAttribute("name").lastIndexOf("["))&&0===c?(l+="\r\n"+(m=JSON.parse(d[e-1].getAttribute("data-required"))).message,acymAddInvalidClass(acyformName,s)):""!==s&&s!=d[e].getAttribute("name").slice(0,d[e].getAttribute("name").lastIndexOf("["))&&c>0&&(c=0),d[e].checked&&c++,s=d[e].getAttribute("name").slice(0,d[e].getAttribute("name").lastIndexOf("["));0===c&&(l+="\r\n"+i.message,acymAddInvalidClass(acyformName,s))}let y=document.querySelectorAll("#"+acyformName+' [acym-field-type="date"][data-required]');if(0!=y.length){let t;for(s="",c=0,e=0;e<y.length;e++)t=y[e],i=JSON.parse(t.getAttribute("data-required")),""!==s&&s!=t.getAttribute("name").slice(0,t.getAttribute("name").lastIndexOf("["))&&c<3?(c=0,l+="\r\n"+(m=JSON.parse(y[e-1].getAttribute("data-required"))).message):""!==s&&s!=t.getAttribute("name").slice(0,t.getAttribute("name").lastIndexOf("["))&&c>0&&(c=0),""!=t.value?c++:t.classList.add("invalid"),s=y[e].getAttribute("name").slice(0,y[e].getAttribute("name").lastIndexOf("["));c<3&&(l+="\r\n"+i.message)}let g=document.querySelectorAll("#"+acyformName+' [data-required]:not([type="checkbox"]):not([type="radio"]):not([acym-field-type="date"])');if(g.length>0)for(e=0;e<g.length;e++)i=JSON.parse(g[e].getAttribute("data-required")),-1===["text","textarea","single_dropdown","multiple_dropdown","phone"].indexOf(i.type)||""!==g[e].value&&"0"!=g[e].value||(l+="\r\n"+i.message,g[e].classList.add("invalid")),"file"===i.type&&0===g[e].files.length&&(l+="\r\n"+i.message,g[e].classList.add("invalid"));let p=document.querySelectorAll("#"+acyformName+" [data-authorized-content]");if(p.length>0)for(e=0;e<p.length;e++){let t,a=p[e].getAttribute("data-authorized-content"),r=[];r.push(0);try{let e=a.indexOf("{"),l=a.indexOf("[");!isNaN(e)&&e>0&&!isNaN(l)&&l>0&&(a=a.substring(e)),t=void 0!==a||""!==a?JSON.parse(a):r}catch(e){t=r,console.log(e.stack)}n="","number"===t[0]?n=/^[0-9]+$/:"letters"===t[0]?n=/^[a-zA-Z]+$/:"numbers_letters"===t[0]?n=/^[a-zA-Z0-9]+$/:"regex"===t[0]&&(n=new RegExp(t.regex)),""===n||n.test(p[e].value)||(p[e].classList.add("invalid"),l+="\r\n"+t.message)}if(l.length>0)return alert(l),!1;if(t.elements.hiddenlists.value.length<1){let e=!1,a=t.elements["subscription[]"];if(a&&(void 0===a.value||0===a.value.length)){for(b=0;b<a.length;b++)a[b].checked&&(e=!0);if(!e)return alert(acymModule.NO_LIST_SELECTED),!1}}if("unsubscribe"!==acytask){let e=t.elements.terms;if(e&&!e.checked)return"undefined"!=typeof acymModule&&alert(acymModule.ACCEPT_TERMS),!1;if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+acyformName])for(let e in acymModule["excludeValues"+acyformName])acymModule["excludeValues"+acyformName].hasOwnProperty(e)&&t.elements["user["+e+"]"]&&t.elements["user["+e+"]"].value==acymModule["excludeValues"+acyformName][e]&&(t.elements["user["+e+"]"].value="")}if("undefined"!=typeof ga){ga("send","pageview","unsubscribe"===acytask?"unsubscribe":"subscribe")}if(taskField=t.task,taskField.value=acytask,!t.elements.ajax||!t.elements.ajax.value||"0"==t.elements.ajax.value)return t.submit(),!1;let f=document.getElementById(acyformName),A=new FormData(f);f.className+=" acym_module_loading",f.style.filter="alpha(opacity=50)",f.style.opacity="0.5";let h=document.querySelectorAll(".responseContainer.acym_module_error.message_"+acyformName);Array.prototype.forEach.call(h,function(e){e.parentNode.removeChild(e)});let _=new XMLHttpRequest;return _.open("POST",f.action),_.onload=function(){let e="Ajax Request Failure",t="error";if(200===_.status){let a=JSON.parse(_.responseText);e=a.message,t=a.type}acymDisplayAjaxResponse(decodeURIComponent(e),t,acyformName)},_.send(A),!1}function acymAddInvalidClass(e,t){let a=document.querySelectorAll("#"+e+' [name^="'+t+'"]');for(let e=0;e<a.length;e++)a[e].classList.add("invalid");return!0}function acymDisplayAjaxResponse(e,t,a,l){let r=document.createElement("div"),s=document.getElementById("acym_fulldiv_"+a);s.firstChild&&!s.classList.contains("acym__subscription__form__popup__overlay")?s.insertBefore(r,s.firstChild):s.classList.contains("acym__subscription__form__popup__overlay")?s.querySelector(".acym__subscription__form__popup").appendChild(r):s.appendChild(r),r.className="responseContainer";let c=document.getElementById(a),i=c.className,n="acym_module_loading",m=i.replace(" "+n,"",i);m==i&&(m=i.replace(n+" ","",i)),m==i&&(m=i.replace(n,"",i)),c.className=m,r.innerHTML=e,"success"==t?r.className+=" acym_module_success":(r.className+=" acym_module_error",c.style.opacity="1"),(l||"success"==t)&&(c.style.display="none"),r.className+=" message_"+a,r.className+=" slide_open",s.classList.contains("acym__subscription__form-erase")&&(document.cookie="acym_form_"+document.getElementById(a).getAttribute("acym-data-id")+"="+Date.now()+";",setTimeout(()=>{s.remove()},2e3))}