/**
 * @package    AcyMailing for Joomla
 * @version    6.2.2
 * @author     acyba.com
 * @copyright  (C) 2009-2019 ACYBA S.A.R.L. All rights reserved.
 * @license    GNU/GPLv3 http://www.gnu.org/licenses/gpl-3.0.html
 */

var task,formName;function submitAcymForm(e,a,t){task=e,formName=a,t=void 0===t?"acySubmitSubForm":t;var r="acym-captcha";a&&(r=a+"-captcha");var l=document.querySelector("#"+r+'[class="g-recaptcha"][data-size="invisible"]');if(!l||"object"!=typeof grecaptcha)return window[t]();var s=l.getAttribute("grcID");return s||(s=grecaptcha.render(r,{sitekey:l.getAttribute("data-sitekey"),callback:t,size:"invisible","expired-callback":"resetRecaptcha"}),l.setAttribute("grcID",s)),grecaptcha.getResponse(s)?window[t]():(grecaptcha.execute(s),!1)}function resetRecaptcha(){var e="acym-captcha";formName&&(e=formName+"-captcha");var a=document.querySelector("#"+e+'[class="g-recaptcha"][data-size="invisible"]');if(a){var t=a.getAttribute("grcID");grecaptcha.reset(t)}}function acySubmitSubForm(){var e=document[formName],a=acymModule.emailRegex;e.elements||(e=e[0].elements["user[email]"]&&e[0].elements["user[email]"].value&&a.test(e[0].elements["user[email]"].value)?e[0]:e[e.length-1]);var t,r,l,s,u,n=e.elements["user[email]"];if(n.value!=acymModule.EMAILCAPTION&&(n.value=n.value.replace(/ /g,"")),!n||n.value==acymModule.EMAILCAPTION||!a.test(n.value))return alert(acymModule.VALID_EMAIL),n.className=n.className+" invalid",!1;var c=document.querySelectorAll("#"+formName+' [type="radio"][data-required]');if(c.length>0){for(t="",r=0,l=0;l<c.length;l++){if(s=JSON.parse(c[l].getAttribute("data-required")),""!==t&&t!=c[l].getAttribute("name")&&0===r)return s=JSON.parse(c[l-1].getAttribute("data-required")),alert(s.message),!1;""!==t&&t!=c[l].getAttribute("name")&&r>0&&(r=0),c[l].checked&&r++,t=c[l].getAttribute("name")}if(0===r)return alert(s.message),!1}var m=document.querySelectorAll("#"+formName+' [type="checkbox"][data-required]');if(m.length>0){for(t="",r=0,l=0;l<m.length;l++){if(s=JSON.parse(m[l].getAttribute("data-required")),""!==t&&t!=m[l].getAttribute("name")&&0===r)return s=JSON.parse(m[l-1].getAttribute("data-required")),alert(s.message),!1;""!==t&&t!=m[l].getAttribute("name")&&r>0&&(r=0),m[l].checked&&r++,t=m[l].getAttribute("name")}if(0===r)return alert(s.message),!1}var i=document.querySelectorAll("#"+formName+" [data-required]");if(i.length>0)for(l=0;l<i.length;l++){if(s=JSON.parse(i[l].getAttribute("data-required")),-1!==["text","textarea","single_dropdown","multiple_dropdown","phone","file"].indexOf(s.type)&&(""===i[l].value||"0"==i[l].value))return alert(s.message),!1;if("file"===s.type&&0===i[l].files.length)return alert(s.message),!1}var o=document.querySelectorAll("#"+formName+" [data-authorized-content]");if(o.length>0)for(l=0;l<o.length;l++){var d=JSON.parse(o[l].getAttribute("data-authorized-content"));if(u="","number"===d[0]?u=/^[0-9]+$/:"letters"===d[0]?u=/^[a-zA-Z]+$/:"numbers_letters"===d[0]?u=/^[a-zA-Z0-9]+$/:"regex"===d[0]&&(u=new RegExp(d.regex)),""!==u&&!u.test(o[l].value))return alert(d.message),!1}if(e.elements.hiddenlists.value.length<1){var f=!1,g=e.elements["subscription[]"];if(g&&(void 0===g.value||0===g.value.length)){for(b=0;b<g.length;b++)g[b].checked&&(f=!0);if(!f)return alert(acymModule.NO_LIST_SELECTED),!1}}if("unsubscribe"!==task){var p=e.elements.terms;if(p&&!p.checked)return"undefined"!=typeof acymModule&&alert(acymModule.ACCEPT_TERMS),!1;if("undefined"!=typeof acymModule&&void 0!==acymModule["excludeValues"+formName])for(var y in acymModule["excludeValues"+formName])acymModule["excludeValues"+formName].hasOwnProperty(y)&&e.elements["user["+y+"]"]&&e.elements["user["+y+"]"].value==acymModule["excludeValues"+formName][y]&&(e.elements["user["+y+"]"].value="")}if("undefined"!=typeof ga&&"unsubscribe"!==task?ga("send","pageview","subscribe"):"undefined"!=typeof ga&&ga("send","pageview","unsubscribe"),taskField=e.task,taskField.value=task,!e.elements.ajax||!e.elements.ajax.value||"0"==e.elements.ajax.value)return e.submit(),!1;var v=document.getElementById(formName),h=new FormData(v);v.className+=" acym_module_loading",v.style.filter="alpha(opacity=50)",v.style.opacity="0.5";let N=document.querySelectorAll(".responseContainer.acym_module_error.message_"+formName);Array.prototype.forEach.call(N,function(e){e.parentNode.removeChild(e)});var A=new XMLHttpRequest;return A.open("POST",v.action),A.onload=function(){var e="Ajax Request Failure",a="error";if(200===A.status){var t=JSON.parse(A.responseText);e=t.message,a=t.type}acymDisplayAjaxResponse(decodeURIComponent(e),a,formName)},A.send(h),!1}function acymDisplayAjaxResponse(e,a,t,r){let l=document.createElement("div"),s=document.getElementById("acym_fulldiv_"+t);s.firstChild?s.insertBefore(l,s.firstChild):s.appendChild(l),l.className="responseContainer";let u=document.getElementById(t),n=u.className,c="acym_module_loading",m=n.replace(" "+c,"",n);m==n&&(m=n.replace(c+" ","",n)),m==n&&(m=n.replace(c,"",n)),u.className=m,l.innerHTML=e,"success"==a?l.className+=" acym_module_success":(l.className+=" acym_module_error",u.style.opacity="1"),(r||"success"==a)&&(u.style.display="none"),l.className+=" message_"+t,l.className+=" slide_open"}