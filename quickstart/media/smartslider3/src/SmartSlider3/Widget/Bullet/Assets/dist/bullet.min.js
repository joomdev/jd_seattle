N2D("SmartSliderWidgetBulletTransition","SmartSliderWidget",function(l,s){function t(t,e){this.key="bullet",this.parameters=e,N2Classes.SmartSliderWidget.prototype.constructor.call(this,t)}return((t.prototype=Object.create(N2Classes.SmartSliderWidget.prototype)).constructor=t).prototype.onStart=function(){switch(this.hasDots=!0,this.axis="horizontal",this.offset=0,this.$bar=this.slider.sliderElement.find(".nextend-bullet-bar"),this.$widget=this.$bar.parent(),this.event="universalclick","mouseenter"===this.parameters.action&&(this.event="universalenter"),this.parameters.area){case 5:case 8:this.axis="vertical"}this.slider.stages.done("BeforeShow",this.onBeforeShow.bind(this))},t.prototype.onBeforeShow=function(){this.onVisibleSlidesChanged(),this.hasDots&&this.slider.currentSlide.$dot.addClass("n2-active").removeAttr("tabindex").attr("aria-current","true"),this.slider.sliderElement.on({visibleSlidesChanged:this.onVisibleSlidesChanged.bind(this),SlideWillChange:this.onSlideSwitch.bind(this)})},t.prototype.onSlideSwitch=function(t,e){this.hasDots&&(this.$dots.removeClass("n2-active").attr("tabindex","0").removeAttr("aria-current"),e.$dot.addClass("n2-active").removeAttr("tabindex").attr("aria-current","true"))},t.prototype.showThumbnail=function(t,e){var i=this.getThumbnail(t);NextendTween.to(i,.3,{opacity:1}),t.$dot.one("universalleave.thumbnailleave",this.hideThumbnail.bind(this,i))},t.prototype.hideThumbnail=function(t,e){e.stopPropagation(),NextendTween.to(t,.3,{opacity:0,onComplete:function(){t.remove()}})},t.prototype.getThumbnail=function(t){var e=t.$dot,i=this.slider.sliderElement.offset(),s=e.offset(),o=e.outerWidth(),a=e.outerHeight(),r=l("<div></div>").append(l("<div></div>").css({width:this.parameters.thumbnailWidth,height:this.parameters.thumbnailHeight,backgroundImage:'url("'+t.getThumbnail()+'")'}).addClass("n2-ss-bullet-thumbnail")).addClass(this.parameters.thumbnailStyle).addClass("n2-ss-bullet-thumbnail-container").appendTo(this.slider.sliderElement);switch(this.parameters.thumbnailPosition){case"right":r.css({left:s.left-i.left+o,top:s.top-i.top+a/2-r.outerHeight(!0)/2});break;case"left":r.css({left:s.left-i.left-r.outerWidth(!0),top:s.top-i.top+a/2-r.outerHeight(!0)/2});break;case"top":r.css({left:s.left-i.left+o/2-r.outerWidth(!0)/2,top:s.top-i.top-r.outerHeight(!0)});break;case"bottom":r.css({left:s.left-i.left+o/2-r.outerWidth(!0)/2,top:s.top-i.top+a})}return e.data("thumbnail",r),r},t.prototype.onVisibleSlidesChanged=function(){if(this.$dotsOuter!==s&&(this.$dotsOuter.remove(),delete this.$dotsOuter),this.$bar.html(""),this.slider.visibleSlides.length<=1)this.hasDots=!1;else{this.hasDots=!0,this.$dots=l(),this.$dotsOuter=l();for(var t=0;t<this.slider.visibleSlides.length;t++){var e=this.slider.visibleSlides[t],i=l('<div class="n2-ow n2-bullet '+this.parameters.dotClasses+'" tabindex="0"></div>').attr("role","button").attr("aria-label",e.getTitle()).appendTo(this.$bar);switch(this.$dotsOuter=this.$dotsOuter.add(i.wrap(l('<div class="n2-ow"></div>').on(this.event,this.onDotClick.bind(this,e))).on("n2Activate",this.onDotClick.bind(this,e))),e.$dot=i,this.$dots=this.$dots.add(i),this.parameters.mode){case"numeric":i.html(t+1);break;case"title":i.html(e.getTitle())}1===this.parameters.thumbnail&&e.getThumbnail()&&i.on({universalenter:this.showThumbnail.bind(this,e)},{leaveOnSecond:!0})}this.onSlideSwitch(null,this.slider.currentSlide)}},t.prototype.onDotClick=function(t,e){this.slider.directionalChangeTo(t.index)},t.prototype.calculateDimensions=function(t){this.isVisible()?(this.$widget.addClass("n2-ss-control-bullet--calculate-size"),t[this.key+"width"]=this.$bar.outerWidth(),t[this.key+"height"]=this.$bar.outerHeight(),this.$widget.removeClass("n2-ss-control-bullet--calculate-size")):(t[this.key+"width"]=0,t[this.key+"height"]=0)},t});