N2D("SmartSliderWidgetAutoplayImage","SmartSliderWidget",function(a,t){"use strict";function e(t,e,i,s){this.key="autoplay",this.desktopRatio=e,this.tabletRatio=i,this.mobileRatio=s,N2Classes.SmartSliderWidget.prototype.constructor.call(this,t)}return((e.prototype=Object.create(N2Classes.SmartSliderWidget.prototype)).constructor=e).prototype.onStart=function(t,e,i){this.paused=!1,this.$widget=this.slider.sliderElement.find(".nextend-autoplay"),this.deferred=a.Deferred(),this.slider.sliderElement.on({"SliderDevice.autoplay":this.onDevice.bind(this),"autoplayStarted.autoplay":this.setPlaying.bind(this),"autoplayPaused.autoplay":this.setPaused.bind(this)}).trigger("addWidget",this.deferred);var s=NextendDeBounce(this.switchState.bind(this),300,!0);this.$widget.on({n2Activate:s,universalclick:s}),a.when(this.$widget.n2imagesLoaded(),this.slider.stages.get("ResizeFirst").getDeferred()).always(this.onLoad.bind(this)),this.slider.stages.done("AutoplayDestroyed",this.destroy.bind(this))},e.prototype.onLoad=function(){this.$widget.addClass("n2-ss-widget--calc"),this.width=this.$widget.width(),this.height=this.$widget.height(),this.$widget.removeClass("n2-ss-widget--calc"),this.onDevice(null,{device:this.slider.responsive.getDeviceMode()}),this.deferred.resolve()},e.prototype.onDevice=function(t,e){var i=1;switch(e.device){case"tabletPortrait":case"tabletLandscape":i=this.tabletRatio;break;case"mobilePortrait":case"mobileLandscape":i=this.mobileRatio;break;default:i=this.desktopRatio}this.$widget.width(this.width*i),this.$widget.height(this.height*i)},e.prototype.switchState=function(t){this.slider.controls.autoplay.preventClickHandle(),this.paused?(this.setPlaying(),this.slider.trigger("autoplayResume",1)):(this.setPaused(),this.slider.trigger("autoplayPause"))},e.prototype.setPaused=function(){this.paused=!0,this.$widget.addClass("n2-autoplay-paused")},e.prototype.setPlaying=function(){this.paused=!1,this.$widget.removeClass("n2-autoplay-paused")},e.prototype.destroy=function(){this.$widget.remove()},e});