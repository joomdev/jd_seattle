N2D("SmartSliderWidgetBarHorizontal","SmartSliderWidget",function(e,r){"use strict";function t(t,e){this.key="bar",this.parameters=e,N2Classes.SmartSliderWidget.prototype.constructor.call(this,t)}return((t.prototype=Object.create(N2Classes.SmartSliderWidget.prototype)).constructor=t).prototype.onStart=function(t){this.tween=null,this.$widget=this.slider.sliderElement.find(".nextend-bar"),this.innerBar=this.$widget.find("> div"),this.innerBarOriginalOpacity=this.innerBar.css("opacity");var e="click";this.slider.hasTouch()&&(e="n2click"),this.$widget.on("click",function(t){this.slider.sliderElement.find(".n2-ss-slide-active .n2-ss-layers-container").trigger(e)}.bind(this)),this.slider.stages.done("BeforeShow",this.onBeforeShow.bind(this))},t.prototype.hasContent=function(t){return!(!this.parameters.showTitle||t.getTitle()===r&&!this.parameters.slideCount)||!(!this.parameters.showDescription||t.getDescription()===r&&!this.parameters.slideCount)},t.prototype.onBeforeShow=function(){this.onSliderSwitchTo(null,this.slider.currentSlide),this.parameters.animate?this.slider.sliderElement.on("mainAnimationStart",this.onSliderSwitchToAnimateStart.bind(this)):this.slider.sliderElement.on("SlideWillChange",this.onSliderSwitchTo.bind(this))},t.prototype.renderBarContent=function(t){var e,i,s="";return this.parameters.showTitle&&(t.getTitle()!==r||this.parameters.slideCount)&&(e=this.parameters.slideCount?t.index+1:t.getTitle(),s+='<span class="'+this.parameters.fontTitle+' n2-ow">'+e+"</span>"),this.parameters.showDescription&&(t.getDescription()!==r||this.parameters.slideCount)&&(i=this.parameters.slideCount?t.slider.slides.length:t.getDescription(),s+='<span class="'+this.parameters.fontDescription+' n2-ow">'+(""===s?"":this.parameters.separator)+i+"</span>"),""===s?'<span class="'+this.parameters.fontDescription+' n2-ow">&nbsp;</span>':s},t.prototype.onSliderSwitchTo=function(t,e){var i=this.renderBarContent(e);this.innerBar.html(i),this.setCursor(e.hasLink()),this.slider.widgets.setState("hide.bar",!this.hasContent(e))},t.prototype.onSliderSwitchToAnimateStart=function(){var t=e.Deferred();this.slider.sliderElement.on("mainAnimationComplete.n2Bar",this.onSliderSwitchToAnimateEnd.bind(this,t)),this.tween&&this.tween.pause(),NextendTween.to(this.innerBar,.3,{opacity:0,onComplete:function(){t.resolve()}})},t.prototype.onSliderSwitchToAnimateEnd=function(t,e,i,s,r){this.slider.sliderElement.off(".n2Bar");var n=this.slider.slides[r];t.done(function(){var t=this.innerBar.clone();this.innerBar.remove(),this.innerBar=t.css("opacity",0).html(this.renderBarContent(n)).appendTo(this.$widget),this.setCursor(n.hasLink()),this.slider.widgets.setState("hide.bar",!this.hasContent(n)),this.tween=NextendTween.to(this.innerBar,.3,{opacity:this.innerBarOriginalOpacity})}.bind(this))},t.prototype.setCursor=function(t){this.innerBar.css("cursor",t?"pointer":"inherit")},t});